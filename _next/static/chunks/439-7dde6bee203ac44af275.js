(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[439],{5318:function(e){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.default=e.exports,e.exports.__esModule=!0},862:function(e,t,n){var s=n(8).default;function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(i=function(e){return e?n:t})(e)}e.exports=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==s(e)&&"function"!=typeof e)return{default:e};if((t=i(t))&&t.has(e))return t.get(e);var n,r,a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((r=o?Object.getOwnPropertyDescriptor(e,n):null)&&(r.get||r.set)?Object.defineProperty(a,n,r):a[n]=e[n]);return a.default=e,t&&t.set(e,a),a},e.exports.default=e.exports,e.exports.__esModule=!0},8:function(t){function n(e){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?t.exports=n=function(e){return typeof e}:t.exports=n=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t.exports.default=t.exports,t.exports.__esModule=!0,n(e)}t.exports=n,t.exports.default=t.exports,t.exports.__esModule=!0},3483:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var X=n(2122),q=n(2949),K=n(7294),Z=(n(5697),n(3935)),Y=n(6010),Q=n(3834),J=n(5192),t=n(1906),ee=n(4896),v=n(7329),a=n(9756),r=n(3349),o=n(3552),s=K.createContext(null);function p(e,t){var n=Object.create(null);return e&&K.Children.map(e,function(e){return e}).forEach(function(e){n[e.key]=(e=e,t&&(0,K.isValidElement)(e)?t(e):e)}),n}function d(e,t,n){return(null!=n[t]?n:e.props)[t]}function i(s,i,u){var l=p(s.children),c=function(t,n){function e(e){return(e in n?n:t)[e]}t=t||{},n=n||{};var r,a,o=Object.create(null),s=[];for(r in t)r in n?s.length&&(o[r]=s,s=[]):s.push(r);var i,u={};for(i in n){if(o[i])for(a=0;a<o[i].length;a++){var l=o[i][a];u[o[i][a]]=e(l)}u[i]=e(i)}for(a=0;a<s.length;a++)u[s[a]]=e(s[a]);return u}(i,l);return Object.keys(c).forEach(function(e){var t,n,r,a,o=c[e];(0,K.isValidElement)(o)&&(t=e in i,n=e in l,r=i[e],a=(0,K.isValidElement)(r)&&!r.props.in,!n||t&&!a?n||!t||a?n&&t&&(0,K.isValidElement)(r)&&(c[e]=(0,K.cloneElement)(o,{onExited:u.bind(null,o),in:r.props.in,exit:d(o,"exit",s),enter:d(o,"enter",s)})):c[e]=(0,K.cloneElement)(o,{in:!1}):c[e]=(0,K.cloneElement)(o,{onExited:u.bind(null,o),in:!0,exit:d(o,"exit",s),enter:d(o,"enter",s)}))}),c}var u=Object.values||function(t){return Object.keys(t).map(function(e){return t[e]})},n=function(n){function e(e,t){e=n.call(this,e,t)||this,t=e.handleExited.bind((0,r.Z)(e));return e.state={contextValue:{isMounting:!0},handleExited:t,firstRender:!0},e}(0,o.Z)(e,n);var t=e.prototype;return t.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},t.componentWillUnmount=function(){this.mounted=!1},e.getDerivedStateFromProps=function(e,t){var n,r,a=t.children,o=t.handleExited;return{children:t.firstRender?(r=o,p((n=e).children,function(e){return(0,K.cloneElement)(e,{onExited:r.bind(null,e),in:!0,appear:d(e,"appear",n),enter:d(e,"enter",n),exit:d(e,"exit",n)})})):i(e,a,o),firstRender:!1}},t.handleExited=function(t,e){var n=p(this.props.children);t.key in n||(t.props.onExited&&t.props.onExited(e),this.mounted&&this.setState(function(e){e=(0,X.Z)({},e.children);return delete e[t.key],{children:e}}))},t.render=function(){var e=this.props,t=e.component,n=e.childFactory,r=(0,a.Z)(e,["component","childFactory"]),e=this.state.contextValue,n=u(this.state.children).map(n);return delete r.appear,delete r.enter,delete r.exit,null===t?K.createElement(s.Provider,{value:e},n):K.createElement(s.Provider,{value:e},K.createElement(t,r,n))},e}(K.Component);n.propTypes={},n.defaultProps={component:"div",childFactory:function(e){return e}};var x=n,h="undefined"==typeof window?K.useEffect:K.useLayoutEffect;function b(e){var t=e.classes,n=void 0!==(i=e.pulsate)&&i,r=e.rippleX,a=e.rippleY,o=e.rippleSize,s=e.in,i=void 0===(c=e.onExited)?function(){}:c,u=e.timeout,e=(c=K.useState(!1))[0],l=c[1],c=(0,Y.Z)(t.ripple,t.rippleVisible,n&&t.ripplePulsate),r={width:o,height:o,top:-o/2+a,left:-o/2+r},t=(0,Y.Z)(t.child,e&&t.childLeaving,n&&t.childPulsate),p=(0,J.Z)(i);return h(function(){if(!s){l(!0);var e=setTimeout(p,u);return function(){clearTimeout(e)}}},[p,s,u]),K.createElement("span",{className:c,style:r},K.createElement("span",{className:t}))}var n=K.forwardRef(function(e,t){var n=e.center,p=void 0!==n&&n,o=e.classes,r=e.className,a=(0,q.Z)(e,["center","classes","className"]),n=K.useState([]),e=n[0],s=n[1],i=K.useRef(0),u=K.useRef(null);K.useEffect(function(){u.current&&(u.current(),u.current=null)},[e]);var d=K.useRef(!1),h=K.useRef(null),f=K.useRef(null),m=K.useRef(null);K.useEffect(function(){return function(){clearTimeout(h.current)}},[]);var g=K.useCallback(function(e){var t=e.pulsate,n=e.rippleX,r=e.rippleY,a=e.rippleSize,e=e.cb;s(function(e){return[].concat((0,v.Z)(e),[K.createElement(b,{key:i.current,classes:o,timeout:550,pulsate:t,rippleX:n,rippleY:r,rippleSize:a})])}),i.current+=1,u.current=e},[o]),l=K.useCallback(function(){var e,t,n,r=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},o=2<arguments.length?arguments[2]:void 0,s=a.pulsate,i=void 0!==s&&s,u=a.center,l=void 0===u?p||a.pulsate:u,c=a.fakeElement,s=void 0!==c&&c;"mousedown"===r.type&&d.current?d.current=!1:("touchstart"===r.type&&(d.current=!0),a=(u=s?null:m.current)?u.getBoundingClientRect():{width:0,height:0,left:0,top:0},t=l||0===r.clientX&&0===r.clientY||!r.clientX&&!r.touches?(e=Math.round(a.width/2),Math.round(a.height/2)):(s=(c=r.touches?r.touches[0]:r).clientX,c=c.clientY,e=Math.round(s-a.left),Math.round(c-a.top)),l?(n=Math.sqrt((2*Math.pow(a.width,2)+Math.pow(a.height,2))/3))%2==0&&(n+=1):(a=2*Math.max(Math.abs((u?u.clientWidth:0)-e),e)+2,u=2*Math.max(Math.abs((u?u.clientHeight:0)-t),t)+2,n=Math.sqrt(Math.pow(a,2)+Math.pow(u,2))),r.touches?null===f.current&&(f.current=function(){g({pulsate:i,rippleX:e,rippleY:t,rippleSize:n,cb:o})},h.current=setTimeout(function(){f.current&&(f.current(),f.current=null)},80)):g({pulsate:i,rippleX:e,rippleY:t,rippleSize:n,cb:o}))},[p,g]),c=K.useCallback(function(){l({},{pulsate:!0})},[l]),y=K.useCallback(function(e,t){return clearTimeout(h.current),"touchend"===e.type&&f.current?(e.persist(),f.current(),f.current=null,void(h.current=setTimeout(function(){y(e,t)}))):(f.current=null,s(function(e){return 0<e.length?e.slice(1):e}),void(u.current=t))},[]);return K.useImperativeHandle(t,function(){return{pulsate:c,start:l,stop:y}},[c,l,y]),K.createElement("span",(0,X.Z)({className:(0,Y.Z)(o.root,r),ref:m},a),K.createElement(x,{component:null,exit:!0},e))}),te=(0,t.Z)(function(e){return{root:{overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"},ripple:{opacity:0,position:"absolute"},rippleVisible:{opacity:.3,transform:"scale(1)",animation:"$enter ".concat(550,"ms ").concat(e.transitions.easing.easeInOut)},ripplePulsate:{animationDuration:"".concat(e.transitions.duration.shorter,"ms")},child:{opacity:1,display:"block",width:"100%",height:"100%",borderRadius:"50%",backgroundColor:"currentColor"},childLeaving:{opacity:0,animation:"$exit ".concat(550,"ms ").concat(e.transitions.easing.easeInOut)},childPulsate:{position:"absolute",left:0,top:0,animation:"$pulsate 2500ms ".concat(e.transitions.easing.easeInOut," 200ms infinite")},"@keyframes enter":{"0%":{transform:"scale(0)",opacity:.1},"100%":{transform:"scale(1)",opacity:.3}},"@keyframes exit":{"0%":{opacity:1},"100%":{opacity:0}},"@keyframes pulsate":{"0%":{transform:"scale(1)"},"50%":{transform:"scale(0.92)"},"100%":{transform:"scale(1)"}}}},{flip:!1,name:"MuiTouchRipple"})(K.memo(n)),n=K.forwardRef(function(e,t){var n=e.action,r=e.buttonRef,a=e.centerRipple,o=void 0!==a&&a,s=e.children,i=e.classes,u=e.className,l=e.component,c=void 0===l?"button":l,p=e.disabled,d=void 0!==p&&p,h=e.disableRipple,f=void 0!==h&&h,m=e.disableTouchRipple,g=void 0!==m&&m,y=e.focusRipple,v=void 0!==y&&y,x=e.focusVisibleClassName,b=e.onBlur,w=e.onClick,k=e.onFocus,I=e.onFocusVisible,N=e.onKeyDown,$=e.onKeyUp,C=e.onMouseDown,S=e.onMouseLeave,T=e.onMouseUp,E=e.onTouchEnd,R=e.onTouchMove,D=e.onTouchStart,A=e.onDragLeave,_=e.tabIndex,O=void 0===_?0:_,F=e.TouchRippleProps,B=e.type,a=void 0===B?"button":B,l=(0,q.Z)(e,["action","buttonRef","centerRipple","children","classes","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","onBlur","onClick","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","onDragLeave","tabIndex","TouchRippleProps","type"]),P=K.useRef(null);var M=K.useRef(null),p=K.useState(!1),L=p[0],V=p[1];d&&L&&V(!1);var h=(0,ee.Z)(),U=h.isFocusVisible,W=h.onBlurVisible,m=h.ref;function z(t,n,e){var r=2<arguments.length&&void 0!==e?e:g;return(0,J.Z)(function(e){return n&&n(e),!r&&M.current&&M.current[t](e),!0})}K.useImperativeHandle(n,function(){return{focusVisible:function(){V(!0),P.current.focus()}}},[]),K.useEffect(function(){L&&v&&!f&&M.current.pulsate()},[f,v,L]);function G(){var e=Z.findDOMNode(P.current);return c&&"button"!==c&&!("A"===e.tagName&&e.href)}var y=z("start",C),_=z("stop",A),B=z("stop",T),e=z("stop",function(e){L&&e.preventDefault(),S&&S(e)}),p=z("start",D),h=z("stop",E),n=z("stop",R),C=z("stop",function(e){L&&(W(e),V(!1)),b&&b(e)},!1),A=(0,J.Z)(function(e){P.current||(P.current=e.currentTarget),U(e)&&(V(!0),I&&I(e)),k&&k(e)}),H=K.useRef(!1),T=(0,J.Z)(function(e){v&&!H.current&&L&&M.current&&" "===e.key&&(H.current=!0,e.persist(),M.current.stop(e,function(){M.current.start(e)})),e.target===e.currentTarget&&G()&&" "===e.key&&e.preventDefault(),N&&N(e),e.target===e.currentTarget&&G()&&"Enter"===e.key&&!d&&(e.preventDefault(),w&&w(e))}),D=(0,J.Z)(function(e){v&&" "===e.key&&M.current&&L&&!e.defaultPrevented&&(H.current=!1,e.persist(),M.current.stop(e,function(){M.current.pulsate(e)})),$&&$(e),w&&e.target===e.currentTarget&&G()&&" "===e.key&&!e.defaultPrevented&&w(e)}),E=c,R={};"button"===(E="button"===E&&l.href?"a":E)?(R.type=a,R.disabled=d):("a"===E&&l.href||(R.role="button"),R["aria-disabled"]=d);var r=(0,Q.Z)(r,t),t=(0,Q.Z)(m,P),m=(0,Q.Z)(r,t),r=K.useState(!1),t=r[0],j=r[1];K.useEffect(function(){j(!0)},[]);t=t&&!f&&!d;return K.createElement(E,(0,X.Z)({className:(0,Y.Z)(i.root,u,L&&[i.focusVisible,x],d&&i.disabled),onBlur:C,onClick:w,onFocus:A,onKeyDown:T,onKeyUp:D,onMouseDown:y,onMouseLeave:e,onMouseUp:B,onDragLeave:_,onTouchEnd:h,onTouchMove:n,onTouchStart:p,ref:m,tabIndex:d?-1:O},R,l),s,t?K.createElement(te,(0,X.Z)({ref:M,center:o},F)):null)}),l=(0,t.Z)({root:{display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle","-moz-appearance":"none","-webkit-appearance":"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},"&$disabled":{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}},disabled:{},focusVisible:{}},{name:"MuiButtonBase"})(n)},3758:function(e,t,n){"use strict";var d=n(2949),h=n(2122),f=n(7294),r=n(5697),m=n(6010),r=n(1906),g=n(3483),y=n(3871),n=f.forwardRef(function(e,t){var n=e.children,r=e.classes,a=e.className,o=e.color,s=void 0===o?"default":o,i=e.component,u=void 0===i?"button":i,l=e.disabled,c=void 0!==l&&l,p=e.disableFocusRipple,o=void 0!==p&&p,i=e.focusVisibleClassName,l=e.size,p=void 0===l?"large":l,l=e.variant,l=void 0===l?"circular":l,e=(0,d.Z)(e,["children","classes","className","color","component","disabled","disableFocusRipple","focusVisibleClassName","size","variant"]);return f.createElement(g.Z,(0,h.Z)({className:(0,m.Z)(r.root,a,"large"!==p&&r["size".concat((0,y.Z)(p))],c&&r.disabled,"extended"===l&&r.extended,{primary:r.primary,secondary:r.secondary,inherit:r.colorInherit}[s]),component:u,disabled:c,focusRipple:!o,focusVisibleClassName:(0,m.Z)(r.focusVisible,i),ref:t},e),f.createElement("span",{className:r.label},n))});t.Z=(0,r.Z)(function(e){return{root:(0,h.Z)({},e.typography.button,{boxSizing:"border-box",minHeight:36,transition:e.transitions.create(["background-color","box-shadow","border"],{duration:e.transitions.duration.short}),borderRadius:"50%",padding:0,minWidth:0,width:56,height:56,boxShadow:e.shadows[6],"&:active":{boxShadow:e.shadows[12]},color:e.palette.getContrastText(e.palette.grey[300]),backgroundColor:e.palette.grey[300],"&:hover":{backgroundColor:e.palette.grey.A100,"@media (hover: none)":{backgroundColor:e.palette.grey[300]},"&$disabled":{backgroundColor:e.palette.action.disabledBackground},textDecoration:"none"},"&$focusVisible":{boxShadow:e.shadows[6]},"&$disabled":{color:e.palette.action.disabled,boxShadow:e.shadows[0],backgroundColor:e.palette.action.disabledBackground}}),label:{width:"100%",display:"inherit",alignItems:"inherit",justifyContent:"inherit"},primary:{color:e.palette.primary.contrastText,backgroundColor:e.palette.primary.main,"&:hover":{backgroundColor:e.palette.primary.dark,"@media (hover: none)":{backgroundColor:e.palette.primary.main}}},secondary:{color:e.palette.secondary.contrastText,backgroundColor:e.palette.secondary.main,"&:hover":{backgroundColor:e.palette.secondary.dark,"@media (hover: none)":{backgroundColor:e.palette.secondary.main}}},extended:{borderRadius:24,padding:"0 16px",width:"auto",minHeight:"auto",minWidth:48,height:48,"&$sizeSmall":{width:"auto",padding:"0 8px",borderRadius:17,minWidth:34,height:34},"&$sizeMedium":{width:"auto",padding:"0 16px",borderRadius:20,minWidth:40,height:40}},focusVisible:{},disabled:{},colorInherit:{color:"inherit"},sizeSmall:{width:40,height:40},sizeMedium:{width:48,height:48}}},{name:"MuiFab"})(n)},9693:function(e,t,n){"use strict";n.d(t,{mi:function(){return o},Fq:function(){return i},_j:function(){return c},$n:function(){return p}});var r=n(288);function a(e,t,n){t=1<arguments.length&&void 0!==t?t:0,n=2<arguments.length&&void 0!==n?n:1;return Math.min(Math.max(t,e),n)}function u(e){if(e.type)return e;if("#"===e.charAt(0))return u(function(e){e=e.substr(1);var t=new RegExp(".{1,".concat(6<=e.length?2:1,"}"),"g");return(t=(t=e.match(t))&&1===t[0].length?t.map(function(e){return e+e}):t)?"rgb".concat(4===t.length?"a":"","(").concat(t.map(function(e,t){return t<3?parseInt(e,16):Math.round(parseInt(e,16)/255*1e3)/1e3}).join(", "),")"):""}(e));var t=e.indexOf("("),n=e.substring(0,t);if(-1===["rgb","rgba","hsl","hsla"].indexOf(n))throw new Error((0,r.Z)(3,e));return{type:n,values:e.substring(t+1,e.length-1).split(",").map(function(e){return parseFloat(e)})}}function l(e){var t=e.type,e=e.values;return-1!==t.indexOf("rgb")?e=e.map(function(e,t){return t<3?parseInt(e,10):e}):-1!==t.indexOf("hsl")&&(e[1]="".concat(e[1],"%"),e[2]="".concat(e[2],"%")),"".concat(t,"(").concat(e.join(", "),")")}function o(e,t){e=s(e),t=s(t);return(Math.max(e,t)+.05)/(Math.min(e,t)+.05)}function s(e){var t,n,r,a,o,s,i,e=(e=("hsl"===(e=u(e)).type?u((n=(t=u(t=e)).values,r=n[0],a=n[1]/100,o=n[2]/100,s=a*Math.min(o,1-o),i=function(e){e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:(e+r/30)%12;return o-s*Math.max(Math.min(e-3,9-e,1),-1)},a="rgb",i=[Math.round(255*i(0)),Math.round(255*i(8)),Math.round(255*i(4))],"hsla"===t.type&&(a+="a",i.push(n[3])),l({type:a,values:i}))):e).values).map(function(e){return(e/=255)<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)});return Number((.2126*e[0]+.7152*e[1]+.0722*e[2]).toFixed(3))}function i(e,t){return e=u(e),t=a(t),"rgb"!==e.type&&"hsl"!==e.type||(e.type+="a"),e.values[3]=t,l(e)}function c(e,t){if(e=u(e),t=a(t),-1!==e.type.indexOf("hsl"))e.values[2]*=1-t;else if(-1!==e.type.indexOf("rgb"))for(var n=0;n<3;n+=1)e.values[n]*=1-t;return l(e)}function p(e,t){if(e=u(e),t=a(t),-1!==e.type.indexOf("hsl"))e.values[2]+=(100-e.values[2])*t;else if(-1!==e.type.indexOf("rgb"))for(var n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;return l(e)}},1906:function(e,t,n){"use strict";n.d(t,{Z:function(){return ae}});var T=n(2122),E=n(2949),v=n(7294),t=(n(5697),n(8679)),r=n.n(t),x=n(345);function b(e){var e=0<arguments.length&&void 0!==e?e:{},t=e.baseClasses,n=e.newClasses;e.Component;if(!n)return t;var r=(0,T.Z)({},t);return Object.keys(n).forEach(function(e){n[e]&&(r[e]="".concat(t[e]," ").concat(n[e]))}),r}var w={set:function(e,t,n,r){var a=e.get(t);a||(a=new Map,e.set(t,a)),a.set(n,r)},get:function(e,t,n){t=e.get(t);return t?t.get(n):void 0},delete:function(e,t,n){e.get(t).delete(n)}};var a=v.createContext(null);function k(){return v.useContext(a)}var c=n(2807),p=-1e9;function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e){return e&&"object"===o(e)&&e.constructor===Object}function R(t,n,e){var r=2<arguments.length&&void 0!==e?e:{clone:!0},a=r.clone?(0,T.Z)({},t):t;return s(t)&&s(n)&&Object.keys(n).forEach(function(e){"__proto__"!==e&&(s(n[e])&&e in t?a[e]=R(t[e],n[e],r):a[e]=n[e])}),a}var d={};function h(e,t){var o,s,n=1<arguments.length&&void 0!==t?t:{},g=n.name,r=n.classNamePrefix,i=n.Component,t=n.defaultTheme,u=void 0===t?d:t,l=(0,E.Z)(n,["name","classNamePrefix","Component","defaultTheme"]),y=(s="function"==typeof(o=e),{create:function(e,t){var n;try{n=s?o(e):o}catch(e){throw e}if(!t||!e.overrides||!e.overrides[t])return n;var r=e.overrides[t],a=(0,T.Z)({},n);return Object.keys(r).forEach(function(e){a[e]=R(a[e],r[e])}),a},options:{}}),r=g||r||"makeStyles";y.options={index:p+=1,name:g,meta:r,classNamePrefix:r};return function(){var e,t,n,r,a,p=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},d=k()||u,h=(0,T.Z)({},v.useContext(c.NU),l),f=v.useRef(),m=v.useRef();return r=function(){var e,t,n,r,a,o,s,i,u,l,c={name:g,state:{},stylesCreator:y,stylesOptions:h,theme:d};return t=p,o=(e=c).state,s=e.theme,i=e.stylesOptions,u=e.stylesCreator,l=e.name,i.disableGeneration||((n=w.get(i.sheetsManager,u,s))||w.set(i.sheetsManager,u,s,n={refs:0,staticSheet:null,dynamicStyles:null}),(a=(0,T.Z)({},u.options,i,{theme:s,flip:"boolean"==typeof i.flip?i.flip:"rtl"===s.direction})).generateId=a.serverGenerateClassName||a.generateClassName,e=i.sheetsRegistry,0===n.refs&&(i.sheetsCache&&(r=w.get(i.sheetsCache,u,s)),l=u.create(s,l),r||((r=i.jss.createStyleSheet(l,(0,T.Z)({link:!1},a))).attach(),i.sheetsCache&&w.set(i.sheetsCache,u,s,r)),e&&e.add(r),n.staticSheet=r,n.dynamicStyles=(0,x._$)(l)),n.dynamicStyles?((a=i.jss.createStyleSheet(n.dynamicStyles,(0,T.Z)({link:!0},a))).update(t),a.attach(),o.dynamicSheet=a,o.classes=b({baseClasses:n.staticSheet.classes,newClasses:a.classes}),e&&e.add(a)):o.classes=n.staticSheet.classes,n.refs+=1),m.current=!1,f.current=c,function(){var e,t,n,r,a,o;n=(e=c).state,r=e.theme,a=e.stylesOptions,o=e.stylesCreator,a.disableGeneration||(--(t=w.get(a.sheetsManager,o,r)).refs,e=a.sheetsRegistry,0===t.refs&&(w.delete(a.sheetsManager,o,r),a.jss.removeStyleSheet(t.staticSheet),e&&e.remove(t.staticSheet)),n.dynamicSheet&&(a.jss.removeStyleSheet(n.dynamicSheet),e&&e.remove(n.dynamicSheet)))}},a=[d,y],n=v.useRef([]),a=v.useMemo(function(){return{}},a),n.current!==a&&(n.current=a,e=r()),v.useEffect(function(){return function(){e&&e()}},[a]),v.useEffect(function(){var e,t;m.current&&(e=f.current,t=p,(e=e.state).dynamicSheet&&e.dynamicSheet.update(t)),m.current=!0}),t=f.current,n=p.classes,r=i,a=t.state,t.stylesOptions.disableGeneration?n||{}:(a.cacheClasses||(a.cacheClasses={value:null,lastProp:null,lastJSS:{}}),t=!1,a.classes!==a.cacheClasses.lastJSS&&(a.cacheClasses.lastJSS=a.classes,t=!0),n!==a.cacheClasses.lastProp&&(a.cacheClasses.lastProp=n,t=!0),t&&(a.cacheClasses.value=b({baseClasses:a.cacheClasses.lastJSS,newClasses:n,Component:r})),a.cacheClasses.value)}}var i=function(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return function(s){var i=n.defaultTheme,e=n.withTheme,u=void 0!==e&&e,l=n.name,e=(0,E.Z)(n,["defaultTheme","withTheme","name"]);var c=h(t,(0,T.Z)({defaultTheme:i,Component:s,name:l||s.displayName,classNamePrefix:l},e)),e=v.forwardRef(function(e,t){e.classes;var n=e.innerRef,r=(0,E.Z)(e,["classes","innerRef"]),a=c((0,T.Z)({},s.defaultProps,e)),o=r;return"string"!=typeof l&&!u||(e=k()||i,l&&(o=function(e){var t=e.theme,n=e.name,r=e.props;if(!t||!t.props||!t.props[n])return r;var a,o=t.props[n];for(a in o)void 0===r[a]&&(r[a]=o[a]);return r}({theme:e,name:l,props:r})),u&&!o.theme&&(o.theme=e)),v.createElement(s,(0,T.Z)({ref:n||t,classes:a},o))});return r()(e,s),e}},u=["xs","sm","md","lg","xl"];function D(e){var t=e.values,r=void 0===t?{xs:0,sm:600,md:960,lg:1280,xl:1920}:t,t=e.unit,a=void 0===t?"px":t,t=e.step,o=void 0===t?5:t,e=(0,E.Z)(e,["values","unit","step"]);function s(e){e="number"==typeof r[e]?r[e]:e;return"@media (min-width:".concat(e).concat(a,")")}function n(e,t){var n=u.indexOf(t);return n===u.length-1?s(e):"@media (min-width:".concat("number"==typeof r[e]?r[e]:e).concat(a,") and ")+"(max-width:".concat((-1!==n&&"number"==typeof r[u[n+1]]?r[u[n+1]]:t)-o/100).concat(a,")")}return(0,T.Z)({keys:u,values:r,up:s,down:function(e){var t=u.indexOf(e)+1,n=r[u[t]];return t===u.length?s("xs"):"@media (max-width:".concat(("number"==typeof n&&0<t?n:e)-o/100).concat(a,")")},between:n,only:function(e){return n(e,e)},width:function(e){return r[e]}},e)}var A=n(6156);var _=n(288),O={black:"#000",white:"#fff"},F={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#d5d5d5",A200:"#aaaaaa",A400:"#303030",A700:"#616161"},B={50:"#e8eaf6",100:"#c5cae9",200:"#9fa8da",300:"#7986cb",400:"#5c6bc0",500:"#3f51b5",600:"#3949ab",700:"#303f9f",800:"#283593",900:"#1a237e",A100:"#8c9eff",A200:"#536dfe",A400:"#3d5afe",A700:"#304ffe"},P={50:"#fce4ec",100:"#f8bbd0",200:"#f48fb1",300:"#f06292",400:"#ec407a",500:"#e91e63",600:"#d81b60",700:"#c2185b",800:"#ad1457",900:"#880e4f",A100:"#ff80ab",A200:"#ff4081",A400:"#f50057",A700:"#c51162"},M={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},L={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},V={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},U={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},W=n(9693),z={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.54)",disabled:"rgba(0, 0, 0, 0.38)",hint:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:O.white,default:F[50]},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},G={text:{primary:O.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",hint:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:F[800],default:"#303030"},action:{active:O.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function H(e,t,n,r){var a=r.light||r,r=r.dark||1.5*r;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:"light"===t?e.light=(0,W.$n)(e.main,a):"dark"===t&&(e.dark=(0,W._j)(e.main,r)))}function j(e){return Math.round(1e5*e)/1e5}function X(e){return j(e)}var q={textTransform:"uppercase"},K='"Roboto", "Helvetica", "Arial", sans-serif';function l(e,t,n,r,a,o,s,i,u,l,c,p){return["".concat(arguments.length<=0?void 0:e,"px ").concat(arguments.length<=1?void 0:t,"px ").concat(arguments.length<=2?void 0:n,"px ").concat(arguments.length<=3?void 0:r,"px rgba(0,0,0,").concat(.2,")"),"".concat(arguments.length<=4?void 0:a,"px ").concat(arguments.length<=5?void 0:o,"px ").concat(arguments.length<=6?void 0:s,"px ").concat(arguments.length<=7?void 0:i,"px rgba(0,0,0,").concat(.14,")"),"".concat(arguments.length<=8?void 0:u,"px ").concat(arguments.length<=9?void 0:l,"px ").concat(arguments.length<=10?void 0:c,"px ").concat(arguments.length<=11?void 0:p,"px rgba(0,0,0,").concat(.12,")")].join(",")}var Z=["none",l(0,2,1,-1,0,1,1,0,0,1,3,0),l(0,3,1,-2,0,2,2,0,0,1,5,0),l(0,3,3,-2,0,3,4,0,0,1,8,0),l(0,2,4,-1,0,4,5,0,0,1,10,0),l(0,3,5,-1,0,5,8,0,0,1,14,0),l(0,3,5,-1,0,6,10,0,0,1,18,0),l(0,4,5,-2,0,7,10,1,0,2,16,1),l(0,5,5,-3,0,8,10,1,0,3,14,2),l(0,5,6,-3,0,9,12,1,0,3,16,2),l(0,6,6,-3,0,10,14,1,0,4,18,3),l(0,6,7,-4,0,11,15,1,0,4,20,3),l(0,7,8,-4,0,12,17,2,0,5,22,4),l(0,7,8,-4,0,13,19,2,0,5,24,4),l(0,7,9,-4,0,14,21,2,0,5,26,4),l(0,8,9,-5,0,15,22,2,0,6,28,5),l(0,8,10,-5,0,16,24,2,0,6,30,5),l(0,8,11,-5,0,17,26,2,0,6,32,5),l(0,9,11,-5,0,18,28,2,0,7,34,6),l(0,9,12,-6,0,19,29,2,0,7,36,6),l(0,10,13,-6,0,20,31,3,0,8,38,7),l(0,10,13,-6,0,21,33,3,0,8,40,7),l(0,10,14,-6,0,22,35,3,0,8,42,7),l(0,11,14,-7,0,23,36,3,0,9,44,8),l(0,11,15,-7,0,24,38,3,0,9,46,8)],Y={borderRadius:4};var f=n(2961);function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],s=!0,i=!1;try{for(n=n.call(e);!(s=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);s=!0);}catch(e){i=!0,a=e}finally{try{s||null==n.return||n.return()}finally{if(i)throw a}}return o}}(e,t)||(0,f.Z)(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var g,y,I={m:"margin",p:"padding"},N={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},$={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"};g=function(e){if(2<e.length){if(!$[e])return[e];e=$[e]}var t=m(e.split(""),2),e=t[0],t=t[1],n=I[e],t=N[t]||"";return Array.isArray(t)?t.map(function(e){return n+e}):[n+t]},y={};function Q(e){var t=e.spacing||8;return"number"==typeof t?function(e){return t*e}:Array.isArray(t)?function(e){return t[e]}:"function"==typeof t?t:function(){}}var C={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},S={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function J(e){return"".concat(Math.round(e),"ms")}var ee={easing:C,duration:S,create:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:["all"],t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=t.duration,r=void 0===n?S.standard:n,n=t.easing,a=void 0===n?C.easeInOut:n,n=t.delay,o=void 0===n?0:n;(0,E.Z)(t,["duration","easing","delay"]);return(Array.isArray(e)?e:[e]).map(function(e){return"".concat(e," ").concat("string"==typeof r?r:J(r)," ").concat(a," ").concat("string"==typeof o?o:J(o))}).join(",")},getAutoHeightDuration:function(e){if(!e)return 0;e/=36;return Math.round(10*(4+15*Math.pow(e,.25)+e/5))}},te={mobileStepper:1e3,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function ne(){var e,t,n,a,r=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},o=r.breakpoints,s=void 0===o?{}:o,i=r.mixins,u=void 0===i?{}:i,l=r.palette,c=void 0===l?{}:l,p=r.spacing,d=r.typography,h=void 0===d?{}:d,f=(0,E.Z)(r,["breakpoints","mixins","palette","spacing","typography"]),d=(e=void 0===(t=(N=c).primary)?{light:B[300],main:B[500],dark:B[700]}:t,o=void 0===(I=N.secondary)?{light:P.A200,main:P.A400,dark:P.A700}:I,l=void 0===(i=N.error)?{light:M[300],main:M[500],dark:M[700]}:i,d=N.warning,r=void 0===d?{light:L[300],main:L[500],dark:L[700]}:d,t=void 0===(c=N.info)?{light:V[300],main:V[500],dark:V[700]}:c,i=void 0===(I=N.success)?{light:U[300],main:U[500],dark:U[700]}:I,c=void 0===(d=N.type)?"light":d,n=void 0===(I=N.contrastThreshold)?3:I,a=void 0===(d=N.tonalOffset)?.2:d,I=(0,E.Z)(N,["primary","secondary","error","warning","info","success","type","contrastThreshold","tonalOffset"]),d=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:500,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:300,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:700;if(!(e=(0,T.Z)({},e)).main&&e[t]&&(e.main=e[t]),!e.main)throw new Error((0,_.Z)(4,t));if("string"!=typeof e.main)throw new Error((0,_.Z)(5,JSON.stringify(e.main)));return H(e,"light",n,a),H(e,"dark",r,a),e.contrastText||(e.contrastText=m(e.main)),e},N={dark:G,light:z},R((0,T.Z)({common:O,type:c,primary:d(e),secondary:d(o,"A400","A200","A700"),error:d(l),warning:d(r),info:d(t),success:d(i),grey:F,contrastThreshold:n,getContrastText:m,augmentColor:d,tonalOffset:a},N[c]),I));function m(e){return((0,W.mi)(e,G.text.primary)>=n?G:z).text.primary}for(var g,y,v,x,b,w,k,I,N=D(s),c=function(e){var t=0<arguments.length&&void 0!==e?e:8;if(t.mui)return t;var r=Q({spacing:t}),e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?r(1):1===t.length?r(t[0]):t.map(function(e){if("string"==typeof e)return e;e=r(e);return"number"==typeof e?"".concat(e,"px"):e}).join(" ")};return Object.defineProperty(e,"unit",{get:function(){return t}}),e.mui=!0,e}(p),f=R({breakpoints:N,direction:"ltr",mixins:(w=N,k=c,I=u,(0,T.Z)({gutters:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return console.warn(["Material-UI: theme.mixins.gutters() is deprecated.","You can use the source of the mixin directly:","\n      paddingLeft: theme.spacing(2),\n      paddingRight: theme.spacing(2),\n      [theme.breakpoints.up('sm')]: {\n        paddingLeft: theme.spacing(3),\n        paddingRight: theme.spacing(3),\n      },\n      "].join("\n")),(0,T.Z)({paddingLeft:k(2),paddingRight:k(2)},e,(0,A.Z)({},w.up("sm"),(0,T.Z)({paddingLeft:k(3),paddingRight:k(3)},e[w.up("sm")])))},toolbar:((0,A.Z)(s={minHeight:56},"".concat(w.up("xs")," and (orientation: landscape)"),{minHeight:48}),(0,A.Z)(s,w.up("sm"),{minHeight:64}),s)},I)),overrides:{},palette:d,props:{},shadows:Z,typography:(p=d,u="function"==typeof(N=h)?N(p):N,g=void 0===(s=u.fontFamily)?K:s,d=void 0===(I=u.fontSize)?14:I,p=void 0===(h=u.fontWeightLight)?300:h,s=void 0===(N=u.fontWeightRegular)?400:N,h=void 0===(I=u.fontWeightMedium)?500:I,I=void 0===(N=u.fontWeightBold)?700:N,y=void 0===(N=u.htmlFontSize)?16:N,v=u.allVariants,N=u.pxToRem,u=(0,E.Z)(u,["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"]),x=d/14,b=N||function(e){return"".concat(e/y*x,"rem")},N={h1:(N=function(e,t,n,r,a){return(0,T.Z)({fontFamily:g,fontWeight:e,fontSize:b(t),lineHeight:n},g===K?{letterSpacing:"".concat(j(r/t),"em")}:{},a,v)})(p,96,1.167,-1.5),h2:N(p,60,1.2,-.5),h3:N(s,48,1.167,0),h4:N(s,34,1.235,.25),h5:N(s,24,1.334,0),h6:N(h,20,1.6,.15),subtitle1:N(s,16,1.75,.15),subtitle2:N(h,14,1.57,.1),body1:N(s,16,1.5,.15),body2:N(s,14,1.43,.15),button:N(h,14,1.75,.4,q),caption:N(s,12,1.66,.4),overline:N(s,12,2.66,1,q)},R((0,T.Z)({htmlFontSize:y,pxToRem:b,round:X,fontFamily:g,fontSize:d,fontWeightLight:p,fontWeightRegular:s,fontWeightMedium:h,fontWeightBold:I},N),u,{clone:!1})),spacing:c,shape:Y,transitions:ee,zIndex:te},f),$=arguments.length,C=new Array(1<$?$-1:0),S=1;S<$;S++)C[S-1]=arguments[S];return C.reduce(function(e,t){return R(e,t)},f)}var re=ne();var ae=function(e,t){return i(e,(0,T.Z)({defaultTheme:re},t))}},3871:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(288);function a(e){if("string"!=typeof e)throw new Error((0,r.Z)(7));return e.charAt(0).toUpperCase()+e.slice(1)}},9480:function(e,t,n){"use strict";n.r(t),n.d(t,{capitalize:function(){return p.Z},createChainedFunction:function(){return r},createSvgIcon:function(){return s},debounce:function(){return i},deprecatedPropType:function(){return u},isMuiElement:function(){return l},ownerDocument:function(){return c},ownerWindow:function(){return g},requirePropFactory:function(){return y},setRef:function(){return v.Z},unstable_useId:function(){return I},unsupportedProp:function(){return x},useControlled:function(){return b},useEventCallback:function(){return w.Z},useForkRef:function(){return k.Z},useIsFocusVisible:function(){return N.Z}});var p=n(3871);function r(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(function(r,a){return null==a?r:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.apply(this,t),a.apply(this,t)}},function(){})}var d=n(2122),h=n(7294),f=n(2949),m=(n(5697),n(6010)),a=n(1906),t=h.forwardRef(function(e,t){var n=e.children,r=e.classes,a=e.className,o=e.color,s=void 0===o?"inherit":o,i=e.component,u=void 0===i?"svg":i,l=e.fontSize,c=void 0===l?"medium":l,o=e.htmlColor,i=e.titleAccess,l=e.viewBox,l=void 0===l?"0 0 24 24":l,e=(0,f.Z)(e,["children","classes","className","color","component","fontSize","htmlColor","titleAccess","viewBox"]);return h.createElement(u,(0,d.Z)({className:(0,m.Z)(r.root,a,"inherit"!==s&&r["color".concat((0,p.Z)(s))],"default"!==c&&"medium"!==c&&r["fontSize".concat((0,p.Z)(c))]),focusable:"false",viewBox:l,color:o,"aria-hidden":!i||void 0,role:i?"img":void 0,ref:t},e),n,i?h.createElement("title",null,i):null)});t.muiName="SvgIcon";var o=(0,a.Z)(function(e){return{root:{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:"currentColor",flexShrink:0,fontSize:e.typography.pxToRem(24),transition:e.transitions.create("fill",{duration:e.transitions.duration.shorter})},colorPrimary:{color:e.palette.primary.main},colorSecondary:{color:e.palette.secondary.main},colorAction:{color:e.palette.action.active},colorError:{color:e.palette.error.main},colorDisabled:{color:e.palette.action.disabled},fontSizeInherit:{fontSize:"inherit"},fontSizeSmall:{fontSize:e.typography.pxToRem(20)},fontSizeLarge:{fontSize:e.typography.pxToRem(35)}}},{name:"MuiSvgIcon"})(t);function s(n,e){function t(e,t){return h.createElement(o,(0,d.Z)({ref:t},e),n)}return t.muiName=o.muiName,h.memo(h.forwardRef(t))}function i(a){var o,s=1<arguments.length&&void 0!==arguments[1]?arguments[1]:166;function e(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=this;clearTimeout(o),o=setTimeout(function(){a.apply(r,t)},s)}return e.clear=function(){clearTimeout(o)},e}function u(e,t){return function(){return null}}function l(e,t){return h.isValidElement(e)&&-1!==t.indexOf(e.type.muiName)}function c(e){return e&&e.ownerDocument||document}function g(e){return c(e).defaultView||window}function y(e){return function(){return null}}var v=n(4236);function x(e,t,n,r,a){return null}function b(e){var t=e.controlled,n=e.default,e=(e.name,e.state),r=h.useRef(void 0!==t).current,e=h.useState(n),n=e[0],a=e[1];return[r?t:n,h.useCallback(function(e){r||a(e)},[])]}var w=n(5192),k=n(3834);function I(e){var t=h.useState(e),n=t[0],r=t[1],e=e||n;return h.useEffect(function(){null==n&&r("mui-".concat(Math.round(1e5*Math.random())))},[n]),e}var N=n(4896)},4236:function(e,t,n){"use strict";function r(e,t){"function"==typeof e?e(t):e&&(e.current=t)}n.d(t,{Z:function(){return r}})},5192:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(7294),a="undefined"!=typeof window?r.useLayoutEffect:r.useEffect;function o(e){var t=r.useRef(e);return a(function(){t.current=e}),r.useCallback(function(){return t.current.apply(void 0,arguments)},[])}},3834:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(7294),a=n(4236);function o(t,n){return r.useMemo(function(){return null==t&&null==n?null:function(e){(0,a.Z)(t,e),(0,a.Z)(n,e)}},[t,n])}},4896:function(e,t,n){"use strict";n.d(t,{Z:function(){return f}});var r=n(7294),a=n(3935),o=!0,s=!1,i=null,u={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function l(e){e.metaKey||e.altKey||e.ctrlKey||(o=!0)}function c(){o=!1}function p(){"hidden"===this.visibilityState&&s&&(o=!0)}function d(e){var t,n=e.target;try{return n.matches(":focus-visible")}catch(e){}return o||(e=(t=n).type,!("INPUT"!==(n=t.tagName)||!u[e]||t.readOnly)||("TEXTAREA"===n&&!t.readOnly||!!t.isContentEditable))}function h(){s=!0,window.clearTimeout(i),i=window.setTimeout(function(){s=!1},100)}function f(){return{isFocusVisible:d,onBlurVisible:h,ref:r.useCallback(function(e){e=a.findDOMNode(e);null!=e&&((e=e.ownerDocument).addEventListener("keydown",l,!0),e.addEventListener("mousedown",c,!0),e.addEventListener("pointerdown",c,!0),e.addEventListener("touchstart",c,!0),e.addEventListener("visibilitychange",p,!0))},[])}}},1200:function(e,t,n){"use strict";var r=n(5318),a=n(862);t.Z=void 0;a=a(n(7294)),a=(0,r(n(2108)).default)(a.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM4 12c0-4.42 3.58-8 8-8 1.85 0 3.55.63 4.9 1.69L5.69 16.9C4.63 15.55 4 13.85 4 12zm8 8c-1.85 0-3.55-.63-4.9-1.69L18.31 7.1C19.37 8.45 20 10.15 20 12c0 4.42-3.58 8-8 8z"}),"Block");t.Z=a},3059:function(e,t,n){"use strict";var r=n(5318),a=n(862);t.Z=void 0;a=a(n(7294)),a=(0,r(n(2108)).default)(a.createElement("path",{d:"M16.59 7.58L10 14.17l-3.59-3.58L5 12l5 5 8-8zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"CheckCircleOutline");t.Z=a},2108:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r.createSvgIcon}});var r=n(9480)},288:function(e,t,n){"use strict";function r(e){for(var t="https://material-ui.com/production-error/?code="+e,n=1;n<arguments.length;n+=1)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified Material-UI error #"+e+"; visit "+t+" for the full message."}n.d(t,{Z:function(){return r}})},9437:function(e,t,n){"use strict";n.d(t,{a8:function(){return aa},zD:function(){return ua}});var r={};n.r(r),n.d(r,{json:function(){return C}});var a={};n.r(a),n.d(a,{json:function(){return S}});var o={};n.r(o),n.d(o,{json:function(){return T}});var s={};n.r(s),n.d(s,{json:function(){return E}});var i={};n.r(i),n.d(i,{json:function(){return R}});var u={};n.r(u),n.d(u,{json:function(){return A}});var l={};n.r(l),n.d(l,{json:function(){return _}});var c={};n.r(c),n.d(c,{json:function(){return O}});var p={};n.r(p),n.d(p,{json:function(){return F}});var d={};n.r(d),n.d(d,{json:function(){return B}});var h={};n.r(h),n.d(h,{json:function(){return P}});var f={};n.r(f),n.d(f,{json:function(){return M}});var m={};n.r(m),n.d(m,{json:function(){return L}});var g={};n.r(g),n.d(g,{json:function(){return V}});var y={};n.r(y),n.d(y,{json:function(){return U}});var v={};n.r(v),n.d(v,{json:function(){return W}});var x={};n.r(x),n.d(x,{json:function(){return z}});var b,ie=n(1934);(t=b=b||{})[t.DT_INVALID=0]="DT_INVALID",t[t.DT_FLOAT=1]="DT_FLOAT",t[t.DT_DOUBLE=2]="DT_DOUBLE",t[t.DT_INT32=3]="DT_INT32",t[t.DT_UINT8=4]="DT_UINT8",t[t.DT_INT16=5]="DT_INT16",t[t.DT_INT8=6]="DT_INT8",t[t.DT_STRING=7]="DT_STRING",t[t.DT_COMPLEX64=8]="DT_COMPLEX64",t[t.DT_INT64=9]="DT_INT64",t[t.DT_BOOL=10]="DT_BOOL",t[t.DT_QINT8=11]="DT_QINT8",t[t.DT_QUINT8=12]="DT_QUINT8",t[t.DT_QINT32=13]="DT_QINT32",t[t.DT_BFLOAT16=14]="DT_BFLOAT16",t[t.DT_FLOAT_REF=101]="DT_FLOAT_REF",t[t.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",t[t.DT_INT32_REF=103]="DT_INT32_REF",t[t.DT_UINT8_REF=104]="DT_UINT8_REF",t[t.DT_INT16_REF=105]="DT_INT16_REF",t[t.DT_INT8_REF=106]="DT_INT8_REF",t[t.DT_STRING_REF=107]="DT_STRING_REF",t[t.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",t[t.DT_INT64_REF=109]="DT_INT64_REF",t[t.DT_BOOL_REF=110]="DT_BOOL_REF",t[t.DT_QINT8_REF=111]="DT_QINT8_REF",t[t.DT_QUINT8_REF=112]="DT_QUINT8_REF",t[t.DT_QINT32_REF=113]="DT_QINT32_REF",t[t.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",(ge=(ge=ge=ge||{}).CheckpointFormatVersion||(ge.CheckpointFormatVersion={}))[ge.LEGACY=0]="LEGACY",ge[ge.V1=1]="V1",ge[ge.V2=2]="V2";
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const w={};function k(e){return w[e]}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function ue(e,t,n,r,a){var o=t.inputParams[e];if(o&&void 0!==o.inputIndexStart){var s=o.inputIndexStart,i=0===o.inputIndexEnd?void 0:void 0===o.inputIndexEnd?s+1:o.inputIndexEnd;if("tensor"===o.type)return le(t.inputNames[o.inputIndexStart],n,r,a);if("tensors"===o.type){const l=t.inputNames.slice(s,i);return l.map(e=>le(e,n,r,a))}const u=le(t.inputNames.slice(s)[0],n,r,a);s=u.dataSync();return"number"===o.type?s[0]:ie.D5U.toNestedArray(u.shape,s)}e=t.attrParams[e];return e&&e.value}function le(e,t,n,r){const[a,o]=$(e);if(null!=r){r=r.getHashTableHandleByName(a);if(null!=r)return r}n=n.currentContextIds.find(e=>!!t[N(a,e)]);return void 0!==n?t[N(a,n)][o]:void 0}function I(e,t){var[n,e]=$(e);return[N(n,t&&t.currentContextId),e]}function N(e,t){return t?`${e}-${t}`:e}function $(e){var t=e.split(":");return 1===t.length?[e,0]:[t[0],Number(t[t.length-1])]}function D(e,t,n){let r=ue("pad",e,t,n);if("explicit"!==r)return r;{r=ue("explicitPaddings",e,t,n);const a=[[0,0],[0,0],[0,0],[0,0]];for(let e=0;e<4;e++)a[e][0]=r[2*e],a[e][1]=r[2*e+1];return a}}function ce(e){return e.kept?e:(0,ie.d9v)(e)}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const C=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],S=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Prod",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axes",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],T=[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]}],E=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number"}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}],R=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}],A=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],_=[{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}],O=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}],F=[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]}],B=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]}],P=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],M=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],L=[{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"SparseToDense",category:"normalization",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!0,notSupported:!0}]}],V=[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}],U=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]}],W=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}],z=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]}];var G=n(8764).Buffer;
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class H{static get Instance(){return this._instance||(this._instance=new this)}constructor(){const e=[r,a,o,s,i,u,l,h,d,c,f,m,g,y,v,x,p],t=[].concat(...e.map(e=>e.json));this.opMappers=t.reduce((e,t)=>(e[t.tfOpName]=t,e),{})}transformGraph(e,t={}){const n=e.node,r=[],a=[],o=[],s=n.reduce((e,t)=>(e[t.name]=this.mapNode(t),t.op.startsWith("Placeholder")?r.push(e[t.name]):"Const"===t.op?a.push(e[t.name]):null!=t.input&&0!==t.input.length||o.push(e[t.name]),e),{});let i=[];const u=[];let l={},c={};null!=t&&(l=this.mapSignatureEntries(t.inputs),c=this.mapSignatureEntries(t.outputs));const p=Object.keys(s);p.forEach(e=>{const t=s[e];t.inputNames.forEach(e=>{var[e]=I(e);t.inputs.push(s[e]),s[e].children.push(t)})}),0===Object.keys(c).length?p.forEach(e=>{e=s[e];0===e.children.length&&u.push(e)}):Object.keys(c).forEach(e=>{var[t]=I(e);const n=s[t];null!=n&&(n.signatureKey=c[e],u.push(n))}),0<Object.keys(l).length?Object.keys(l).forEach(e=>{var[t]=I(e);const n=s[t];n&&(n.signatureKey=l[e],i.push(n))}):i=r;let d={};null!=e.library&&null!=e.library.function&&(d=e.library.function.reduce((e,t)=>(e[t.signature.name]=this.mapFunction(t),e),{}));const h={nodes:s,inputs:i,outputs:u,weights:a,placeholders:r,signature:t,functions:d};return 0<o.length&&(h.initNodes=o),h}mapSignatureEntries(n){return Object.keys(n||{}).reduce((e,t)=>(e[n[t].name]=t,e),{})}mapNode(a){const e=k(a.op)||this.opMappers[a.op]||{};null==a.attr&&(a.attr={});const t={name:a.name,op:a.op,category:e.category,inputNames:(a.input||[]).map(e=>e.startsWith("^")?e.substr(1):e),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:a.attr};return null!=e.inputs&&(t.inputParams=e.inputs.reduce((e,t)=>(e[t.name]={type:t.type,inputIndexStart:t.start,inputIndexEnd:t.end},e),{})),null!=e.attrs&&(t.attrParams=e.attrs.reduce((e,t)=>{var n=t.type;let r=void 0;switch(t.type){case"string":r=X(a.attr,t.tfName,t.defaultValue),void 0===r&&t.tfDeprecatedName&&(r=X(a.attr,t.tfDeprecatedName,t.defaultValue));break;case"string[]":r=re(a.attr,t.tfName,t.defaultValue),void 0===r&&t.tfDeprecatedName&&(r=re(a.attr,t.tfDeprecatedName,t.defaultValue));break;case"number":r=K(a.attr,t.tfName,t.defaultValue||0),void 0===r&&t.tfDeprecatedName&&(r=K(a.attr,t.tfDeprecatedName,t.defaultValue));break;case"number[]":r=ne(a.attr,t.tfName,t.defaultValue),void 0===r&&t.tfDeprecatedName&&(r=ne(a.attr,t.tfDeprecatedName,t.defaultValue));break;case"bool":r=q(a.attr,t.tfName,t.defaultValue),void 0===r&&t.tfDeprecatedName&&(r=q(a.attr,t.tfDeprecatedName,t.defaultValue));break;case"bool[]":r=oe(a.attr,t.tfName,t.defaultValue),void 0===r&&t.tfDeprecatedName&&(r=oe(a.attr,t.tfDeprecatedName,t.defaultValue));break;case"shape":r=te(a.attr,t.tfName,t.defaultValue),void 0===r&&t.tfDeprecatedName&&(r=te(a.attr,t.tfDeprecatedName,t.defaultValue));break;case"shape[]":r=ae(a.attr,t.tfName,t.defaultValue),void 0===r&&t.tfDeprecatedName&&(r=ae(a.attr,t.tfDeprecatedName,t.defaultValue));break;case"dtype":r=Q(a.attr,t.tfName,t.defaultValue),void 0===r&&t.tfDeprecatedName&&(r=Q(a.attr,t.tfDeprecatedName,t.defaultValue));break;case"dtype[]":r=J(a.attr,t.tfName,t.defaultValue),void 0===r&&t.tfDeprecatedName&&(r=J(a.attr,t.tfDeprecatedName,t.defaultValue));break;case"func":r=Y(a.attr,t.tfName,t.defaultValue),void 0===r&&t.tfDeprecatedName&&(r=Y(a.attr,t.tfDeprecatedName,t.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error(`Unsupported param type: ${t.type} for op: ${a.op}`)}return e[t.name]={value:r,type:n},e},{})),t}mapFunction(e){const t=e.nodeDef;const n=[];let r={};null!=t&&(r=t.reduce((e,t)=>(e[t.name]=this.mapNode(t),"Const"===t.op&&n.push(e[t.name]),e),{}));const a=[],o=[];e.signature.inputArg.forEach(e=>{var[t]=I(e.name);const n={name:t,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:Z(e.type),type:"dtype"}},children:[]};n.signatureKey=e.name,a.push(n),r[t]=n});const s=Object.keys(r);s.forEach(e=>{const t=r[e];t.inputNames.forEach(e=>{var[e]=I(e);t.inputs.push(r[e]),r[e].children.push(t)})});const i=e.ret;e.signature.outputArg.forEach(e=>{var[t,e]=I(i[e.name]);const n=r[t];null!=n&&(n.defaultOutput=e,o.push(n))});e=this.mapArgsToSignature(e);return{nodes:r,inputs:a,outputs:o,weights:n,placeholders:[],signature:e}}mapArgsToSignature(n){return{methodName:n.signature.name,inputs:n.signature.inputArg.reduce((e,t)=>(e[t.name]=this.mapArgToTensorInfo(t),e),{}),outputs:n.signature.outputArg.reduce((e,t)=>(e[t.name]=this.mapArgToTensorInfo(t,n.ret),e),{})}}mapArgToTensorInfo(e,t){let n=e.name;return null!=t&&(n=t[n]),{name:n,dtype:e.type}}}function j(e,t){const n=Array.isArray(e)?String.fromCharCode.apply(null,e):function(e){const t=(0,ie.OBj)().global;if(void 0!==t.atob)return t.atob(e);if(void 0!==G)return new G(e,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}(e);return t?n:n.toLowerCase()}function X(e,t,n,r=!1){t=e[t];return null!=t?j(t.s,r):n}function q(e,t,n){t=e[t];return t?t.b:n}function K(e,t,n){t=e[t]||{},n=null!=t.i?t.i:null!=t.f?t.f:n;return"number"==typeof n?n:parseInt(n,10)}function Z(e){switch(e="string"==typeof e?b[e]:e){case b.DT_FLOAT:return"float32";case b.DT_INT32:case b.DT_INT64:case b.DT_INT8:case b.DT_UINT8:return"int32";case b.DT_BOOL:return"bool";case b.DT_DOUBLE:return"float32";case b.DT_STRING:return"string";default:return null}}function Y(e,t,n){t=e[t];return t&&t.func?t.func.name:n}function Q(e,t,n){t=e[t];return t&&t.type?Z(t.type):n}function J(e,t,n){const r=e[t];return r&&r.list&&r.list.type?r.list.type.map(e=>Z(e)):n}function ee(e){if(!e.unknownRank)return null!=e.dim?e.dim.map(e=>"number"==typeof e.size?e.size:parseInt(e.size,10)):[]}function te(e,t,n){t=e[t];return t&&t.shape?ee(t.shape):n}function ne(e,t,n){const r=e[t];return r?((r.list.f&&r.list.f.length?r.list.f:r.list.i)||[]).map(e=>"number"==typeof e?e:parseInt(e,10)):n}function re(e,t,n,r=!1){const a=e[t];return a&&a.list&&a.list.s?a.list.s.map(e=>j(e,r)):n}function ae(e,t,n){const r=e[t];return r&&r.list&&r.list.shape?r.list.shape.map(e=>ee(e)):n}function oe(e,t,n){t=e[t];return t&&t.list&&t.list.b?t.list.b:n}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class se{constructor(e,t,n){this.node=e,this.tensorMap=t,this.context=n,this.inputs=[],this.attrs={},this.inputs=e.inputNames.map(e=>this.getInput(e)),null!=e.rawAttrs&&(this.attrs=Object.keys(e.rawAttrs).reduce((e,t)=>(e[t]=this.getAttr(t),e),{}))}getInput(e){return le(e,this.tensorMap,this.context)}getAttr(e,t){var n=this.node.rawAttrs[e];if(null!=n.tensor)return le(e,this.tensorMap,this.context);if(null!=n.i||null!=n.f)return K(this.node.rawAttrs,e,t);if(null!=n.s)return X(this.node.rawAttrs,e,t);if(null!=n.b)return q(this.node.rawAttrs,e,t);if(null!=n.shape)return te(this.node.rawAttrs,e,t);if(null!=n.type)return Q(this.node.rawAttrs,e,t);if(null!=n.list){if(null!=n.list.i||null!=n.list.f)return ne(this.node.rawAttrs,e,t);if(null!=n.list.s)return re(this.node.rawAttrs,e,t);if(null!=n.list.shape)return ae(this.node.rawAttrs,e,t);if(null!=n.list.b)return oe(this.node.rawAttrs,e,t);if(null!=n.list.type)return J(this.node.rawAttrs,e,t)}return t}}var pe=n(6407),de=n(7097),he=n(9121),fe=n(3740),me=n(569),ge=n(2668);const ye=(0,ge.op)({addN_:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e){me.hu(Array.isArray(e),()=>"The argument passed to tf.addN() must be a list of tensors"),me.hu(1<=e.length,()=>"Must pass at least one tensor to tf.addN(), but got "+`${e.length}`);const t=e.map((e,t)=>(0,fe._1)(e,`tensors${t}`,"addN")),n=t[0];t.forEach(e=>{if(e.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),t.forEach(e=>{if(!me.cO(e.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});var r=t;return de.BV.runKernel(he.Xz,r)}});var ve=n(5228),xe=n(4841),be=n(1274),we=n(9322),ke=n(9165),Ie=n(827),Ne=n(4513),$e=n(632),Ce=n(3453),Se=n(5265);var Te=n(6235),Ee=n(7839),Re=n(1470),De=n(2421),Ae=n(1891),_e=n(7037),Oe=n(9812),Fe=n(369),Be=n(6825),Pe=n(1661),Me=n(173),Le=n(2699),Ve=n(3233),Ue=n(4650),We=n(4842),ze=n(3426),Ge=n(6943),He=n(2597),je=n(7474),Xe=n(4386),qe=n(7370),Ke=n(9036),Ze=n(766),Ye=n(7409),Qe=n(7809),Je=n(5503),et=n(625),tt=n(9331),nt=n(4434),rt=n(3254),at=n(3694),ot=n(3261),st=n(248),it=n(1869),ut=n(1173),lt=n(2279),ct=n(3582),pt=n(2634),dt=n(9451),ht=n(9133),ft=n(8151);
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function mt(e,t,n=""){ie.D5U.assert(function(t,n){if(t.length!==n.length)return!1;for(let e=0;e<t.length;e++)if(-1!==t[e]&&-1!==n[e]&&t[e]!==n[e])return!1;return!0}(e,t),()=>n+` Shapes ${e} and ${t} must match`)}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class gt{constructor(e,t,n,r,a,o,s){this.name=e,this.dtype=t,this.maxSize=n,this.elementShape=r,this.identicalElementShapes=a,this.dynamicSize=o,this.clearAfterRead=s,this.tensors=[],this.closed_=!1,this.idTensor=(0,ie.iD$)(0),(0,ie.CnY)(this.idTensor)}get id(){return this.idTensor.id}get closed(){return this.closed_}clearAndClose(t){this.tensors.forEach(e=>{null!=t&&t.has(e.tensor.id)||e.tensor.dispose()}),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}size(){return this.tensors.length}read(e){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||e>=this.size())throw new Error(`Tried to read from index ${e}, but array size is: ${this.size()}`);const t=this.tensors[e];if(t.cleared)throw new Error(`TensorArray ${this.name}: Could not read index ${e} twice because it was cleared after a previous read `+"(perhaps try setting clear_after_read = false?).");return this.clearAfterRead&&(t.cleared=!0),t.read=!0,t.tensor}readMany(e){return e.map(e=>this.read(e))}write(e,t){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||!this.dynamicSize&&e>=this.maxSize)throw new Error(`Tried to write to index ${e}, but array is not resizeable and size is: ${this.maxSize}`);const n=this.tensors[e]||{};if(t.dtype!==this.dtype)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e},
          because the value dtype is ${t.dtype}, but TensorArray dtype is ${this.dtype}.`);if(0!==this.size()||null!=this.elementShape&&0!==this.elementShape.length||(this.elementShape=t.shape),mt(this.elementShape,t.shape,`TensorArray ${this.name}: Could not write to TensorArray index ${e}.`),n.read)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been read.`);if(n.written)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been written.`);n.tensor=t,(0,ie.CnY)(t),n.written=!0,this.tensors[e]=n}writeMany(e,n){if(e.length!==n.length)throw new Error(`TensorArray ${this.name}: could not write multiple tensors,`+`because the index size: ${e.length} is not the same as tensors size: ${n.length}.`);e.forEach((e,t)=>this.write(e,n[t]))}gather(t,e){if(e&&e!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but gather requested dtype ${e}`);if(t)t=t.slice(0,this.size());else{t=[];for(let e=0;e<this.size();e++)t.push(e)}if(0===t.length)return(0,ie.XeE)([],[0].concat(this.elementShape));e=this.readMany(t);return mt(this.elementShape,e[0].shape,"TensorArray shape mismatch: "),(0,ie.knu)(e,0)}concat(e){if(e&&e!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but concat requested dtype ${e}`);if(0===this.size())return(0,ie.XeE)([],[0].concat(this.elementShape));const t=[];for(let e=0;e<this.size();e++)t.push(e);e=this.readMany(t);return mt(this.elementShape,e[0].shape,`TensorArray shape mismatch: tensor array shape (${this.elementShape}) vs first tensor shape (${e[0].shape})`),(0,ie.zoF)(e,0)}scatter(e,t){if(t.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${t.dtype}`);if(e.length!==t.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${e.length} vs. ${t.shape[0]}`);var n=Math.max(...e);if(!this.dynamicSize&&n>=this.maxSize)throw new Error(`Max index must be < array size (${n}  vs. ${this.maxSize})`);this.writeMany(e,(0,ie.HHK)(t,0))}split(r,a){if(a.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${a.dtype}`);let o=0;const s=r.map(e=>(o+=e,o));if(o!==a.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${o}, and tensor's shape is: ${a.shape}`);if(!this.dynamicSize&&r.length!==this.maxSize)throw new Error(`TensorArray's size is not equal to the size of lengths (${this.maxSize} vs. ${r.length}), `+"and the TensorArray is not marked as dynamically resizeable");const i=0===o?0:a.size/o,u=[];(0,ie.lub)(()=>{a=(0,ie.XLQ)(a,[1,o,i]);for(let e=0;e<r.length;++e){var t=[0,0===e?0:s[e-1],0],n=[1,r[e],i];u[e]=(0,ie.XLQ)((0,ie.tPi)(a,t,n),this.elementShape)}return u});const t=[];for(let e=0;e<r.length;e++)t[e]=e;this.writeMany(t,u)}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class yt{constructor(e,t,n,r=-1){this.tensors=e,this.elementShape=t,this.elementDtype=n,null!=e&&e.forEach(e=>{if(n!==e.dtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${e.dtype}`);mt(t,e.shape,"TensorList shape mismatch: "),(0,ie.CnY)(e)}),this.idTensor=(0,ie.iD$)(0),this.maxNumElements=r,(0,ie.CnY)(this.idTensor)}get id(){return this.idTensor.id}copy(){return new yt([...this.tensors],this.elementShape,this.elementDtype)}clearAndClose(t){this.tensors.forEach(e=>{null!=t&&t.has(e.id)||e.dispose()}),this.tensors.length=0,this.idTensor.dispose()}size(){return this.tensors.length}stack(t,e,n=-1){if(e!==this.elementDtype)throw new Error(`Invalid data types; op elements ${e}, but list elements ${this.elementDtype}`);if(-1!==n&&this.tensors.length!==n)throw new Error(`Operation expected a list with ${n} elements but got a list with ${this.tensors.length} elements.`);return mt(t,this.elementShape,"TensorList shape mismatch: "),(0,ie.lub)(()=>{var e=this.tensors.map(e=>(0,ie.XLQ)(e,t));return(0,ie.knu)(e,0)})}popBack(e,t){if(t!==this.elementDtype)throw new Error(`Invalid data types; op elements ${t}, but list elements ${this.elementDtype}`);if(0===this.size())throw new Error("Trying to pop from an empty list.");t=this.tensors.pop();return mt(t.shape,e,"TensorList shape mismatch: "),(0,ie.XLQ)(t,e)}pushBack(e){if(e.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${e.dtype}, but list elements ${this.elementDtype}`);if(mt(e.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");(0,ie.CnY)(e),this.tensors.push(e)}resize(e){if(e<0)throw new Error(`TensorListResize expects size to be non-negative. Got: ${e}`);if(-1!==this.maxNumElements&&e>this.maxNumElements)throw new Error(`TensorListResize input size ${e} is greater maxNumElement ${this.maxNumElements}.`);this.tensors.length=e}getItem(e,t,n){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);if(e<0||e>this.tensors.length)throw new Error(`Trying to access element ${e} in a list with ${this.tensors.length} elements.`);if(null==this.tensors[e])throw new Error(`element at index ${e} is null.`);return mt(this.tensors[e].shape,t,"TensorList shape mismatch: "),this.tensors[e]}setItem(e,t){if(t.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${t.dtype}, but list elements ${this.elementDtype}`);if(e<0||-1!==this.maxNumElements&&e>=this.maxNumElements)throw new Error(`Trying to set element ${e} in a list with max ${this.maxNumElements} elements.`);mt(this.elementShape,t.shape,"TensorList shape mismatch: "),(0,ie.CnY)(t),this.tensors[e]=t}gather(t,e,n){if(e!==this.elementDtype)throw new Error(`Invalid data types; op elements ${e}, but list elements ${this.elementDtype}`);return mt(this.elementShape,n,"TensorList shape mismatch: "),0===(t=t.slice(0,this.size())).length?(0,ie.XeE)([],[0].concat(this.elementShape)):(0,ie.lub)(()=>{var e=t.map(e=>(0,ie.XLQ)(this.tensors[e],n));return(0,ie.knu)(e,0)})}concat(e,t){if(e&&e!==this.elementDtype)throw new Error(`TensorList dtype is ${this.elementDtype} but concat requested dtype ${e}`);return mt(this.elementShape,t,"TensorList shape mismatch: "),0===this.size()?(0,ie.XeE)([],[0].concat(this.elementShape)):(0,ie.lub)(()=>{var e=this.tensors.map(e=>(0,ie.XLQ)(e,t));return(0,ie.zoF)(e,0)})}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const vt=async(n,r,a)=>{switch(n.op){case"If":case"StatelessIf":{var e=ue("thenBranch",n,r,a),t=ue("elseBranch",n,r,a);const M=ue("cond",n,r,a);var o=ue("args",n,r,a);return((await M.data())[0]?a.functionMap[e]:a.functionMap[t]).executeFunctionAsync(o,a.tensorArrayMap,a.tensorListMap)}case"While":case"StatelessWhile":{var s=ue("body",n,r,a),i=ue("cond",n,r,a);const L=ue("args",n,r,a),V=await a.functionMap[i].executeFunctionAsync(L,a.tensorArrayMap,a.tensorListMap),U=L.map(e=>e.id);let e=await V[0].data();V.forEach(e=>{e.kept||-1!==U.indexOf(e.id)||e.dispose()});let t=L;for(;e[0];){const W=t;t=await a.functionMap[s].executeFunctionAsync(t,a.tensorArrayMap,a.tensorListMap);const z=t.map(e=>e.id);W.forEach(e=>{e.kept||-1!==U.indexOf(e.id)||-1!==z.indexOf(e.id)||e.dispose()});const G=await a.functionMap[i].executeFunctionAsync(t,a.tensorArrayMap,a.tensorListMap);e=await G[0].data(),G.forEach(e=>{e.kept||-1!==U.indexOf(e.id)||-1!==z.indexOf(e.id)||e.dispose()})}return t}case"LoopCond":return[ce(ue("pred",n,r,a))];case"Switch":{const H=ue("pred",n,r,a);let e=ue("data",n,r,a);return e.kept||(e=ce(e)),(await H.data())[0]?[void 0,e]:[e,void 0]}case"Merge":var u=n.inputNames.find(e=>void 0!==le(e,r,a));return u?[ce(le(u,r,a))]:void 0;case"Enter":var l=ue("frameName",n,r,a),c=ue("tensor",n,r,a);return a.enterFrame(l),[ce(c)];case"Exit":var p=ue("tensor",n,r,a);return a.exitFrame(),[ce(p)];case"NextIteration":var d=ue("tensor",n,r,a);return a.nextIteration(),[ce(d)];case"TensorArrayV3":var u=ue("size",n,r,a),l=ue("dtype",n,r,a),c=ue("elementShape",n,r,a),h=ue("dynamicSize",n,r,a),f=ue("clearAfterRead",n,r,a),p=ue("identicalElementShapes",n,r,a),d=ue("name",n,r,a),h=new gt(d,l,u,c,p,h,f);return a.addTensorArray(h),[h.idTensor,(0,ie.iD$)(1)];case"TensorArrayWriteV3":{var f=ue("tensorArrayId",n,r,a),h=ue("index",n,r,a),m=ue("tensor",n,r,a);const j=a.getTensorArray(f.id);return j.write(h,m),[j.idTensor]}case"TensorArrayReadV3":{var m=ue("tensorArrayId",n,r,a),g=ue("index",n,r,a);const X=a.getTensorArray(m.id);return[X.read(g)]}case"TensorArrayGatherV3":{var g=ue("tensorArrayId",n,r,a),y=ue("indices",n,r,a),v=ue("dtype",n,r,a);const q=a.getTensorArray(g.id);return[q.gather(y,v)]}case"TensorArrayScatterV3":{var y=ue("tensorArrayId",n,r,a),v=ue("indices",n,r,a),x=ue("tensor",n,r,a);const K=a.getTensorArray(y.id);return K.scatter(v,x),[K.idTensor]}case"TensorArrayConcatV3":{var b=ue("tensorArrayId",n,r,a);const Z=a.getTensorArray(b.id);var w=ue("dtype",n,r,a);return[Z.concat(w)]}case"TensorArraySplitV3":{x=ue("tensorArrayId",n,r,a),b=ue("tensor",n,r,a),w=ue("lengths",n,r,a);const Y=a.getTensorArray(x.id);return Y.split(w,b),[Y.idTensor]}case"TensorArraySizeV3":{var k=ue("tensorArrayId",n,r,a);const Q=a.getTensorArray(k.id);return[(0,ie.iD$)(Q.size(),"int32")]}case"TensorArrayCloseV3":{k=ue("tensorArrayId",n,r,a);const J=a.getTensorArray(k.id);return J.clearAndClose(),[J.idTensor]}case"TensorListSetItem":{var I=ue("tensorListId",n,r,a),N=ue("index",n,r,a),$=ue("tensor",n,r,a);const ee=a.getTensorList(I.id);return ee.setItem(N,$),[ee.idTensor]}case"TensorListGetItem":{var I=ue("tensorListId",n,r,a),N=ue("index",n,r,a),$=ue("elementShape",n,r,a),C=ue("elementDType",n,r,a);const te=a.getTensorList(I.id);return[te.getItem(N,$,C)]}case"TensorListScatterV2":case"TensorListScatter":var S=ue("indices",n,r,a),T=function(e,t,n,r){if(t.length!==e.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${t.length} vs. ${e.shape[0]}`);var a=Math.max(...t);if(null!=r&&-1!==r&&r<=a)throw new Error(`Max index must be < array size (${a}  vs. ${r})`);const o=new yt([],n,e.dtype,r),s=(0,ie.HHK)(e,0);return t.forEach((e,t)=>{o.setItem(e,s[t])}),o}(ue("tensor",n,r,a),S,ue("elementShape",n,r,a),ue("numElements",n,r,a));return a.addTensorList(T),[T.idTensor];case"TensorListReserve":case"EmptyTensorList":{C=ue("elementShape",n,r,a),S=ue("elementDType",n,r,a);let e;e="TensorListReserve"===n.op?"numElements":"maxNumElements";T=ue(e,n,r,a),T=(C=C,S=S,T=T,new yt([],C,S,T));return a.addTensorList(T),[T.idTensor]}case"TensorListGather":{var E=ue("tensorListId",n,r,a),R=ue("indices",n,r,a),D=ue("elementShape",n,r,a),A=ue("elementDType",n,r,a);const ne=a.getTensorList(E.id);return[ne.gather(R,A,D)]}case"TensorListStack":{E=ue("tensorListId",n,r,a),R=ue("elementShape",n,r,a),A=ue("elementDType",n,r,a),D=ue("numElements",n,r,a);const re=a.getTensorList(E.id);return[re.stack(R,A,D)]}case"TensorListFromTensor":var _=function(e,t,n){var r=e.dtype;if(e.shape.length<1)throw new Error(`Tensor must be at least a vector, but saw shape: ${e.shape}`);if(e.dtype!==n)throw new Error(`Invalid data types; op elements ${e.dtype}, but list elements ${n}`);return mt(e.shape.slice(1),t,"TensorList shape mismatch: "),e=(0,ie.HHK)(e),new yt(e,t,r)}(ue("tensor",n,r,a),ue("elementShape",n,r,a),ue("elementDType",n,r,a));return a.addTensorList(_),[_.idTensor];case"TensorListConcat":{var O=ue("tensorListId",n,r,a);const ae=a.getTensorList(O.id);_=ue("dtype",n,r,a),O=ue("elementShape",n,r,a);return[ae.concat(_,O)]}case"TensorListPushBack":{var O=ue("tensorListId",n,r,a),F=ue("tensor",n,r,a);const oe=a.getTensorList(O.id);return oe.pushBack(F),[oe.idTensor]}case"TensorListPopBack":{var F=ue("tensorListId",n,r,a),B=ue("elementShape",n,r,a),P=ue("elementDType",n,r,a);const se=a.getTensorList(F.id);return[se.popBack(B,P)]}case"TensorListSplit":B=ue("tensor",n,r,a),P=ue("elementShape",n,r,a),P=function(a,o,s){let i=0;const u=o.map(e=>(i+=e,i));if(i!==a.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${i}, and tensor's shape is: ${a.shape}`);const l=0===i?0:a.size/i;var t=(0,ie.lub)(()=>{const t=[];a=(0,ie.XLQ)(a,[1,i,l]);for(let e=0;e<o.length;++e){var n=[0,0===e?0:u[e-1],0],r=[1,o[e],l];t[e]=(0,ie.XLQ)((0,ie.tPi)(a,n,r),s)}return a.dispose(),t});const n=new yt([],s,a.dtype,o.length);for(let e=0;e<t.length;e++)n.setItem(e,t[e]);return n}(B,ue("lengths",n,r,a),P);return a.addTensorList(P),[P.idTensor];default:throw TypeError(`Node type ${n.op} is not implemented`)}};var xt=n(1355),bt=n(4794),wt=n(633),kt=n(747),It=n(2200),Nt=n(6013),$t=n(9832),Ct=n(2582),St=n(9323),Tt=n(4968);const Et=(0,ge.op)({fusedConv2d_:
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function({x:t,filter:n,strides:s,pad:i,dataFormat:r="NHWC",dilations:u=[1,1],dimRoundingMode:a,bias:o,activation:l="linear",preluActivationWeights:c,leakyreluAlpha:p}){if(l=l||"linear",!1===(0,St.uy)(de.BV.state.gradientDepth,l)){let e=(0,bt.T)(t,n,s,i,r,u,a);return null!=o&&(e=(0,pe.I)(e,o)),(0,St.QH)(e,l,c,p)}t=(0,fe._1)(t,"x","conv2d");const e=(0,fe._1)(n,"filter","conv2d");let d=t,h=!1;3===t.rank&&(h=!0,d=(0,Tt.X)(t,[1,t.shape[0],t.shape[1],t.shape[2]])),me.hu(4===d.rank,()=>"Error in fused conv2d: input must be rank 4, but got rank "+`${d.rank}.`),me.hu(4===e.rank,()=>"Error in fused conv2d: filter must be rank 4, but got rank "+`${e.rank}.`),null!=a&&me.hu(me.GN(i),()=>"Error in fused conv2d: pad must be an integer when using, "+`dimRoundingMode ${a} but got pad ${i}.`),me.hu(d.shape[3]===e.shape[2],()=>`Error in conv2d: depth of input (${d.shape[3]}) must match `+`input depth for filter ${e.shape[2]}.`),me.hu(Ct.jT(s,u),()=>"Error in conv2D: Either strides or dilations must be 1. "+`Got strides ${s} and dilations '${u}'`),me.hu("NHWC"===r,()=>`Error in conv2d: got dataFormat of ${r} but only NHWC is currently supported.`),n=Ct.Ix(d.shape,e.shape,s,u,i,a);let f;null!=o&&(f=(0,fe._1)(o,"bias","fused conv2d"),[f]=(0,kt.T_)(f,t),It.$N(n.outShape,f.shape));let m;null!=c&&(m=(0,fe._1)(c,"prelu weights","fused conv2d"));const g=(e,t)=>{var[n,r,a,t]=t,a=(0,St.Fr)(e,a,l);me.hu(Ct.I0(u),()=>"Error in gradient of fused conv2D: dilation rates greater than 1 "+`are not yet supported in gradients. Got dilations '${u}'`);const o=[(0,$t._)(r.shape,a,n,s,i),(0,Nt.p)(r,a,n.shape,s,i)];return null!=t&&(a=(0,St.pf)(t,a),o.push(a)),o},y={x:d,filter:e,bias:f,preluActivationWeights:m},v={strides:s,pad:i,dataFormat:r,dilations:u,dimRoundingMode:a,activation:l,leakyreluAlpha:p};if(null==o){const x=(0,wt.cb)((e,t,n)=>{let r=de.BV.runKernel(he._V,y,v);return n([t,e,r]),h&&(r=(0,Tt.X)(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:g}});return x(d,e)}{const b=(0,wt.cb)((e,t,n,r)=>{let a=de.BV.runKernel(he._V,y,v);return r([t,e,a,n]),h&&(a=(0,Tt.X)(a,[a.shape[1],a.shape[2],a.shape[3]])),{value:a,gradFunc:g}});return b(d,e,f)}}});var Rt=n(4718),Dt=n(8098),At=n(4375);const _t=(0,ge.op)({fusedDepthwiseConv2d_:
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function({x:t,filter:n,strides:o,pad:s,dataFormat:r="NHWC",dilations:i=[1,1],dimRoundingMode:u,bias:a,activation:l="linear",preluActivationWeights:c,leakyreluAlpha:p}){if(!1===(0,St.uy)(de.BV.state.gradientDepth,l)){let e=(0,Rt.B)(t,n,o,s,r,i,u);return null!=a&&(e=(0,pe.I)(e,a)),(0,St.QH)(e,l,c,p)}t=(0,fe._1)(t,"x","depthwiseConv2d");const e=(0,fe._1)(n,"filter","depthwiseConv2d");let d=t,h=!1;3===t.rank&&(h=!0,d=(0,Tt.X)(t,[1,t.shape[0],t.shape[1],t.shape[2]])),me.hu(4===d.rank,()=>"Error in fused depthwiseConv2d: input must be rank 4, but got "+`rank ${d.rank}.`),me.hu(4===e.rank,()=>"Error in fused depthwiseConv2d: filter must be rank 4, "+`but got rank ${e.rank}.`),me.hu(d.shape[3]===e.shape[2],()=>"Error in fused depthwiseConv2d: number of input channels "+`(${d.shape[3]}) must match the inChannels dimension in `+`filter ${e.shape[2]}.`),null==i&&(i=[1,1]),me.hu(Ct.jT(o,i),()=>"Error in fused depthwiseConv2d: Either strides or dilations must "+`be 1. Got strides ${o} and dilations '${i}'`),null!=u&&me.hu(me.GN(s),()=>"Error in fused depthwiseConv2d: pad must be an integer when "+`using dimRoundingMode ${u} but got pad ${s}.`),n=Ct.Ix(d.shape,e.shape,o,i,s,u,!0);let f;null!=a&&(f=(0,fe._1)(a,"bias","fused conv2d"),[f]=(0,kt.T_)(f,t),It.$N(n.outShape,f.shape));let m;null!=c&&(m=(0,fe._1)(c,"prelu weights","fused depthwiseConv2d"));const g=(e,t)=>{me.hu(Ct.I0(i),()=>"Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations "+`'${i}'`);var[n,r,a,t]=t,e=(0,St.Fr)(e,a,l),a=(0,At.v)(r.shape,e,n,o,s,i,u),n=(0,Dt.z)(r,e,n.shape,o,s,i,u);return null==t?[a,n]:[a,n,(0,St.pf)(f,e)]},y={x:d,filter:e,bias:f,preluActivationWeights:m},v={strides:o,pad:s,dataFormat:r,dilations:i,dimRoundingMode:u,activation:l,leakyreluAlpha:p};if(null==a){const x=(0,wt.cb)((e,t,n)=>{let r=de.BV.runKernel(he.lu,y,v);return n([t,e,r]),h&&(r=(0,Tt.X)(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:g}});return x(d,e)}{const b=(0,wt.cb)((e,t,n,r)=>{let a=de.BV.runKernel(he.lu,y,v);return r([t,e,a,n]),h&&(a=(0,Tt.X)(a,[a.shape[1],a.shape[2],a.shape[3]])),{value:a,gradFunc:g}});return b(d,e,f)}}});var Ot=n(8687);const Ft=(0,ge.op)({fusedMatMul_:
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function({a:t,b:n,transposeA:i=!1,transposeB:u=!1,bias:l,activation:c="linear",preluActivationWeights:r,leakyreluAlpha:a}){if(!1===(0,St.uy)(de.BV.state.gradientDepth,c)){let e=(0,Ot.O)(t,n,i,u);return null!=l&&(e=(0,pe.I)(e,l)),(0,St.QH)(e,c,r,a)}let e=(0,fe._1)(t,"a","fused matMul"),o=(0,fe._1)(n,"b","fused matMul");[e,o]=(0,kt.T_)(e,o);const s=i?e.shape[e.rank-2]:e.shape[e.rank-1],p=u?o.shape[o.rank-1]:o.shape[o.rank-2];var d=i?e.shape[e.rank-1]:e.shape[e.rank-2],h=u?o.shape[o.rank-2]:o.shape[o.rank-1];const f=e.shape.slice(0,-2),m=o.shape.slice(0,-2);t=me.NA(f),n=me.NA(m),me.hu(2<=e.rank&&2<=o.rank&&e.rank===o.rank,()=>"Error in fused matMul: inputs must have the same rank of at "+`least 2, got ranks ${e.rank} and ${o.rank}.`),me.hu(me.cO(f,m),()=>`Error in fused matMul: outer dimensions (${f}) and (`+`${m}) of Tensors with shapes ${e.shape} and `+`${o.shape} must match.`),me.hu(s===p,()=>`Error in fused matMul: inner shapes (${s}) and (`+`${p}) of Tensors with shapes ${e.shape} and `+`${o.shape} and transposeA=${i}`+` and transposeB=${u} must match.`);const g=e.shape.slice(0,-2).concat([d,h]);d=i?(0,Tt.X)(e,[t,s,d]):(0,Tt.X)(e,[t,d,s]),h=u?(0,Tt.X)(o,[n,h,p]):(0,Tt.X)(o,[n,p,h]);let y;null!=l&&(y=(0,fe._1)(l,"bias","fused matMul"),[y]=(0,kt.T_)(y,e),It.$N(g,y.shape));let v;null!=r&&(v=(0,fe._1)(r,"prelu weights","fused matMul"));const x=(e,t)=>{var[n,r,a,t]=t,a=(0,St.Fr)((0,Tt.X)(e,a.shape),a,c);let o,s;if(s=i||u?!i&&u?(o=(0,Ot.O)(a,r,!1,!1),(0,Ot.O)(a,n,!0,!1)):i&&!u?(o=(0,Ot.O)(r,a,!1,!0),(0,Ot.O)(n,a,!1,!1)):(o=(0,Ot.O)(r,a,!0,!0),(0,Ot.O)(a,n,!0,!0)):(o=(0,Ot.O)(a,r,!1,!0),(0,Ot.O)(n,a,!0,!1)),null==l)return[o,s];a=(0,St.pf)(t,a);return[o,s,a]},b={a:d,b:h,bias:y,preluActivationWeights:v},w={transposeA:i,transposeB:u,activation:c,leakyreluAlpha:a};if(null==l){const k=(0,wt.cb)((e,t,n)=>{var r=de.BV.runKernel(he.us,b,w);return n([e,t,r]),{value:(0,Tt.X)(r,g),gradFunc:x}});return k(d,h)}{const I=(0,wt.cb)((e,t,n,r)=>{var a=de.BV.runKernel(he.us,b,w);return r([e,t,a,n]),{value:(0,Tt.X)(a,g),gradFunc:x}});return I(d,h,y)}}});
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
var Bt=n(1405);const Pt=(0,ge.op)({conv3d_:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e,t,n,r,a="NDHWC",o=[1,1,1]){e=(0,fe._1)(e,"x","conv3d");const s=(0,fe._1)(t,"filter","conv3d");let i=e,u=!1;return 4===e.rank&&(u=!0,i=(0,Tt.X)(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]])),me.hu(5===i.rank,()=>`Error in conv3d: input must be rank 5, but got rank ${i.rank}.`),me.hu(5===s.rank,()=>"Error in conv3d: filter must be rank 5, but got rank "+`${s.rank}.`),me.hu(i.shape[4]===s.shape[3],()=>`Error in conv3d: depth of input (${i.shape[4]}) must match `+`input depth for filter ${s.shape[3]}.`),me.hu((0,Ct.jT)(n,o),()=>"Error in conv3D: Either strides or dilations must be 1. "+`Got strides ${n} and dilations '${o}'`),me.hu("NDHWC"===a,()=>`Error in conv3d: got dataFormat of ${a} but only NDHWC is currently supported.`),e={x:i,filter:s},r=de.BV.runKernel(he.x1,e,{strides:n,pad:r,dataFormat:a,dilations:o}),u?(0,Tt.X)(r,[r.shape[1],r.shape[2],r.shape[3],r.shape[4]]):r}});var Mt=n(5176),Lt=n(1174);const Vt=(0,ge.op)({maxPoolWithArgmax_:
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e,t,n,r,a=!1){return e=(0,fe._1)(e,"x","maxPoolWithArgmax"),{result:(a=de.BV.runKernel(he.vF,{x:e},{filterSize:t,strides:n,pad:r,includeBatchInIndex:a}))[0],indexes:a[1]}}});var Ut=n(4368),Wt=n(2271);const zt=(0,ge.op)({avgPool3d_:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e,t,n,r,a,o="NDHWC",s){null==s?s=[1,1,1]:(0,Ut.MX)("dilations is deprecated, this field will be gone in v3.0.0.");let i=e=(0,fe._1)(e,"x","avgPool3d","float32"),u=!1;return 4===e.rank&&(u=!0,i=(0,Tt.X)(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]])),me.hu(5===i.rank,()=>`Error in avgPool3d: x must be rank 5 but got rank ${i.rank}.`),me.hu("NDHWC"===o,()=>"Error in avgPool3d: Only NDHWC is currently supported, "+`but got dataFormat of ${o}`),me.hu(Ct.jT(n,s),()=>"Error in avgPool3d: Either strides or dilations must be 1. "+`Got strides ${n} and dilations '${s}'`),null!=a&&me.hu(me.GN(r),()=>"Error in avgPool3d: pad must be an integer when using, "+`dimRoundingMode ${a} but got pad ${r}.`),e={x:i},t={filterSize:t,strides:n,pad:r,dimRoundingMode:a,dataFormat:o,dilations:s},t=de.BV.runKernel(he._k,e,t),t=(0,Wt.p)(t,i.dtype),u?(0,Tt.X)(t,[t.shape[1],t.shape[2],t.shape[3],t.shape[4]]):t}});const Gt=(0,ge.op)({maxPool3d_:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e,t=[1,1,1],n,r,a,o="NDHWC",s){null==s?s=[1,1,1]:(0,Ut.MX)("dilations is deprecated, this field will be gone in v3.0.0.");let i=e=(0,fe._1)(e,"x","maxPool3d"),u=!1;return 4===e.rank&&(u=!0,i=(0,Tt.X)(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]])),me.hu(5===i.rank,()=>`Error in maxPool3d: x must be rank 5 but got rank ${i.rank}.`),me.hu("NDHWC"===o,()=>"Error in maxPool3d: Only NDHWC is currently supported, "+`but got dataFormat of ${o}`),me.hu(Ct.jT(n,s),()=>"Error in maxPool3d: Either strides or dilations must be 1. "+`Got strides ${n} and dilations '${s}'`),null!=a&&me.hu(me.GN(r),()=>"Error in maxPool3d: pad must be an integer when using, "+`dimRoundingMode ${a} but got pad ${r}.`),e={x:i},t={filterSize:t,strides:n,pad:r,dimRoundingMode:a,dataFormat:o,dilations:s},t=de.BV.runKernel(he.OA,e,t),u?(0,Tt.X)(t,[t.shape[1],t.shape[2],t.shape[3],t.shape[4]]):t}});var Ht=n(557);
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function jt(e,t,n){var[r,a]=ue("fusedOps",e,t,n),o="biasadd"===r,s="prelu"===a,i="fusedbatchnorm"===r,u=ue("numArgs",e,t,n);if(o){if(s&&2!==u)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!s&&1!==u)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(i)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported.");var l=ue("strides",e,t,n),r=D(e,t,n),o=ue("dataFormat",e,t,n).toUpperCase(),s=ue("dilations",e,t,n),[u,i]=ue("args",e,t,n);return{stride:l,pad:r,dataFormat:o,dilations:s,biasArg:u,preluArg:i,activationFunc:a,leakyreluAlpha:ue("leakyreluAlpha",e,t,n)}}var Xt=n(4006);const qt=(0,ge.op)({multinomial_:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e,t,n,r=!1){var a=(0,fe._1)(e,"logits","multinomial"),o=a.size,e=a.rank;if(o<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+`${o}.`);if(2<e)throw new Error(`Rank of probabilities must be 1 or 2, but is ${e}`);return n=n||Math.random(),a=1===e?(0,Tt.X)(a,[1,-1]):a,r=de.BV.runKernel(he.NZ,{logits:a},{numSamples:t,seed:n,normalized:r}),1===e?(0,Tt.X)(r,[r.size]):r}});var Kt=n(6708),Zt=n(4917),Yt=n(7846),Qt=n(2657),Jt=n(6377);
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class en{constructor(e,t,n,r,a){this.mean=e,this.stdDev=t,this.dtype=n,this.nextVal=NaN,this.truncated=r,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);const o=a||Math.random();this.random=Jt.alea(o.toString())}nextValue(){if(!isNaN(this.nextVal)){var e=this.nextVal;return this.nextVal=NaN,e}let r,a,o=!1;for(;!o;){let e,t,n;for(;e=2*this.random()-1,t=2*this.random()-1,n=e*e+t*t,1<=n||0===n;);var s=Math.sqrt(-2*Math.log(n)/n);r=this.mean+this.stdDev*e*s,a=this.mean+this.stdDev*t*s,this.truncated&&!this.isValidTruncated(r)||(o=!0)}return this.truncated&&!this.isValidTruncated(a)||(this.nextVal=this.convertValue(a)),this.convertValue(r)}convertValue(e){return null==this.dtype||"float32"===this.dtype?e:Math.round(e)}isValidTruncated(e){return e<=this.upper&&e>=this.lower}}class tn{constructor(e=0,t=1,n,r){if(this.canReturnFloat=()=>null==this.dtype||"float32"===this.dtype,this.min=e,this.range=t-e,this.dtype=n,"number"==typeof(r=null==r?Math.random():r)&&(r=r.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${e} - ${t} <= 1 and dtype is not float`);this.random=Jt.alea(r)}convertValue(e){return this.canReturnFloat()?e:Math.round(e)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}const nn=(0,ge.op)({randomUniform_:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e,t=0,n=1,r="float32",a){const o=(0,Qt.f)(e,r),s=new tn(t,n,null,a);for(let e=0;e<o.values.length;e++)o.values[e]=s.nextValue();return o.toTensor()}});var rn=n(7245);const an=(0,ge.op)({truncatedNormal_:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e,t=0,n=1,r,a){if(null!=r&&"bool"===r)throw new Error("Unsupported data type $ { dtype }");const o=new en(t,n,r,!0,a),s=(0,Qt.f)(e,r);for(let e=0;e<s.values.length;e++)s.values[e]=o.nextValue();return s.toTensor()}});var on=n(9640),sn=n(6577);
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const un=(e,t,n)=>{switch(e.op){case"Fill":var r=ue("shape",e,t,n),a=ue("dtype",e,t,n),o=ue("value",e,t,n);return[Xt.h(r,o,a)];case"LinSpace":return[
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e,t,n){if(n<=0)throw new Error("The number of values should be positive.");return de.BV.runKernel(he.e7,{},{start:e,stop:t,num:n})}(ue("start",e,t,n),ue("stop",e,t,n),ue("num",e,t,n))];case"Multinomial":var s=ue("logits",e,t,n),i=ue("numSamples",e,t,n),u=ue("seed",e,t,n);return[qt(s,i,u)];case"OneHot":var s=ue("indices",e,t,n),i=ue("depth",e,t,n),u=ue("onValue",e,t,n),l=ue("offValue",e,t,n);return[Kt.l(s,i,u,l)];case"Ones":return[Zt.i(ue("shape",e,t,n),ue("dtype",e,t,n))];case"OnesLike":return[Yt.J(ue("x",e,t,n))];case"RandomUniform":return[nn(ue("shape",e,t,n),ue("minval",e,t,n),ue("maxval",e,t,n),ue("dtype",e,t,n))];case"Range":var c=ue("start",e,t,n),p=ue("stop",e,t,n),d=ue("step",e,t,n);return[rn.w(c,p,d,ue("dtype",e,t,n))];case"TruncatedNormal":l=ue("shape",e,t,n),c=ue("mean",e,t,n),p=ue("stdDev",e,t,n),d=ue("seed",e,t,n);return[an(l,c,p,ue("dtype",e,t,n),d)];case"Zeros":return[on.l(ue("shape",e,t,n),ue("dtype",e,t,n))];case"ZerosLike":return[sn.P(ue("x",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}};var ln=n(5139),cn=n(8333);const pn=
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
async function(e){const t=(0,fe._1)(e,"condition","whereAsync","bool");var n=await t.data(),n=(0,cn.Z)(t.shape,n);return e!==t&&t.dispose(),n};var dn=n(4077);const hn=
/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
async function(e,t){const n=(0,fe._1)(e,"x","setdiff1d"),r=(0,fe._1)(t,"y","setdiff1d");me.hu(n.dtype===r.dtype,()=>`x and y should have the same dtype, but got x (${n.dtype}) and y (${r.dtype}).`),me.hu(1===n.rank,()=>`x should be 1D tensor, but got x (${n.shape}).`),me.hu(1===r.rank,()=>`y should be 1D tensor, but got y (${r.shape}).`);var a=await n.data(),t=await r.data();const o=new Set(t);let s=0;for(let e=0;e<a.length;e++)o.has(a[e])||s++;const i=new dn.YD([s],n.dtype),u=new dn.YD([s],"int32");for(let e=0,t=0;e<a.length;e++)o.has(a[e])||(i.values[t]=a[e],u.values[t]=e,t++);return[i.toTensor(),u.toTensor()]};
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function fn(e,t,n){return{boxes:ue("boxes",e,t,n),scores:ue("scores",e,t,n),maxOutputSize:ue("maxOutputSize",e,t,n),iouThreshold:ue("iouThreshold",e,t,n),scoreThreshold:ue("scoreThreshold",e,t,n),softNmsSigma:ue("softNmsSigma",e,t,n)}}var mn=n(3243),gn=n(9608);var yn=n(6092),vn=n(9494);
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class xn{constructor(e,t){this.keyDType=e,this.valueDType=t,this.handle=(0,ie.iD$)(0),this.tensorMap=new Map,(0,ie.CnY)(this.handle)}get id(){return this.handle.id}clearAndClose(){this.tensorMap.forEach(e=>e.dispose()),this.tensorMap.clear(),this.handle.dispose()}size(){return this.tensorMap.size}async import(e,o){this.checkKeyAndValueTensor(e,o);const s=await e.data();return this.tensorMap.forEach(e=>e.dispose()),this.tensorMap.clear(),(0,ie.lub)(()=>{var t=(0,ie.HHK)(o);const n=s.length,e=t.length;ie.D5U.assert(n===e,()=>"The number of elements doesn't match, keys has "+`${n} elements, the values has ${e} `+"elements.");for(let e=0;e<n;e++){var r=s[e],a=t[e];(0,ie.CnY)(a),this.tensorMap.set(r,a)}return this.handle})}async find(e,r){this.checkKeyAndValueTensor(e,r);const a=await e.data();return(0,ie.lub)(()=>{const t=[];for(let e=0;e<a.length;e++){var n=a[e],n=this.findWithDefault(n,r);t.push(n)}return(0,ie.knu)(t)})}findWithDefault(e,t){e=this.tensorMap.get(e);return null!=e?e:t}checkKeyAndValueTensor(e,t){if(e.dtype!==this.keyDType)throw new Error(`Expect key dtype ${this.keyDType}, but got `+`${e.dtype}`);if(t.dtype!==this.valueDType)throw new Error(`Expect value dtype ${this.valueDType}, but got `+`${t.dtype}`)}}var bn=n(6477),wn=n(6500),kn=n(636),In=n(7630),Nn=n(6573),$n=n(624),Cn=n(2856),Sn=n(8651),Tn=n(5750),En=n(5912);var Rn=n(9065);var Dn=n(7505),An=n(9648),_n=n(682),On=n(1510);const Fn=(0,ge.op)({sparseToDense_:
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e,t,n,r=0){return e=(0,fe._1)(e,"sparseIndices","sparseToDense","int32"),t=(0,fe._1)(t,"sparseValues","sparseToDense"),r=(0,fe._1)(r,"defaultValue","sparseToDense",t.dtype),function(e,t,n,r){if("int32"!==e.dtype)throw new Error("tf.sparseToDense() expects the indices to be int32 type,"+` but the dtype was ${e.dtype}.`);if(2<e.rank)throw new Error("sparseIndices should be a scalar, vector, or matrix,"+` but got shape ${e.shape}.`);var a=0<e.rank?e.shape[0]:1,e=1<e.rank?e.shape[1]:1;if(n.length!==e)throw new Error("outputShape has incorrect number of elements:,"+` ${n.length}, should be: ${e}.`);if(e=t.size,0!==t.rank&&(1!==t.rank||e!==a))throw new Error("sparseValues has incorrect shape "+`${t.shape}, should be [] or [${a}]`);if(t.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}(e,t,n,r),de.BV.runKernel(he.D2,{sparseIndices:e,sparseValues:t,defaultValue:r},{outputShape:n})}});var Bn=n(3307),Pn=n(5130),Mn=n(5735),Ln=n(5475),Vn=n(781),Un=n(2998),Wn=n(47),zn=n(7394),Gn=n(7405);const Hn=(0,ge.op)({bincount_:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e,t,n){const r=(0,fe._1)(e,"x","bincount"),a=(0,fe._1)(t,"weights","bincount");return me.hu("int32"===r.dtype,()=>"Error in bincount: input "+`dtype must be int32, but got ${r.dtype}`),me.hu(0<=n,()=>`size must be non-negative, but got ${n}.`),me.hu(a.size===r.size||0===a.size,()=>"Error in bincount: weights must have the same size as input or"+`0-length, but got input shape: ${r.shape}, weights shape: `+`${a.shape}.`),t={x:r,weights:a},de.BV.runKernel(he.zv,t,{size:n})}});const jn=(0,ge.op)({denseBincount_:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e,t,n,r=!1){const a=(0,fe._1)(e,"x","denseBincount"),o=(0,fe._1)(t,"weights","denseBincount");return me.hu("int32"===a.dtype,()=>"Error in denseBincount: input "+`dtype must be int32, but got ${a.dtype}`),me.hu(a.rank<=2,()=>"Error in denseBincount: input must be at most rank 2, but got "+`rank ${a.rank}.`),me.hu(0<=n,()=>`size must be non-negative, but got ${n}.`),me.hu(o.size===a.size||0===o.size,()=>"Error in denseBincount: weights must have the same shape as x or "+`0-length, but got x shape: ${a.shape}, weights shape: `+`${o.shape}.`),t={x:a,weights:o},de.BV.runKernel(he.QR,t,{size:n,binaryOutput:r})}});var Xn=n(6884),qn=n(4926),Kn=n(7486),Zn=n(2676),Yn=n(5158),Qn=n(9590),Jn=n(2991),er=n(4136),tr=n(7501),nr=n(8644),rr=n(3028);const ar=(0,ge.op)({scatterND_:
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e,t,n){return e=(0,fe._1)(e,"indices","scatterND","int32"),t=(0,fe._1)(t,"updates","scatterND"),rr.b0(t,e,n),de.BV.runKernel(he.xQ,{indices:e,updates:t},{shape:n})}});const or=(0,ge.op)({gatherND_:
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e,t){return t=(0,fe._1)(t,"indices","gatherND","int32"),e=(0,fe._1)(e,"x","gatherND"),de.BV.runKernel(he.q1,{params:e,indices:t})}});var sr=n(7020),ir=n(8447),ur=n(3710),lr=n(4415);var cr=n(1300),pr=n(1483),dr=n(9682),hr=n(7918),fr=n(8441),mr=n(9112),gr=n(8247);
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function yr(e,t,n,a){const r=((e,t,n)=>{switch(e.category){case"arithmetic":return ie.lub(()=>((e,t,n)=>{switch(e.op){case"BiasAdd":case"AddV2":case"Add":return[pe.I(ue("a",e,t,n),ue("b",e,t,n))];case"AddN":return[ye(ue("tensors",e,t,n))];case"FloorMod":case"Mod":return[ve.w(ue("a",e,t,n),ue("b",e,t,n))];case"Mul":return[xe.d(ue("a",e,t,n),ue("b",e,t,n))];case"RealDiv":case"Div":return[be.h(ue("a",e,t,n),ue("b",e,t,n))];case"DivNoNan":return[we.N(ue("a",e,t,n),ue("b",e,t,n))];case"FloorDiv":return[ke.q(ue("a",e,t,n),ue("b",e,t,n))];case"Sub":return[Ie.l(ue("a",e,t,n),ue("b",e,t,n))];case"Minimum":return[Ne.L(ue("a",e,t,n),ue("b",e,t,n))];case"Maximum":return[$e.g(ue("a",e,t,n),ue("b",e,t,n))];case"Pow":return[Ce.s(ue("a",e,t,n),ue("b",e,t,n))];case"SquaredDifference":return[Se.$(ue("a",e,t,n),ue("b",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n));case"basic_math":return ie.lub(()=>((e,t,n)=>{switch(e.op){case"Abs":case"ComplexAbs":return[Te.W(ue("x",e,t,n))];case"Acos":return[Ee.K(ue("x",e,t,n))];case"Acosh":return[Re._(ue("x",e,t,n))];case"Asin":return[De.Z(ue("x",e,t,n))];case"Asinh":return[Ae.V(ue("x",e,t,n))];case"Atan":return[_e.z(ue("x",e,t,n))];case"Atan2":return[Oe.f(ue("x",e,t,n),ue("y",e,t,n))];case"Atanh":return[Fe.C(ue("x",e,t,n))];case"Ceil":return[Be.m(ue("x",e,t,n))];case"Complex":return[Pe.P(ue("real",e,t,n),ue("imag",e,t,n))];case"Cos":return[Me.m(ue("x",e,t,n))];case"Cosh":return[Le.f(ue("x",e,t,n))];case"Elu":return[Ve.p(ue("x",e,t,n))];case"Erf":return[Ue.q(ue("x",e,t,n))];case"Exp":return[We.Q(ue("x",e,t,n))];case"Expm1":return[ze.t(ue("x",e,t,n))];case"Floor":return[Ge.G(ue("x",e,t,n))];case"Log":return[He.c(ue("x",e,t,n))];case"Log1p":return[je.K(ue("x",e,t,n))];case"Imag":return[Xe.a(ue("x",e,t,n))];case"Neg":return[qe.W(ue("x",e,t,n))];case"Reciprocal":return[Ke.M(ue("x",e,t,n))];case"Real":return[Ze.k(ue("x",e,t,n))];case"Relu":return[Ye.U(ue("x",e,t,n))];case"Round":return[Qe.N(ue("x",e,t,n))];case"Selu":return[Je.U(ue("x",e,t,n))];case"Sigmoid":return[et.X(ue("x",e,t,n))];case"Sin":return[tt.O(ue("x",e,t,n))];case"Sign":return[nt.X(ue("x",e,t,n))];case"Sinh":return[rt.R(ue("x",e,t,n))];case"Softplus":return[at.W(ue("x",e,t,n))];case"Sqrt":return[ot._(ue("x",e,t,n))];case"Square":return[st.h(ue("x",e,t,n))];case"Tanh":return[it.A(ue("x",e,t,n))];case"Tan":return[ut.O(ue("x",e,t,n))];case"ClipByValue":return[lt.i(ue("x",e,t,n),ue("clipValueMin",e,t,n),ue("clipValueMax",e,t,n))];case"Relu6":return[ct.b(ue("x",e,t,n))];case"Rsqrt":return[pt.b(le(e.inputNames[0],t,n))];case"Prod":return[dt.W(ue("x",e,t,n),ue("axes",e,t,n))];case"LeakyRelu":return[ht.h(ue("x",e,t,n),ue("alpha",e,t,n))];case"Prelu":return[ft.A(ue("x",e,t,n),ue("alpha",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n));case"control":return vt(e,t,n);case"convolution":return ie.lub(()=>((e,t,n)=>{switch(e.op){case"Conv1D":var r=ue("stride",e,t,n),a=ue("pad",e,t,n),o=ue("dataFormat",e,t,n).toUpperCase(),s=ue("dilation",e,t,n);return[xt.P(ue("x",e,t,n),ue("filter",e,t,n),r,a,o,s)];case"Conv2D":r=ue("strides",e,t,n),a=D(e,t,n),o=ue("dataFormat",e,t,n).toUpperCase(),s=ue("dilations",e,t,n);return[bt.T(ue("x",e,t,n),ue("filter",e,t,n),[r[1],r[2]],a,o,[s[1],s[2]])];case"_FusedConv2D":var{stride:i,pad:u,dataFormat:l,dilations:c,biasArg:p,preluArg:d,activationFunc:h,leakyreluAlpha:f}=jt(e,t,n);return[Et({x:ue("x",e,t,n),filter:ue("filter",e,t,n),strides:[i[1],i[2]],pad:u,dataFormat:l,dilations:[c[1],c[2]],bias:p,activation:h,preluActivationWeights:d,leakyreluAlpha:f})];case"FusedDepthwiseConv2dNative":var{stride:i,pad:u,dataFormat:l,dilations:c,biasArg:p,preluArg:h,activationFunc:d,leakyreluAlpha:f}=jt(e,t,n);return[_t({x:ue("x",e,t,n),filter:ue("filter",e,t,n),strides:[i[1],i[2]],pad:u,dataFormat:l,dilations:[c[1],c[2]],bias:p,activation:d,preluActivationWeights:h,leakyreluAlpha:f})];case"Conv2DBackpropInput":case"Conv2dTranspose":var m=ue("outputShape",e,t,n),g=ue("strides",e,t,n),y=D(e,t,n);return[Bt.b(ue("x",e,t,n),ue("filter",e,t,n),m,[g[1],g[2]],y)];case"DepthwiseConv2dNative":case"DepthwiseConv2d":var m=ue("strides",e,t,n),g=D(e,t,n),v=ue("dilations",e,t,n),y=ue("dataFormat",e,t,n).toUpperCase();return[Rt.B(ue("input",e,t,n),ue("filter",e,t,n),[m[1],m[2]],g,y,[v[1],v[2]])];case"Conv3D":var v=ue("strides",e,t,n),x=ue("pad",e,t,n),b=ue("dataFormat",e,t,n).toUpperCase(),w=ue("dilations",e,t,n);return[Pt(ue("x",e,t,n),ue("filter",e,t,n),[v[1],v[2],v[3]],x,b,[w[1],w[2],w[3]])];case"AvgPool":x=ue("strides",e,t,n),b=ue("pad",e,t,n),w=ue("kernelSize",e,t,n);return[Mt.w(ue("x",e,t,n),[w[1],w[2]],[x[1],x[2]],b)];case"MaxPool":var k=ue("strides",e,t,n),I=ue("pad",e,t,n),N=ue("kernelSize",e,t,n);return[Lt._(ue("x",e,t,n),[N[1],N[2]],[k[1],k[2]],I)];case"MaxPoolWithArgmax":var N=ue("strides",e,t,n),k=ue("pad",e,t,n),I=ue("kernelSize",e,t,n),$=ue("includeBatchInIndex",e,t,n),{result:k,indexes:$}=Vt(ue("x",e,t,n),[I[1],I[2]],[N[1],N[2]],k,$);return[k,$];case"AvgPool3D":var C=ue("strides",e,t,n),S=ue("pad",e,t,n),$=ue("kernelSize",e,t,n);return[zt(ue("x",e,t,n),[$[1],$[2],$[3]],[C[1],C[2],C[3]],S)];case"MaxPool3D":var T=ue("strides",e,t,n),E=ue("pad",e,t,n),R=ue("kernelSize",e,t,n);return[Gt(ue("x",e,t,n),[R[1],R[2],R[3]],[T[1],T[2],T[3]],E)];case"Dilation2D":C=ue("strides",e,t,n),S=ue("pad",e,t,n),R=ue("dilations",e,t,n),T=C[1],E=C[2],C=R[1],R=R[2];return[Ht.W(ue("x",e,t,n),ue("filter",e,t,n),[T,E],S,[C,R],"NHWC")];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n));case"creation":return ie.lub(()=>un(e,t,n));case"dynamic":return(async(e,t,n)=>{switch(e.op){case"NonMaxSuppressionV5":var{boxes:r,scores:a,maxOutputSize:o,iouThreshold:s,scoreThreshold:i,softNmsSigma:u}=fn(e,t,n),i=await ln.BHj.nonMaxSuppressionWithScoreAsync(r,a,o,s,i,u);return[i.selectedIndices,i.selectedScores];case"NonMaxSuppressionV4":var{boxes:u,scores:i,maxOutputSize:l,iouThreshold:c,scoreThreshold:p}=fn(e,t,n),d=ue("padToMaxOutputSize",e,t,n),l=await ln.BHj.nonMaxSuppressionPaddedAsync(u,i,l,c,p,d);return[l.selectedIndices,l.validOutputs];case"NonMaxSuppressionV3":case"NonMaxSuppressionV2":var{boxes:c,scores:p,maxOutputSize:d,iouThreshold:l,scoreThreshold:h}=fn(e,t,n);return[await ln.BHj.nonMaxSuppressionAsync(c,p,d,l,h)];case"Where":{const f=Wt.p(ue("condition",e,t,n),"bool");h=[await pn(f)];return f.dispose(),h}case"ListDiff":return hn(ue("x",e,t,n),ue("y",e,t,n));default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n);case"evaluation":return ie.lub(()=>((e,t,n)=>{switch(e.op){case"TopKV2":var r=ue("x",e,t,n),a=ue("k",e,t,n),o=ue("sorted",e,t,n),o=mn.h(r,a,o);return[o.values,o.indices];case"Unique":var s=ue("x",e,t,n),i=gn.T(s);return[i.values,i.indices];case"UniqueV2":s=ue("x",e,t,n),i=ue("axis",e,t,n),i=gn.T(s,i);return[i.values,i.indices];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n));case"image":return ie.lub(()=>((e,t,n)=>{switch(e.op){case"ResizeBilinear":var r=ue("images",e,t,n),a=ue("size",e,t,n),o=ue("alignCorners",e,t,n),s=ue("halfPixelCenters",e,t,n);return[ln.BHj.resizeBilinear(r,[a[0],a[1]],o,s)];case"ResizeNearestNeighbor":var i=ue("images",e,t,n),u=ue("size",e,t,n),l=ue("alignCorners",e,t,n),c=ue("halfPixelCenters",e,t,n);return[ln.BHj.resizeNearestNeighbor(i,[u[0],u[1]],l,c)];case"CropAndResize":o=ue("image",e,t,n),s=ue("boxes",e,t,n),i=ue("boxInd",e,t,n),u=ue("cropSize",e,t,n),l=ue("method",e,t,n),c=ue("extrapolationValue",e,t,n);return[ln.BHj.cropAndResize(o,s,i,u,l,c)];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n));case"graph":return ie.lub(()=>((e,t,n)=>{switch(e.op){case"Const":return t[e.name];case"PlaceholderWithDefault":var r=ue("default",e,t,n);return[le(e.name,t,n)||r];case"Placeholder":return[le(e.name,t,n)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":return[ce(ue("x",e,t,n))];case"IdentityN":return ue("x",e,t,n).map(e=>ce(e));case"Snapshot":return[ce(ue("x",e,t,n))];case"Shape":return[yn.R(ue("x",e,t,n).shape,"int32")];case"ShapeN":return ue("x",e,t,n).map(e=>yn.R(e.shape));case"Size":return[vn.i(ue("x",e,t,n).size,"int32")];case"Rank":return[vn.i(ue("x",e,t,n).rank,"int32")];case"NoOp":return[vn.i(1)];case"Print":var a=ue("x",e,t,n);const s=ue("data",e,t,n);var r=ue("message",e,t,n),o=ue("summarize",e,t,n);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(r);for(let e=0;e<s.length;e++)console.log(Array.prototype.slice.call(s[e].dataSync()).slice(0,o));return[a];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n));case"logical":return ie.lub(()=>((e,t,n)=>{switch(e.op){case"Equal":return[bn.D(ue("a",e,t,n),ue("b",e,t,n))];case"NotEqual":return[wn.Q(ue("a",e,t,n),ue("b",e,t,n))];case"Greater":return[kn.p(ue("a",e,t,n),ue("b",e,t,n))];case"GreaterEqual":return[In.b(ue("a",e,t,n),ue("b",e,t,n))];case"Less":return[Nn.d(ue("a",e,t,n),ue("b",e,t,n))];case"LessEqual":return[$n.z(ue("a",e,t,n),ue("b",e,t,n))];case"LogicalAnd":return[Cn.H(ue("a",e,t,n),ue("b",e,t,n))];case"LogicalNot":return[Sn.h(ue("a",e,t,n))];case"LogicalOr":return[Tn.K(ue("a",e,t,n),ue("b",e,t,n))];case"Select":case"SelectV2":return[En.a(ue("condition",e,t,n),ue("a",e,t,n),ue("b",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n));case"matrices":return ie.lub(()=>((e,t,n)=>{switch(e.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[Ot.O(ue("a",e,t,n),ue("b",e,t,n),ue("transposeA",e,t,n),ue("transposeB",e,t,n))];case"Transpose":return[Rn.p(ue("x",e,t,n),ue("perm",e,t,n))];case"_FusedMatMul":var[r,a]=ue("fusedOps",e,t,n),o="biasadd"===r,s="prelu"===a,i=ue("numArgs",e,t,n),r=ue("leakyreluAlpha",e,t,n);if(o){if(s&&2!==i)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!s&&1!==i)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}var[s,i]=ue("args",e,t,n);return[Ft({a:ue("a",e,t,n),b:ue("b",e,t,n),transposeA:ue("transposeA",e,t,n),transposeB:ue("transposeB",e,t,n),bias:s,activation:a,preluActivationWeights:i,leakyreluAlpha:r})];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n));case"normalization":return ie.lub(()=>((e,t,n)=>{switch(e.op){case"FusedBatchNorm":case"FusedBatchNormV2":case"FusedBatchNormV3":return[Dn.t(ue("x",e,t,n),ue("mean",e,t,n),ue("variance",e,t,n),ue("offset",e,t,n),ue("scale",e,t,n),ue("epsilon",e,t,n))];case"LRN":return[An.G(ue("x",e,t,n),ue("radius",e,t,n),ue("bias",e,t,n),ue("alpha",e,t,n),ue("beta",e,t,n))];case"Softmax":return[_n.X(ue("x",e,t,n))];case"LogSoftmax":return[On.C(ue("x",e,t,n))];case"SparseToDense":return[Fn(ue("sparseIndices",e,t,n),ue("outputShape",e,t,n),ue("sparseValues",e,t,n),ue("defaultValue",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n));case"reduction":return ie.lub(()=>((e,t,n)=>{switch(e.op){case"Max":var r=ue("axis",e,t,n),a=ue("keepDims",e,t,n);return[Bn.F(ue("x",e,t,n),r,a)];case"Mean":r=ue("axis",e,t,n),a=ue("keepDims",e,t,n);return[Pn.J(ue("x",e,t,n),r,a)];case"Min":var o=ue("axis",e,t,n),s=ue("keepDims",e,t,n);return[Mn.V(ue("x",e,t,n),o,s)];case"Sum":o=ue("axis",e,t,n),s=ue("keepDims",e,t,n);return[Ln.S(ue("x",e,t,n),o,s)];case"All":var i=ue("axis",e,t,n),u=ue("keepDims",e,t,n);return[Vn.$(ue("x",e,t,n),i,u)];case"Any":i=ue("axis",e,t,n),u=ue("keepDims",e,t,n);return[Un.Y(ue("x",e,t,n),i,u)];case"ArgMax":var l=ue("axis",e,t,n);return[Wn.N(ue("x",e,t,n),l)];case"ArgMin":l=ue("axis",e,t,n);return[zn.v(ue("x",e,t,n),l)];case"Prod":var c=ue("axis",e,t,n),p=ue("keepDims",e,t,n);return[dt.W(ue("x",e,t,n),c,p)];case"Cumsum":var c=ue("axis",e,t,n),p=ue("exclusive",e,t,n),d=ue("reverse",e,t,n);return[Gn.z(ue("x",e,t,n),c,p,d)];case"Bincount":var h=ue("x",e,t,n),f=ue("weights",e,t,n),m=ue("size",e,t,n);return[Hn(h,f,m)];case"DenseBincount":d=ue("x",e,t,n),h=ue("weights",e,t,n),f=ue("size",e,t,n),m=ue("binaryOutput",e,t,n);return[jn(d,h,f,m)];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n));case"slice_join":return ie.lub(()=>((o,s,i)=>{switch(o.op){case"ConcatV2":case"Concat":{var t=ue("n",o,s,i),n=ue("axis",o,s,i);let e=ue("tensors",o,s,i);return e=e.slice(0,t),[Xn.z(e,n)]}case"Gather":var n=ue("x",o,s,i),e=ue("indices",o,s,i);return[qn.I(n,Wt.p(e,"int32"),0)];case"GatherV2":var r=ue("axis",o,s,i),a=ue("batchDims",o,s,i),e=ue("x",o,s,i),u=ue("indices",o,s,i);return[qn.I(e,Wt.p(u,"int32"),r,a)];case"Reverse":{var l=ue("dims",o,s,i);const I=[];for(let e=0;e<l.length;e++)l[e]&&I.push(e);var c=ue("x",o,s,i);return[Kn.G(c,I)]}case"ReverseV2":var p=ue("axis",o,s,i),d=ue("x",o,s,i);return[Kn.G(d,p)];case"Slice":var h=ue("begin",o,s,i),f=ue("size",o,s,i);return[Zn.t(ue("x",o,s,i),h,f)];case"StridedSlice":var u=ue("begin",o,s,i),r=ue("end",o,s,i),a=ue("strides",o,s,i),c=ue("beginMask",o,s,i),d=ue("endMask",o,s,i),p=ue("ellipsisMask",o,s,i),h=ue("newAxisMask",o,s,i),m=ue("shrinkAxisMask",o,s,i),f=ue("x",o,s,i);return[Yn.N(f,u,r,a,c,d,p,h,m)];case"Pack":return(0,ie.lub)(()=>{var e=ue("axis",o,s,i);const t=ue("tensors",o,s,i),n=t[0].shape,r=Qn.L(t[0]).shape;var a=t.map(e=>{var t=ie.D5U.arraysEqual(e.shape,n);if(!t&&!ie.D5U.arraysEqual(Qn.L(e).shape,r))throw new Error("the input tensors shape does not match");return t?e:Tt.X(e,n)});return[Jn.k(a,e)]});case"Unpack":var g=ue("axis",o,s,i),m=ue("tensor",o,s,i);return er.H(m,g);case"Tile":var y=ue("reps",o,s,i);return[tr.G(ue("x",o,s,i),y)];case"Split":case"SplitV":var v=ue("axis",o,s,i),g=ue("numOrSizeSplits",o,s,i),y=ue("x",o,s,i);return nr.V(y,g,v);case"ScatterNd":var v=ue("indices",o,s,i),x=ue("values",o,s,i),b=ue("shape",o,s,i);return[ar(v,x,b)];case"GatherNd":var w=ue("x",o,s,i),k=ue("indices",o,s,i);return[or(w,k)];case"SparseToDense":x=ue("sparseIndices",o,s,i),b=ue("outputShape",o,s,i),w=ue("sparseValues",o,s,i),k=ue("defaultValue",o,s,i);return[Fn(x,w,b,w.dtype===k.dtype?k:Wt.p(k,w.dtype))];default:throw TypeError(`Node type ${o.op} is not implemented`)}})(e,t,n));case"spectral":return ie.lub(()=>((e,t,n)=>{switch(e.op){case"FFT":return[sr.k(ue("x",e,t,n))];case"IFFT":return[ir.S(ue("x",e,t,n))];case"RFFT":return[ur.Q(ue("x",e,t,n))];case"IRFFT":return[lr.w(ue("x",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n));case"transformation":return ie.lub(()=>((e,t,n)=>{switch(e.op){case"Cast":return[Wt.p(ue("x",e,t,n),ue("dtype",e,t,n))];case"ExpandDims":var r=ue("axis",e,t,n);return[cr.d(ue("x",e,t,n),r)];case"Squeeze":var a=ue("axis",e,t,n);return[Qn.L(ue("x",e,t,n),a)];case"Reshape":return[Tt.X(ue("x",e,t,n),ue("shape",e,t,n))];case"MirrorPad":return[pr.V(ue("x",e,t,n),ue("padding",e,t,n),ue("mode",e,t,n))];case"PadV2":case"Pad":return[dr.v(ue("x",e,t,n),ue("padding",e,t,n),ue("constantValue",e,t,n))];case"SpaceToBatchND":r=ue("blockShape",e,t,n),a=ue("paddings",e,t,n);return[hr.f(ue("x",e,t,n),r,a)];case"BatchToSpaceND":var o=ue("blockShape",e,t,n),s=ue("crops",e,t,n);return[fr.E(ue("x",e,t,n),o,s)];case"DepthToSpace":o=ue("blockSize",e,t,n),s=ue("dataFormat",e,t,n).toUpperCase();return[mr.n(ue("x",e,t,n),o,s)];case"BroadcastTo":return[gr.U(ue("x",e,t,n),ue("shape",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n));case"hash_table":return(async(e,t,n,r)=>{switch(e.op){case"HashTable":case"HashTableV2":var a=ue("keyDType",e,t,n),o=ue("valueDType",e,t,n),o=new xn(a,o);return r.addHashTable(e.name,o),[o.handle];case"LookupTableImport":case"LookupTableImportV2":{var s=ue("tableHandle",e,t,n,r),i=ue("keys",e,t,n),u=ue("values",e,t,n);const l=r.getHashTableById(s.id);return[await l.import(i,u)]}case"LookupTableFind":case"LookupTableFindV2":{s=ue("tableHandle",e,t,n,r),i=ue("keys",e,t,n),u=ue("defaultValue",e,t,n);const c=r.getHashTableById(s.id);return[await c.find(i,u)]}default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n,a);case"custom":const r=k(e.op);if(r&&r.customExecutor)return r.customExecutor(new se(e,t,n));throw TypeError(`Custom op ${e.op} is not registered.`);default:throw TypeError(`Unknown op '${e.op}'. File an issue at `+"https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()")}})(e,t,n);return ie.D5U.isPromise(r)?r.then(e=>[].concat(e)):[].concat(r)}class vr{constructor(e={},t={},n={},r={}){this.weightMap=e,this.tensorArrayMap=t,this.tensorListMap=n,this.functionMap=r,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}newFrame(e,t){return{id:e,frameName:t,iterationId:0}}set currentContext(e){this.contexts!==e&&(this.contexts=e,this.generateCurrentContextIds())}get currentContext(){return this.contexts}get currentContextId(){return this._currentContextIds[0]}get currentContextIds(){return this._currentContextIds}generateCurrentContextIds(){const t=[];for(let e=0;e<this.contexts.length-1;e++){var n=this.contexts.slice(0,this.contexts.length-e);t.push(this.contextIdforContexts(n))}t.push(""),this._currentContextIds=t}contextIdforContexts(e){return e?e.map(e=>0===e.id&&0===e.iterationId?"":`${e.frameName}-${e.iterationId}`).join("/"):""}enterFrame(e){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,e)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}exitFrame(){if(!(this.contexts&&1<this.contexts.length))throw new Error("Cannot exit frame, the context is empty");this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift()}nextIteration(){if(!(this.contexts&&0<this.contexts.length))throw new Error("Cannot increase frame iteration, the context is empty");{this.contexts=this.contexts.slice(),this.lastId++;const e=Object.assign({},this.contexts[this.contexts.length-1]);e.iterationId+=1,e.id=this.lastId,this.contexts.splice(-1,1,e),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}}getWeight(e){return this.weightMap[e]}addTensorArray(e){this.tensorArrayMap[e.id]=e}getTensorArray(e){return this.tensorArrayMap[e]}addTensorList(e){this.tensorListMap[e.id]=e}getTensorList(e){return this.tensorListMap[e]}dispose(e){for(const t in this.tensorArrayMap)this.tensorArrayMap[t].clearAndClose(e);for(const n in this.tensorListMap)this.tensorListMap[n].clearAndClose(e)}}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function xr(e,t,n,r){const a=new Set,o=[];let s=null,i=null;const u=new Set,l=Object.keys(e).map(e=>$(e)[0]);let c=[];null!=r&&(c=r.map(e=>$(e.name)[0]));const p=[...t];for(;0<p.length;){const h=p.pop();(Ir(h)||(d=h,0<=wr.indexOf(d.op))||(d=h,0<=kr.indexOf(d.op)))&&null==s&&(s=h,i=s.children.map(e=>e.name).filter(e=>a.has(e))),a.add(h.name),null==n[h.name]&&-1===l.indexOf(h.name)&&-1===c.indexOf(h.name)&&(0!==h.inputs.length?h.inputs.forEach(e=>{u.has(e.name)||(u.add(e.name),p.push(e))}):o.push(h.name))}var d;return{inputs:e,outputs:t,usedNodes:a,missingInputs:o,dynamicNode:s,syncInputs:i}}const br=["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"],wr=["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"],kr=["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2"];function Ir(e){return 0<=br.indexOf(e.op)}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class Nr{constructor(t,e){this.graph=t,this.parent=e,this.compiledMap=new Map,this._weightMap={},this.SEPERATOR=",",this._functions={},this._functionExecutorMap={},this._outputs=t.outputs,this._inputs=t.inputs,this._initNodes=t.initNodes,this._signature=t.signature,this._functions=t.functions,null!=t.functions&&Object.keys(t.functions).forEach(e=>{this._functionExecutorMap[e]=new Nr(t.functions[e],this)})}get weightIds(){return this.parent?this.parent.weightIds:this._weightIds}get functionExecutorMap(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}get weightMap(){return this.parent?this.parent.weightMap:this._weightMap}set weightMap(t){var e=Object.keys(t).map(e=>t[e].map(e=>e.id));this._weightIds=[].concat(...e),this._weightMap=t}set resourceManager(e){this._resourceManager=e}get inputs(){return this._inputs.map(e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}))}get outputs(){return this._outputs.map(e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}))}get inputNodes(){return this._inputs.map(e=>e.signatureKey||e.name)}get outputNodes(){return this._outputs.map(e=>{var t=e.signatureKey||e.name;return e.defaultOutput?`${t}:${e.defaultOutput}`:t})}get functions(){return Object.keys(this._functions).reduce((e,t)=>(e[t]=this._functions[t].signature,e),{})}getCompilationKey(e,t){const n=e.map(e=>e.name).sort(),r=t.map(e=>e.name).sort();return n.join(this.SEPERATOR)+"--"+r.join(this.SEPERATOR)}compile(e,t){var n=xr(e,t,this.weightMap,this._initNodes),{missingInputs:r,dynamicNode:a,syncInputs:o}=n;if(null!=a)throw new Error(`This execution contains the node '${a.name}', which has `+`the dynamic op '${a.op}'. Please use `+"model.executeAsync() instead. Alternatively, to avoid the "+`dynamic ops, specify the inputs [${o}]`);if(0<r.length){t=t.map(e=>e.name),e=Object.keys(e);throw new Error(`Cannot compute the outputs [${t}] from the provided inputs `+`[${e}]. Missing the following inputs: [${r}]`)}return function(t,e,n){const{usedNodes:r,inputs:a}=n,o=[],s=Object.keys(a).map(e=>$(e)[0]).map(e=>t.nodes[e]),i=t.initNodes;s.forEach(e=>{r.has(e.name)&&o.push(e)}),t.weights.forEach(e=>{r.has(e.name)&&o.push(e)}),null!=i&&i.forEach(e=>{r.has(e.name)&&o.push(e)});const u=new Set,l=[];for(;0<o.length;){const c=o.pop();u.add(c.name),e[c.name]||l.push(c),c.children.forEach(e=>{!u.has(e.name)&&r.has(e.name)&&e.inputs.every(e=>u.has(e.name))&&o.push(e)})}return l}(this.graph,this.weightMap,n)}execute(i,e){i=this.mapInputs(i);const t=Object.keys(i).sort();this.checkInputs(i),this.checkInputShapeAndType(i),e=this.mapOutputs(e),this.checkOutputs(e);var n=t.map(e=>this.graph.nodes[$(e)[0]]);const u=e.map(e=>$(e)[0]);let r=u.map(e=>this.graph.nodes[e]);0===r.length&&(r=this._outputs);n=this.getCompilationKey(n,r);let l=this.compiledMap.get(n);null==l&&(l=this.compile(i,r),this.compiledMap.set(n,l));const c={},p={};return(0,ie.lub)(()=>{const t=new vr(this.weightMap,c,p,this.functionExecutorMap),a=Object.assign({},this.weightMap);Object.keys(i).forEach(e=>{var[t,n]=$(e);const r=[];r[n]=i[e],a[t]=r});var n=this.getFrozenTensorIds(a),r={};for(let e=0;e<l.length;e++){var o=l[e];if(!a[o.name]){var s=yr(o,a,t,this._resourceManager);if(ie.D5U.isPromise(s))throw new Error(`The execution of the op '${o.op}' returned a promise. `+"Please use model.executeAsync() instead.");a[o.name]=s,this.checkTensorForDisposal(o.name,o,a,t,n,u,r)}}return null==this.parent&&t.dispose(n),e.map(e=>le(e,a,t))})}getFrozenTensorIds(t){var e=[].concat.apply([],Object.keys(t).map(e=>t[e]).map(e=>e.map(e=>e.id)));return new Set(e)}checkTensorForDisposal(e,t,n,r,a,o,s){"control"!==t.category&&-1===o.indexOf(e)&&(n[e].forEach(e=>{null!=e&&(s[e.id]=(s[e.id]||0)+t.children.length)}),t.inputs.forEach(e=>{if("control"!==e.category){const t=(e=e.name,n[N(e,r.currentContextId)]);null!=t&&t.forEach(e=>{var t;e&&!a.has(e.id)&&(1===(t=s[e.id])?(e.dispose(),delete s[e.id]):null!=t&&s[e.id]--)})}}))}async executeAsync(e,t){return this._executeAsync(e,t)}async _executeAsync(t,e,n=!1,r={},a={}){n||(t=this.mapInputs(t),this.checkInputs(t),this.checkInputShapeAndType(t),e=this.mapOutputs(e),this.checkOutputs(e));const o=new vr(this.weightMap,r,a,this.functionExecutorMap),s=await this.executeWithControlFlow(t,o,e,n),i=e.map(e=>le(e,s,o));n=i.map(e=>e.id),e=Object.keys(t).map(e=>t[e].id);const u=new Set([...n,...e,...this.weightIds]);return Object.keys(s).forEach(e=>{const t=s[e];t.forEach(e=>{!e||e.isDisposed||u.has(e.id)||e.dispose()})}),null==this.parent&&o.dispose(u),i}async executeFunctionAsync(e,t,n){e=e.reduce((e,t,n)=>(e[this.inputs[n].name]=t,e),{});return this._executeAsync(e,this.outputNodes,!0,t,n)}async executeWithControlFlow(a,t,n,r){const o=Object.keys(a);var e=o.map(e=>this.graph.nodes[$(e)[0]]);const s=n.map(e=>$(e)[0]);let i=s.map(e=>this.graph.nodes[e]);0===i.length&&(i=this._outputs);var{usedNodes:u,missingInputs:l,dynamicNode:c,syncInputs:n}=xr(a,i,this.weightMap,this._initNodes),p=[...e,...this.graph.weights,...this._initNodes||[]].map(e=>({node:e,contexts:t.currentContext}));const d=Object.assign({},this.weightMap);Object.keys(a).forEach(e=>{var[t,n]=$(e);const r=[];r[n]=a[e],d[t]=r});for(var h={},f=this.getFrozenTensorIds(d),m={};0<p.length;){var g=this.processStack(e,p,t,d,m,f,s,h,u);await Promise.all(g)}null!=c||r||console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead.");r=i.filter(e=>!Ir(e)&&!le(e.name,d,t)).map(e=>e.name);if(0<r.length){let e=null!=c?"Alternatively, to avoid the dynamic ops, use model.execute() "+`and specify the inputs [${n}]`:"";throw new Error(`Cannot compute the outputs [${r}] from the provided `+`inputs [${o}]. Consider providing the following inputs: `+`[${l}]. ${e}`)}return d}processStack(e,n,r,a,o,s,i,u,l){const c=[];for(;0<n.length;){const p=n.pop();r.currentContext=p.contexts;let t="";if("Enter"===p.node.op&&ue("isConstant",p.node,a,r)&&([t]=I(p.node.name,r)),null==a[p.node.name]){const d=yr(p.node,a,r,this._resourceManager);t||([t]=I(p.node.name,r));const h=r.currentContext;ie.D5U.isPromise(d)?c.push(d.then(e=>(a[t]=e,r.currentContext=h,this.checkTensorForDisposal(t,p.node,a,r,s,i,u),this.processChildNodes(p.node,n,r,a,o,l),e))):(a[t]=d,this.checkTensorForDisposal(t,p.node,a,r,s,i,u),this.processChildNodes(p.node,n,r,a,o,l))}else this.processChildNodes(p.node,n,r,a,o,l)}return c}processChildNodes(e,n,r,a,o,s){e.children.forEach(e=>{var[t]=I(e.name,r);!o[t]&&s.has(e.name)&&("Merge"===e.op?e.inputNames.some(e=>!!le(e,a,r))&&(o[t]=!0,n.push({contexts:r.currentContext,node:e})):e.inputNames.every(e=>!!le(e,a,r))&&(o[t]=!0,n.push({contexts:r.currentContext,node:e})))})}dispose(){Object.keys(this.weightMap).forEach(e=>this.weightMap[e].forEach(e=>e.dispose()))}checkInputShapeAndType(a){Object.keys(a).forEach(e=>{const t=a[e];var[e]=$(e);const n=this.graph.nodes[e];if(n.attrParams.shape&&n.attrParams.shape.value){const r=n.attrParams.shape.value;e=r.length===t.shape.length&&t.shape.every((e,t)=>-1===r[t]||r[t]===e);ie.D5U.assert(e,()=>`The shape of dict['${n.name}'] provided in `+`model.execute(dict) must be [${r}], but was `+`[${t.shape}]`)}n.attrParams.dtype&&n.attrParams.dtype.value&&ie.D5U.assert(t.dtype===n.attrParams.dtype.value,()=>`The dtype of dict['${n.name}'] provided in `+"model.execute(dict) must be "+`${n.attrParams.dtype.value}, but was ${t.dtype}`)})}mapInputs(e){const t={};for(const r in e){var n;null!=this._signature&&null!=this._signature.inputs&&null!=this._signature.inputs[r]?(n=this._signature.inputs[r],t[n.name]=e[r]):t[r]=e[r]}return t}checkInputs(e){e=Object.keys(e).filter(e=>{var[e]=$(e);return null==this.graph.nodes[e]});if(0<e.length)throw new Error("The dict provided in model.execute(dict) has "+`keys: [${e}] that are not part of graph`)}mapOutputs(e){return e.map(e=>{return null==this._signature||null==this._signature.outputs||null==this._signature.outputs[e]?e:this._signature.outputs[e].name},{})}checkOutputs(e){e.forEach(e=>{var[t]=$(e);if(!this.graph.nodes[t])throw new Error(`The output '${e}' is not found in the graph`)})}}class $r{constructor(e={},t={}){this.hashTableNameToHandle=e,this.hashTableMap=t}addHashTable(e,t){this.hashTableNameToHandle[e]=t.handle,this.hashTableMap[t.id]=t}getHashTableHandleByName(e){return this.hashTableNameToHandle[e]}getHashTableById(e){return this.hashTableMap[e]}dispose(){for(const e in this.hashTableMap)this.hashTableMap[e].clearAndClose(),delete this.hashTableMap[e];for(const t in this.hashTableNameToHandle)this.hashTableNameToHandle[t].dispose(),delete this.hashTableNameToHandle[t]}}class Cr{constructor(e,t={}){this.modelUrl=e,this.loadOptions=t,this.version="n/a",null==t&&(this.loadOptions={}),this.resourceManager=new $r}get modelVersion(){return this.version}get inputNodes(){return this.executor.inputNodes}get outputNodes(){return this.executor.outputNodes}get inputs(){return this.executor.inputs}get outputs(){return this.executor.outputs}get weights(){return this.executor.weightMap}get metadata(){return this.artifacts.userDefinedMetadata}get modelSignature(){return this.signature}findIOHandler(){var e=this.modelUrl;if(null!=e.load)this.handler=e;else if(null!=this.loadOptions.requestInit)this.handler=ie.io.browserHTTPRequest(e,this.loadOptions);else{const t=ie.io.getLoadHandlers(e,this.loadOptions);if(0===t.length)t.push(ie.io.browserHTTPRequest(e,this.loadOptions));else if(1<t.length)throw new Error(`Found more than one (${t.length}) load handlers for `+`URL '${[e]}'`);this.handler=t[0]}}async load(){if(this.findIOHandler(),null==this.handler.load)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");var e=await this.handler.load();return this.loadSync(e)}loadSync(e){this.artifacts=e;var t=this.artifacts.modelTopology;let n;n=(null!=this.artifacts.userDefinedMetadata&&null!=this.artifacts.userDefinedMetadata.signature?this.artifacts.userDefinedMetadata:this.artifacts).signature,this.signature=n,this.version=`${t.versions.producer}.${t.versions.minConsumer}`;var r=ie.io.decodeWeights(this.artifacts.weightData,this.artifacts.weightSpecs);return this.executor=new Nr(H.Instance.transformGraph(t,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(r),this.executor.resourceManager=this.resourceManager,null!=e.modelInitializer&&null!=e.modelInitializer.node&&(e=H.Instance.transformGraph(e.modelInitializer),this.initializer=new Nr(e),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializer.executeAsync({},[])),!0}async save(e,t){if("string"==typeof e){var n=ie.io.getSaveHandlers(e);if(0===n.length)throw new Error(`Cannot find any save handlers for URL '${e}'`);if(1<n.length)throw new Error(`Found more than one (${n.length}) save handlers for `+`URL '${e}'`);e=n[0]}if(null==e.save)throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return e.save(this.artifacts)}predict(e,t){return this.execute(e,this.outputNodes)}normalizeInputs(r){if(!(r instanceof ie.esB||Array.isArray(r)))return r;if((r=Array.isArray(r)?r:[r]).length!==this.inputNodes.length)throw new Error("Input tensor count mismatch,"+`the graph model has ${this.inputNodes.length} placeholders, `+`while there are ${r.length} input tensors.`);return this.inputNodes.reduce((e,t,n)=>(e[t]=r[n],e),{})}normalizeOutputs(e){return e=e||this.outputNodes,Array.isArray(e)?e:[e]}execute(e,t){e=this.normalizeInputs(e),t=this.normalizeOutputs(t);t=this.executor.execute(e,t);return 1<t.length?t:t[0]}async executeAsync(e,t){e=this.normalizeInputs(e),t=this.normalizeOutputs(t);t=await this.executor.executeAsync(e,t);return 1<t.length?t:t[0]}convertTensorMapToTensorsMap(n){return Object.keys(n).reduce((e,t)=>(e[t]=[n[t]],e),{})}dispose(){this.executor.dispose(),this.initializer&&this.initializer.dispose(),this.resourceManager.dispose()}}async function Sr(e,t={}){if(null==e)throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");(t=null==t?{}:t).fromTFHub&&null==e.load&&(e.endsWith("/")||(e+="/"),e=`${e}model.json?tfjs-format=file`);const n=new Cr(e,t);return await n.load(),n}
/**
    * @license
    * Copyright 2020 Google LLC. All Rights Reserved.
    * Licensed under the Apache License, Version 2.0 (the "License");
    * you may not use this file except in compliance with the License.
    * You may obtain a copy of the License at
    *
    * http://www.apache.org/licenses/LICENSE-2.0
    *
    * Unless required by applicable law or agreed to in writing, software
    * distributed under the License is distributed on an "AS IS" BASIS,
    * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    * See the License for the specific language governing permissions and
    * limitations under the License.
    * =============================================================================
    */
var Tr=function(){return(Tr=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};function Er(e,s,i,u){return new(i=i||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function a(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof i?t:new i(function(e){e(t)})).then(r,a)}o((u=u.apply(e,s||[])).next())})}function Rr(n,r){var a,o,s,i={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(a)throw new TypeError("Generator is already executing.");for(;i;)try{if(a=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return i.label++,{value:t[1],done:!1};case 5:i.label++,o=t[1],t=[0];continue;case 7:t=i.ops.pop(),i.trys.pop();continue;default:if(!((s=0<(s=i.trys).length&&s[s.length-1])||6!==t[0]&&2!==t[0])){i=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){i.label=t[1];break}if(6===t[0]&&i.label<s[1]){i.label=s[1],s=t;break}if(s&&i.label<s[2]){i.label=s[2],i.ops.push(t);break}s[2]&&i.ops.pop(),i.trys.pop();continue}t=r.call(n,i)}catch(e){t=[6,e],o=0}finally{a=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}const Dr=e=>({startEndTensor:e,startPoint:(0,ie.tPi)(e,[0,0],[-1,2]),endPoint:(0,ie.tPi)(e,[0,2],[-1,2])}),Ar={strides:[8,16],anchors:[2,6]};function _r(n,r){let e,t,a;if(n.topLeft instanceof ie.esB&&n.bottomRight instanceof ie.esB){const[l,c]=(0,ie.lub)(()=>[(0,ie.zoF)([(0,ie.luU)(r-1,n.topLeft.slice(0,1)),n.topLeft.slice(1,1)]),(0,ie.zoF)([(0,ie.luU)(r-1,n.bottomRight.slice(0,1)),n.bottomRight.slice(1,1)])]);e=l,t=c,null!=n.landmarks&&(a=(0,ie.lub)(()=>{var e=(0,ie.luU)((0,ie.RRF)([r-1,0]),n.landmarks),t=(0,ie.RRF)([1,-1]);return(0,ie.dC7)(e,t)}))}else{var[o,s]=n.topLeft,[i,u]=n.bottomRight;e=[r-1-o,s],t=[r-1-i,u],null!=n.landmarks&&(a=n.landmarks.map(e=>[r-1-e[0],e[1]]))}const l={topLeft:e,bottomRight:t};return null!=a&&(l.landmarks=a),null!=n.probability&&(l.probability=n.probability instanceof ie.esB?n.probability.clone():n.probability),l}function Or(r,a){return(0,ie.lub)(()=>{var e,t,n=r.hasOwnProperty("box")?r.box:r;return e=n,t=a,n=(0,ie.dC7)(e.startPoint,t),t=(0,ie.dC7)(e.endPoint,t),t=(0,ie.Izb)([n,t],1),Dr(t).startEndTensor.squeeze()})}class Fr{constructor(e,t,n,r,a,o){this.blazeFaceModel=e,this.width=t,this.height=n,this.maxFaces=r,this.anchorsData=function(t,n,r){const a=[];for(let e=0;e<r.strides.length;e++){var o=r.strides[e],s=Math.floor((n+o-1)/o),i=Math.floor((t+o-1)/o),u=r.anchors[e];for(let e=0;e<s;e++){const n=o*(e+.5);for(let e=0;e<i;e++){const r=o*(e+.5);for(let e=0;e<u;e++)a.push([r,n])}}}return a}(t,n,Ar),this.anchors=(0,ie.odF)(this.anchorsData),this.inputSizeData=[t,n],this.inputSize=(0,ie.RRF)([t,n]),this.iouThreshold=a,this.scoreThreshold=o}async getBoundingBoxes(l,a,o=!0){const[s,t,i]=(0,ie.lub)(()=>{const e=l.resizeBilinear([this.width,this.height]),t=(0,ie.dC7)((0,ie.luU)(e.div(255),.5),2),n=this.blazeFaceModel.predict(t).squeeze(),r=(o=n,s=this.anchors,i=this.inputSize,u=(0,ie.tPi)(o,[0,1],[-1,2]),u=(0,ie.IHx)(u,s),s=(0,ie.tPi)(o,[0,3],[-1,2]),o=(0,ie.hiC)(s,i),s=(0,ie.hiC)(u,i),u=(0,ie.hiC)(o,2),o=(0,ie.luU)(s,u),u=(0,ie.IHx)(s,u),o=(0,ie.dC7)(o,i),i=(0,ie.dC7)(u,i),(0,ie.Izb)([o,i],1)),a=(0,ie.tPi)(n,[0,0],[-1,1]);var o,s,i,u;return[n,r,(0,ie.XD2)(a).squeeze()]}),e=console.warn;console.warn=()=>{};const n=ie.BHj.nonMaxSuppression(t,i,this.maxFaces,this.iouThreshold,this.scoreThreshold);console.warn=e;const u=await n.array();n.dispose();let c=u.map(e=>(0,ie.tPi)(t,[e,0],[1,-1]));a||(c=await Promise.all(c.map(async e=>{var t=await e.array();return e.dispose(),t})));var r=l.shape[1],p=l.shape[2],r=a?(0,ie.hiC)([p,r],this.inputSize):[p/this.inputSizeData[0],r/this.inputSizeData[1]];const d=[];for(let r=0;r<c.length;r++){const h=c[r],f=(0,ie.lub)(()=>{var e=Dr(h instanceof ie.esB?h:(0,ie.odF)(h));if(!o)return e;var t=u[r],n=a?this.anchors.slice([t,0],[1,2]):this.anchorsData[t];return{box:e,landmarks:(0,ie.tPi)(s,[t,5],[1,-1]).squeeze().reshape([6,-1]),probability:(0,ie.tPi)(i,[t],[1]),anchor:n}});d.push(f)}return t.dispose(),i.dispose(),s.dispose(),{boxes:d,scaleFactor:r}}async estimateFaces(e,t=!1,u=!1,l=!0){const[,c]=(a=e)instanceof ie.esB?[a.shape[0],a.shape[1]]:[a.height,a.width],n=(0,ie.lub)(()=>(e=!(e instanceof ie.esB)?ie.Xhn.fromPixels(e):e).toFloat().expandDims(0)),{boxes:r,scaleFactor:p}=await this.getBoundingBoxes(n,t,l);var a;return n.dispose(),t?r.map(e=>{const t=Or(e,p);let n={topLeft:t.slice([0],[2]),bottomRight:t.slice([2],[2])};if(l){const{landmarks:t,probability:u,anchor:l}=e,c=t.add(l).mul(p);n.landmarks=c,n.probability=u}return u&&(n=_r(n,c)),n}):Promise.all(r.map(async e=>{const t=Or(e,p);let n;if(l){const[u,l,c]=await Promise.all([e.landmarks,t,e.probability].map(async e=>e.array())),a=e.anchor,[o,s]=p,i=u.map(e=>[(e[0]+a[0])*o,(e[1]+a[1])*s]);n={topLeft:l.slice(0,2),bottomRight:l.slice(2),landmarks:i,probability:c},(r=e.box).startEndTensor.dispose(),r.startPoint.dispose(),r.endPoint.dispose(),e.landmarks.dispose(),e.probability.dispose()}else{const e=await t.array();n={topLeft:e.slice(0,2),bottomRight:e.slice(2)}}var r;return t.dispose(),u&&(n=_r(n,c)),n}))}}var Br={silhouette:[10,338,297,332,284,251,389,356,454,323,361,288,397,365,379,378,400,377,152,148,176,149,150,136,172,58,132,93,234,127,162,21,54,103,67,109],lipsUpperOuter:[61,185,40,39,37,0,267,269,270,409,291],lipsLowerOuter:[146,91,181,84,17,314,405,321,375,291],lipsUpperInner:[78,191,80,81,82,13,312,311,310,415,308],lipsLowerInner:[78,95,88,178,87,14,317,402,318,324,308],rightEyeUpper0:[246,161,160,159,158,157,173],rightEyeLower0:[33,7,163,144,145,153,154,155,133],rightEyeUpper1:[247,30,29,27,28,56,190],rightEyeLower1:[130,25,110,24,23,22,26,112,243],rightEyeUpper2:[113,225,224,223,222,221,189],rightEyeLower2:[226,31,228,229,230,231,232,233,244],rightEyeLower3:[143,111,117,118,119,120,121,128,245],rightEyebrowUpper:[156,70,63,105,66,107,55,193],rightEyebrowLower:[35,124,46,53,52,65],rightEyeIris:[473,474,475,476,477],leftEyeUpper0:[466,388,387,386,385,384,398],leftEyeLower0:[263,249,390,373,374,380,381,382,362],leftEyeUpper1:[467,260,259,257,258,286,414],leftEyeLower1:[359,255,339,254,253,252,256,341,463],leftEyeUpper2:[342,445,444,443,442,441,413],leftEyeLower2:[446,261,448,449,450,451,452,453,464],leftEyeLower3:[372,340,346,347,348,349,350,357,465],leftEyebrowUpper:[383,300,293,334,296,336,285,417],leftEyebrowLower:[265,353,276,283,282,295],leftEyeIris:[468,469,470,471,472],midwayBetweenEyes:[168],noseTip:[1],noseBottom:[2],noseRightCorner:[98],noseLeftCorner:[327],rightCheek:[205],leftCheek:[425]};function Pr(e){return[Math.abs(e.endPoint[0]-e.startPoint[0]),Math.abs(e.endPoint[1]-e.startPoint[1])]}function Mr(e){return[e.startPoint[0]+(e.endPoint[0]-e.startPoint[0])/2,e.startPoint[1]+(e.endPoint[1]-e.startPoint[1])/2]}function Lr(e,t){void 0===t&&(t=1.5);var n=Mr(e),r=Pr(e),r=[t*r[0]/2,t*r[1]/2];return{startPoint:[n[0]-r[0],n[1]-r[1]],endPoint:[n[0]+r[0],n[1]+r[1]],landmarks:e.landmarks}}var Vr=[[1,0,0],[0,1,0],[0,0,1]];function Ur(e,t){return[[1,0,e],[0,1,t],[0,0,1]]}function Wr(e,t){for(var n=0,r=0;r<e.length;r++)n+=e[r]*t[r];return n}function zr(e,t){for(var n=[],r=e.length,a=0;a<r;a++){n.push([]);for(var o=0;o<r;o++)n[a].push(Wr(e[a],function(e,t){for(var n=[],r=0;r<e.length;r++)n.push(e[r][t]);return n}(t,o)))}return n}function Gr(e,t){var n=Math.cos(e),e=Math.sin(e),n=zr(Ur(t[0],t[1]),[[n,-e,0],[e,n,0],[0,0,1]]);return zr(n,Ur(-t[0],-t[1]))}var Hr=[13,Br.midwayBetweenEyes[0]],jr=[3,2],n=Br.leftEyeLower0,Xr=[n[0],n[n.length-1]],n=Br.rightEyeLower0,qr=[n[0],n[n.length-1]],Kr=[{key:"EyeUpper0",indices:[9,10,11,12,13,14,15]},{key:"EyeUpper1",indices:[25,26,27,28,29,30,31]},{key:"EyeUpper2",indices:[41,42,43,44,45,46,47]},{key:"EyeLower0",indices:[0,1,2,3,4,5,6,7,8]},{key:"EyeLower1",indices:[16,17,18,19,20,21,22,23,24]},{key:"EyeLower2",indices:[32,33,34,35,36,37,38,39,40]},{key:"EyeLower3",indices:[54,55,56,57,58,59,60,61,62]},{key:"EyebrowUpper",indices:[63,64,65,66,67,68,69,70]},{key:"EyebrowLower",indices:[48,49,50,51,52,53]}];function Zr(e,t,n,r){for(var a=0;a<Kr.length;a++){var o=Kr[a],s=o.key,i=o.indices,u=Br[""+n+s];if(null==r||r.includes(s))for(var l=0;l<i.length;l++){var c=i[l];e[u[l]]=[t[c][0],t[c][1],(t[c][2]+e[u[l]][2])/2]}}}var Yr=(Jr.prototype.transformRawCoords=function(e,t,n,r){var a=this,o=Pr({startPoint:t.startPoint,endPoint:t.endPoint}),s=[o[0]/this.meshWidth,o[1]/this.meshHeight],e=e.map(function(e){return[s[0]*(e[0]-a.meshWidth/2),s[1]*(e[1]-a.meshHeight/2),e[2]]}),i=Gr(n,[0,0]),n=e.map(function(e){return[Wr(t=e,(n=i)[0]),Wr(t,n[1])].concat([e[2]]);var t,n}),r=(e=[[r[0][0],r[1][0]],[r[0][1],r[1][1]]],r=[r[0][2],r[1][2]],r=[-Wr(e[0],r),-Wr(e[1],r)],[e[0].concat(r[0]),e[1].concat(r[1]),[0,0,1]]),t=Mr({startPoint:t.startPoint,endPoint:t.endPoint}).concat([1]),u=[Wr(t,r[0]),Wr(t,r[1])];return n.map(function(e){return[e[0]+u[0],e[1]+u[1],e[2]]})},Jr.prototype.getLeftToRightEyeDepthDifference=function(e){return e[Xr[0]][2]-e[qr[0]][2]},Jr.prototype.getEyeBox=function(e,t,n,r,a){void 0===a&&(a=!1);n=Lr(this.calculateLandmarksBoundingBox([e[n],e[r]]),2.3),e=Mr(n),r=Pr(n),r=Math.max.apply(Math,r)/2,r={startPoint:[e[0]-r,e[1]-r],endPoint:[e[0]+r,e[1]+r],landmarks:n.landmarks},n=Pr(r),t=ie.BHj.cropAndResize(t,[[r.startPoint[1]/this.meshHeight,r.startPoint[0]/this.meshWidth,r.endPoint[1]/this.meshHeight,r.endPoint[0]/this.meshWidth]],[0],[64,64]);return{box:r,boxSize:n,crop:t=a?ie.BHj.flipLeftRight(t):t}},Jr.prototype.getEyeCoords=function(e,t,n,r){void 0===r&&(r=!1);for(var a=[],o=0;o<76;o++){var s=e[3*o],i=e[3*o+1],u=e[3*o+2];a.push([(r?1-s/64:s/64)*n[0]+t.startPoint[0],i/64*n[1]+t.startPoint[1],u])}return{rawCoords:a,iris:a.slice(71)}},Jr.prototype.getAdjustedIrisCoords=function(e,t,n){var r=e[Br[n+"EyeUpper0"][3]][2],a=e[Br[n+"EyeLower0"][4]][2],o=(r+a)/2;return t.map(function(e,t){var n=o;return 2===t?n=r:4===t&&(n=a),[e[0],e[1],n]})},Jr.prototype.predict=function(h,f){return Er(this,void 0,void 0,function(){var t,n,r,d=this;return Rr(this,function(e){switch(e.label){case 0:return this.shouldUpdateRegionsOfInterest()?[4,this.boundingBoxDetector.getBoundingBoxes(h,!1,!0)]:[3,2];case 1:return r=e.sent(),t=r.boxes,n=r.scaleFactor,0===t.length?(this.regionsOfInterest=[],[2,null]):(r=t.map(function(e){var t={startPoint:e.box.startPoint.squeeze().arraySync(),endPoint:e.box.endPoint.squeeze().arraySync()},t=Lr({startPoint:[t.startPoint[0]*n[0],t.startPoint[1]*n[1]],endPoint:[t.endPoint[0]*n[0],t.endPoint[1]*n[1]]});return Tr({},t,{landmarks:e.landmarks.arraySync()})}),t.forEach(function(e){null!=e&&null!=e.startPoint&&(e.startEndTensor.dispose(),e.startPoint.dispose(),e.endPoint.dispose())}),this.updateRegionsOfInterest(r),this.runsWithoutFaceDetector=0,[3,3]);case 2:this.runsWithoutFaceDetector++,e.label=3;case 3:return[2,(0,ie.lub)(function(){return d.regionsOfInterest.map(function(e,t){var n=468<=e.landmarks.length,r=Hr[0],a=Hr[1];!1==n&&(r=jr[0],a=jr[1]),p=e.landmarks[r],c=e.landmarks[a];var o=(p=Math.PI/2-Math.atan2(-(c[1]-p[1]),c[0]-p[0]))-2*Math.PI*Math.floor((p+Math.PI)/(2*Math.PI)),s=Mr({startPoint:e.startPoint,endPoint:e.endPoint}),i=[s[0]/h.shape[2],s[1]/h.shape[1]],u=h,l=Vr;0!=o&&(u=ie.BHj.rotateWithOffset(h,o,0,i),l=Gr(-o,s));var c,p,i=(n={startPoint:e.startPoint,endPoint:e.endPoint},r=u,a=[d.meshHeight,d.meshWidth],c=r.shape[1],p=r.shape[2],p=[[n.startPoint[1]/c,n.startPoint[0]/p,n.endPoint[1]/c,n.endPoint[0]/p]],ie.BHj.cropAndResize(r,p,[0],a).div(255)),s=d.meshDetector.predict(i),u=s[1],c=s[2],n=(0,ie.XLQ)(c,[-1,3]).arraySync();f&&(p=(r=d.getEyeBox(n,i,Xr[0],Xr[1],!0)).box,a=r.boxSize,s=r.crop,r=(c=d.getEyeBox(n,i,qr[0],qr[1])).box,i=c.boxSize,c=c.crop,c=(s=d.irisModel.predict((0,ie.zoF)([s,c])).dataSync()).slice(0,228),a=(p=d.getEyeCoords(c,p,a,!0)).rawCoords,p=p.iris,s=s.slice(228),r=(s=d.getEyeCoords(s,r,i)).rawCoords,i=s.iris,s=d.getLeftToRightEyeDepthDifference(n),Math.abs(s)<30?(Zr(n,a,"left"),Zr(n,r,"right")):s<1?Zr(n,a,"left",["EyeUpper0","EyeLower0"]):Zr(n,r,"right",["EyeUpper0","EyeLower0"]),p=d.getAdjustedIrisCoords(n,p,"left"),i=d.getAdjustedIrisCoords(n,i,"right"),n=n.concat(p).concat(i));o=d.transformRawCoords(n,e,o,l),l=(0,ie.odF)(o),o=Lr(d.calculateLandmarksBoundingBox(o));return d.regionsOfInterest[t]=Tr({},o,{landmarks:l.arraySync()}),{coords:(0,ie.odF)(n,[n.length,3]),scaledCoords:l,box:o,flag:u.squeeze()}})})]}})})},Jr.prototype.updateRegionsOfInterest=function(e){for(var t=0;t<e.length;t++){var n,r,a,o,s,i,u,l,c=e[t],p=this.regionsOfInterest[t],d=0;p&&p.startPoint&&(n=(l=c.startPoint)[0],r=l[1],a=(u=c.endPoint)[0],o=u[1],s=(i=p.startPoint)[0],l=i[1],i=(u=p.endPoint)[0],p=u[1],u=Math.max(n,s),l=Math.max(r,l),d=(l=(Math.min(a,i)-u)*(Math.min(o,p)-l))/((a-n)*(o-r)+(i-s)*(p-r)-l)),d<.25&&(this.regionsOfInterest[t]=c)}this.regionsOfInterest=this.regionsOfInterest.slice(0,e.length)},Jr.prototype.clearRegionOfInterest=function(e){null!=this.regionsOfInterest[e]&&(this.regionsOfInterest=this.regionsOfInterest.slice(0,e).concat(this.regionsOfInterest.slice(e+1)))},Jr.prototype.shouldUpdateRegionsOfInterest=function(){var e=this.regionsOfInterest.length,t=0===e;return 1===this.maxFaces||t?t:e!==this.maxFaces&&this.runsWithoutFaceDetector>=this.maxContinuousChecks},Jr.prototype.calculateLandmarksBoundingBox=function(e){var t=e.map(function(e){return e[0]}),e=e.map(function(e){return e[1]});return{startPoint:[Math.min.apply(Math,t),Math.min.apply(Math,e)],endPoint:[Math.max.apply(Math,t),Math.max.apply(Math,e)]}},Jr),Qr=[[.499976992607117,.652534008026123],[.500025987625122,.547487020492554],[.499974012374878,.602371990680695],[.482113003730774,.471979022026062],[.500150978565216,.527155995368958],[.499909996986389,.498252987861633],[.499523013830185,.40106201171875],[.289712011814117,.380764007568359],[.499954998493195,.312398016452789],[.499987006187439,.269918978214264],[.500023007392883,.107050001621246],[.500023007392883,.666234016418457],[.5000159740448,.679224014282227],[.500023007392883,.692348003387451],[.499976992607117,.695277988910675],[.499976992607117,.70593398809433],[.499976992607117,.719385027885437],[.499976992607117,.737019002437592],[.499967992305756,.781370997428894],[.499816000461578,.562981009483337],[.473773002624512,.573909997940063],[.104906998574734,.254140973091125],[.365929991006851,.409575998783112],[.338757991790771,.41302502155304],[.311120003461838,.409460008144379],[.274657994508743,.389131009578705],[.393361985683441,.403706014156342],[.345234006643295,.344011008739471],[.370094001293182,.346076011657715],[.319321990013123,.347265005111694],[.297903001308441,.353591024875641],[.24779200553894,.410809993743896],[.396889001131058,.842755019664764],[.280097991228104,.375599980354309],[.106310002505779,.399955987930298],[.2099249958992,.391353011131287],[.355807989835739,.534406006336212],[.471751004457474,.65040397644043],[.474155008792877,.680191993713379],[.439785003662109,.657229006290436],[.414617002010345,.66654098033905],[.450374007225037,.680860996246338],[.428770989179611,.682690978050232],[.374971002340317,.727805018424988],[.486716985702515,.547628998756409],[.485300987958908,.527395009994507],[.257764995098114,.314490020275116],[.401223003864288,.455172002315521],[.429818987846375,.548614978790283],[.421351999044418,.533740997314453],[.276895999908447,.532056987285614],[.483370006084442,.499586999416351],[.33721199631691,.282882988452911],[.296391993761063,.293242990970612],[.169294998049736,.193813979625702],[.447580009698868,.302609980106354],[.392390012741089,.353887975215912],[.354490011930466,.696784019470215],[.067304998636246,.730105042457581],[.442739009857178,.572826027870178],[.457098007202148,.584792017936707],[.381974011659622,.694710969924927],[.392388999462128,.694203019142151],[.277076005935669,.271932005882263],[.422551989555359,.563233017921448],[.385919004678726,.281364023685455],[.383103013038635,.255840003490448],[.331431001424789,.119714021682739],[.229923993349075,.232002973556519],[.364500999450684,.189113974571228],[.229622006416321,.299540996551514],[.173287004232407,.278747975826263],[.472878992557526,.666198015213013],[.446828007698059,.668527007102966],[.422762006521225,.673889994621277],[.445307999849319,.580065965652466],[.388103008270264,.693961024284363],[.403039008378983,.706539988517761],[.403629004955292,.693953037261963],[.460041999816895,.557139039039612],[.431158006191254,.692366003990173],[.452181994915009,.692366003990173],[.475387006998062,.692366003990173],[.465828001499176,.779190003871918],[.472328990697861,.736225962638855],[.473087012767792,.717857003211975],[.473122000694275,.704625964164734],[.473033010959625,.695277988910675],[.427942007780075,.695277988910675],[.426479011774063,.703539967536926],[.423162013292313,.711845993995667],[.4183090031147,.720062971115112],[.390094995498657,.639572978019714],[.013953999616206,.560034036636353],[.499913990497589,.58014702796936],[.413199990987778,.69539999961853],[.409626007080078,.701822996139526],[.468080013990402,.601534962654114],[.422728985548019,.585985004901886],[.463079988956451,.593783974647522],[.37211999297142,.47341400384903],[.334562003612518,.496073007583618],[.411671012639999,.546965003013611],[.242175996303558,.14767599105835],[.290776997804642,.201445996761322],[.327338010072708,.256527006626129],[.399509996175766,.748921036720276],[.441727995872498,.261676013469696],[.429764986038208,.187834024429321],[.412198007106781,.108901023864746],[.288955003023148,.398952007293701],[.218936994671822,.435410976409912],[.41278201341629,.398970007896423],[.257135003805161,.355440020561218],[.427684992551804,.437960982322693],[.448339998722076,.536936044692993],[.178560003638268,.45755398273468],[.247308000922203,.457193970680237],[.286267012357712,.467674970626831],[.332827985286713,.460712015628815],[.368755996227264,.447206974029541],[.398963987827301,.432654976844788],[.476410001516342,.405806005001068],[.189241006970406,.523923993110657],[.228962004184723,.348950982093811],[.490725994110107,.562400996685028],[.404670000076294,.485132992267609],[.019469000399113,.401564002037048],[.426243007183075,.420431017875671],[.396993011236191,.548797011375427],[.266469985246658,.376977026462555],[.439121007919312,.51895797252655],[.032313998788595,.644356966018677],[.419054001569748,.387154996395111],[.462783008813858,.505746960639954],[.238978996872902,.779744982719421],[.198220998048782,.831938028335571],[.107550002634525,.540755033493042],[.183610007166862,.740257024765015],[.134409993886948,.333683013916016],[.385764002799988,.883153975009918],[.490967005491257,.579378008842468],[.382384985685349,.508572995662689],[.174399003386497,.397670984268188],[.318785011768341,.39623498916626],[.343364000320435,.400596976280212],[.396100014448166,.710216999053955],[.187885001301765,.588537991046906],[.430987000465393,.944064974784851],[.318993002176285,.898285031318665],[.266247987747192,.869701027870178],[.500023007392883,.190576016902924],[.499976992607117,.954452991485596],[.366169989109039,.398822009563446],[.393207013607025,.39553701877594],[.410373002290726,.391080021858215],[.194993004202843,.342101991176605],[.388664990663528,.362284004688263],[.365961998701096,.355970978736877],[.343364000320435,.355356991291046],[.318785011768341,.35834002494812],[.301414996385574,.363156020641327],[.058132998645306,.319076001644135],[.301414996385574,.387449026107788],[.499987989664078,.618434011936188],[.415838003158569,.624195992946625],[.445681989192963,.566076993942261],[.465844005346298,.620640993118286],[.49992299079895,.351523995399475],[.288718998432159,.819945991039276],[.335278987884521,.852819979190826],[.440512001514435,.902418971061707],[.128294005990028,.791940987110138],[.408771991729736,.373893976211548],[.455606997013092,.451801002025604],[.499877005815506,.908990025520325],[.375436991453171,.924192011356354],[.11421000212431,.615022003650665],[.448662012815475,.695277988910675],[.4480200111866,.704632043838501],[.447111994028091,.715808033943176],[.444831997156143,.730794012546539],[.430011987686157,.766808986663818],[.406787008047104,.685672998428345],[.400738000869751,.681069016456604],[.392399996519089,.677703022956848],[.367855995893478,.663918972015381],[.247923001646996,.601333022117615],[.452769994735718,.420849978923798],[.43639200925827,.359887003898621],[.416164010763168,.368713974952698],[.413385987281799,.692366003990173],[.228018000721931,.683571994304657],[.468268007040024,.352671027183533],[.411361992359161,.804327011108398],[.499989002943039,.469825029373169],[.479153990745544,.442654013633728],[.499974012374878,.439637005329132],[.432112008333206,.493588984012604],[.499886006116867,.866917014122009],[.49991300702095,.821729004383087],[.456548988819122,.819200992584229],[.344549000263214,.745438992977142],[.37890899181366,.574010014533997],[.374292999505997,.780184984207153],[.319687992334366,.570737957954407],[.357154995203018,.604269981384277],[.295284003019333,.621580958366394],[.447750002145767,.862477004528046],[.410986006259918,.508723020553589],[.31395098567009,.775308012962341],[.354128003120422,.812552988529205],[.324548006057739,.703992962837219],[.189096003770828,.646299958229065],[.279776990413666,.71465802192688],[.1338230073452,.682700991630554],[.336768001317978,.644733011722565],[.429883986711502,.466521978378296],[.455527991056442,.548622965812683],[.437114000320435,.558896005153656],[.467287987470627,.529924988746643],[.414712011814117,.335219979286194],[.37704598903656,.322777986526489],[.344107985496521,.320150971412659],[.312875986099243,.32233202457428],[.283526003360748,.333190023899078],[.241245999932289,.382785975933075],[.102986000478268,.468762993812561],[.267612010240555,.424560010433197],[.297879010438919,.433175981044769],[.333433985710144,.433878004550934],[.366427004337311,.426115989685059],[.396012008190155,.416696012020111],[.420121014118195,.41022801399231],[.007561000064015,.480777025222778],[.432949006557465,.569517970085144],[.458638995885849,.479089021682739],[.473466008901596,.545744001865387],[.476087987422943,.563830018043518],[.468472003936768,.555056989192963],[.433990985155106,.582361996173859],[.483518004417419,.562983989715576],[.482482999563217,.57784903049469],[.42645001411438,.389798998832703],[.438998997211456,.39649498462677],[.450067013502121,.400434017181396],[.289712011814117,.368252992630005],[.276670008897781,.363372981548309],[.517862021923065,.471948027610779],[.710287988185883,.380764007568359],[.526226997375488,.573909997940063],[.895093023777008,.254140973091125],[.634069979190826,.409575998783112],[.661242008209229,.41302502155304],[.688880026340485,.409460008144379],[.725341975688934,.389131009578705],[.606630027294159,.40370500087738],[.654766023159027,.344011008739471],[.629905998706818,.346076011657715],[.680678009986877,.347265005111694],[.702096998691559,.353591024875641],[.75221198797226,.410804986953735],[.602918028831482,.842862963676453],[.719901978969574,.375599980354309],[.893692970275879,.399959981441498],[.790081977844238,.391354024410248],[.643998026847839,.534487962722778],[.528249025344849,.65040397644043],[.525849997997284,.680191040039062],[.560214996337891,.657229006290436],[.585384011268616,.66654098033905],[.549625992774963,.680860996246338],[.57122802734375,.682691991329193],[.624852001667023,.72809898853302],[.513050019741058,.547281980514526],[.51509702205658,.527251958847046],[.742246985435486,.314507007598877],[.598631024360657,.454979002475739],[.570338010787964,.548575043678284],[.578631997108459,.533622980117798],[.723087012767792,.532054007053375],[.516445994377136,.499638974666595],[.662801027297974,.282917976379395],[.70362401008606,.293271005153656],[.830704987049103,.193813979625702],[.552385985851288,.302568018436432],[.607609987258911,.353887975215912],[.645429015159607,.696707010269165],[.932694971561432,.730105042457581],[.557260990142822,.572826027870178],[.542901992797852,.584792017936707],[.6180260181427,.694710969924927],[.607590973377228,.694203019142151],[.722943007946014,.271963000297546],[.577413976192474,.563166975975037],[.614082992076874,.281386971473694],[.616907000541687,.255886018276215],[.668509006500244,.119913995265961],[.770092010498047,.232020974159241],[.635536015033722,.189248979091644],[.77039098739624,.299556016921997],[.826722025871277,.278755009174347],[.527121007442474,.666198015213013],[.553171992301941,.668527007102966],[.577238023281097,.673889994621277],[.554691970348358,.580065965652466],[.611896991729736,.693961024284363],[.59696102142334,.706539988517761],[.596370995044708,.693953037261963],[.539958000183105,.557139039039612],[.568841993808746,.692366003990173],[.547818005084991,.692366003990173],[.52461302280426,.692366003990173],[.534089982509613,.779141008853912],[.527670979499817,.736225962638855],[.526912987232208,.717857003211975],[.526877999305725,.704625964164734],[.526966989040375,.695277988910675],[.572058022022247,.695277988910675],[.573521018028259,.703539967536926],[.57683801651001,.711845993995667],[.581691026687622,.720062971115112],[.609944999217987,.639909982681274],[.986046016216278,.560034036636353],[.5867999792099,.69539999961853],[.590372025966644,.701822996139526],[.531915009021759,.601536989212036],[.577268004417419,.585934996604919],[.536915004253387,.593786001205444],[.627542972564697,.473352015018463],[.665585994720459,.495950996875763],[.588353991508484,.546862006187439],[.757824003696442,.14767599105835],[.709249973297119,.201507985591888],[.672684013843536,.256581008434296],[.600408971309662,.74900496006012],[.55826598405838,.261672019958496],[.570303976535797,.187870979309082],[.588165998458862,.109044015407562],[.711045026779175,.398952007293701],[.781069993972778,.435405015945435],[.587247014045715,.398931980133057],[.742869973182678,.355445981025696],[.572156012058258,.437651991844177],[.55186802148819,.536570012569427],[.821442008018494,.457556009292603],[.752701997756958,.457181990146637],[.71375697851181,.467626988887787],[.66711300611496,.460672974586487],[.631101012229919,.447153985500336],[.6008620262146,.432473003864288],[.523481011390686,.405627012252808],[.810747981071472,.523926019668579],[.771045982837677,.348959028720856],[.509127020835876,.562718033790588],[.595292985439301,.485023975372314],[.980530977249146,.401564002037048],[.573499977588654,.420000016689301],[.602994978427887,.548687994480133],[.733529984951019,.376977026462555],[.560611009597778,.519016981124878],[.967685997486115,.644356966018677],[.580985009670258,.387160003185272],[.537728011608124,.505385041236877],[.760966002941132,.779752969741821],[.801778972148895,.831938028335571],[.892440974712372,.54076099395752],[.816350996494293,.740260004997253],[.865594983100891,.333687007427216],[.614073991775513,.883246004581451],[.508952975273132,.579437971115112],[.617941975593567,.508316040039062],[.825608015060425,.397674977779388],[.681214988231659,.39623498916626],[.656635999679565,.400596976280212],[.603900015354156,.710216999053955],[.81208598613739,.588539004325867],[.56801301240921,.944564998149872],[.681007981300354,.898285031318665],[.733752012252808,.869701027870178],[.633830010890961,.398822009563446],[.606792986392975,.39553701877594],[.589659988880157,.391062021255493],[.805015981197357,.342108011245728],[.611334979534149,.362284004688263],[.634037971496582,.355970978736877],[.656635999679565,.355356991291046],[.681214988231659,.35834002494812],[.698584973812103,.363156020641327],[.941866993904114,.319076001644135],[.698584973812103,.387449026107788],[.584177017211914,.624107003211975],[.554318010807037,.566076993942261],[.534153997898102,.62064003944397],[.711217999458313,.819975018501282],[.664629995822906,.852871000766754],[.559099972248077,.902631998062134],[.871706008911133,.791940987110138],[.591234028339386,.373893976211548],[.544341027736664,.451583981513977],[.624562978744507,.924192011356354],[.88577002286911,.615028977394104],[.551338016986847,.695277988910675],[.551980018615723,.704632043838501],[.552887976169586,.715808033943176],[.555167973041534,.730794012546539],[.569944024085999,.767035007476807],[.593203008174896,.685675978660583],[.599261999130249,.681069016456604],[.607599973678589,.677703022956848],[.631937980651855,.663500010967255],[.752032995223999,.601315021514893],[.547226011753082,.420395016670227],[.563543975353241,.359827995300293],[.583841025829315,.368713974952698],[.586614012718201,.692366003990173],[.771915018558502,.683578014373779],[.531597018241882,.352482974529266],[.588370978832245,.804440975189209],[.52079701423645,.442565023899078],[.567984998226166,.493479013442993],[.543282985687256,.819254994392395],[.655317008495331,.745514988899231],[.621008992195129,.574018001556396],[.625559985637665,.78031200170517],[.680198013782501,.570719003677368],[.64276397228241,.604337990283966],[.704662978649139,.621529996395111],[.552012026309967,.862591981887817],[.589071989059448,.508637011051178],[.685944974422455,.775357007980347],[.645735025405884,.812640011310577],[.675342977046967,.703978002071381],[.810858011245728,.646304965019226],[.72012197971344,.714666962623596],[.866151988506317,.682704985141754],[.663187026977539,.644596993923187],[.570082008838654,.466325998306274],[.544561982154846,.548375964164734],[.562758982181549,.558784961700439],[.531987011432648,.530140042304993],[.585271000862122,.335177004337311],[.622952997684479,.32277899980545],[.655896008014679,.320163011550903],[.687132000923157,.322345972061157],[.716481983661652,.333200991153717],[.758756995201111,.382786989212036],[.897013008594513,.468769013881683],[.732392013072968,.424547016620636],[.70211398601532,.433162987232208],[.66652500629425,.433866024017334],[.633504986763,.426087975502014],[.603875994682312,.416586995124817],[.579657971858978,.409945011138916],[.992439985275269,.480777025222778],[.567192018032074,.569419980049133],[.54136598110199,.478899002075195],[.526564002037048,.546118021011353],[.523913025856018,.563830018043518],[.531529009342194,.555056989192963],[.566035985946655,.582329034805298],[.51631098985672,.563053965568542],[.5174720287323,.577877044677734],[.573594987392426,.389806985855103],[.560697972774506,.395331978797913],[.549755990505219,.399751007556915],[.710287988185883,.368252992630005],[.723330020904541,.363372981548309]];function Jr(e,t,n,r,a,o,s){this.regionsOfInterest=[],this.runsWithoutFaceDetector=0,this.boundingBoxDetector=e,this.meshDetector=t,this.irisModel=s,this.meshWidth=n,this.meshHeight=r,this.maxContinuousChecks=a,this.maxFaces=o}function ea(c){return Er(this,void 0,void 0,function(){var t,n,r,a,o,s,i,u,l;return Rr(this,function(e){switch(e.label){case 0:return i=c.maxContinuousChecks,t=void 0===i?5:i,o=c.detectionConfidence,n=void 0===o?.9:o,u=c.maxFaces,r=void 0===u?10:u,s=c.iouThreshold,a=void 0===s?.3:s,i=c.scoreThreshold,o=void 0===i?.75:i,u=c.shouldLoadIrisModel,s=void 0===u||u,i=c.modelUrl,u=c.irisModelUrl,s?[4,Promise.all([ta(r,a,o),na(i),function(t){return Er(this,void 0,void 0,function(){return Rr(this,function(e){return null!=t?[2,Sr(t)]:[2,Sr("https://tfhub.dev/mediapipe/tfjs-model/iris/1/default/2",{fromTFHub:!0})]})})}(u)])]:[3,2];case 1:return l=e.sent(),[3,4];case 2:return[4,Promise.all([ta(r,a,o),na(i)])];case 3:l=e.sent(),e.label=4;case 4:return[2,new oa(l[0],l[1],t,n,r,s?l[2]:null)]}})})}function ta(t,n,r){return Er(this,void 0,void 0,function(){return Rr(this,function(e){return[2,async function({maxFaces:e=10,inputWidth:t=128,inputHeight:n=128,iouThreshold:r=.3,scoreThreshold:a=.75}){var o=await Sr("https://tfhub.dev/tensorflow/tfjs-model/blazeface/1/default/1",{fromTFHub:!0});return new Fr(o,t,n,e,r,a)}({maxFaces:t,iouThreshold:n,scoreThreshold:r})]})})}function na(t){return Er(this,void 0,void 0,function(){return Rr(this,function(e){return null!=t?[2,Sr(t)]:[2,Sr("https://tfhub.dev/mediapipe/tfjs-model/facemesh/1/default/1",{fromTFHub:!0})]})})}function ra(n,r){if(n.mesh instanceof ie.esB){var e=(0,ie.lub)(function(){var e=(0,ie.RRF)([r-1,0,0]),t=(0,ie.RRF)([1,-1,1]);return(0,ie.lub)(function(){return[(0,ie.zoF)([(0,ie.luU)(r-1,n.boundingBox.topLeft.slice(0,1)),n.boundingBox.topLeft.slice(1,1)]),(0,ie.zoF)([(0,ie.luU)(r-1,n.boundingBox.bottomRight.slice(0,1)),n.boundingBox.bottomRight.slice(1,1)]),(0,ie.luU)(e,n.mesh).mul(t),(0,ie.luU)(e,n.scaledMesh).mul(t)]})}),t=e[0],a=e[1],o=e[2],e=e[3];return Object.assign({},n,{boundingBox:{topLeft:t,bottomRight:a},mesh:o,scaledMesh:e})}return Object.assign({},n,{boundingBox:{topLeft:[r-1-n.boundingBox.topLeft[0],n.boundingBox.topLeft[1]],bottomRight:[r-1-n.boundingBox.bottomRight[0],n.boundingBox.bottomRight[1]]},mesh:n.mesh.map(function(e){var t=e.slice(0);return t[0]=r-1-e[0],t}),scaledMesh:n.scaledMesh.map(function(e){var t=e.slice(0);return t[0]=r-1-e[0],t})})}var aa,oa=(ia.getAnnotations=function(){return Br},ia.getUVCoords=function(){return Qr},ia.prototype.estimateFaces=function(i){return Er(this,void 0,void 0,function(){var f,m,g,n,y,r,a,o,s=this;return Rr(this,function(e){switch(e.label){case 0:if(r=i.returnTensors,f=void 0!==r&&r,r=i.flipHorizontal,m=void 0!==r&&r,r=i.predictIrises,g=void 0===r||r,n=i.input,g&&null==this.pipeline.irisModel)throw new Error("The iris model was not loaded as part of facemesh. Please initialize the model with facemesh.load({shouldLoadIrisModel: true}).");return r=(t=n)instanceof ie.esB?[t.shape[0],t.shape[1]]:[t.height,t.width],y=r[1],r=(0,ie.lub)(function(){return(n=!(n instanceof ie.esB)?ie.Xhn.fromPixels(n):n).toFloat().expandDims(0)}),"webgl"!==(0,ie.N_N)()?[3,2]:(o=(0,ie.OBj)().get("WEBGL_PACK_DEPTHWISECONV"),(0,ie.OBj)().set("WEBGL_PACK_DEPTHWISECONV",!0),[4,this.pipeline.predict(r,g)]);case 1:return a=e.sent(),(0,ie.OBj)().set("WEBGL_PACK_DEPTHWISECONV",o),[3,4];case 2:return[4,this.pipeline.predict(r,g)];case 3:a=e.sent(),e.label=4;case 4:return r.dispose(),null!=a&&0<a.length?[2,Promise.all(a.map(function(d,h){return Er(s,void 0,void 0,function(){var t,n,r,a,o,s,i,u,l,c,p=this;return Rr(this,function(e){switch(e.label){case 0:return t=d.coords,n=d.scaledCoords,r=d.box,a=d.flag,o=[a],f||(o=o.concat([t,n])),[4,Promise.all(o.map(function(t){return Er(p,void 0,void 0,function(){return Rr(this,function(e){return[2,t.array()]})})}))];case 1:if(s=e.sent(),o=s[0],a.dispose(),o<this.detectionConfidence&&this.pipeline.clearRegionOfInterest(h),f)return i={faceInViewConfidence:o,mesh:t,scaledMesh:n,boundingBox:{topLeft:(0,ie.RRF)(r.startPoint),bottomRight:(0,ie.RRF)(r.endPoint)}},m?[2,ra(i,y)]:[2,i];for(c in i=s.slice(1),s=i[0],i=i[1],n.dispose(),t.dispose(),u={faceInViewConfidence:o,boundingBox:{topLeft:r.startPoint,bottomRight:r.endPoint},mesh:s,scaledMesh:i},m&&(u=ra(u,y)),l={},Br)!g&&!1!==c.includes("Iris")||(l[c]=Br[c].map(function(e){return u.scaledMesh[e]}));return u.annotations=l,[2,u]}})})}))]:[2,[]]}var t})})},ia);sa.prototype.estimateFaces=function(e){throw new Error("estimateFaces is not yet implemented.")};function sa(){}function ia(e,t,n,r,a,o){this.pipeline=new Yr(e,t,192,192,n,a,o),this.detectionConfidence=r}function ua(t,n){return void 0===t&&(t=aa.mediapipeFacemesh),void 0===n&&(n={}),Er(this,void 0,void 0,function(){return Rr(this,function(e){if(t===aa.mediapipeFacemesh)return[2,ea(n)];throw new Error(t+" is not a valid package name.")})})}(aa=aa||{}).mediapipeFacemesh="mediapipe-facemesh"},122:function(e,t,n){"use strict";var r={};n.r(r),n.d(r,{addImpl:function(){return De},bincountImpl:function(){return Oe},bincountReduceImpl:function(){return Fe},ceilImpl:function(){return Me},concatImpl:function(){return Ve},expImpl:function(){return Ue},expm1Impl:function(){return ze},floorImpl:function(){return He},gatherV2Impl:function(){return Xe},greaterImpl:function(){return qe},lessImpl:function(){return Ze},linSpaceImpl:function(){return Qe},logImpl:function(){return Je},maxImpl:function(){return tt},maximumImpl:function(){return nt},minimumImpl:function(){return at},multiplyImpl:function(){return st},negImpl:function(){return lt},notEqualImpl:function(){return ct},prodImpl:function(){return ft},rangeImpl:function(){return mt},rsqrtImpl:function(){return gt},simpleAbsImpl:function(){return Ie},sliceImpl:function(){return vt},squaredDifferenceImpl:function(){return xt},stridedSliceImpl:function(){return wt},subImpl:function(){return kt},tileImpl:function(){return $t},topKImpl:function(){return Ct},transposeImpl:function(){return dt},uniqueImpl:function(){return St}});var d,h,i,A=n(1934);
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const s={},a={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function u(e){if(!(e in s)){var t=function(t){if(1!==t&&2!==t)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");const e=function(e){{if("undefined"!=typeof OffscreenCanvas&&2===e)return new OffscreenCanvas(300,150);if("undefined"!=typeof document)return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}}(t);return e.addEventListener("webglcontextlost",e=>{e.preventDefault(),delete s[t]},!1),1!==t?e.getContext("webgl2",a):e.getContext("webgl",a)||e.getContext("experimental-webgl",a)}(e);if(null===t)return console.log("Could not get context for WebGL version",e),null;s[e]=t}const n=s[e];return n.isContextLost()?(delete s[e],u(e)):(n.disable(n.DEPTH_TEST),n.disable(n.STENCIL_TEST),n.disable(n.BLEND),n.disable(n.DITHER),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SAMPLE_COVERAGE),n.enable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),s[e])}function l(e,t){return[t,e]}function f(e){e=A.D5U.sizeFromShape(e),e=Math.ceil(e/4);return A.D5U.sizeToSquarishShape(e)}function m(e,t){return[Math.max(1,Math.ceil(t/2)),Math.max(1,Math.ceil(e/2))]}function c(e,t){var n=e;let r,a,o,s,i,u,l,c,p;return p=2===(0,A.OBj)().getNumber("WEBGL_VERSION")?(r=n.R32F,a=n.R16F,o=n.RGBA16F,s=n.RGBA32F,i=n.RED,u=4,l=1,c=n.HALF_FLOAT,n.FLOAT):(r=e.RGBA,a=e.RGBA,o=e.RGBA,s=n.RGBA,i=e.RGBA,u=4,l=4,c=null!=t?t.HALF_FLOAT_OES:null,e.FLOAT),e=e.RGBA,{internalFormatFloat:r,internalFormatHalfFloat:a,internalFormatPackedHalfFloat:o,internalFormatPackedFloat:s,textureFormatFloat:i,downloadTextureFormat:e,downloadUnpackNumChannels:u,defaultNumChannels:l,textureTypeHalfFloat:c,textureTypeFloat:p}}
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function p(e,t){t=t();return(0,A.OBj)().getBool("DEBUG")&&function(e){var t=e.getError();if(t!==e.NO_ERROR)throw new Error("WebGL Error: "+function(e,t){switch(t){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return`Unknown error code ${t}`}}(e,t))}(e),t}($s=d=d||{})[$s.DENSE=0]="DENSE",$s[$s.SHARED_BATCH=1]="SHARED_BATCH",(Ss=h=h||{})[Ss.RENDER=0]="RENDER",Ss[Ss.UPLOAD=1]="UPLOAD",Ss[Ss.PIXELS=2]="PIXELS",Ss[Ss.DOWNLOAD=3]="DOWNLOAD",(Es=i=i||{})[Es.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",Es[Es.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",Es[Es.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",Es[Es.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",Es[Es.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16";function g(e,t){return N(e,()=>e.getExtension(t),'Extension "'+t+'" not supported on this browser.')}function y(e,t){const n=N(e,()=>e.createShader(e.FRAGMENT_SHADER),"Unable to create fragment WebGLShader.");if(p(e,()=>e.shaderSource(n,t)),p(e,()=>e.compileShader(n)),!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw function(e,n){var r=v.exec(n);if(null!=r){var a=+r[1];const o=e.split("\n"),s=o.length.toString().length+2,i=o.map((e,t)=>A.D5U.rightPad((t+1).toString(),s)+e);let t=0;for(let e=0;e<i.length;e++)t=Math.max(i[e].length,t);const u=i.slice(0,a-1);r=i.slice(a-1,a);const l=i.slice(a);console.log(u.join("\n")),console.log(n.split("\n")[0]),console.log(`%c ${A.D5U.rightPad(r[0],t)}`,"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(l.join("\n"))}else console.log(`Couldn't parse line number in error: ${n}`),console.log(e)}(t,e.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}const v=/ERROR: [0-9]+:([0-9]+):/g;function x(e,t){if(p(e,()=>e.validateProgram(t)),!1===e.getProgramParameter(t,e.VALIDATE_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Shader program validation failed.")}function b(e,t,n,r,a,o,s){const i=e.getAttribLocation(t,n);return-1!==i&&(p(e,()=>e.bindBuffer(e.ARRAY_BUFFER,r)),p(e,()=>e.vertexAttribPointer(i,a,e.FLOAT,!1,o,s)),p(e,()=>e.enableVertexAttribArray(i)),!0)}function o(e,t,n,r){p(e,()=>function(e,t,n){$(e,n),p(e,()=>e.activeTexture(e.TEXTURE0+n)),p(e,()=>e.bindTexture(e.TEXTURE_2D,t))}(e,t,r)),p(e,()=>e.uniform1i(n,r))}function w(e,t,n){p(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,n)),p(e,()=>e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0))}function k(e,t){p(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,t)),p(e,()=>e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0))}function I(e){var t=e.checkFramebufferStatus(e.FRAMEBUFFER);if(t!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+function(e,t){switch(t){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return`unknown error ${t}`}}(e,t))}function N(e,t,n){e=p(e,()=>t());if(null==e)throw new Error(n);return e}function $(e,t){var n=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,t=t+e.TEXTURE0;if(t<e.TEXTURE0||n<t)throw new Error(`textureUnit must be in ${`[gl.TEXTURE0, gl.TEXTURE${n}]`}.`)}function C(e,t=2){return A.D5U.sizeFromShape(e.slice(0,e.length-t))}function S(e){if(0===e.length)throw Error("Cannot get rows and columns of an empty shape array.");return[1<e.length?e[e.length-2]:1,e[e.length-1]]}function T(e){let t=[1,1,1];return 0===e.length||1===e.length&&1===e[0]||(t=[C(e),...S(e)]),t}function E(e){return e%2==0}function R(e,t){if(e=e.slice(-2),t=t.slice(-2),A.D5U.arraysEqual(e,t))return!0;if(!e.length||!t.length)return!0;if(0===e[0]||0===e[1]||0===t[0]||0===t[1])return!0;if(e.length!==t.length){var n=e.slice(-1)[0],r=t.slice(-1)[0];if(n===r)return!0;if(E(n)&&E(r)&&(1===e[0]||1===t[0]))return!0}return e[1]===t[1]&&E(e[0])&&E(t[0])}let D,_;function O(e,t){return null!=e.getExtension(t)}function F(e){try{if(null!=u(e))return 1}catch(e){return void console.log("Error when getting WebGL context: ",e)}}function B(e){if(0===e)return!1;const t=u(e);if(1===e)return!!O(t,"OES_texture_float")&&(!!O(t,"WEBGL_color_buffer_float")&&P(t));if(O(t,"EXT_color_buffer_float"))return P(t);e="EXT_color_buffer_half_float";if(O(t,e)){e=t.getExtension(e);return function(e,t){var n=c(e,t),r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r);e.texImage2D(e.TEXTURE_2D,0,n.internalFormatHalfFloat,1,1,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);t=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,t),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0);n=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(r),e.deleteFramebuffer(t),n}(t,e)}return!1}function P(e){var t=c(e),n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n);e.texImage2D(e.TEXTURE_2D,0,t.internalFormatFloat,1,1,0,t.textureFormatFloat,t.textureTypeFloat,null);var r=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,r),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0);t=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(n),e.deleteFramebuffer(r),t}function M(e,t){(e=!Array.isArray(e)?[e]:e).forEach(e=>{null!=e&&A.D5U.assert("complex64"!==e.dtype,()=>`${t} does not support complex64 tensors `+"in the WebGL backend.")})}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const L=(0,A.OBj)();
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function V(){let e,t,n,r,a,o,s,i,u,l;return l=2===(0,A.OBj)().getNumber("WEBGL_VERSION")?(e="#version 300 es",t="in",n="out",r="in",a="texture",o="outputColor",s="out vec4 outputColor;",i=`
      bool isnan_custom(float val) {
        return (val > 0.0 || val < 0.0) ? false : val != 0.0;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `,u="",`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(e="",t="attribute",n="varying",r="varying",a="texture2D",o="gl_FragColor",s="",i=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,u=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:e,attribute:t,varyingVs:n,varyingFs:r,texture2D:a,output:o,defineOutput:s,defineSpecialNaN:i,defineSpecialInf:u,defineRound:l}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function U(n,e,r="index"){const a=A.D5U.computeStrides(e);return a.map((e,t)=>{return`${`int ${n[t]} = ${r} / ${e}`}; ${t===a.length-1?`int ${n[t+1]} = ${r} - ${n[t]} * ${e}`:`index -= ${n[t]} * ${e}`};`}).join("")}function W(e){e=A.D5U.computeStrides(e).map(e=>e.toString());return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * ${e[0]} + coords.y * ${e[1]} + coords.z;
  }
`}L.registerFlag("HAS_WEBGL",()=>0<L.getNumber("WEBGL_VERSION")),L.registerFlag("WEBGL_VERSION",()=>F(2)?2:F(1)?1:0),L.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",()=>!1),L.registerFlag("WEBGL_BUFFER_SUPPORTED",()=>2===L.get("WEBGL_VERSION")),L.registerFlag("WEBGL_CPU_FORWARD",()=>!0),L.registerFlag("WEBGL_FORCE_F16_TEXTURES",()=>!1),L.registerFlag("WEBGL_PACK",()=>L.getBool("HAS_WEBGL")),L.registerFlag("WEBGL_PACK_NORMALIZATION",()=>L.getBool("WEBGL_PACK")),L.registerFlag("WEBGL_PACK_CLIP",()=>L.getBool("WEBGL_PACK")),L.registerFlag("WEBGL_PACK_DEPTHWISECONV",()=>!1),L.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",()=>L.getBool("WEBGL_PACK")),L.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",()=>L.getBool("WEBGL_PACK")),L.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",()=>L.getBool("WEBGL_PACK")),L.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",()=>L.getBool("WEBGL_PACK")),L.registerFlag("WEBGL_PACK_REDUCE",()=>L.getBool("WEBGL_PACK")),L.registerFlag("WEBGL_LAZILY_UNPACK",()=>L.getBool("WEBGL_PACK")),L.registerFlag("WEBGL_CONV_IM2COL",()=>L.getBool("WEBGL_PACK")),L.registerFlag("WEBGL_MAX_TEXTURE_SIZE",()=>function(e){if(null==D){const t=u(e);D=t.getParameter(t.MAX_TEXTURE_SIZE)}return D}(L.getNumber("WEBGL_VERSION"))),L.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",()=>function(e){if(null==_){const t=u(e);_=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,_)}(L.getNumber("WEBGL_VERSION"))),L.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",()=>{var e=L.getNumber("WEBGL_VERSION");return 0===e?0:function(e){if(0===e)return 0;let t;var n=u(e);return t=O(n,"EXT_disjoint_timer_query_webgl2")&&2===e?2:O(n,"EXT_disjoint_timer_query")?1:0,t}(e)}),L.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",()=>0<L.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")&&!A.C2$.isMobile()),L.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",()=>function(e){if(0===e)return!1;var t=u(e);if(1===e){if(!O(t,"OES_texture_float"))return!1}else if(!O(t,"EXT_color_buffer_float"))return!1;return P(t)}(L.getNumber("WEBGL_VERSION"))),L.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",()=>!L.getBool("WEBGL_FORCE_F16_TEXTURES")&&L.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")),L.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",()=>B(L.getNumber("WEBGL_VERSION"))),L.registerFlag("WEBGL_FENCE_API_ENABLED",()=>function(e){return 2===e&&null!=u(e).fenceSync}(L.getNumber("WEBGL_VERSION"))),L.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",()=>{return L.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0}),L.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",()=>-1,e=>{if(e<0&&-1!==e)throw new Error("WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never "+`delete) or at least 0, but got ${e}.`)});const z=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class G{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=d.DENSE;var t=f(e),n=V();this.outputShape=e,this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${U(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx *
          vec2(${t[0]}, ${t[1]}));
        int index = 4 * (resTexRC.x * ${t[1]} + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        ${n.output} = result;
      }
    `}}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class H{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=d.DENSE;var t=f(e),n=V();this.outputShape=e,this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${U(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx *
          vec2(${t[0]}, ${t[1]}));
        int index = 4 * (resTexRC.x * ${t[1]} + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        ${n.output} = result;
      }
    `}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class j{constructor(e){this.variableNames=["A"],this.outTexUsage=h.DOWNLOAD;var t=V();this.outputShape=e,this.userCode=`
      ${z}

      void main() {
        float x = getAAtOutCoords();
        ${t.output} = encode_float(x);
      }
    `}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class X{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=h.DOWNLOAD;var t=V();this.outputShape=e,this.userCode=`
      ${z}

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        ${t.output} = encode_float(x);
      }
    `}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class q{constructor(e,t,n=!1){this.variableNames=["A"];var r=V(),[a,t]=t;this.outputShape=e;let o=n?"floor(result * 255. + 0.5)":"result";this.userCode=`
      ${W(e)}

      void main() {
        ivec3 coords = getOutputCoords();

        int flatIndex = getFlatIndex(coords);
        int offset = imod(flatIndex, 4);

        flatIndex = idiv(flatIndex, 4, 1.);

        int r = flatIndex / ${t};
        int c = imod(flatIndex, ${t});
        vec2 uv = (vec2(c, r) + halfCR) / vec2(${t}.0, ${a}.0);
        vec4 values = ${r.texture2D}(A, uv);

        float result;

        if(offset == 0) {
          result = values[0];
        } else if(offset == 1) {
          result = values[1];
        } else if(offset == 2) {
          result = values[2];
        } else {
          result = values[3];
        }

        ${r.output} = vec4(${o}, 0., 0., 0.);
      }
    `}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class K{constructor(n,e,t=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var r=V(),[a,o]=e;this.outputShape=n;let s="",i="result";t&&(i="floor(result * 255. + 0.5)");for(let t=0;t<=1;t++)for(let e=0;e<=1;e++){var u=2*t+e;s+=`
          localCoords = coords;
          if(localCoords[2] + ${e} < ${n[2]}) {
            localCoords[2] += ${e};
            if(localCoords[1] + ${t} < ${n[1]}) {
              localCoords[1] += ${t};

              flatIndex = getFlatIndex(localCoords);
              offset = imod(flatIndex, 4);

              flatIndex = idiv(flatIndex, 4, 1.);

              r = flatIndex / ${o};
              c = imod(flatIndex, ${o});
              uv = (vec2(c, r) + halfCR) / vec2(${o}.0, ${a}.0);
              values = ${r.texture2D}(A, uv);

              if(offset == 0) {
                result[${u}] = values[0];
              } else if(offset == 1) {
                result[${u}] = values[1];
              } else if(offset == 2) {
                result[${u}] = values[2];
              } else {
                result[${u}] = values[3];
              }
            }
          }
        `}this.userCode=`
      ${W(n)}

      void main() {
        ivec3 coords = getOutputCoords();

        vec4 result = vec4(0.);
        int flatIndex, r, c, offset;
        ivec3 localCoords;
        vec2 uv;
        vec4 values;

        ${s}

        ${r.output} = ${i};
      }
    `}}
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Z(e){var t=V();return function(e,t){const n=N(e,()=>e.createShader(e.VERTEX_SHADER),"Unable to create vertex WebGLShader.");if(p(e,()=>e.shaderSource(n,t)),p(e,()=>e.compileShader(n)),!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw console.log(e.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}(e,`${t.version}
    precision highp float;
    ${t.attribute} vec3 clipSpacePos;
    ${t.attribute} vec2 uv;
    ${t.varyingVs} vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`)}function Y(e){return function(e,t){const n=N(e,()=>e.createBuffer(),"Unable to create WebGLBuffer");return p(e,()=>e.bindBuffer(e.ARRAY_BUFFER,n)),p(e,()=>e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW)),n}(e,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function Q(e){return function(e,t){const n=N(e,()=>e.createBuffer(),"Unable to create WebGLBuffer");return p(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n)),p(e,()=>e.bufferData(e.ELEMENT_ARRAY_BUFFER,t,e.STATIC_DRAW)),n}(e,new Uint16Array([0,1,2,2,1,3]))}function J(e,t,n,r,a,o){!function(e,t){var n=(0,A.OBj)().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e<=0||t<=0)throw new Error("Requested texture size "+`[${e}x${t}]`+" is invalid.");if(n<e||n<t)throw new Error("Requested texture size "+`[${e}x${t}]`+" greater than WebGL maximum on this browser / GPU "+`[${n}x${n}]`+".")}(t,n);const s=N(i=e,()=>i.createTexture(),"Unable to create WebGLTexture.");var i;const u=e.TEXTURE_2D;return p(e,()=>e.bindTexture(u,s)),p(e,()=>e.texParameteri(u,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE)),p(e,()=>e.texParameteri(u,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)),p(e,()=>e.texParameteri(u,e.TEXTURE_MIN_FILTER,e.NEAREST)),p(e,()=>e.texParameteri(u,e.TEXTURE_MAG_FILTER,e.NEAREST)),p(e,()=>e.texImage2D(u,0,r,t,n,0,a,o,null)),p(e,()=>e.bindTexture(e.TEXTURE_2D,null)),s}function ee(e){return e.internalFormatFloat}function te(e){return e.internalFormatHalfFloat}function ne(e){return e.downloadTextureFormat}function re(e){return e.internalFormatPackedFloat}function ae(e){return e.internalFormatPackedHalfFloat}function oe(e,t,n,r,a,o,s){const i=e;s=new Float32Array(function(e,t){var[e,t]=m(e,t);return e*t*4}(o,s));return i.bindBuffer(i.PIXEL_PACK_BUFFER,t),i.getBufferSubData(i.PIXEL_PACK_BUFFER,0,s),i.bindBuffer(i.PIXEL_PACK_BUFFER,null),s}
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class se{constructor(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];var t,n=(0,A.OBj)().getNumber("WEBGL_VERSION");null!=e?(this.gl=e,t=n,o=e,s[t]=o):this.gl=u(n);let r="WEBGL_color_buffer_float";var a,o="EXT_color_buffer_half_float";if(1===(0,A.OBj)().getNumber("WEBGL_VERSION")){n="OES_texture_half_float";if(this.textureFloatExtension=g(this.gl,"OES_texture_float"),O(this.gl,n))this.textureHalfFloatExtension=g(this.gl,n);else if((0,A.OBj)().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),O(this.gl,o))this.colorBufferHalfFloatExtension=g(this.gl,o);else if((0,A.OBj)().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",O(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else{if(!O(this.gl,o))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension(o)}this.vertexBuffer=Y(this.gl),this.indexBuffer=Q(this.gl),this.framebuffer=N(a=this.gl,()=>a.createFramebuffer(),"Unable to create WebGLFramebuffer."),this.textureConfig=c(this.gl,this.textureHalfFloatExtension)}get debug(){return(0,A.OBj)().getBool("DEBUG")}dispose(){if(!this.disposed){null!=this.program&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),null!=this.outputTexture&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");const e=this.gl;p(e,()=>e.finish()),p(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,null)),p(e,()=>e.deleteFramebuffer(this.framebuffer)),p(e,()=>e.bindBuffer(e.ARRAY_BUFFER,null)),p(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)),p(e,()=>e.deleteBuffer(this.indexBuffer)),this.disposed=!0}}createFloat32MatrixTexture(e,t){return this.throwIfDisposed(),function(e,t,n,r){var[n,t]=[n,t];return J(e,n,t,ee(r),r.textureFormatFloat,e.FLOAT)}(this.gl,e,t,this.textureConfig)}createFloat16MatrixTexture(e,t){return this.throwIfDisposed(),function(e,t,n,r){var[n,t]=[n,t];return J(e,n,t,te(r),r.textureFormatFloat,r.textureTypeHalfFloat)}(this.gl,e,t,this.textureConfig)}createUnsignedBytesMatrixTexture(e,t){return this.throwIfDisposed(),function(e,t,n,r){var[n,t]=[n,t];return J(e,n,t,ne(r),e.RGBA,e.UNSIGNED_BYTE)}(this.gl,e,t,this.textureConfig)}uploadPixelDataToTexture(e,t){var n,r,a;this.throwIfDisposed(),n=this.gl,r=e,a=t,p(n,()=>n.bindTexture(n.TEXTURE_2D,r)),a.data instanceof Uint8Array?p(n,()=>n.texImage2D(n.TEXTURE_2D,0,n.RGBA,a.width,a.height,0,n.RGBA,n.UNSIGNED_BYTE,a.data)):p(n,()=>n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,a)),p(n,()=>n.bindTexture(n.TEXTURE_2D,null))}uploadDenseMatrixToTexture(e,t,n,r){this.throwIfDisposed(),function(e,t,n,r,a,o){p(e,()=>e.bindTexture(e.TEXTURE_2D,t));let s,i,u;u=a instanceof Uint8Array?(s=new Uint8Array(n*r*4),i=e.UNSIGNED_BYTE,e.RGBA):(s=new Float32Array(n*r*4),i=e.FLOAT,o.internalFormatPackedFloat),s.set(a),p(e,()=>e.texImage2D(e.TEXTURE_2D,0,u,n,r,0,e.RGBA,i,s)),p(e,()=>e.bindTexture(e.TEXTURE_2D,null))}(this.gl,e,t,n,r,this.textureConfig)}createFloat16PackedMatrixTexture(e,t){return this.throwIfDisposed(),function(e,t,n,r){var[t,n]=m(t,n);return J(e,t,n,ae(r),e.RGBA,r.textureTypeHalfFloat)}(this.gl,e,t,this.textureConfig)}createPackedMatrixTexture(e,t){return this.throwIfDisposed(),function(e,t,n,r){var[t,n]=m(t,n);return J(e,t,n,re(r),e.RGBA,e.FLOAT)}(this.gl,e,t,this.textureConfig)}deleteMatrixTexture(e){this.throwIfDisposed(),this.outputTexture===e&&(k(this.gl,this.framebuffer),this.outputTexture=null),p(this.gl,()=>this.gl.deleteTexture(e))}downloadByteEncodedFloatMatrixFromOutputTexture(e,t,n){return this.downloadMatrixDriver(e,()=>function(e,t,n,r){const[a,o]=[n,t],s=new Uint8Array(t*n*4);return p(e,()=>e.readPixels(0,0,a,o,r.downloadTextureFormat,e.UNSIGNED_BYTE,s)),new Float32Array(s.buffer)}(this.gl,t,n,this.textureConfig))}downloadPackedMatrixFromBuffer(e,t,n,r,a,o){return oe(this.gl,e,0,0,0,a,o,this.textureConfig)}downloadFloat32MatrixFromBuffer(e,t){return function(e,t,n){const r=e;return n=new Float32Array(n),r.bindBuffer(r.PIXEL_PACK_BUFFER,t),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,n),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),n}(this.gl,e,t)}createBufferFromTexture(e,t,n){this.bindTextureToFrameBuffer(e);n=function(e,t,n){const r=e.createBuffer();p(e,()=>e.bindBuffer(e.PIXEL_PACK_BUFFER,r));const a=16*t*n;return p(e,()=>e.bufferData(e.PIXEL_PACK_BUFFER,a,e.STREAM_READ)),p(e,()=>e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,0)),p(e,()=>e.bindBuffer(e.PIXEL_PACK_BUFFER,null)),r}(this.gl,t,n,this.textureConfig);return this.unbindTextureToFrameBuffer(),n}createAndWaitForFence(){var e=this.createFence(this.gl);return this.pollFence(e)}createFence(e){let t,n;if((0,A.OBj)().getBool("WEBGL_FENCE_API_ENABLED")){const r=e,a=r.fenceSync(r.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),n=()=>{var e=r.clientWaitSync(a,0,0);return e===r.ALREADY_SIGNALED||e===r.CONDITION_SATISFIED},t=a}else n=0<(0,A.OBj)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")?(t=this.beginQuery(),this.endQuery(),()=>this.isQueryAvailable(t,(0,A.OBj)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):()=>!0;return{query:t,isFencePassed:n}}downloadMatrixFromPackedTexture(e,t,n){return this.downloadMatrixDriver(e,()=>function(e,t,n){const r=new Float32Array(t*n*4);return p(e,()=>e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,r)),r}(this.gl,t,n))}createProgram(e){this.throwIfDisposed();const t=this.gl,n=y(t,e),r=Z(t),a=N(o=t,()=>o.createProgram(),"Unable to create WebGLProgram.");var o,s,i;return p(t,()=>t.attachShader(a,r)),p(t,()=>t.attachShader(a,n)),function(e,t){if(p(e,()=>e.linkProgram(t)),!1===e.getProgramParameter(t,e.LINK_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Failed to link vertex and fragment shaders.")}(t,a),this.debug&&x(t,a),this.vertexAttrsAreBound||(this.setProgram(a),this.vertexAttrsAreBound=(s=t,e=this.program,i=this.vertexBuffer,p(s,()=>s.bindBuffer(s.ARRAY_BUFFER,i)),b(s,e,"clipSpacePos",i,3,20,0)&&b(s,e,"uv",i,2,20,12))),a}deleteProgram(e){this.throwIfDisposed(),e===this.program&&(this.program=null),null!=e&&p(this.gl,()=>this.gl.deleteProgram(e))}setProgram(e){this.throwIfDisposed(),this.program=e,null!=this.program&&this.debug&&x(this.gl,this.program),p(this.gl,()=>this.gl.useProgram(e))}getUniformLocation(e,t,n=!0){return this.throwIfDisposed(),n?(r=this.gl,a=e,N(r,()=>r.getUniformLocation(a,o),'uniform "'+(o=t)+'" not present in program.')):this.gl.getUniformLocation(e,t);var r,a,o}getAttributeLocation(e,t){return this.throwIfDisposed(),p(this.gl,()=>this.gl.getAttribLocation(e,t))}getUniformLocationNoThrow(e,t){return this.throwIfDisposed(),this.gl.getUniformLocation(e,t)}setInputMatrixTexture(e,t,n){this.throwIfDisposed(),this.throwIfNoProgram(),o(this.gl,e,t,n)}setOutputMatrixTexture(e,t,n){this.setOutputMatrixTextureDriver(e,n,t)}setOutputPackedMatrixTexture(e,t,n){this.throwIfDisposed();var[t,n]=m(t,n);this.setOutputMatrixTextureDriver(e,t,n)}setOutputMatrixWriteRegion(e,t,n,r){this.setOutputMatrixWriteRegionDriver(n,e,r,t)}setOutputPackedMatrixWriteRegion(e,t,n,r){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){null!=this.program&&x(this.gl,this.program),I(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();const e=this.gl;this.debug&&this.debugValidate(),p(e,()=>e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),p(this.gl,()=>this.gl.finish())}getQueryTimerExtension(){return null==this.disjointQueryTimerExtension&&(this.disjointQueryTimerExtension=g(this.gl,2===(0,A.OBj)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(2===(0,A.OBj)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){const n=this.gl,e=this.getQueryTimerExtensionWebGL2(),t=n.createQuery();return n.beginQuery(e.TIME_ELAPSED_EXT,t),t}const e=this.getQueryTimerExtensionWebGL1(),t=e.createQueryEXT();return e.beginQueryEXT(e.TIME_ELAPSED_EXT,t),t}endQuery(){if(2!==(0,A.OBj)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){const e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}else{const t=this.gl,e=this.getQueryTimerExtensionWebGL2();t.endQuery(e.TIME_ELAPSED_EXT)}}async waitForQueryAndGetTime(e){return await A.D5U.repeatedTry(()=>this.disposed||this.isQueryAvailable(e,(0,A.OBj)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))),this.getQueryTime(e,(0,A.OBj)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(e,t){if(0===t)return null;if(2===t){const n=this.gl;return n.getQueryParameter(e,n.QUERY_RESULT)/1e6}{const r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(e,r.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(e,t){if(0===t)return!0;if(2===t){const r=this.gl;var n=this.getQueryTimerExtensionWebGL2(),t=r.getQueryParameter(e,r.QUERY_RESULT_AVAILABLE);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(n.GPU_DISJOINT_EXT)),t&&!this.disjoint}{const a=this.getQueryTimerExtensionWebGL1();e=a.getQueryObjectEXT(e,a.QUERY_RESULT_AVAILABLE_EXT);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(a.GPU_DISJOINT_EXT)),e&&!this.disjoint}}pollFence(t){return new Promise(e=>{this.addItemToPoll(()=>t.isFencePassed(),()=>e())})}pollItems(){var t=function(e){let t=0;for(;t<e.length;++t)if(!e[t]())break;return t-1}(this.itemsToPoll.map(e=>e.isDoneFn));for(let e=0;e<=t;++e){const n=this.itemsToPoll[e]["resolveFn"];n()}this.itemsToPoll=this.itemsToPoll.slice(t+1)}addItemToPoll(e,t){this.itemsToPoll.push({isDoneFn:e,resolveFn:t}),1<this.itemsToPoll.length||A.D5U.repeatedTry(()=>(this.pollItems(),0===this.itemsToPoll.length))}bindTextureToFrameBuffer(e){this.throwIfDisposed(),w(this.gl,e,this.framebuffer),this.debug&&I(this.gl)}unbindTextureToFrameBuffer(){null!=this.outputTexture?(w(this.gl,this.outputTexture,this.framebuffer),this.debug&&I(this.gl)):k(this.gl,this.framebuffer)}downloadMatrixDriver(e,t){this.bindTextureToFrameBuffer(e);t=t();return this.unbindTextureToFrameBuffer(),t}setOutputMatrixTextureDriver(e,t,n){this.throwIfDisposed();const r=this.gl;w(r,e,this.framebuffer),this.debug&&I(r),this.outputTexture=e,p(r,()=>r.viewport(0,0,t,n)),p(r,()=>r.scissor(0,0,t,n))}setOutputMatrixWriteRegionDriver(e,t,n,r){this.throwIfDisposed(),p(this.gl,()=>this.gl.scissor(e,t,n,r))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(null==this.program)throw new Error("No GPU program is currently set.")}}
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const ie=A.Wap["getBroadcastDims"];function ue(e,t,n,r){const a=[];e.forEach(e=>{var t=A.D5U.sizeFromShape(e.shapeInfo.logicalShape);e.shapeInfo.isUniform?a.push(`uniform float ${e.name}${1<t?`[${t}]`:""};`):(a.push(`uniform sampler2D ${e.name};`),a.push(`uniform int offset${e.name};`))});const o=a.join("\n"),s=e.map(e=>function(e,t,n=!1){let r="";r+=(n?ce:le)(e);var a=e.shapeInfo.logicalShape,o=t.logicalShape;a.length<=o.length&&(r+=(n?function(e,t){const n=e.name,r=n.charAt(0).toUpperCase()+n.slice(1),a="get"+r+"AtOutCoords",o=e.shapeInfo.logicalShape.length,s=t.logicalShape.length,i=ie(e.shapeInfo.logicalShape,t.logicalShape),u=ve(s),l=s-o;let c;const p=["x","y","z","w","u","v"];c=0===o?"":s<2&&1<=i.length?"coords = 0;":i.map(e=>`coords.${p[e+l]} = 0;`).join("\n");let d="";d=s<2&&0<o?"coords":e.shapeInfo.logicalShape.map((e,t)=>`coords.${p[t+l]}`).join(", ");let h="return outputValue;";e=A.D5U.sizeFromShape(e.shapeInfo.logicalShape),e=1===e,t=A.D5U.sizeFromShape(t.logicalShape),t=1===t;1!==o||e||t?e&&!t?h=1===s?`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:`
        return vec4(outputValue.x);
      `:i.length&&(e=o-2,t=o-1,-1<i.indexOf(e)&&-1<i.indexOf(t)?h="return vec4(outputValue.x);":-1<i.indexOf(e)?h="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":-1<i.indexOf(t)&&(h="return vec4(outputValue.xx, outputValue.zz);")):h=`
      return vec4(outputValue.xy, outputValue.xy);
    `;return`
    vec4 ${a}() {
      ${u} coords = getOutputCoords();
      ${c}
      vec4 outputValue = get${r}(${d});
      ${h}
    }
  `}:function(e,t){const n=e.name,r=n.charAt(0).toUpperCase()+n.slice(1),a="get"+r+"AtOutCoords",o=t.texShape,s=e.shapeInfo.texShape,i=e.shapeInfo.logicalShape.length,u=t.logicalShape.length;if(!e.shapeInfo.isUniform&&i===u&&null==e.shapeInfo.flatOffset&&A.D5U.arraysEqual(s,o))return`
      float ${a}() {
        return sampleTexture(${n}, resultUV);
      }
    `;const l=ve(u),c=ie(e.shapeInfo.logicalShape,t.logicalShape),p=u-i;let d;const h=["x","y","z","w","u","v"];d=0===i?"":u<2&&1<=c.length?"coords = 0;":c.map(e=>`coords.${h[e+p]} = 0;`).join("\n");let f="";f=u<2&&0<i?"coords":e.shapeInfo.logicalShape.map((e,t)=>`coords.${h[t+p]}`).join(", ");return`
    float ${a}() {
      ${l} coords = getOutputCoords();
      ${d}
      return get${r}(${f});
    }
  `})(e,t));return r}(e,t,r)).join("\n");var i=t.texShape,e=V();const u=`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return ${e.texture2D}(textureSampler, uv).r;
    }
  `;let l,c,p=function(e){e=`${e.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${e.varyingFs} vec2 resultUV;
    ${e.defineOutput}
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    ${e.defineSpecialNaN}
    ${e.defineSpecialInf}
    ${e.defineRound}

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    ${pe}
    ${de}
    ${he}
  `;return e}(e);return c=t.isPacked?(l=function(e,t){switch(e.length){case 0:return me();case 1:return function(e){e=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];return 1!==e[0]?1!==e[1]?`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      return 2 * (resTexRC.x * ${e[1]} + resTexRC.y);
    }
  `:`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ${e[0]}.0);
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ${e[1]}.0);
      }
    `}(t);case 2:return function(e,t){var n=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(A.D5U.arraysEqual(e,t))return`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(${n[0]}, ${n[1]}));
      }
    `;e=Math.ceil(e[1]/2);return`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${n[0]}, ${n[1]}));

      int index = resTexRC.x * ${n[1]} + resTexRC.y;
      int r = 2 * (index / ${e});
      int c = imod(index, ${e}) * 2;

      return ivec2(r, c);
    }
  `}(e,t);case 3:return function(e,t){var n=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],t=Math.ceil(e[2]/2),e=t*Math.ceil(e[1]/2);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${n[0]}, ${n[1]}));
      int index = resTexRC.x * ${n[1]} + resTexRC.y;

      int b = index / ${e};
      index -= b * ${e};

      int r = 2 * (index / ${t});
      int c = imod(index, ${t}) * 2;

      return ivec3(b, r, c);
    }
  `}(e,t);default:return function(t,e){var n=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],r=Math.ceil(t[t.length-1]/2),e=r*Math.ceil(t[t.length-2]/2);let a=e,o="",s="b, r, c";for(let e=2;e<t.length-1;e++)a*=t[t.length-e-1],o=`
      int b${e} = index / ${a};
      index -= b${e} * ${a};
    `+o,s=`b${e}, `+s;return`
    ivec${t.length} getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${n[0]}, ${n[1]}));
      int index = resTexRC.x * ${n[1]} + resTexRC.y;

      ${o}

      int b = index / ${e};
      index -= b * ${e};

      int r = 2 * (index / ${r});
      int c = imod(index, ${r}) * 2;

      return ivec${t.length}(${s});
    }
  `}(e,t)}}(t.logicalShape,i),`
    void setOutput(vec4 val) {
      ${e.output} = val;
    }
  `):(l=function(e,t){switch(e.length){case 0:return me();case 1:return function(e){return 1!==e[0]?1!==e[1]?`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      return resTexRC.x * ${e[1]} + resTexRC.y;
    }
  `:`
      int getOutputCoords() {
        return int(resultUV.y * ${e[0]}.0);
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.x * ${e[1]}.0);
      }
    `}(t);case 2:return function(e,t){if(A.D5U.arraysEqual(e,t))return`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(${t[0]}, ${t[1]}));
      }
    `;return 1!==e[1]?1!==e[0]?`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${t[0]}, ${t[1]}));
      int index = resTexRC.x * ${t[1]} + resTexRC.y;
      int r = index / ${e[1]};
      int c = index - r * ${e[1]};
      return ivec2(r, c);
    }
  `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${t[0]}, ${t[1]}));
        int index = resTexRC.x * ${t[1]} + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${t[0]}, ${t[1]}));
        int index = resTexRC.x * ${t[1]} + resTexRC.y;
        return ivec2(index, 0);
      }
    `}(e,t);case 3:return function(e,t){e=U(["r","c","d"],e);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${t[0]}, ${t[1]}));
      int index = resTexRC.x * ${t[1]} + resTexRC.y;
      ${e}
      return ivec3(r, c, d);
    }
  `}(e,t);case 4:return function(e,t){e=U(["r","c","d","d2"],e);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${t[0]}, ${t[1]}));
      int index = resTexRC.x * ${t[1]} + resTexRC.y;
      ${e}
      return ivec4(r, c, d, d2);
    }
  `}(e,t);case 5:return function(e,t){e=U(["r","c","d","d2","d3"],e);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(${t[0]},
                             ${t[1]}));

      int index = resTexRC.x * ${t[1]} + resTexRC.y;

      ${e}

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}(e,t);case 6:return function(e,t){e=U(["r","c","d","d2","d3","d4"],e);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${t[0]}, ${t[1]}));
      int index = resTexRC.x * ${t[1]} + resTexRC.y;

      ${e}

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}(e,t);default:throw new Error(`${e.length}-D output sampling is not yet supported`)}}(t.logicalShape,i),`
    void setOutput(float val) {
      ${e.output} = vec4(val, 0, 0, 0);
    }
  `),r&&(p+=fe),[p,u,c,o,l,s,n].join("\n")}function le(e){var t=e.shapeInfo.logicalShape;switch(t.length){case 0:return function(e){const t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1);if(e.shapeInfo.isUniform)return`float ${n}() {return ${t};}`;var[r,a]=e.shapeInfo.texShape;if(1===r&&1===a)return`
      float ${n}() {
        return sampleTexture(${t}, halfCR);
      }
    `;var[r,a]=e.shapeInfo.texShape,e=ge(t);return`
    float ${n}() {
      vec2 uv = uvFromFlat(${r}, ${a}, ${e});
      return sampleTexture(${t}, uv);
    }
  `}(e);case 1:return function(e){const t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1);if(e.shapeInfo.isUniform)return`
      float ${n}(int index) {
        ${ye(e)}
      }
    `;var r=e.shapeInfo.texShape,a=r[0],e=r[1];if(1===e&&1===a)return`
      float ${n}(int index) {
        return sampleTexture(${t}, halfCR);
      }
    `;r=ge(t);return 1!==e?1!==a?`
    float ${n}(int index) {
      vec2 uv = uvFromFlat(${a}, ${e}, index + ${r});
      return sampleTexture(${t}, uv);
    }
  `:`
      float ${n}(int index) {
        vec2 uv = vec2((float(index + ${r}) + 0.5) / ${e}.0, 0.5);
        return sampleTexture(${t}, uv);
      }
    `:`
      float ${n}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${r}) + 0.5) / ${a}.0);
        return sampleTexture(${t}, uv);
      }
    `}(e);case 2:return function(e){const t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=e.shapeInfo.texShape;if(null!=a&&A.D5U.arraysEqual(t,a)){const u=a[0],l=a[1];return`
    float ${r}(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(${l}.0, ${u}.0);
      return sampleTexture(${n}, uv);
    }
  `}var{newShape:o,keptDims:s}=A.D5U.squeezeShape(t),i=o;if(i.length<t.length){o=xe(e,i),i=["row","col"];return`
      ${le(o)}
      float ${r}(int row, int col) {
        return ${r}(${be(i,s)});
      }
    `}if(e.shapeInfo.isUniform)return`
      float ${r}(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(${t[1]}, 1)));
        ${ye(e)}
      }
    `;const u=a[0],l=a[1],c=ge(n);return 1!==l?1!==u?`
  float ${r}(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * ${t[1]} + col + ${c};
    vec2 uv = uvFromFlat(${u}, ${l}, index);
    return sampleTexture(${n}, uv);
  }
`:`
    float ${r}(int row, int col) {
      float index = dot(vec3(row, col, ${c}), vec3(${t[1]}, 1, 1));
      vec2 uv = vec2((index + 0.5) / ${l}.0, 0.5);
      return sampleTexture(${n}, uv);
    }
  `:`
    float ${r}(int row, int col) {
      float index = dot(vec3(row, col, ${c}), vec3(${t[1]}, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / ${u}.0);
      return sampleTexture(${n}, uv);
    }
  `}(e);case 3:return function(e){const t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=t[1]*t[2],o=t[2],{newShape:s,keptDims:i}=A.D5U.squeezeShape(t),u=s;if(u.length<t.length){var l=xe(e,u),c=["row","col","depth"];return`
        ${le(l)}
        float ${r}(int row, int col, int depth) {
          return ${r}(${be(c,i)});
        }
      `}if(e.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(${a}, ${o}, 1)));
        ${ye(e)}
      }
    `;l=e.shapeInfo.texShape,c=l[0],l=l[1],e=e.shapeInfo.flatOffset;if(l===a&&null==e)return`
        float ${r}(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(${o}, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(${l}.0, ${c}.0);
          return sampleTexture(${n}, uv);
        }
      `;if(l===o&&null==e)return`
    float ${r}(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(${t[1]}, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${l}.0, ${c}.0);
      return sampleTexture(${n}, uv);
    }
  `;e=ge(n);return`
      float ${r}(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${a} + col * ${o} + depth + ${e};
        vec2 uv = uvFromFlat(${c}, ${l}, index);
        return sampleTexture(${n}, uv);
      }
  `}(e);case 4:return function(e){const t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=t[3],o=t[2]*a,s=t[1]*o,{newShape:i,keptDims:u}=A.D5U.squeezeShape(t);if(i.length<t.length){var l=xe(e,i),c=["row","col","depth","depth2"];return`
      ${le(l)}
      float ${r}(int row, int col, int depth, int depth2) {
        return ${r}(${be(c,u)});
      }
    `}if(e.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(${s}, ${o}, ${a}, 1)));
        ${ye(e)}
      }
    `;l=e.shapeInfo.flatOffset,c=e.shapeInfo.texShape,e=c[0],c=c[1];if(c===s&&null==l)return`
      float ${r}(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(${o}, ${a}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${c}.0, ${e}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(c===a&&null==l)return`
      float ${r}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${t[1]*t[2]}, ${t[2]}, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${c}.0, ${e}.0);
        return sampleTexture(${n}, uv);
      }
    `;l=ge(n);return`
    float ${r}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${s} + col * ${o} +
          depth * ${a} + depth2;
      vec2 uv = uvFromFlat(${e}, ${c}, index + ${l});
      return sampleTexture(${n}, uv);
    }
  `}(e);case 5:return function(e){const t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=t[4],o=t[3]*a,s=t[2]*o,i=t[1]*s,{newShape:u,keptDims:l}=A.D5U.squeezeShape(t);if(u.length<t.length){var c=xe(e,u),p=["row","col","depth","depth2","depth3"];return`
      ${le(c)}
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        return ${r}(${be(p,l)});
      }
    `}if(e.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(${i}, ${s}, ${o}, ${a})) +
          depth3;
        ${ye(e)}
      }
    `;c=e.shapeInfo.flatOffset,p=e.shapeInfo.texShape,e=p[0],p=p[1];if(p===i&&null==c)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(${s}, ${o}, ${a}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${p}.0, ${e}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(p===a&&null==c)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(${t[1]*t[2]*t[3]},
               ${t[2]*t[3]}, ${t[3]}, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${p}.0, ${e}.0);
        return sampleTexture(${n}, uv);
      }
    `;c=ge(n);return`
    float ${r}(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${i} + col * ${s} + depth * ${o} +
          depth2 * ${a} + depth3 + ${c};
      vec2 uv = uvFromFlat(${e}, ${p}, index);
      return sampleTexture(${n}, uv);
    }
  `}(e);case 6:return function(e){const t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),{newShape:a,keptDims:o}=A.D5U.squeezeShape(t);if(a.length<t.length){var s=xe(e,a),i=["row","col","depth","depth2","depth3","depth4"];return`
      ${le(s)}
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return ${r}(${be(i,o)});
      }
    `}var u=t[5],l=t[4]*u,c=t[3]*l,p=t[2]*c,d=t[1]*p;if(e.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(${d}, ${p}, ${c}, ${l})) +
          dot(
            vec2(depth3, depth4),
            vec2(${u}, 1)));
        ${ye(e)}
      }
    `;s=e.shapeInfo.flatOffset,i=e.shapeInfo.texShape,e=i[0],i=i[1];if(i===d&&null==s)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(${p}, ${c}, ${l}, ${u})) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${i}.0, ${e}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(i===u&&null==s)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(${t[1]*t[2]*t[3]*t[4]},
               ${t[2]*t[3]*t[4]},
               ${t[3]*t[4]},
               ${t[4]})) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${i}.0, ${e}.0);
        return sampleTexture(${n}, uv);
      }
    `;s=ge(n);return`
    float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${d} + col * ${p} + depth * ${c} +
          depth2 * ${l} + depth3 * ${u} + depth4 + ${s};
      vec2 uv = uvFromFlat(${e}, ${i}, index);
      return sampleTexture(${n}, uv);
    }
  `}(e);default:throw new Error(`${t.length}-D input sampling`+" is not yet supported")}}function ce(e){switch(e.shapeInfo.logicalShape.length){case 0:return function(e){const t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1),r=V();return`
    vec4 ${n}() {
      return ${r.texture2D}(${t}, halfCR);
    }
  `}(e);case 1:return function(e){const t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1),r=e.shapeInfo.texShape,a=[Math.ceil(r[0]/2),Math.ceil(r[1]/2)],o=V();return`
    vec4 ${n}(int index) {
      vec2 uv = packedUVfrom1D(
        ${a[0]}, ${a[1]}, index);
      return ${o.texture2D}(${t}, uv);
    }
  `}(e);case 2:return function(e){const t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=e.shapeInfo.texShape,o=a[0],s=a[1],i=V();if(null!=a&&A.D5U.arraysEqual(t,a))return`
      vec4 ${r}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${s}.0, ${o}.0);

        return ${i.texture2D}(${n}, uv);
      }
    `;var u=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)],e=Math.ceil(t[1]/2);return`
    vec4 ${r}(int row, int col) {
      vec2 uv = packedUVfrom2D(${e}, ${u[0]}, ${u[1]}, row, col);
      return ${i.texture2D}(${n}, uv);
    }
  `}(e);case 3:return function(e){const t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=e.shapeInfo.texShape,o=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)];if(1===t[0]){var s=t.slice(1),i=[1,2],u=xe(e,s),l=["b","row","col"];return`
        ${ce(u)}
        vec4 ${r}(int b, int row, int col) {
          return ${r}(${be(l,i)});
        }
      `}e=o[0],s=o[1],u=Math.ceil(t[2]/2),l=u*Math.ceil(t[1]/2),i=V();return`
    vec4 ${r}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${e}, ${s}, ${l}, ${u}, b, row, col);
      return ${i.texture2D}(${n}, uv);
    }
  `}(e);default:return function(e){const t=e.shapeInfo.logicalShape,n=t.length,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),o=e.shapeInfo.texShape,s=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)],i=s[0],u=s[1],l=Math.ceil(t[n-1]/2);let c=l*Math.ceil(t[n-2]/2),p="int b, int row, int col",d=`b * ${c} + (row / 2) * ${l} + (col / 2)`;for(let e=2;e<n-1;e++)p=`int b${e}, `+p,c*=t[n-e-1],d=`b${e} * ${c} + `+d;e=V();return`
    vec4 ${a}(${p}) {
      int index = ${d};
      int texR = index / ${u};
      int texC = index - texR * ${u};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${u}, ${i});
      return ${e.texture2D}(${r}, uv);
    }
  `}(e)}}const pe=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,de=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,he=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,fe=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function me(){return`
    int getOutputCoords() {
      return 0;
    }
  `}function ge(e){return`offset${e}`}function ye(e){var t=e.name,e=A.D5U.sizeFromShape(e.shapeInfo.logicalShape);return e<2?`return ${t};`:`
    for (int i = 0; i < ${e}; i++) {
      if (i == index) {
        return ${t}[i];
      }
    }
  `}function ve(e){if(e<=1)return"int";if(2===e)return"ivec2";if(3===e)return"ivec3";if(4===e)return"ivec4";if(5===e)return"ivec5";if(6===e)return"ivec6";throw Error(`GPU for rank ${e} is not yet supported`)}function xe(e,t){const n=JSON.parse(JSON.stringify(e));return n.shapeInfo.logicalShape=t,n}function be(t,e){return e.map(e=>t[e]).join(", ")}function we(e,a){if(e.length!==a.length)throw Error(`Binary was compiled with ${e.length} inputs, but `+`was executed with ${a.length} inputs`);e.forEach((e,t)=>{var n=e.logicalShape,r=a[t],t=r.shape;if(!A.D5U.arraysEqual(n,t))throw Error("Binary was compiled with different shapes than "+`the current args. Shapes ${n} and ${t} must match`);if(!e.isUniform||!r.isUniform){e=e.texShape,r=r.isUniform?null:r.texData.texShape;if(!A.D5U.arraysEqual(e,r))throw Error("Binary was compiled with different texture shapes than the"+` current args. Shape ${e} and ${r} must match`)}})}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function ke(e,t){(e=!Array.isArray(e)?[e]:e).forEach(e=>{null!=e&&A.D5U.assert("complex64"!==e.dtype,()=>`${t} does not support complex64 tensors in the CPU backend.`)})}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Ie(t){const n=new Float32Array(t.length);for(let e=0;e<t.length;++e)n[e]=Math.abs(t[e]);return n}A.SYM;
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Ne(w){return(e,t,n,r,a)=>{var o=A.Wap.assertAndGetBroadcastShape(e,t),s=o.length,i=A.D5U.computeStrides(o),u=A.D5U.sizeFromShape(o);const l=A.D5U.getTypedArrayFromDType(a,u);var c=e.length,p=t.length,d=A.D5U.computeStrides(e),h=A.D5U.computeStrides(t);const f=A.Wap.getBroadcastDims(e,o),m=A.Wap.getBroadcastDims(t,o);if(f.length+m.length===0)for(let e=0;e<l.length;++e)l[e]=w(n[e%n.length],r[e%r.length]);else for(let e=0;e<l.length;++e){const v=A.D5U.indexToLoc(e,s,i),x=v.slice(-c);f.forEach(e=>x[e]=0);var g=A.D5U.locToIndex(x,c,d);const b=v.slice(-p);m.forEach(e=>b[e]=0);var y=A.D5U.locToIndex(b,p,h);l[e]=w(n[g],r[y])}return[l,o]}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function $e(e){const{inputs:t,backend:n}=e;var{real:r,imag:a}=t,o=n.data.get(r.dataId).values,s=n.data.get(a.dataId).values,e=n.makeTensorInfo(r.shape,"complex64");const i=n.data.get(e.dataId);return i.complexTensorInfos={real:n.makeTensorInfo(r.shape,"float32",o),imag:n.makeTensorInfo(a.shape,"float32",s)},e}A.Zz9;
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Ce(e){const{inputs:t,backend:n}=e;var e=t["x"];return n.incRef(e.dataId),{dataId:e.dataId,shape:e.shape,dtype:e.dtype}}A.iJz;
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Se(e){const{inputs:t,backend:n}=e;var r=t["input"],e=n.data.get(r.dataId).complexTensorInfos.real,r=n.data.get(e.dataId).values;return n.makeTensorInfo(e.shape,e.dtype,r)}A.xJR;
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Te(e){const{inputs:t,backend:n,attrs:r}=e;var a=t["x"],o=r["dtype"];if("complex64"===o){if("complex64"===a.dtype)return Ce({inputs:{x:a},backend:n});var s=
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function e(t,n,r="float32"){if("complex64"===r)return $e({inputs:{real:e(t,n,"float32"),imag:e(t,n,"float32")},backend:t});var a=A.D5U.makeZerosTypedArray(A.D5U.sizeFromShape(n),r);return t.makeTensorInfo(n,r,a)}(n,a.shape,a.dtype),e=Te({inputs:{x:a},backend:n,attrs:{dtype:"float32"}}),i=$e({inputs:{real:e,imag:s},backend:n});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(e),i}if("complex64"===a.dtype){var i=Se({inputs:{input:a},backend:n}),u=Te({inputs:{x:i},backend:n,attrs:{dtype:o}});return n.disposeIntermediateTensorInfo(i),u}if(!A.D5U.hasEncodingLoss(a.dtype,o)){u=Ce({inputs:{x:a},backend:n});return{dataId:u.dataId,shape:u.shape,dtype:o}}if("int32"===o){var l=n.data.get(a.dataId).values,l=Int32Array.from(l);return n.makeTensorInfo(a.shape,"int32",l)}if("bool"!==o)throw new Error(`Error in Cast: failed to cast ${a.dtype} to ${o}`);var l=n.data.get(a.dataId).values,o=A.D5U.toTypedArray([0],a.dtype),[l,o]=Ne((e,t)=>e!==t?1:0)(a.shape,[],l,o,"bool");return n.makeTensorInfo(o,"bool",l)}A.RFZ;
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Ee(s,l,c,p){return null==c?({inputs:e,backend:t})=>{var{a:n,b:r}=e;const a=t;ke([n,r],s);var o=a.data.get(n.dataId).values,e=a.data.get(r.dataId).values,t=p||n.dtype,[o,e]=l(n.shape,r.shape,o,e,t);return a.makeTensorInfo(e,t,o)}:({inputs:e,backend:t})=>{var{a:n,b:r}=e;const a=t;if("complex64"===n.dtype||"complex64"===r.dtype){var o=Te({inputs:{x:n},backend:a,attrs:{dtype:"complex64"}}),e=a.data.get(o.dataId),s=e.complexTensorInfos.real,i=e.complexTensorInfos.imag,t=a.data.get(s.dataId).values,u=a.data.get(i.dataId).values,e=Te({inputs:{x:r},backend:a,attrs:{dtype:"complex64"}}),s=a.data.get(e.dataId),i=s.complexTensorInfos.real,s=s.complexTensorInfos.imag,i=a.data.get(i.dataId).values,s=a.data.get(s.dataId).values,[u,i,s]=c(n.shape,r.shape,t,u,i,s),u=a.makeTensorInfo(s,"float32",u),s=a.makeTensorInfo(s,"float32",i),i=$e({inputs:{real:u,imag:s},backend:a});return a.disposeIntermediateTensorInfo(o),a.disposeIntermediateTensorInfo(e),a.disposeIntermediateTensorInfo(u),a.disposeIntermediateTensorInfo(s),i}var u=a.data.get(n.dataId).values,s=a.data.get(r.dataId).values,i=p||n.dtype,[u,s]=l(n.shape,r.shape,u,s,i);return a.makeTensorInfo(s,i,u)}}function Re(S){return(e,t,n,r,a,o)=>{var s=A.Wap.assertAndGetBroadcastShape(e,t),i=A.D5U.sizeFromShape(s),u=s.length,l=A.D5U.computeStrides(s);const c=A.D5U.getTypedArrayFromDType("float32",i),p=A.D5U.getTypedArrayFromDType("float32",i),d=A.Wap.getBroadcastDims(e,s),h=A.Wap.getBroadcastDims(t,s);var f=A.Wap.mergeRealAndImagArrays(n,r),m=A.Wap.mergeRealAndImagArrays(a,o),g=e.length,y=A.D5U.computeStrides(e),v=t.length,x=A.D5U.computeStrides(t);if(d.length+h.length===0)for(let e=0;e<c.length;e++){var b=e%f.length,w=e%m.length,w=S(f[2*b],f[2*b+1],m[2*w],m[2*w+1]);c[e]=w.real,p[e]=w.imag}else for(let e=0;e<c.length;e++){const N=A.D5U.indexToLoc(e,u,l),$=N.slice(-g);d.forEach(e=>$[e]=0);var k=A.D5U.locToIndex($,g,y);const C=N.slice(-v);h.forEach(e=>C[e]=0);var I=A.D5U.locToIndex(C,v,x),I=S(f[2*k],f[2*k+1],m[2*I],m[2*I+1]);c[e]=I.real,p[e]=I.imag}return[c,p,s]}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const De=Ne((e,t)=>e+t);var Ae=Re((e,t,n,r)=>({real:e+n,imag:t+r})),_e=Ee(A.mm_,De,Ae);A.mm_;
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Oe(t,n,e,r,a){var o=A.D5U.sizeFromShape(r);const s=A.D5U.makeZerosTypedArray(a,e);for(let e=0;e<t.length;e++){var i=t[e];if(i<0)throw new Error("Input x must be non-negative!");a<=i||(s[i]+=0<o?n[e]:1)}return s}function Fe(n,r,a,o=!1){var e=n.shape[0],s=n.shape[1];const i=(0,A.f3b)([e,a],r.dtype);for(let t=0;t<e;t++)for(let e=0;e<s;e++){var u=n.get(t,e);if(u<0)throw new Error("Input x must be non-negative!");a<=u||(o?i.set(1,t,u):0<r.size?i.set(i.get(t,u)+r.get(t,e),t,u):i.set(i.get(t,u)+1,t,u))}return i}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Be(a){return(t,e,n)=>{const r=A.D5U.getTypedArrayFromDType(e,t.length);for(let e=0;e<t.length;++e)r[e]=a(t[e],n);return r}}function Pe(o,s,i){return({inputs:e,attrs:t,backend:n})=>{var r=e["x"];if(ke(r,o),"string"===r.dtype||"string"===i)throw new Error("unaryKernelFunc does not support string input/output");const a=n;e=a.data.get(r.dataId).values,n=i||r.dtype,t=s(e,n,t);return a.makeTensorInfo(r.shape,n,t)}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const Me=Be(e=>Math.ceil(e));var Le=Pe(A.gJX,Me);A.gJX;
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Ve(e,s,i,t){const u=A.D5U.getArrayFromDType(i,A.D5U.sizeFromShape(s));if(t&&"string"!==i){let n=0;e.forEach(e=>{var t=A.D5U.sizeFromShape(e.shape);u.set(e.vals,n),n+=t})}else{let o=0;e.forEach(t=>{var n="string"===i?A.Wap.fromUint8ToStringArray(t.vals):t.vals;let r=0;for(let e=0;e<t.shape[0];++e){var a=e*s[1]+o;for(let e=0;e<t.shape[1];++e)u[a+e]=n[r++]}o+=t.shape[1]})}return u}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const Ue=Be(e=>Math.exp(e));var We=Pe(A.NEP,Ue);A.NEP;
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const ze=Be(e=>Math.expm1(e));var Ge=Pe(A.Y0y,ze);A.Y0y;
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const He=Be(e=>Math.floor(e));var je=Pe(A.OR,He);A.OR;
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Xe(t,n,e){const r=(0,A.f3b)(e,t.dtype);for(let e=0;e<r.size;++e){const s=r.indexToLoc(e),i=s.slice();var a=i[0],o=i[2],o=n.locToIndex([a,o]);i[2]=n.values[o];o=t.locToIndex(i);r.values[e]=t.values[o]}return r}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const qe=Ne((e,t)=>t<e?1:0);var Ke=Ee(A.iZT,qe,null,"bool");A.iZT;
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const Ze=Ne((e,t)=>e<t?1:0);var Ye=Ee(A.vtC,Ze,null,"bool");A.vtC;
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Qe(e,t,n){var r=(t-e)/(n-1);const a=A.D5U.makeZerosTypedArray(n,"float32");a[0]=e;for(let e=1;e<a.length;e++)a[e]=a[e-1]+r;return a}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const Je=Be(e=>Math.log(e));var et=Pe(A.ZbH,Je);A.ZbH;
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function tt(n,r,e,t){const a=A.D5U.getTypedArrayFromDType(t,A.D5U.sizeFromShape(e));for(let e=0;e<a.length;++e){var o=e*r;let t=n[o];for(let e=0;e<r;++e){var s=n[o+e];s>t&&(t=s)}a[e]=t}return a}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const nt=Ne((e,t)=>Math.max(e,t));var rt=Ee(A.BMI,nt);A.BMI;
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const at=Ne((e,t)=>Math.min(e,t));var ot=Ee(A.q8u,at);A.q8u;
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const st=Ne((e,t)=>e*t);var it=Re((e,t,n,r)=>({real:e*n-t*r,imag:e*r+t*n})),ut=Ee(A.wYn,st,it);A.wYn;
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function lt(e,t,n){var r=A.D5U.createScalarValue(-1,n);return st([],t,r,e,n)}A.kuV;
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const ct=Ne((e,t)=>e!==t?1:0);var pt=Ee(A.yQU,ct,null,"bool");A.yQU;
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function dt(t,e,n,r,a){var o=e.length,s=A.D5U.sizeFromShape(e),i=A.D5U.computeStrides(e),u=A.D5U.computeStrides(a);const l=A.D5U.getTypedArrayFromDType(n,A.D5U.sizeFromShape(a));for(let e=0;e<s;++e){var c=A.D5U.indexToLoc(e,o,i);const d=new Array(c.length);for(let e=0;e<d.length;e++)d[e]=c[r[e]];var p=A.D5U.locToIndex(d,o,u);l[p]=t[e]}return l}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function ht(e){const{inputs:t,attrs:n,backend:r}=e;var a=t["x"],o=n["perm"];ke(a,"transpose");e=a.shape.length;const s=new Array(e);for(let e=0;e<s.length;e++)s[e]=a.shape[o[e]];e=dt(r.data.get(a.dataId).values,a.shape,a.dtype,o,s);return{dataId:r.write(e,s,a.dtype),shape:s,dtype:a.dtype}}A.G3Y;
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function ft(e,t,n,r){var[e,r]=A.Wap.computeOutAndReduceShapes(e,r),t=(0,A.x8V)(t,"int32");const a=A.D5U.makeZerosTypedArray(A.D5U.sizeFromShape(e),t);var o=A.D5U.sizeFromShape(r);for(let e=0;e<a.length;++e){var s=e*o;let t=1;for(let e=0;e<o;++e)t*=n[s+e];a[e]=t}return{outVals:a,outShape:e,outDtype:t}}A.DlI;
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function mt(e,t,n,r){if(e===t||e<t&&n<0||t<e&&1<n)return A.D5U.makeZerosTypedArray(0,r);var a=Math.abs(Math.ceil((t-e)/n));const o=A.D5U.makeZerosTypedArray(a,r);t<e&&1===n&&(n=-1),o[0]=e;for(let e=1;e<o.length;e++)o[e]=o[e-1]+n;return o}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const gt=Be(e=>1/Math.sqrt(e));var yt=Pe(A.bV0,gt);A.bV0;
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function vt(e,n,t,r,a){var o=A.kuN.isSliceContinous(r,n,t),s=A.D5U.sizeFromShape(t),i=A.D5U.computeStrides(r);if(o){i=A.kuN.computeFlatOffset(n,i);return"string"===a?e.slice(i,i+s):e.subarray(i,i+s)}e="string"===a?A.Wap.fromUint8ToStringArray(e):e;const u=(0,A.f3b)(r,a,e),l=(0,A.f3b)(t,a);for(let e=0;e<l.size;++e){const p=l.indexToLoc(e);var c=p.map((e,t)=>e+n[t]);l.set(u.get(...c),...p)}return"string"===a?A.Wap.fromStringArrayToUint8(l.values):l.values}A.p2w;
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const xt=Ne((e,t)=>{t=e-t;return t*t});var bt=Ee(A._tC,xt);A._tC;
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function wt(e,t,n,r){const a=(0,A.f3b)(e,t.dtype);for(let e=0;e<a.size;e++){var o=a.indexToLoc(e);const s=new Array(o.length);for(let e=0;e<s.length;e++)s[e]=o[e]*n[e]+r[e];a.set(t.get(...s),...o)}return a}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const kt=Ne((e,t)=>e-t);var It=Re((e,t,n,r)=>({real:e-n,imag:t-r})),Nt=Ee(A.Tr8,kt,It);A.Tr8;
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function $t(t,n){const r=new Array(t.rank);for(let e=0;e<r.length;e++)r[e]=t.shape[e]*n[e];const a=(0,A.f3b)(r,t.dtype);for(let e=0;e<a.values.length;++e){var o=a.indexToLoc(e);const i=new Array(t.rank);for(let e=0;e<i.length;e++)i[e]=o[e]%t.shape[e];var s=t.locToIndex(i);a.values[e]=t.values[s]}return a}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Ct(t,e,n,r,a){var o=e[e.length-1],[s,i]=[t.length/o,o];const u=A.D5U.getTypedArrayFromDType(n,s*r),l=A.D5U.getTypedArrayFromDType("int32",s*r);for(let e=0;e<s;e++){var c=e*i,p=t.subarray(c,c+i);const h=[];for(let e=0;e<p.length;e++)h.push({value:p[e],index:e});h.sort((e,t)=>t.value-e.value);c=e*r;const f=u.subarray(c,c+r),m=l.subarray(c,c+r);for(let e=0;e<r;e++)f[e]=h[e].value,m[e]=h[e].index}const d=e.slice();return d[d.length-1]=r,[(0,A.f3b)(d,n,u),(0,A.f3b)(d,"int32",l)]}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function St(t,e,r,n){var a=A.D5U.parseAxisParam(e,r)[0];const o=[1,r[0],1];for(let e=0;e<a;e++)o[0]*=r[e];o[1]=r[a];for(let e=a+1;e<r.length;e++)o[2]*=r[e];const s={},i=new Int32Array(r[a]),u=new A.YDk(o,n,t),l=[];var c,p=1===o[0]&&1===o[2];for(let n=0;n<r[a];n++){let e;if(p)e=t[n].toString();else{const m=[];for(let t=0;t<o[0];t++)for(let e=0;e<o[2];e++)m.push(u.get(t,n,e));e=m.join(",")}void 0!==s[e]?i[n]=s[e]:(c=Object.keys(s).length,s[e]=c,i[n]=c,l.push(n))}const d=o.slice();d[1]=Object.keys(s).length;const h=new A.YDk(d,n);l.forEach((n,r)=>{for(let t=0;t<o[0];t++)for(let e=0;e<o[2];e++)h.set(u.get(t,n,e),t,r,e)});const f=r.slice();return f[a]=d[1],{outputValues:h.values,outputShape:f,indices:i}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const{addImpl:Tt,bincountImpl:Et,bincountReduceImpl:Rt,ceilImpl:Dt,concatImpl:At,expImpl:_t,expm1Impl:Ot,floorImpl:Ft,gatherV2Impl:Bt,greaterImpl:Pt,lessImpl:Mt,linSpaceImpl:Lt,logImpl:Vt,maxImpl:Ut,maximumImpl:Wt,minimumImpl:zt,multiplyImpl:Gt,negImpl:Ht,prodImpl:jt,rangeImpl:Xt,rsqrtImpl:qt,simpleAbsImpl:Kt,sliceImpl:Zt,stridedSliceImpl:Yt,subImpl:Qt,tileImpl:Jt,topKImpl:en,transposeImpl:tn,uniqueImpl:nn}=r;
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function rn(t,e){return["x","y","z","w","u","v"].slice(0,e).map(e=>`${t}.${e}`)}function an(e,t){return 1===t?[e]:rn(e,t)}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class on{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var t,n,r,a,o=(this.outputShape=e).length;0===o?this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `:(a=an("rc",o),t=ve(o),n=function(t,n,r){if(1===t)return`rc > ${n[0]}`;let a="";for(let e=t-2;e<t;e++)a+=`${r[e]} >= ${n[e]}`,e<t-1&&(a+="||");return a}(o,e,a),r=function(e,t,n,r){if(1===e)return"";r=r.slice(-2);return`
    int r = ${r[0]};
    int c = ${r[1]};
    int rp1 = r + 1;
    int cp1 = c + 1;

    bool cEdge = cp1 >= ${t};
    bool rEdge = rp1 >= ${n};
  `}(o,e[e.length-1],e[e.length-2],a),o=a,e=(a=e).length,o=function(r,a){const o=[];for(let n=0;n<=1;n++)for(let e=0;e<=1;e++){let t=`${0===n?"r":"rp1"}, ${0===e?"c":"cp1"}`;for(let e=2;e<r;e++)t=`${a[a.length-1-e]},`+t;o.push(t)}return o}(e,o),a=1!==e?`getA(${o[0]}),
          cEdge ? 0. : getA(${o[1]}),
          rEdge ? 0. : getA(${o[2]}),
          rEdge || cEdge ? 0. : getA(${o[3]})`:`getA(rc),
            rc + 1 >= ${a[0]} ? 0. : getA(rc + 1),
            0, 0`,this.userCode=`
        void main() {
          ${t} rc = getOutputCoords();

          if(${n}) {
            setOutput(vec4(0));
          } else {
            ${r}

            setOutput(vec4(${a}));
          }
        }
      `)}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class sn{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e;let n="";for(let t=0;t<4;t++){let e="thisRC = rc;";t%2==1&&(e+="thisRC.z += 1;"),1<t&&(e+="thisRC.y += 1;"),n+=`
        ${e}
        ${0<t?"if(thisRC.y < rows && thisRC.z < cols){":""}
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${t}] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        ${0<t?"}":""}
      `}this.userCode=`
      ${function(e){e=U(["r","c","d"],e);return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${e}
      return ivec3(r, c, d);
    }
  `}(t)}
      ${W(e)}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = ${e[1]};
        int cols = ${e[2]};

        ${n}

        setOutput(result);
      }
    `}}
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class un{constructor(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}acquireTexture(e,t,n){var r=cn(t,n),t=pn(e,r,n);t in this.freeTextures||(this.freeTextures[t]=[]),t in this.usedTextures||(this.usedTextures[t]=[]);n=ln(e,r,this.gpgpu.gl,this.gpgpu.textureConfig,n);if(0<this.freeTextures[t].length){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=n,this.log();const a=this.freeTextures[t].shift();return this.usedTextures[t].push(a),a}let a;return r===i.PACKED_2X2_FLOAT32?a=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):r===i.PACKED_2X2_FLOAT16?a=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):r===i.UNPACKED_FLOAT32?a=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):r===i.UNPACKED_FLOAT16?a=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):r===i.PACKED_4X1_UNSIGNED_BYTE&&(a=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[t].push(a),this.numUsedTextures++,this._numBytesAllocated+=n,this.log(),a}releaseTexture(e,t,n,r){if(null!=this.freeTextures){var a=cn(n,r),n=pn(t,a,r);n in this.freeTextures||(this.freeTextures[n]=[]);a=ln(t,a,this.gpgpu.gl,this.gpgpu.textureConfig,r),r=(0,A.OBj)().get("WEBGL_DELETE_TEXTURE_THRESHOLD");-1!==r&&this._numBytesAllocated>r?(this.gpgpu.deleteMatrixTexture(e),this._numBytesAllocated-=a):(this.freeTextures[n].push(e),this.numFreeTextures++,this._numBytesFree+=a),this.numUsedTextures--;const o=this.usedTextures[n];e=o.indexOf(e);if(e<0)throw new Error("Cannot release a texture that was never provided by this texture manager");o.splice(e,1),this.log()}}log(){var e;this.logEnabled&&(e=this.numFreeTextures+this.numUsedTextures,console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${e})`),e=this._numBytesFree/this._numBytesAllocated,console.log(`Bytes allocated: ${this._numBytesAllocated}`),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*e)}%)`))}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(null!=this.freeTextures){for(const e in this.freeTextures)this.freeTextures[e].forEach(e=>{this.gpgpu.deleteMatrixTexture(e)});for(const t in this.usedTextures)this.usedTextures[t].forEach(e=>{this.gpgpu.deleteMatrixTexture(e)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}function ln(e,t,n,r,a){var o,r=function(e,t){switch(e){case i.PACKED_2X2_FLOAT32:return re(t);case i.PACKED_2X2_FLOAT16:return ae(t);case i.UNPACKED_FLOAT32:return ee(t);case i.UNPACKED_FLOAT16:return te(t);case i.PACKED_4X1_UNSIGNED_BYTE:return ne(t);default:throw new Error(`Unknown physical texture type ${e}`)}}(t,r);let s;s=a?([a,o]=m(e[0],e[1]),a*o):([o,e]=l(e[0],e[1]),o*e);r=function(e,t){if(t===e.R32F)return 4;if(t===e.R16F)return 2;if(t===e.RGBA32F)return 16;if(t===e.RGBA)return 16;if(t===e.RGBA16F)return 8;throw new Error(`Unknown internal format ${t}`)}(n,r);return s*r}function cn(e,t){if(e===h.UPLOAD)return i.PACKED_2X2_FLOAT32;if(e===h.RENDER||null==e)return t=t,(0,A.OBj)().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?t?i.PACKED_2X2_FLOAT32:i.UNPACKED_FLOAT32:t?i.PACKED_2X2_FLOAT16:i.UNPACKED_FLOAT16;if(e===h.DOWNLOAD||e===h.PIXELS)return i.PACKED_4X1_UNSIGNED_BYTE;throw new Error(`Unknown logical texture type ${e}`)}function pn(e,t,n){return`${e[0]}_${e[1]}_${t}_${n}`}
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class dn{constructor(e,t){this.variableNames=["A"],this.outputShape=e,this.userCode=`
      float unaryOperation(float x) {
        ${t}
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `}}const hn="if (isnan(x)) return x;",fn="return x;",mn="return abs(x);";const gn="return (x >= 0.0) ? x : (exp(x) - 1.0);",yn=hn+`
  return (x < 0.0) ? 0.0 : x;
`,vn=hn+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,xn="return x;",bn="return x;",wn=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,kn=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,In=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`;class Nn{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.userCode=`
      vec4 unaryOperation(vec4 x) {
        ${t}
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class $n{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1;var t=(this.outputShape=e).length;const n=an("rc",t);var r=ve(t),e=function(t,n){if(1===t)return"rc";let r="";for(let e=0;e<t;e++)r+=n[e],e<t-1&&(r+=",");return r}(t,n);const a=n.slice(-2);t=t<=1?"rc":`vec2(${a.join(",")})`;this.userCode=`
      void main() {
        ${r} rc = getOutputCoords();
        vec4 packedInput = getA(${e});

        setOutput(getChannel(packedInput, ${t}));
      }
    `}}
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const Cn=A.GDt.ZA,Sn={};class Tn extends A.Zuw{constructor(e){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.warnedAboutMemory=!1,this.warnedAboutCPUBackend=!1,this.pendingDeletes=0,!(this.disposed=!1,A.OBj)().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");var t,n;null==e?(t=u((0,A.OBj)().getNumber("WEBGL_VERSION")),this.binaryCache=((n=(0,A.OBj)().getNumber("WEBGL_VERSION"))in Sn||(Sn[n]={}),Sn[n]),this.gpgpu=new se(t),this.canvas=t.canvas,this.gpgpuCreatedLocally=!0):(this.gpgpu=e,this.binaryCache={},this.gpgpuCreatedLocally=!1,this.canvas=e.gl.canvas),this.textureManager=new un(this.gpgpu),this.numMBBeforeWarning=null==(0,A.OBj)().global.screen?1024:(0,A.OBj)().global.screen.height*(0,A.OBj)().global.screen.width*window.devicePixelRatio*600/1024/1024,this.texData=new A.JLz(this,(0,A.SRH)())}numDataIds(){return this.texData.numDataIds()+(this.cpuBackend?this.cpuBackend.numDataIds():0)-this.pendingDeletes}write(e,t,n){if(((0,A.OBj)().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||(0,A.OBj)().getBool("DEBUG"))&&this.checkNumericalProblems(e),"complex64"===n&&null!=e)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");var r={};return this.texData.set(r,{shape:t,dtype:n,values:e,usage:h.UPLOAD,refCount:1,complexParentRefCount:0}),r}incRef(e){const t=this.texData.get(e);t.refCount++}decRef(e){if(this.texData.has(e)){const t=this.texData.get(e);t.refCount--}}decComplexRef(e){if(this.texData.has(e)){const t=this.texData.get(e);0<t.complexParentRefCount&&t.refCount--}}move(e,t,n,r){if((0,A.OBj)().getBool("DEBUG")&&this.checkNumericalProblems(t),"complex64"===r)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:n,dtype:r,values:t,usage:h.UPLOAD,refCount:1,complexParentRefCount:0})}disposeIntermediateTensorInfo(e){e=e.dataId;if(this.texData.has(e)){const t=this.texData.get(e);t.refCount--,t.refCount<1&&this.disposeData(e)}}readSync(t){var{values:e,dtype:n,complexTensorInfos:r,slice:a,shape:o,isPacked:s}=this.texData.get(t);if(null!=a){let e;e=new(s?Nn:dn)(o,xn);s=this.runWebGLProgram(e,[{dataId:t,shape:o,dtype:n}],n),o=this.readSync(s.dataId);return this.disposeIntermediateTensorInfo(s),o}if(null!=e)return this.convertAndCacheOnCPU(t);if("string"===n)return e;e=null!=this.activeTimers;let i;e&&(i=A.D5U.now());let u;return u="complex64"===n?(n=this.readSync(r.real.dataId),r=this.readSync(r.imag.dataId),A.Wap.mergeRealAndImagArrays(n,r)):this.getValuesFromTexture(t),e&&(this.downloadWaitMs+=A.D5U.now()-i),this.convertAndCacheOnCPU(t,u)}async read(t){if(this.pendingRead.has(t)){const p=this.pendingRead.get(t);return new Promise(e=>p.push(e))}var{values:e,shape:n,slice:r,dtype:a,complexTensorInfos:o,isPacked:s}=this.texData.get(t);if(null!=r){let e;e=new(s?Nn:dn)(n,xn);r=this.runWebGLProgram(e,[{dataId:t,shape:n,dtype:a}],a),s=this.read(r.dataId);return this.disposeIntermediateTensorInfo(r),s}if(null!=e)return this.convertAndCacheOnCPU(t);if(!(0,A.OBj)().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&2===(0,A.OBj)().getNumber("WEBGL_VERSION"))throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let i=null,u;"complex64"!==a&&(0,A.OBj)().get("WEBGL_BUFFER_SUPPORTED")&&(u=this.decode(t),e=this.texData.get(u.dataId),i=this.gpgpu.createBufferFromTexture(e.texture,...f(n))),this.pendingRead.set(t,[]),"complex64"!==a&&await this.gpgpu.createAndWaitForFence();let l;l="complex64"===a?(o=(a=await Promise.all([this.read(o.real.dataId),this.read(o.imag.dataId)]))[0],a=a[1],A.Wap.mergeRealAndImagArrays(o,a)):null==i?this.getValuesFromTexture(t):(n=A.D5U.sizeFromShape(n),this.gpgpu.downloadFloat32MatrixFromBuffer(i,n)),null!=u&&this.disposeIntermediateTensorInfo(u);const c=this.convertAndCacheOnCPU(t,l),p=this.pendingRead.get(t);return this.pendingRead.delete(t),p.forEach(e=>e(c)),this.pendingDisposal.has(t)&&(this.pendingDisposal.delete(t),this.disposeData(t),this.pendingDeletes--),c}bufferSync(e){const t=this.readSync(e.dataId);let n=t;if("string"===e.dtype)try{n=t.map(e=>A.D5U.decodeString(e))}catch(e){throw new Error("Failed to decode encoded string bytes into utf-8")}return(0,A.f3b)(e.shape,e.dtype,n)}checkNumericalProblems(t){var n;if(null!=t)for(let e=0;e<t.length;e++){var r=t[e];if(n=r,!((0,A.OBj)().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||0===n||5.96e-8<Math.abs(n)&&Math.abs(n)<65504)){if((0,A.OBj)().getBool("WEBGL_RENDER_FLOAT32_CAPABLE"))throw Error(`The value ${r} cannot be represented with your `+"current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'");throw Error(`The value ${r} cannot be represented on this device.`)}}}getValuesFromTexture(e){var{shape:t,dtype:n,isPacked:r}=this.texData.get(e),a=A.D5U.sizeFromShape(t);if((0,A.OBj)().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){var o=this.decode(e);const s=this.texData.get(o.dataId),i=this.gpgpu.downloadMatrixFromPackedTexture(s.texture,...f(t)).subarray(0,a);return this.disposeIntermediateTensorInfo(o),i}r=(0,A.OBj)().getBool("WEBGL_PACK")&&!0===r,t=r?T(t):t,r=new(r?X:j)(t),e=this.runWebGLProgram(r,[{shape:t,dtype:n,dataId:e}],"float32");const s=this.texData.get(e.dataId),i=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(s.texture,s.texShape[0],s.texShape[1]).subarray(0,a);return this.disposeIntermediateTensorInfo(e),i}async time(e){var t=this.activeTimers,n=[];let r=!1;null==this.programTimersStack?(this.programTimersStack=n,r=!0):this.activeTimers.push(n),this.activeTimers=n,e();e=A.D5U.flatten(this.activeTimers.map(e=>e.query)).filter(e=>null!=e);const a=A.D5U.flatten(this.activeTimers.map(e=>e.name)).filter(e=>null!=e);this.activeTimers=t,r&&(this.programTimersStack=null);const o={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};if(0<(0,A.OBj)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")){const s=await Promise.all(e);o.kernelMs=A.D5U.sum(s),o.getExtraProfileInfo=()=>s.map((e,t)=>({name:a[t],ms:e})).map(e=>`${e.name}: ${e.ms}`).join(", ")}else o.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,o}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return 0<(0,A.OBj)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")?this.gpgpu.beginQuery():{startMs:A.D5U.now(),endMs:null}}endTimer(e){return 0<(0,A.OBj)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")?this.gpgpu.endQuery():e.endMs=A.D5U.now(),e}async getQueryTime(e){return 0<(0,A.OBj)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")?this.gpgpu.waitForQueryAndGetTime(e):e.endMs-e.startMs}disposeData(e){if(!this.pendingDisposal.has(e)){if(this.pendingRead.has(e))return this.pendingDisposal.add(e),void this.pendingDeletes++;var t;this.texData.has(e)&&(0<this.texData.get(e).complexParentRefCount?this.texData.get(e).refCount--:(this.releaseGPUData(e),t=this.texData.get(e)["complexTensorInfos"],null!=t&&(this.texData.get(t.real.dataId).complexParentRefCount--,this.disposeIntermediateTensorInfo(t.real),this.texData.get(t.imag.dataId).complexParentRefCount--,this.disposeIntermediateTensorInfo(t.imag)),this.texData.delete(e)))}}releaseGPUData(e){var{texture:t,dtype:n,texShape:r,usage:a,isPacked:o,slice:s}=this.texData.get(e),i=s&&s.origDataId||e,s=this.dataRefCount.get(i);1<s?this.dataRefCount.set(i,s-1):(this.dataRefCount.delete(i),null!=t&&(this.numBytesInGPU-=this.computeBytes(r,n),this.textureManager.releaseTexture(t,r,a,o)));const u=this.texData.get(e);u.texture=null,u.texShape=null,u.isPacked=!1,u.slice=null}getTexture(e){return this.uploadToGPU(e),this.texData.get(e).texture}getDataInfo(e){return this.texData.get(e)}getCPUBackend(){return(0,A.OBj)().getBool("WEBGL_CPU_FORWARD")?(null==this.cpuBackend&&(this.cpuBackend=(0,A.SRH)().findBackend("cpu")),this.cpuBackend):null}shouldExecuteOnCPU(e,t=128){var n=this.getCPUBackend();return(0,A.OBj)().getBool("IS_TEST")||this.warnedAboutCPUBackend||null!=n||(console.warn("Your application contains ops that are small enough to be executed on the CPU backend, however the CPU backend cannot be found. Consider importing the CPU backend (@tensorflow/tfjs-backend-cpu) for better performance."),this.warnedAboutCPUBackend=!0),null!=n&&e.every(e=>null==this.texData.get(e.dataId).texture&&A.D5U.sizeFromShape(e.shape)<t)}getGPGPUContext(){return this.gpgpu}where(e){A.Wap.warn("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");var t=e.dataSync();return Cn(e.shape,t)}packedUnaryOp(e,t,n){t=new Nn(e.shape,t);return this.compileAndRun(t,[e],n)}abs(e){if(this.shouldExecuteOnCPU([e])&&"complex64"!==e.dtype){var t=Kt(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,t)}if((0,A.OBj)().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,mn,e.dtype);t=new dn(e.shape,mn);return this.compileAndRun(t,[e])}makeTensorInfo(e,t,n){let r;var a;return r="string"===t&&null!=n&&0<n.length&&A.D5U.isString(n[0])?(a=n.map(e=>A.D5U.encodeString(e)),this.write(a,e,t)):this.write(n,e,t),this.texData.get(r).usage=null,{dataId:r,shape:e,dtype:t}}makeOutput(e,t,n){var n=this.makeTensorInfo(e,t,n)["dataId"];return(0,A.SRH)().makeTensorFromDataId(n,e,t,this)}unpackTensor(e){var t=new $n(e.shape);return this.runWebGLProgram(t,[e],e.dtype)}packTensor(e){var t=new on(e.shape);return this.runWebGLProgram(t,[e],e.dtype,null,!0)}packedReshape(e,t){var n=[C(e.shape),...S(e.shape)],r={dtype:e.dtype,shape:n,dataId:e.dataId},a=[C(t),...S(t)],n=new sn(a,n),e=this.runWebGLProgram(n,[r],e.dtype,null,!0);return{dataId:e.dataId,shape:t,dtype:e.dtype}}decode(e){var{isPacked:t,shape:n,dtype:r}=this.texData.get(e),a=T(n);let o;o=new(t?H:G)(a);return{dtype:r,shape:n,dataId:this.runWebGLProgram(o,[{shape:a,dtype:r,dataId:e}],r,null,!0).dataId}}runWebGLProgram(a,e,t,n,r=!1){var o=this.makeTensorInfo(a.outputShape,t);const s=this.texData.get(o.dataId);if(a.packedOutput&&(s.isPacked=!0),a.outPackingScheme===d.DENSE){const p=f(a.outputShape);s.texShape=p.map(e=>2*e)}if(null!=a.outTexUsage&&(s.usage=a.outTexUsage),0===A.D5U.sizeFromShape(o.shape))return s.values=A.D5U.getTypedArrayFromDType(o.dtype,0),o;const i=[],u=e.map(e=>{if("complex64"===e.dtype)throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let t=this.texData.get(e.dataId);if(null==t.texture){if(!a.packedInputs&&A.D5U.sizeFromShape(e.shape)<=(0,A.OBj)().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:e.shape,texData:null,isUniform:!0,uniformValues:t.values};a.packedInputs&&(t.isPacked=!0,t.shape=e.shape)}else if(!!t.isPacked!=!!a.packedInputs)e=t.isPacked?this.unpackTensor(e):this.packTensor(e),i.push(e),t=this.texData.get(e.dataId);else if(t.isPacked&&!R(t.shape,e.shape)){const r=e;var n=e.shape;e.shape=t.shape,e=this.packedReshape(e,n),i.push(e),t=this.texData.get(e.dataId),r.shape=n}return this.uploadToGPU(e.dataId),{shape:e.shape,texData:t,isUniform:!1}});this.uploadToGPU(o.dataId);const l={shape:o.shape,texData:s,isUniform:!1};t=function(e,t,n){let r="";return t.concat(n).forEach(e=>{var t=null!=e.texData&&null!=e.texData.slice&&0<e.texData.slice.flatOffset,n=e.isUniform?"uniform":e.texData.texShape;r+=`${e.shape}_${n}_${t}`}),n=e.userCode,e=e.constructor.name,e+="_"+r+"_"+n}(a,u,l),e=this.getAndSaveBinary(t,()=>
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(t,r,e,n){var a=r.userCode;const o=e.map((e,t)=>{const n={logicalShape:e.shape,texShape:e.isUniform?null:e.texData.texShape,isUniform:e.isUniform,isPacked:!e.isUniform&&e.texData.isPacked,flatOffset:null};return null!=e.texData&&null!=e.texData.slice&&0<e.texData.slice.flatOffset&&(n.flatOffset=e.texData.slice.flatOffset),{name:r.variableNames[t],shapeInfo:n}});var s=o.map(e=>e.shapeInfo),e={logicalShape:n.shape,texShape:n.texData.texShape,isUniform:!1,isPacked:n.texData.isPacked,flatOffset:null},n=ue(o,e,a,r.packedInputs),i=t.createProgram(n);let u=null;a=t.getUniformLocation(i,"NAN",!1),1===(0,A.OBj)().getNumber("WEBGL_VERSION")&&(u=t.getUniformLocation(i,"INFINITY",!1));const l={};for(let e=0;e<r.variableNames.length;e++){var c=r.variableNames[e];l[c]=t.getUniformLocation(i,c,!1),l[`offset${c}`]=t.getUniformLocation(i,`offset${c}`,!1)}return{program:r,source:n,webGLProgram:i,uniformLocations:l,inShapeInfos:s,outShapeInfo:e,infLoc:u,nanLoc:a}}(this.gpgpu,a,u,l)),t=null!=this.activeTimers;let c;if(t&&(c=this.startTimer()),function(a,o,e,t,n){we(o.inShapeInfos,e),we([o.outShapeInfo],[t]);var r=t.texData.texture,s=t.texData.texShape;t.texData.isPacked?a.setOutputPackedMatrixTexture(r,s[0],s[1]):a.setOutputMatrixTexture(r,s[0],s[1]),a.setProgram(o.webGLProgram),1===(0,A.OBj)().getNumber("WEBGL_VERSION")&&null!==o.infLoc&&a.gl.uniform1f(o.infLoc,1/0),null!==o.nanLoc&&a.gl.uniform1f(o.nanLoc,NaN),e.forEach((t,e)=>{var n=o.program.variableNames[e],r=o.uniformLocations[n],n=o.uniformLocations[`offset${n}`];if(null!=r)if(t.isUniform)if(A.D5U.sizeFromShape(t.shape)<2)a.gl.uniform1f(r,t.uniformValues[0]);else{let e=t.uniformValues;e instanceof Float32Array||(e=new Float32Array(e)),a.gl.uniform1fv(r,e)}else null!=t.texData.slice&&null!=n&&a.gl.uniform1i(n,t.texData.slice.flatOffset),a.setInputMatrixTexture(t.texData.texture,r,e)}),null!=n&&n(a,o.webGLProgram),a.executeProgram()}(this.gpgpu,e,u,l,n),i.forEach(e=>this.disposeIntermediateTensorInfo(e)),t&&(c=this.endTimer(c),this.activeTimers.push({name:a.constructor.name,query:this.getQueryTime(c)})),(0,A.OBj)().getBool("WEBGL_LAZILY_UNPACK")||!s.isPacked||!1!==r)return o;r=this.unpackTensor(o);return this.disposeIntermediateTensorInfo(o),r}compileAndRun(e,t,n,r,a=!1){n=n||t[0].dtype;a=this.runWebGLProgram(e,t,n,r,a);return(0,A.SRH)().makeTensorFromDataId(a.dataId,a.shape,a.dtype)}getAndSaveBinary(e,t){return e in this.binaryCache||(this.binaryCache[e]=t()),this.binaryCache[e]}getTextureManager(){return this.textureManager}dispose(){if(!this.disposed){if(!(0,A.OBj)().getBool("IS_TEST")){const e=Object.keys(this.binaryCache);e.forEach(e=>{this.gpgpu.deleteProgram(this.binaryCache[e].webGLProgram),delete this.binaryCache[e]})}this.textureManager.dispose(),null!=this.canvas&&"undefined"!=typeof HTMLCanvasElement&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0}}floatPrecision(){return null==this.floatPrecisionValue&&(this.floatPrecisionValue=(0,A.lub)(()=>{if(!(0,A.OBj)().get("WEBGL_RENDER_FLOAT32_ENABLED")){var e=(0,A.OBj)().getBool("DEBUG");(0,A.OBj)().set("DEBUG",!1);var t=this.abs((0,A.iD$)(1e-8)).dataSync()[0];if((0,A.OBj)().set("DEBUG",e),0<t)return 32}return 16})),this.floatPrecisionValue}epsilon(){return 32===this.floatPrecision()?1e-7:1e-4}uploadToGPU(o){const s=this.texData.get(o);var{shape:i,dtype:u,values:l,texture:c,usage:e,isPacked:p}=s;if(null==c){o=null!=this.activeTimers;let r;o&&(r=A.D5U.now());let a=s.texShape;if(null==a&&(a=function(n,r=!1){let e=(0,A.OBj)().getNumber("WEBGL_MAX_TEXTURE_SIZE");var t;r&&(e*=2,1===(n=n.map((e,t)=>t>=n.length-2?A.D5U.nearestLargerEven(n[t]):n[t])).length&&(n=[2,n[0]])),2!==n.length&&(t=A.D5U.squeezeShape(n),n=t.newShape);let a=A.D5U.sizeFromShape(n);if(n.length<=1&&a<=e)return[1,a];if(2===n.length&&n[0]<=e&&n[1]<=e)return n;if(3===n.length&&n[0]*n[1]<=e&&n[2]<=e)return[n[0]*n[1],n[2]];if(3===n.length&&n[0]<=e&&n[1]*n[2]<=e)return[n[0],n[1]*n[2]];if(4===n.length&&n[0]*n[1]*n[2]<=e&&n[3]<=e)return[n[0]*n[1]*n[2],n[3]];if(4===n.length&&n[0]<=e&&n[1]*n[2]*n[3]<=e)return[n[0],n[1]*n[2]*n[3]];if(r){r=C(n);let e=2,t=2;return n.length&&([e,t]=S(n)),a=r*(e/2)*(t/2),A.D5U.sizeToSquarishShape(a).map(e=>2*e)}return A.D5U.sizeToSquarishShape(a)}(i,p),s.texShape=a),null!=l){c=T(i);let e,t=a[1],n=a[0];i=l instanceof Uint8Array;e=p?([t,n]=m(a[0],a[1]),new K(c,[n,t],i)):new q(c,[n,t],i);c=this.makeTensorInfo([n,t],u);this.texData.get(c.dataId).usage=i?h.PIXELS:h.UPLOAD,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(c.dataId),t,n,l);i=this.runWebGLProgram(e,[c],u,null,!0),l=this.texData.get(i.dataId);s.texture=l.texture,s.texShape=l.texShape,s.isPacked=l.isPacked,s.usage=l.usage,this.disposeIntermediateTensorInfo(c),this.texData.delete(i.dataId),s.values=null,o&&(this.uploadWaitMs+=A.D5U.now()-r)}else{p=this.acquireTexture(a,e,u,p);s.texture=p}}}convertAndCacheOnCPU(e,t){const n=this.texData.get(e);var r=n["dtype"];return this.releaseGPUData(e),null!=t&&(n.values=function(t,e){{if("float32"===e||"complex64"===e)return t;if("int32"!==e&&"bool"!==e)throw new Error(`Unknown dtype ${e}`);{const n=new("int32"===e?Int32Array:Uint8Array)(t.length);for(let e=0;e<n.length;++e)n[e]=Math.round(t[e]);return n}}}(t,r)),n.values}acquireTexture(e,t,n,r){return this.numBytesInGPU+=this.computeBytes(e,n),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024&&(n=(this.numBytesInGPU/1024/1024).toFixed(2),this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${n} MB, `+"most likely due to a memory leak")),this.textureManager.acquireTexture(e,t,r)}computeBytes(e,t){return e[0]*e[1]*A.D5U.bytesPerElement(t)}}
/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
A.C2$.isBrowser()&&(0,A.jqO)("webgl",()=>new Tn,2);class En{constructor(e,t,n){this.variableNames=["A","B"],this.outputShape=A.Wap.assertAndGetBroadcastShape(t,n),this.userCode=`
      float binaryOperation(float a, float b) {
        ${e}
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `}}class Rn{constructor(e,t,n,r=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=A.Wap.assertAndGetBroadcastShape(t,n);n=this.outputShape.length;let a="";r&&(0===n||1===A.D5U.sizeFromShape(this.outputShape)?a=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `:(r=ve(n),a=`
          ${r} coords = getOutputCoords();
        `,1===n?a+=`
            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `:(r=an("coords",n),a+=`
            bool nextRowOutOfBounds =
              (${r[n-2]} + 1) >= ${this.outputShape[n-2]};
            bool nextColOutOfBounds =
              (${r[n-1]} + 1) >= ${this.outputShape[n-1]};
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `))),this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        ${e}
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        ${a}

        setOutput(result);
      }
    `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Dn(e){const{inputs:t,backend:n}=e;var e=t["x"];return n.incRef(e.dataId),{dataId:e.dataId,shape:e.shape,dtype:e.dtype}}var An={kernelName:A.iJz,backendName:"webgl",kernelFunc:Dn};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function _n(e){const{inputs:t,backend:n}=e;var{real:r,imag:a}=t,e=n.makeTensorInfo(r.shape,"complex64");const o=n.texData.get(e.dataId);r=Dn({inputs:{x:r},backend:n});const s=n.texData.get(r.dataId);s.complexParentRefCount++;a=Dn({inputs:{x:a},backend:n});const i=n.texData.get(a.dataId);return i.complexParentRefCount++,o.complexTensorInfos={real:r,imag:a},e}var On={kernelName:A.Zz9,backendName:"webgl",kernelFunc:_n};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const Fn="return (a < 0.) ? b * a : a;",Bn=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;var Pn={kernelName:A.J$2,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e;var a=t["x"],o=r["alpha"],e=n.makeTensorInfo([],"float32",A.D5U.createScalarValue(o,"float32")),o=(0,A.OBj)().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Rn(Bn,a.shape,e.shape):new En(Fn,a.shape,e.shape),a=n.runWebGLProgram(o,[a,e],a.dtype);return n.disposeIntermediateTensorInfo(e),a}};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const Mn="return (a < 0.) ? b * a : a;",Ln=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;var Vn={kernelName:A.o0g,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e;var{x:r,alpha:a}=t,e=(0,A.OBj)().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Rn(Ln,r.shape,a.shape):new En(Mn,r.shape,a.shape);return n.runWebGLProgram(e,[r,a],r.dtype)}};function Un({opSnippet:o,packedOpSnippet:s,cpuKernelImpl:i,dtype:u}){return({inputs:e,backend:t})=>{var e=e["x"];const n=t;t=u||e.dtype;if(n.shouldExecuteOnCPU([e])&&null!=i){var r=n.texData.get(e.dataId),r=i(r.values,t);return n.makeTensorInfo(e.shape,t,r)}r=(0,A.OBj)().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&null!=s;let a;return a=r?new Nn(e.shape,s):new dn(e.shape,o),n.runWebGLProgram(a,[e],t)}}function Wn({opSnippet:d,packedOpSnippet:h,checkOutOfBounds:f=!1,supportsComplex:m=!1,cpuKernelImpl:g,dtype:y}){return({inputs:e,backend:t})=>{const{a:o,b:s}=e,i=t;if(m&&"complex64"===o.dtype){const l=i.texData.get(o.dataId),c=i.texData.get(s.dataId);var[t,n]=[[l.complexTensorInfos.real,c.complexTensorInfos.real],[l.complexTensorInfos.imag,c.complexTensorInfos.imag]].map(e=>{var[t,n]=e,r={dataId:t.dataId,dtype:t.dtype,shape:o.shape},a={dataId:n.dataId,dtype:n.dtype,shape:s.shape},e=new En(d,o.shape,s.shape);return i.runWebGLProgram(e,[r,a],(0,A.x8V)(t.dtype,n.dtype))}),r=_n({inputs:{real:t,imag:n},backend:i});return i.disposeIntermediateTensorInfo(t),i.disposeIntermediateTensorInfo(n),r}n=y||(0,A.x8V)(o.dtype,s.dtype);if(i.shouldExecuteOnCPU([o,s])&&null!=g){var r=i.texData.get(o.dataId),a=i.texData.get(s.dataId),[r,a]=g(o.shape,s.shape,r.values,a.values,n),a=i.makeTensorInfo(a,n);const p=i.texData.get(a.dataId);return p.values=r,a}a=(0,A.OBj)().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&null!=h;let u;return u=a?new Rn(h,o.shape,s.shape,f):new En(d,o.shape,s.shape),i.runWebGLProgram(u,[o,s],n)}}function zn(e,t=!1){if("linear"===e)return t?bn:fn;if("relu"===e)return t?kn:yn;if("elu"===e)return t?wn:gn;if("relu6"===e)return t?In:vn;if("prelu"===e)return t?Ln:Mn;if("leakyrelu"===e)return t?Bn:Fn;throw new Error(`Activation ${e} has not been implemented for the WebGL backend.`)}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class Gn{constructor(e,t,n,r=!1,a=!1,o=!1,s=null,i=!1,u=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n;var l=r?e[1]:e[2],c=Math.ceil(l/2),n=r?"i * 2, rc.y":"rc.y, i * 2",l=a?"rc.z, i * 2":"i * 2, rc.z",r=r?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],a=a?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"];let p="",d="";s&&(p=i?`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${s}
        }`:u?`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${s}
        }`:`vec4 activation(vec4 x) {
          ${s}
        }`,d="result = activation(result);");s=o?"result += getBiasAtOutCoords();":"";o&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),u&&this.variableNames.push("leakyreluAlpha");let h="rc.x",f="rc.x";e[0]<t[0]?h=`int(min(float(rc.x), ${e[0]-1}.))`:t[0]<e[0]&&(f=`int(min(float(rc.x), ${t[0]-1}.))`),this.userCode=`
      ${p}

      const float sharedDimension = ${c}.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        for (int i = 0; i < ${c}; i++) {
          int batchA = ${h};
          int batchB = ${f};
          vec4 a = getMatrixA(batchA, ${n});
          vec4 b = getMatrixB(batchB, ${l});

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (${r[0]} * ${a[0]});
          result += (${r[1]} * ${a[1]});
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        ${s}

        ${d}

        setOutput(result);
      }
    `}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const Hn={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"};class jn{constructor(e,t,n){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=A.Wap.assertAndGetBroadcastShape(t,n),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        ${e}
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const Xn="return a * b;";function qn(e){const{inputs:t,backend:n}=e;var{a:r,b:a}=t,o=A.Wap.upcastType(r.dtype,a.dtype);if("complex64"===r.dtype){var s=n.texData.get(r.dataId),e=n.texData.get(a.dataId),i=new jn(Hn.REAL,r.shape,a.shape),u=new jn(Hn.IMAG,r.shape,a.shape);const t=[{dataId:s.complexTensorInfos.real.dataId,dtype:s.complexTensorInfos.real.dtype,shape:r.shape},{dataId:s.complexTensorInfos.imag.dataId,dtype:s.complexTensorInfos.imag.dtype,shape:r.shape},{dataId:e.complexTensorInfos.real.dataId,dtype:e.complexTensorInfos.real.dtype,shape:a.shape},{dataId:e.complexTensorInfos.imag.dataId,dtype:e.complexTensorInfos.imag.dtype,shape:a.shape}];e=n.runWebGLProgram(i,t,"float32"),i=n.runWebGLProgram(u,t,"float32"),u=_n({inputs:{real:e,imag:i},backend:n});return n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(i),u}if(n.shouldExecuteOnCPU([r,a])){var i=n.texData.get(r.dataId),u=n.texData.get(a.dataId),[i,u]=Gt(r.shape,a.shape,i.values,u.values,o),u=n.makeTensorInfo(u,o);const c=n.texData.get(u.dataId);return c.values=i,u}let l;return l=new((0,A.OBj)().getBool("WEBGL_PACK_BINARY_OPERATIONS")?Rn:En)(Xn,r.shape,a.shape),n.runWebGLProgram(l,[r,a],o)}var Kn={kernelName:A.wYn,backendName:"webgl",kernelFunc:qn};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Zn(e){var{inputs:t,backend:n,attrs:r}=e;const a=t["x"];var o=r["shape"];const s=n,i=A.D5U.sizeFromShape(a.shape),u=A.D5U.inferFromImplicitShape(o,i),l=A.D5U.sizeFromShape(u);A.D5U.assert(i===l,()=>`The new shape (${u}) has ${l} elements and the old `+`shape (${a.shape}) has ${i} elements. The new shape and old `+"shape must have the same number of elements.");var c=s.texData.get(a.dataId);return!c.isPacked||R(a.shape,u)||null!==c.texture&&R(c.shape,u)?(s.incRef(a.dataId),{dataId:a.dataId,shape:u,dtype:a.dtype}):(e=a,t=u,r=s,n=[C(e.shape),...S(e.shape)],o={dtype:e.dtype,shape:n,dataId:e.dataId},c=[C(t),...S(t)],n=new sn(c,n),{dataId:(e=r.runWebGLProgram(n,[o],e.dtype,null,!0)).dataId,shape:t,dtype:e.dtype})}var Yn={kernelName:A.HZH,backendName:"webgl",kernelFunc:Zn};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class Qn{constructor(e,t){this.variableNames=["x"];var{windowSize:n,batchSize:r,inSize:a,outSize:e}=e;this.outputShape=[r,e];r=4*Math.floor(n/4),e=n%4;let o="sumValue += dot(values, ones);";if(null!=t){const i=1/t;o=`sumValue += dot(values * ${A.D5U.isInt(i)?i.toPrecision(2):i}, ones);`}let s=0<a%n?`
        if (inIdx < 0 || inIdx >= ${a}) {
          return 0.0;
        }
      `:"";this.userCode=`
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${s}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${n};

        float sumValue = 0.0;

        for (int i = 0; i < ${r}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${o}
        }

        int inIdx = inOffset + ${r};
        if (${1==e}) {
          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);

          ${o}
        } else if (${2==e}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1), 0.0, 0.0);

          ${o}
        } else if (${3==e}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2), 0.0);

          ${o}
        }
        setOutput(sumValue);
      }
    `}}
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class Jn{constructor(e,t){this.variableNames=["x"];var{windowSize:n,batchSize:r,inSize:a,outSize:e}=e;this.outputShape=[r,e];let o="0.0",s="";"prod"===t?o="1.0":"min"===t?(o="1.0 / 1e-20",s="min"):"max"===t&&(o="-1.0 / 1e-20",s="max");let i=`${t}(${t}(${t}(`+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"sum"===t?i="sumValue":"prod"===t?i="prodValue":"all"===t?i="allValue":"any"===t&&(i="anyValue");r=4*Math.floor(n/4),e=n%4;let u=`
      if (${"sum"===t}) {
        sumValue += dot(values, ones);
      } else if (${"prod"===t}) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = ${s}(values, minMaxValue);
      }
    `,l="vec4";"all"===t?(o="1.0",u=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,l="bvec4"):"any"===t&&(o="0.0",u=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,l="bvec4");let c=0<a%n?`
        if (inIdx < 0 || inIdx >= ${a}) {
          return initializationValue;
        }
      `:"";this.userCode=`
      const float initializationValue = ${o};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${c}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${n};

        vec4 minMaxValue = vec4(${o});
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < ${r}; i += 4) {
          int inIdx = inOffset + i;
          ${l} values = ${l}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${u}
        }

        int inIdx = inOffset + ${r};
        if (${1==e}) {
          ${l} values = ${l}(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          ${u}
        } else if (${2==e}) {
          ${l} values = ${l}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          ${u}
        } else if (${3==e}) {
          ${l} values = ${l}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          ${u}
        }
        setOutput(${i});
      }
    `}}function er(n,r,a,o){var s=
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e){const t=[];for(;0===t.length||1!==t[t.length-1].outSize;){var n=t.length?t[t.length-1].outSize:e[1],r=A.Wap.computeOptimalWindowSize(n);t.push({inSize:n,windowSize:r,outSize:Math.ceil(n/r)})}return t}(n.shape);let i=n;for(let t=0;t<s.length;t++){var{inSize:u,windowSize:l,outSize:c}=s[t];let e;e="mean"===a?0===t?new Qn({windowSize:l,inSize:u,batchSize:n.shape[0],outSize:c},u):new Qn({windowSize:l,inSize:u,batchSize:n.shape[0],outSize:c}):new Jn({windowSize:l,inSize:u,batchSize:n.shape[0],outSize:c},a),c=i,i=o.runWebGLProgram(e,[i],r),c.dataId!==n.dataId&&o.disposeIntermediateTensorInfo(c)}return i}
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class tr{constructor(t,n){this.variableNames=["A"];const r=new Array(t.length);for(let e=0;e<r.length;e++)r[e]=t[n[e]];this.outputShape=r,this.rank=r.length;var e=ve(this.rank),a=function(t){var e=t.length;if(6<e)throw Error(`Transpose for rank ${e} is not yet supported`);const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(e);for(let e=0;e<t.length;e++)r[t[e]]=n[e];return r.join()}(n);this.userCode=`
    void main() {
      ${e} resRC = getOutputCoords();
      setOutput(getA(${a}));
    }
    `}}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class nr{constructor(t,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;const r=new Array(t.length);for(let e=0;e<r.length;e++)r[e]=t[n[e]];if(this.outputShape=r,this.rank=r.length,6<this.rank)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);var e=ve(this.rank),a=rn("rc",this.rank);const o=new Array(this.rank);for(let e=0;e<n.length;e++)o[n[e]]=a[e];var s=`vec2(${o.slice(-2).join()})`,i=`++${a[this.rank-1]} < ${r[this.rank-1]}`,s=`getChannel(getA(${o.join()}), ${s})`;this.userCode=`
    void main() {
      ${e} rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = ${s};
      if(${i}) {
        result[1] = ${s};
      }
      --${a[this.rank-1]};
      if(++${a[this.rank-2]} < ${r[this.rank-2]}) {
        result[2] = ${s};
        if(${i}) {
          result[3] = ${s};
        }
      }
      setOutput(result);
    }
    `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function rr(e,t,n){t=new((0,A.OBj)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?nr:tr)(e.shape,t);return n.runWebGLProgram(t,[e],e.dtype)}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function ar(e){var{inputs:t,backend:n,attrs:r}=e,e=t["x"],{axis:t,keepDims:r}=r;
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
return function(e,t,n,r){var a=e.shape.length,o=A.D5U.parseAxisParam(t,e.shape);let s=o;var i=A.Wap.getAxesPermutation(s,a);let u=e;(t=null!=i)&&(u=rr(e,i,r),s=A.Wap.getInnerMostAxes(s.length,a)),A.Wap.assertAxesAreInnerMostDims("sum",s,a);var[i,a]=A.Wap.computeOutAndReduceShapes(u.shape,s);let l=i;return n&&(l=A.Wap.expandShapeToKeepDim(i,o)),o=A.D5U.sizeFromShape(a),a=A.D5U.sizeFromShape(e.shape),a=Zn({inputs:{x:u},attrs:{shape:[a/o,o]},backend:r}),o=er(a,(0,A.z4k)(e.dtype),"sum",r),e=Zn({inputs:{x:o},attrs:{shape:l},backend:r}),r.disposeIntermediateTensorInfo(a),r.disposeIntermediateTensorInfo(o),t&&r.disposeIntermediateTensorInfo(u),e}(e,t,r,n)}var or={kernelName:A.GBy,backendName:"webgl",kernelFunc:ar};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function sr(e){var{inputs:t,backend:n,attrs:e}=e,r=t["x"],a=e["perm"];const o=n;n=r.shape.length;const s=new Array(n);for(let e=0;e<s.length;e++)s[e]=r.shape[a[e]];let i;if(o.shouldExecuteOnCPU([r])){n=o.texData.get(r.dataId).values,n=tn(n,r.shape,r.dtype,a,s);i=o.makeTensorInfo(s,r.dtype);const u=o.texData.get(i.dataId);u.values=n}else i=rr(r,a,o);return i}var ir={kernelName:A.G3Y,backendName:"webgl",kernelFunc:sr};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const ur=1e3;function lr({a:e,b:t,transposeA:a,transposeB:o,backend:s,bias:n=null,preluActivationWeights:r=null,leakyreluAlpha:i=0,activation:u=null}){var l=e.shape.length,c=t.shape.length;const p=a?e.shape[l-2]:e.shape[l-1],d=o?t.shape[c-1]:t.shape[c-2];var h=a?e.shape[l-1]:e.shape[l-2],f=o?t.shape[c-2]:t.shape[c-1];const m=e.shape.slice(0,-2),g=t.shape.slice(0,-2);var y=A.D5U.sizeFromShape(m),v=A.D5U.sizeFromShape(g);A.D5U.assert(2<=l&&2<=c&&(y===v||1===y||1===v),()=>"Error in matMul: the input batch dimensions must either be the same or at least one input batch dimension must be 1. Got input "+`batch dimensions of (${m}) and (${g}).`);const x=(v<y?e:t).shape.slice(0,-2);var b=x.concat([h,f]);A.D5U.assert(p===d,()=>`Error in matMul: inner shapes (${p}) and (`+`${d}) of Tensors with shapes ${e.shape} and `+`${t.shape} and transposeA=${a}`+` and transposeB=${o} must match.`);var w=a?[y,p,h]:[y,h,p],k=o?[v,f,d]:[v,d,f],I=Zn({inputs:{x:e},backend:s,attrs:{shape:w}}),N=Zn({inputs:{x:t},backend:s,attrs:{shape:k}});const $=[I,N];var C=Math.max(y,v),S=a?I.shape[1]:I.shape[2],l=null!=n,c=null!=r,y="leakyrelu"===u,v=null!=u?zn(u,!0):null,u=l||c||y||null!=v;let T;if((1===h||1===f)&&S>ur&&!1==u){let e=I,t=N;a&&(e=sr({inputs:{x:I},backend:s,attrs:{perm:[0,2,1]}}),$.push(e)),o&&(t=sr({inputs:{x:N},backend:s,attrs:{perm:[0,2,1]}}),$.push(t));var E=1===f;let n=e;1!==f&&(n=Zn({inputs:{x:e},backend:s,attrs:{shape:[C,S,1]}}),$.push(n));u=1===f?2:1;let r=t;E&&(r=Zn({inputs:{x:t},backend:s,attrs:{shape:[C,1,S]}}),$.push(r));E=qn({inputs:{a:n,b:r},backend:s});T=ar({inputs:{x:E},backend:s,attrs:{axis:u,keepDims:!0}}),$.push(E)}else{E=(0,A.x8V)(e.dtype,t.dtype),v=new Gn(w,k,[C,h,f],a,o,l,v,c,y);const R=[I,N];null!=n&&R.push(n),c&&R.push(r),y&&(i=s.makeTensorInfo([],"float32",A.D5U.createScalarValue(i,"float32")),R.push(i),$.push(i)),T=s.runWebGLProgram(v,R,E)}b=Zn({inputs:{x:T},backend:s,attrs:{shape:b}});$.push(T);for(const D of $)s.disposeIntermediateTensorInfo(D);return b}var cr={kernelName:A.usg,backendName:"webgl",kernelFunc:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e){var{inputs:t,backend:n,attrs:r}=e,{a,b:o,bias:s,preluActivationWeights:i}=t,{transposeA:u,transposeB:e,activation:t,leakyreluAlpha:r}=r;return lr({a:a,b:o,transposeA:u,transposeB:e,backend:n,bias:s,preluActivationWeights:i,leakyreluAlpha:r,activation:t})}};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const pr="return abs(x);";var dr={kernelName:A.SYM,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e;var r=t["x"];if(n.shouldExecuteOnCPU([r])&&"complex64"!==r.dtype){e=n.texData.get(r.dataId),e=Kt(e.values);return n.makeTensorInfo(r.shape,r.dtype,e)}let a;return a=new((0,A.OBj)().getBool("WEBGL_PACK_UNARY_OPERATIONS")?Nn:dn)(r.shape,pr),n.runWebGLProgram(a,[r],r.dtype)}},hr=(hn,Un({opSnippet:"if (isnan(x)) return x;\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return acos(x);\n"})),fr={kernelName:A.VGw,backendName:"webgl",kernelFunc:hr},mr=(hn,Un({opSnippet:"if (isnan(x)) return x;\n  if (x < 1.0) return NAN;\nreturn log(x + sqrt(x * x - 1.0));"})),gr={kernelName:A.SpW,backendName:"webgl",kernelFunc:mr},yr="return a + b;",vr=Wn({opSnippet:yr,packedOpSnippet:yr,supportsComplex:!0,cpuKernelImpl:Tt}),xr={kernelName:A.mm_,backendName:"webgl",kernelFunc:vr};
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class br{constructor(e,t){this.outputShape=[],this.outputShape=e,this.variableNames=t.map((e,t)=>`T${t}`);const n=[];this.variableNames.forEach(e=>{n.push(`float v${e} = get${e}AtOutCoords();`)});t=this.variableNames.map(e=>`v${e}`).join(" + ");this.userCode=`
      void main() {
        ${n.join("\n        ")}

        float result = ${t};
        setOutput(result);
      }
    `}}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class wr{constructor(e,t){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=t.map((e,t)=>`T${t}`);const n=[];this.variableNames.forEach(e=>{n.push(`vec4 v${e} = get${e}AtOutCoords();`)});t=this.variableNames.map(e=>`v${e}`).join(" + ");this.userCode=`
      void main() {
        ${n.join("\n        ")}

        vec4 result = ${t};
        setOutput(result);
      }
    `}}var kr={kernelName:A.Xze,backendName:"webgl",kernelFunc:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function e(t){const{inputs:n,backend:r}=t,a=n;if(1===a.length)return Dn({inputs:{x:a[0]},backend:r});if(a.length>(0,A.OBj)().get("WEBGL_MAX_TEXTURES_IN_SHADER")){var o=Math.floor(a.length/2),s=e({inputs:a.slice(0,o),backend:r}),o=e({inputs:a.slice(o),backend:r});return e({inputs:[s,o],backend:r})}s=a.map(e=>e.dtype).reduce((e,t)=>(0,A.x8V)(e,t)),o=a.map(e=>e.shape),o=new((0,A.OBj)().getBool("WEBGL_PACK")?wr:br)(a[0].shape,o);return r.runWebGLProgram(o,a,s)}};var Ir={kernelName:A.oT6,backendName:"webgl",kernelFunc:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e){const{inputs:t,backend:n,attrs:r}=e;var a=t["x"],{axis:o,keepDims:s}=r,i=a.shape.length,u=A.D5U.parseAxisParam(o,a.shape);let l=u;e=A.Wap.getAxesPermutation(l,i);let c=a;null!=e&&(c=sr({inputs:{x:a},backend:n,attrs:{perm:e}}),l=A.Wap.getInnerMostAxes(l.length,i)),A.Wap.assertAxesAreInnerMostDims("all",l,i);var[o,a]=A.Wap.computeOutAndReduceShapes(c.shape,l),i=A.D5U.sizeFromShape(a),i=er(a=Zn({inputs:{x:c},backend:n,attrs:{shape:[-1,i]}}),a.dtype,"all",n);let p;return p=s?(u=A.Wap.expandShapeToKeepDim(o,u),Zn({inputs:{x:i},backend:n,attrs:{shape:u}})):Zn({inputs:{x:i},backend:n,attrs:{shape:o}}),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),null!=e&&n.disposeIntermediateTensorInfo(c),p}};var Nr={kernelName:A.IKK,backendName:"webgl",kernelFunc:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e){const{inputs:t,backend:n,attrs:r}=e;var a=t["x"],{axis:o,keepDims:s}=r,i=a.shape.length,u=A.D5U.parseAxisParam(o,a.shape);let l=u;e=A.Wap.getAxesPermutation(l,i);let c=a;null!=e&&(c=sr({inputs:{x:a},backend:n,attrs:{perm:e}}),l=A.Wap.getInnerMostAxes(l.length,i)),A.Wap.assertAxesAreInnerMostDims("any",l,i);var[o,a]=A.Wap.computeOutAndReduceShapes(c.shape,l),i=A.D5U.sizeFromShape(a),i=er(a=Zn({inputs:{x:c},backend:n,attrs:{shape:[-1,i]}}),a.dtype,"any",n);let p;return p=s?(u=A.Wap.expandShapeToKeepDim(o,u),Zn({inputs:{x:i},backend:n,attrs:{shape:u}})):Zn({inputs:{x:i},backend:n,attrs:{shape:o}}),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),null!=e&&n.disposeIntermediateTensorInfo(c),p}};
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class $r{constructor(e,t,n){this.variableNames=["A"];var{windowSize:r,batchSize:a,outSize:e}=e;n||this.variableNames.push("bestIndicesA"),this.outputShape=[a,e],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < ${r}; i++) {
          int inIdx = ${n?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));"};
          float candidate = getA(batch, inIdx);
          if (candidate ${"max"===t?">":"<"} bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `}}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class Cr{constructor(e,t,n,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,A.D5U.assert(2<e.length,()=>`Packed arg${n.charAt(0).toUpperCase()+n.slice(1)} supports only inputs with rank above 2.`);var a=e[e.length-1],o=Math.ceil(a/t);this.outputShape=e.slice(0,-1),1<o&&this.outputShape.push(o),r||this.variableNames.push("bestIndicesA");var s=this.outputShape,i=s.length,u=ve(i);const l=an("coords",i);let c,p;c=1===o?(p=i+1,`
        ${v=ve(p)} sourceLocR = ${v}(${l.join()}, 0);
        ++${l[i-1]};
        ${v} sourceLocG = ${v}(${l.join()}, 0);
        ++${l[i-2]};
        ${v} sourceLocA = ${v}(${l.join()}, 0);
        --${l[i-1]};
        ${v} sourceLocB = ${v}(${l.join()}, 0);
        --${l[i-2]};`):(p=i,`
        ${u} sourceLocR = coords;
        ++${l[i-1]};
        ${u} sourceLocG = coords;
        ++${l[i-2]};
        ${u} sourceLocA = coords;
        --${l[i-1]};
        ${u} sourceLocB = coords;
        --${l[i-2]};`);const d=["x","y","z","w","u","v"].slice(0,p);a="."+d[p-1];const h=d.map(e=>"int "+e),f=an("sourceLocR",p-1).concat("inIdx.r"),m=an("sourceLocG",p-1).concat("inIdx.g"),g=an("sourceLocB",p-1).concat("inIdx.b"),y=an("sourceLocA",p-1).concat("inIdx.a");var e="max"===n?"greaterThan":"lessThan",o=r?"":`
          inIdx = round(vec4(getBestIndicesAChannel(${f.join()}),
                             getBestIndicesAChannel(${m.join()}),
                             getBestIndicesAChannel(${g.join()}),
                             getBestIndicesAChannel(${y.join()})));`,v=`vec4(
            getAChannel(${f.join()}),
            hasNextCol ? getAChannel(${m.join()}) : 0.,
            hasNextRow ? getAChannel(${g.join()}) : 0.,
            hasNextRow && hasNextCol ? getAChannel(${y.join()}) : 0.)`,r=r?"":`
      float getBestIndicesAChannel(${h.join()}) {
        return getChannel(getBestIndicesA(${d.join()}),
                                          vec2(${d.slice(-2).join()}));
      }`;this.userCode=`
      float getAChannel(${h.join()}) {
        return getChannel(getA(${d.join()}),
                               vec2(${d.slice(-2).join()}));
      }
      ${r}
      void main() {
        ${u} coords = getOutputCoords();
        bool hasNextCol = ${l[i-1]} < ${s[i-1]-1};
        bool hasNextRow = ${l[i-2]} < ${s[i-2]-1};
        ${c}
        ivec4 srcIdx = ivec4(sourceLocR${a}, sourceLocG${a},
          sourceLocB${a}, sourceLocA${a}) * ${t};
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = ${v};

        for (int i = 0; i < ${t}; i++) {
          inIdx = srcIdx;
          ${o}
          vec4 candidate = ${v};
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(${e}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `}}function Sr(t,e,n,r){var a=[n];if(A.Wap.assertAxesAreInnerMostDims("arg"+r.charAt(0).toUpperCase()+r.slice(1),a,e.shape.length),!(0,A.OBj)().getBool("WEBGL_PACK_REDUCE")||e.shape.length<=2){const o=[];var[n,a]=A.Wap.computeOutAndReduceShapes(e.shape,a),a=A.D5U.sizeFromShape(a),a=Zn({inputs:{x:e},backend:t,attrs:{shape:[-1,a]}});o.push(a);a=
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function e(t,n,r,a=null){let o=n.shape[0],s=n.shape[1];null!=a&&(o=a.shape[0],s=a.shape[1]);var i=A.Wap.computeOptimalWindowSize(s),i={windowSize:i,inSize:s,batchSize:o,outSize:Math.ceil(s/i)},i=new $r(i,r,null==a);const u=[n];null!=a&&u.push(a);i=t.runWebGLProgram(i,u,"int32");if(1===i.shape[1])return i;r=e(t,n,r,i);return t.disposeIntermediateTensorInfo(i),r}(t,a,r);o.push(a);n=Zn({inputs:{x:a},backend:t,attrs:{shape:n}});return o.forEach(e=>t.disposeIntermediateTensorInfo(e)),n}return function e(t,n,r,a=null){var o=(null!=a?a:n).shape,s=o[o.length-1],s=A.Wap.computeOptimalWindowSize(s),s=new Cr(o,s,r,null==a),a=t.runWebGLProgram(s,null==a?[n]:[n,a],"int32");if(a.shape.length!==n.shape.length)return a;r=e(t,n,r,a);return t.disposeIntermediateTensorInfo(a),r}(t,e,r)}var Tr={kernelName:A.sJF,backendName:"webgl",kernelFunc:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e){const{inputs:t,backend:n,attrs:r}=e;var a=t["x"],e=r["axis"];let o=A.D5U.parseAxisParam(e,a.shape);e=A.Wap.getAxesPermutation(o,a.shape.length);let s=a;const i=[];return null!=e&&(s=sr({inputs:{x:a},backend:n,attrs:{perm:e}}),i.push(s),o=A.Wap.getInnerMostAxes(o.length,s.shape.length)),A.Wap.assertAxesAreInnerMostDims("argMax",[o[0]],s.shape.length),e=Sr(n,s,o[0],"max"),i.forEach(e=>n.disposeIntermediateTensorInfo(e)),e}};var Er={kernelName:A.aJk,backendName:"webgl",kernelFunc:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e){const{inputs:t,backend:n,attrs:r}=e;var a=t["x"],e=r["axis"];let o=A.D5U.parseAxisParam(e,a.shape);e=A.Wap.getAxesPermutation(o,a.shape.length);let s=a;const i=[];return null!=e&&(s=sr({inputs:{x:a},backend:n,attrs:{perm:e}}),i.push(s),o=A.Wap.getInnerMostAxes(o.length,s.shape.length)),A.Wap.assertAxesAreInnerMostDims("argMin",[o[0]],s.shape.length),e=Sr(n,s,o[0],"min"),i.forEach(e=>n.disposeIntermediateTensorInfo(e)),e}},Rr=(hn,Un({opSnippet:"if (isnan(x)) return x;\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return asin(x);\n"})),Dr={kernelName:A.M2y,backendName:"webgl",kernelFunc:Rr},Ar=(hn,Un({opSnippet:"if (isnan(x)) return x;return log(x + sqrt(x * x + 1.0));"})),_r={kernelName:A.qw7,backendName:"webgl",kernelFunc:Ar},Or=(hn,Un({opSnippet:"if (isnan(x)) return x;\n  return atan(x);\n"})),Fr={kernelName:A.jMg,backendName:"webgl",kernelFunc:Or},Br=Wn({opSnippet:`
  if (isnan(a)) return a;
  if (isnan(b)) return b;
`+`
  return atan(a, b);
`,packedOpSnippet:`
  vec4 result = atan(a, b);
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  `+`
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;
`+`
  return result;
`}),Pr={kernelName:A.QCc,backendName:"webgl",kernelFunc:Br},Mr=(hn,Un({opSnippet:"if (isnan(x)) return x;\n  if ((x < -1.0) || (x > 1.0)) return NAN;\nreturn (log(1.0 + x) - log(1.0 - x)) / 2.0;"})),Lr={kernelName:A.Oyi,backendName:"webgl",kernelFunc:Mr};
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class Vr{constructor(t,n,e,r=!1,a=!1){if(this.variableNames=["x"],"avg"===n&&e)throw new Error("Cannot compute positions for average pool.");var o=t.filterWidth,s=t.strideHeight,i=t.strideWidth,u=t.dilationHeight,l=t.dilationWidth,c=t.effectiveFilterHeight,p=t.effectiveFilterWidth,d=t.padInfo.top,h=t.padInfo.left;this.outputShape=t.outShape;var f="avg"===n,m=`((batch  * ${t.inHeight} + xR) * ${t.inWidth} + xC) * ${t.inChannels} + d`,g=`(xR * ${t.inWidth} + xC) * ${t.inChannels} + d`;let y=f?"0.0":"-1.0 / 1e-20";if(e){const v=">=";this.userCode=`
        const ivec2 strides = ivec2(${s}, ${i});
        const ivec2 pads = ivec2(${d}, ${h});

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < ${c};
              wR += ${u}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${t.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${p};
                wC += ${l}) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= ${t.inWidth}) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value >= currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = ${r?a?m:g:`wR * ${p} + wC`};
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `}else{const v="max";let e=`${n}(${n}(${n}(`+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===n&&(e="avgValue / count");n=4*Math.floor(o/4),o=o%4,f=`
      if (${f}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${v}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(${s}, ${i});
      const ivec2 pads = ivec2(${d}, ${h});
      const float initializationValue = ${y};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= ${t.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(${y});
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < ${c};
            wR += ${u}) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= ${t.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${n}; wC += 4) {
            int xC = xCCorner + wC * ${l};

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${l}, d),
              getValue(batch, xR, xC + 2 * ${l}, d),
              getValue(batch, xR, xC + 3 * ${l}, d)
            );

            ${f}
          }

          int xC = xCCorner + ${n};
          if (${1==o}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            ${f}
          } else if (${2==o}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${l}, d),
              initializationValue,
              initializationValue
            );

            ${f}
          } else if (${3==o}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${l}, d),
              getValue(batch, xR, xC + 2 * ${l}, d),
              initializationValue
            );

            ${f}
          }
        }
        setOutput(${e});
      }
    `}}}class Ur{constructor(t,n,e,r=!1,a=!1){if(this.variableNames=["x"],"avg"===n&&e)throw new Error("Cannot compute positions for average pool.");var o=t.filterWidth,s=t.strideDepth,i=t.strideHeight,u=t.strideWidth,l=t.dilationDepth,c=t.dilationHeight,p=t.dilationWidth,d=t.effectiveFilterDepth,h=t.effectiveFilterHeight,f=t.effectiveFilterWidth,m=t.padInfo.front,g=t.padInfo.top,y=t.padInfo.left;this.outputShape=t.outShape;var v="avg"===n;let x=v?"0.0":"-1.0 / 1e-20";if(e){const b=">=";this.userCode=`
        const ivec3 strides =
            ivec3(${s}, ${i}, ${u});
        const ivec3 pads = ivec3(${m}, ${g}, ${y});

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < ${d};
              wD += ${l}) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= ${t.inDepth}) {
              continue;
            }

            for (int wR = 0; wR < ${h};
                wR += ${c}) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= ${t.inHeight}) {
                continue;
              }

              for (int wC = 0; wC < ${f};
                  wC += ${p}) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= ${t.inWidth}) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value >= currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition = ${r?a?`(((batch * ${t.inDepth} + xD) * ${t.inHeight} + xR) * ${t.inWidth} + xC) * ${t.inChannels} + ch`:`((xD * ${t.inHeight} + xR) * ${t.inWidth} + xC) * ${t.inChannels} + ch`:`wD * ${h} * ${f} +
                      wR * ${f} + wC`};
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `}else{const b="max";let e=`${n}(${n}(${n}(`+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===n&&(e="avgValue / count");n=4*Math.floor(o/4),o=o%4,v=`
      if (${v}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${b}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(${s}, ${i}, ${u});
      const ivec3 pads = ivec3(${m}, ${g}, ${y});
      const float initializationValue = ${x};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= ${t.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(${x});
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < ${d};
            wD += ${l}) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= ${t.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${h};
            wR += ${c}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${t.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${n}; wC += 4) {
              int xC = xCCorner + wC * ${p};

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${p}, ch),
                getValue(batch, xD, xR, xC + 2 * ${p}, ch),
                getValue(batch, xD, xR, xC + 3 * ${p}, ch)
              );

              ${v}
            }

            int xC = xCCorner + ${n};
            if (${1==o}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              ${v}
            } else if (${2==o}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${p}, ch),
                initializationValue,
                initializationValue
              );

              ${v}
            } else if (${3==o}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${p}, ch),
                getValue(batch, xD, xR, xC + 2 * ${p}, ch),
                initializationValue
              );

              ${v}
            }
          }
          setOutput(${e});
        }
      }
    `}}}var Wr={kernelName:A.JhU,backendName:"webgl",kernelFunc:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e){const{inputs:t,backend:n,attrs:r}=e;var a=t["x"];M(a,"avgPool");const{filterSize:o,strides:s,pad:i,dimRoundingMode:u}=r;return A.D5U.assert(A.Wap.eitherStridesOrDilationsAreOne(s,1),()=>"Error in avgPool: Either strides or dilations must be 1. "+`Got strides ${s} and dilations '1'`),1===(e=A.Wap.computePool2DInfo(a.shape,o,s,1,i,u)).filterWidth&&1===e.filterHeight&&A.D5U.arraysEqual(e.inShape,e.outShape)?Dn({inputs:{x:a},backend:n}):(e=new Vr(e,"avg",!1),n.runWebGLProgram(e,[a],"float32"))}};var zr={kernelName:A._k9,backendName:"webgl",kernelFunc:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e){const{inputs:t,backend:n,attrs:r}=e;var a=t["x"],{filterSize:o,strides:s,pad:i,dimRoundingMode:u,dataFormat:e}=r,e=A.Wap.computePool3DInfo(a.shape,o,s,[1,1,1],i,u,e),e=new Ur(e,"avg",!1);return n.runWebGLProgram(e,[a],"float32")}};
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class Gr{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;var t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,a=e.strideWidth,o=e.dilationHeight,s=e.dilationWidth,i=e.effectiveFilterHeight,u=e.effectiveFilterWidth,l=i-1-e.padInfo.top,c=u-1-e.padInfo.left;this.userCode=`
      const ivec2 pads = ivec2(${l}, ${c});
      const float avgMultiplier = float(${1/(t*n)});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${i};
            wR += ${o}) {
          float dyR = float(dyRCorner + wR) / ${r}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${u};
            wC+= ${s}) {
            float dyC = float(dyCCorner + wC) / ${a}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `}}class Hr{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;var t=e.filterDepth,n=e.filterHeight,r=e.filterWidth,a=e.strideDepth,o=e.strideHeight,s=e.strideWidth,i=e.dilationDepth,u=e.dilationHeight,l=e.dilationWidth,c=e.effectiveFilterDepth,p=e.effectiveFilterHeight,d=e.effectiveFilterWidth,h=c-1-e.padInfo.front,f=p-1-e.padInfo.top,m=d-1-e.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(${h}, ${f}, ${m});
      const float avgMultiplier = float(${1/(t*n*r)});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${c};
            wD += ${i}) {
          float dyD = float(dyDCorner + wD) / ${a}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${p};
              wR += ${u}) {
            float dyR = float(dyRCorner + wR) / ${o}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${d};
                wC += ${l}) {
              float dyC = float(dyCCorner + wC) / ${s}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}var jr={kernelName:A.IMb,backendName:"webgl",kernelFunc:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e){const{inputs:t,backend:n,attrs:r}=e;var{dy:a,input:o}=t,s=o,{filterSize:i,strides:u,pad:e,dimRoundingMode:o}=r,o=A.Wap.computePool3DInfo(s.shape,i,u,[1,1,1],e,o),o=new Hr(o);return n.runWebGLProgram(o,[a],s.dtype)}};var Xr={kernelName:A.ROF,backendName:"webgl",kernelFunc:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e){const{inputs:t,backend:n,attrs:r}=e;var{dy:a,input:o}=t,s=o;M([a,o],"avgPoolGrad");var{filterSize:i,strides:e,pad:o}=r,o=A.Wap.computePool2DInfo(s.shape,i,e,1,o),o=new Gr(o);return n.runWebGLProgram(o,[a],s.dtype)}};var qr={kernelName:A.XLW,backendName:"webgl",kernelFunc:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e){var{inputs:t,backend:n,attrs:r}=e,{a,b:e}=t,{transposeA:t,transposeB:r}=r;return lr({a:a,b:e,transposeA:t,transposeB:r,backend:n})}};
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class Kr{constructor(e,t,n,r,a,o){this.outputShape=[],this.variableNames=["x","mean","variance"],A.Wap.assertAndGetBroadcastShape(e,t),A.Wap.assertAndGetBroadcastShape(e,n);let s="0.0";null!=r&&(A.Wap.assertAndGetBroadcastShape(e,r),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");let i="1.0";null!=a&&(A.Wap.assertAndGetBroadcastShape(e,a),this.variableNames.push("scale"),i="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = ${s};
        float scale = ${i};
        float inv = scale * inversesqrt(variance + float(${o}));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class Zr{constructor(e,t,n,r,a,o){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],A.Wap.assertAndGetBroadcastShape(e,t),A.Wap.assertAndGetBroadcastShape(e,n);let s="vec4(0.0)";null!=r&&(A.Wap.assertAndGetBroadcastShape(e,r),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");let i="vec4(1.0)";null!=a&&(A.Wap.assertAndGetBroadcastShape(e,a),this.variableNames.push("scale"),i="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        vec4 offset = ${s};
        vec4 scale = ${i};

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(${o}));

        setOutput((x - mean) * inv + offset);
      }
    `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
var Yr={kernelName:A.sHE,backendName:"webgl",kernelFunc:({inputs:e,backend:t,attrs:n})=>{var{x:r,mean:a,variance:o,offset:s,scale:e}=e;A.D5U.assert(a.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),A.D5U.assert(null==s||a.shape.length===s.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),A.D5U.assert(null==e||a.shape.length===e.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let i=n["varianceEpsilon"];null==i&&(i=.001);const u=[r,a,o];let l=null;null!=s&&(l=s.shape,u.push(s));let c=null;null!=e&&(c=e.shape,u.push(e));o=new((0,A.OBj)().getBool("WEBGL_PACK_NORMALIZATION")?Zr:Kr)(r.shape,a.shape,o.shape,l,c,i);return t.runWebGLProgram(o,u,u[0].dtype)}};
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class Qr{constructor(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;var t=ve(this.rank),n=`uniform int start[${this.rank}];`,r=function(e){{if(1===e)return"sourceLoc";if(e<=6)return Jr.slice(0,e).map(e=>"sourceLoc."+e).join(",");throw Error(`Slicing for rank ${e} is not yet supported`)}}(this.rank);const a=e.map((e,t)=>`sourceLoc.${Jr[t]} = start[${t}] + coords.${Jr[t]};`);t=`
        ${t} sourceLoc;
        ${t} coords = getOutputCoords();
        ${a.join("\n")}
      `,this.userCode=`
      ${n}
      void main() {
        ${t}
        setOutput(getSource(${r}));
      }
    `}getCustomSetupFunc(n){if(n.length!==this.rank)throw Error(`The rank (${this.rank}) of the program must match the `+`length of start (${n.length})`);return(e,t)=>{null==this.startLoc&&(this.startLoc=e.getUniformLocationNoThrow(t,"start"),null==this.startLoc)||e.gl.uniform1iv(this.startLoc,n)}}}const Jr=["x","y","z","w","u","v"];
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class ea{constructor(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length;var t=ve(this.rank);const n=an("coords",this.rank),r=an("sourceLoc",this.rank);var a=1===this.rank?"sourceLoc":`vec2(${r.slice(-2).join()})`,o=`getChannel(getSource(${r.join()}), ${a})`,a=`
      result.x = ${o};
      if (++${n[this.rank-1]} < ${e[this.rank-1]}) {
        ++${r[this.rank-1]};
        result.y = ${o};
        --${r[this.rank-1]};
      }
    `,o=1===this.rank?"":`
      --${n[this.rank-1]};
      if (++${n[this.rank-2]} < ${e[this.rank-2]}) {
        ++${r[this.rank-2]};
        result.z = ${o};
        if (++${n[this.rank-1]} < ${e[this.rank-1]}) {
          ++${r[this.rank-1]};
          result.w = ${o};
        }
      }
    `,e=this.rank<=4?`sourceLoc = coords +
            ${t}(${e.map((e,t)=>`start[${t}]`).join()});`:e.map((e,t)=>`${r[t]} = ${n[t]} + start[${t}];`).join("\n");this.userCode=`
      uniform int start[${this.rank}];
      void main() {
        ${t} coords = getOutputCoords();
        ${t} sourceLoc;
        ${e}
        vec4 result = vec4(0.);
        ${a}
        ${o}
        setOutput(result);
      }
    `}getCustomSetupFunc(n){if(n.length!==this.rank)throw Error(`The rank (${this.rank}) of the program must match the `+`length of start (${n.length})`);return(e,t)=>{null==this.startLoc&&(this.startLoc=e.getUniformLocationNoThrow(t,"start"),null==this.startLoc)||e.gl.uniform1iv(this.startLoc,n)}}}function ta(e){const{inputs:t,backend:n,attrs:r}=e;var a=t["x"],{begin:o,size:e}=r,[o,e]=A.kuN.parseSliceParams(a,o,e);if(A.kuN.assertParamsValid(a,o,e),0===A.D5U.sizeFromShape(e))return n.makeTensorInfo(e,a.dtype,[]);if(n.shouldExecuteOnCPU([a])||"string"===a.dtype){var s=n.texData.get(a.dataId),i=Zt(s.values,o,e,a.shape,a.dtype);return n.makeTensorInfo(e,a.dtype,i)}var s=n.texData.get(a.dataId)["isPacked"],i=A.kuN.isSliceContinous(a.shape,o,e);if(!s&&i)return n.uploadToGPU(a.dataId),
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e,t,n,r){var a=r.texData.get(e.dataId),o=r.makeTensorInfo(n,e.dtype);const s=r.texData.get(o.dataId);Object.assign(s,a),s.complexParentRefCount=0,s.refCount=1,s.shape=n,s.dtype=e.dtype;let i=A.kuN.computeFlatOffset(t,A.D5U.computeStrides(e.shape));return a.slice&&(i+=a.slice.flatOffset),s.slice={flatOffset:i,origDataId:a.slice&&a.slice.origDataId||e.dataId},e=r.dataRefCount.get(s.slice.origDataId)||1,r.dataRefCount.set(s.slice.origDataId,e+1),o}(a,o,e,n);{const u=new((0,A.OBj)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?ea:Qr)(e);o=u.getCustomSetupFunc(o);return n.runWebGLProgram(u,[a],a.dtype,o)}}var na={kernelName:A.p2w,backendName:"webgl",kernelFunc:ta},ra={kernelName:A.zws,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:r}=e;var a=t["x"];const{blockShape:o,crops:s}=r;A.D5U.assert(a.shape.length<=4,()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");var i=o.reduce((e,t)=>e*t),u=A.Wap.getReshaped(a.shape,o,i),l=A.Wap.getPermuted(u.length,o.length),c=A.Wap.getReshapedPermuted(a.shape,o,i),e=A.Wap.getSliceBeginCoords(s,o.length),i=A.Wap.getSliceSize(c,s,o.length);const p=[];u=Zn({inputs:{x:a},backend:n,attrs:{shape:u}}),l=sr({inputs:{x:u},backend:n,attrs:{perm:l}}),c=Zn({inputs:{x:l},backend:n,attrs:{shape:c}}),i=ta({inputs:{x:c},backend:n,attrs:{begin:e,size:i}});return p.push(u),p.push(l),p.push(c),p.forEach(e=>n.disposeIntermediateTensorInfo(e)),i}};var aa={kernelName:A.zvY,backendName:"webgl",kernelFunc:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e){const{inputs:t,backend:n,attrs:r}=e;var{x:a,weights:o}=t,s=r["size"],e=n.readSync(a.dataId),a=n.readSync(o.dataId),a=Et(e,a,o.dtype,o.shape,s);return n.makeTensorInfo([s],o.dtype,a)}};const oa=Wn({opSnippet:"return float(a != b);",dtype:"bool"});var sa={kernelName:A.yQU,backendName:"webgl",kernelFunc:oa};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function ia(e){const{inputs:t,backend:n}=e;var e=t["input"];return Dn({inputs:{x:n.texData.get(e.dataId).complexTensorInfos.real},backend:n})}var ua={kernelName:A.xJR,backendName:"webgl",kernelFunc:ia};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const la="return float(int(x));";var ca={kernelName:A.RFZ,backendName:"webgl",kernelFunc:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function e(t){const{inputs:n,backend:r,attrs:a}=t;var o=n.x,s=a.dtype;if("complex64"===s){if("complex64"===o.dtype)return Dn({inputs:{x:o},backend:r});const p=A.lls(o.shape);var i=e({inputs:{x:o},backend:r,attrs:{dtype:"float32"}}),t=_n({inputs:{real:i,imag:p},backend:r});return p.dispose(),r.disposeIntermediateTensorInfo(i),t}if("complex64"===o.dtype){var u=ia({inputs:{input:o},backend:r}),l=e({inputs:{x:u},backend:r,attrs:{dtype:s}});return r.disposeIntermediateTensorInfo(u),l}if(!A.D5U.hasEncodingLoss(o.dtype,s)){var c=Dn({inputs:{x:o},backend:r});return{dataId:c.dataId,shape:c.shape,dtype:s}}if("int32"===s)return u=o,l=r,c=new dn(u.shape,la),{dataId:(u=l.runWebGLProgram(c,[u],"int32")).dataId,shape:u.shape,dtype:u.dtype};if("bool"!==s)throw new Error(`Error in Cast: failed to cast ${o.dtype} to ${s}`);s=r.makeTensorInfo([],"bool",A.D5U.getTypedArrayFromDType("bool",1)),o={a:o,b:s},o=oa({inputs:o,backend:r});return r.disposeIntermediateTensorInfo(s),o}},pa="return ceil(x);",da=Un({opSnippet:pa,packedOpSnippet:pa,cpuKernelImpl:Dt}),ha={kernelName:A.gJX,backendName:"webgl",kernelFunc:da};
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class fa{constructor(e){this.variableNames=["A"],this.outputShape=e,this.userCode=`
      uniform float minVal;
      uniform float maxVal;

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}getCustomSetupFunc(n,r){return(e,t)=>{null==this.minLoc&&(this.minLoc=e.getUniformLocationNoThrow(t,"minVal"),this.maxLoc=e.getUniformLocationNoThrow(t,"maxVal")),e.gl.uniform1f(this.minLoc,n),e.gl.uniform1f(this.maxLoc,r)}}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class ma{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.userCode=`
      uniform float minVal;
      uniform float maxVal;

      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}getCustomSetupFunc(n,r){return(e,t)=>{null==this.minLoc&&(this.minLoc=e.getUniformLocationNoThrow(t,"minVal"),this.maxLoc=e.getUniformLocationNoThrow(t,"maxVal")),e.gl.uniform1f(this.minLoc,n),e.gl.uniform1f(this.maxLoc,r)}}}var ga={kernelName:A.xnO,backendName:"webgl",kernelFunc:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e){const{inputs:t,backend:n,attrs:r}=e;var a=t["x"],{clipValueMin:o,clipValueMax:e}=r;let s;return s=new((0,A.OBj)().getBool("WEBGL_PACK_CLIP")?ma:fa)(a.shape),e=s.getCustomSetupFunc(o,e),n.runWebGLProgram(s,[a],a.dtype,e)}};
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class ya{constructor(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function va(e,t){return{dataId:t.dataId,dtype:t.dtype,shape:e.shape}}var xa={kernelName:A.yj2,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e;var r=t["x"],a=n.texData.get(r.dataId),e=new ya(r.shape),a=[va(r,a.complexTensorInfos.real),va(r,a.complexTensorInfos.imag)];return n.runWebGLProgram(e,a,a[0].dtype)}};
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class ba{constructor(t){this.outputShape=[],this.outputShape=A.Wap.computeOutShape(t,1),this.variableNames=t.map((e,t)=>`T${t}`);const n=new Array(t.length-1);n[0]=t[0][1];for(let e=1;e<n.length;e++)n[e]=n[e-1]+t[e][1];const r=[`if (yC < ${n[0]}) setOutput(getT0(yR, yC));`];for(let e=1;e<n.length;e++){var a=n[e-1];r.push(`else if (yC < ${n[e]}) `+`setOutput(getT${e}(yR, yC-${a}));`)}var e=n.length,o=n[n.length-1];r.push(`else setOutput(getT${e}(yR, yC-${o}));`),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        ${r.join("\n        ")}
      }
    `}}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class wa{constructor(t,n){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=A.Wap.computeOutShape(t,n);var e=this.outputShape,r=e.length,a=ve(r),o=an("coords",r);const s=["x","y","z","w","u","v"].slice(0,r);this.variableNames=t.map((e,t)=>`T${t}`);const i=new Array(t.length-1);i[0]=t[0][n];for(let e=1;e<i.length;e++)i[e]=i[e-1]+t[e][n];var u=s[n];const l=s.slice(-2);var c=s.join();let p=`if (${u} < ${i[0]}) {
        return getChannel(
            getT0(${c}), vec2(${l.join()}));
        }`;for(let e=1;e<i.length;e++){const d=i[e-1];p+=`
        if (${u} < ${i[e]}  && ${u} >= ${i[e-1]}) {
          return getChannel(
            getT${e}(${ka(s,u,d)}),
            vec2(${ka(l,u,d)}));
        }`}c=i.length;const d=i[i.length-1];p+=`
        return getChannel(
          getT${c}(${ka(s,u,d)}),
          vec2(${ka(l,u,d)}));`,this.userCode=`
      float getValue(${s.map(e=>"int "+e)}) {
        ${p}
      }

      void main() {
        ${a} coords = getOutputCoords();
        vec4 result = vec4(getValue(${o}), 0., 0., 0.);

        ${o[r-1]} = ${o[r-1]} + 1;
        if (${o[r-1]} < ${e[r-1]}) {
          result.g = getValue(${o});
        }

        ${o[r-2]} = ${o[r-2]} + 1;
        if (${o[r-2]} < ${e[r-2]}) {
          result.a = getValue(${o});
        }

        ${o[r-1]} = ${o[r-1]} - 1;
        if (${o[r-2]} < ${e[r-2]} &&
            ${o[r-1]} < ${e[r-1]}) {
          result.b = getValue(${o});
        }
        setOutput(result);
      }
    `}}function ka(e,t,n){const r=e.indexOf(t),a=e.map((e,t)=>t===r?`${e} - ${n}`:e);return a.join()}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Ia(e){const{inputs:t,backend:n}=e;var e=t["input"];return Dn({inputs:{x:n.texData.get(e.dataId).complexTensorInfos.imag},backend:n})}var Na={kernelName:A.J_u,backendName:"webgl",kernelFunc:Ia};function $a(e,t,n){var r=A.Wap.computeOutShape(e.map(e=>e.shape),t);return{tensors2D:e.map(e=>Zn({inputs:{x:e},attrs:{shape:[-1,A.D5U.sizeFromShape(e.shape.slice(t))]},backend:n})),outShape:r}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Ca(e){const{inputs:t,backend:n,attrs:r}=e;var a=r["axis"],e=A.D5U.parseAxisParam(a,t[0].shape)[0],a=A.Wap.computeOutShape(t.map(e=>e.shape),e);if(0===A.D5U.sizeFromShape(a))return n.makeTensorInfo(a,t[0].dtype,[]);const o=t.filter(e=>0<A.D5U.sizeFromShape(e.shape));if(1===o.length)return Dn({inputs:{x:o[0]},backend:n});a=o.map(e=>e.shape);return A.Wap.assertParamsConsistent(a,e),
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function e(t,n,r){var a=t[0].dtype;if("complex64"===a){const h=t.map(e=>ia({inputs:{input:e},backend:r})),f=t.map(e=>Ia({inputs:{input:e},backend:r}));var o=e(h,n,r),s=e(f,n,r);const d=_n({inputs:{real:o,imag:s},backend:r});return h.forEach(e=>r.disposeIntermediateTensorInfo(e)),f.forEach(e=>r.disposeIntermediateTensorInfo(e)),r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(s),d}if("string"===a){const{tensors2D:l,outShape:c}=$a(t,n,r);var i=l.map(e=>({vals:r.readSync(e.dataId),shape:e.shape})),u=1===l[0].shape[0],i=At(i,c,a,u),u=A.Wap.computeOutShape(t.map(e=>e.shape),n),u=r.makeTensorInfo(u,a,i);return l.forEach(e=>r.disposeIntermediateTensorInfo(e)),u}if(t.length>(0,A.OBj)().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){i=Math.floor(t.length/2),u=e(t.slice(0,i),n,r),i=e(t.slice(i),n,r);const d=e([u,i],n,r);return r.disposeIntermediateTensorInfo(u),r.disposeIntermediateTensorInfo(i),d}if((0,A.OBj)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&1<t[0].shape.length){const p=new wa(t.map(e=>e.shape),n);return r.runWebGLProgram(p,t,a)}const{tensors2D:l,outShape:c}=$a(t,n,r),p=new ba(l.map(e=>e.shape)),d=r.runWebGLProgram(p,l,a);l.forEach(e=>r.disposeIntermediateTensorInfo(e));a=Zn({inputs:{x:d},attrs:{shape:c},backend:r});return r.disposeIntermediateTensorInfo(d),a}(o,e,n)}var Sa={kernelName:A.Eh3,backendName:"webgl",kernelFunc:Ca};
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class Ta{constructor(e,t=!1,n=null,r=!1,a=!1){this.variableNames=["x","W"],this.outputShape=e.outShape;var o=e.padInfo.top,s=e.padInfo.left,i=e.strideHeight,u=e.strideWidth,l=e.dilationHeight,c=e.dilationWidth,p=e.filterHeight,d=e.filterWidth,h=4*Math.floor(e.inChannels/4),f=e.inChannels%4,m="channelsLast"===e.dataFormat,g=m?1:2,y=m?2:3,v=m?3:1;let x="",b="";n&&(x=r?`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${n}
        }`:a?`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${n}
        }`:`
          float activation(float x) {
            ${n}
          }
        `,b="result = activation(result);");n=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),a&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${x}

      const ivec2 strides = ivec2(${i}, ${u});
      const ivec2 pads = ivec2(${o}, ${s});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[${v}];

        ivec2 xRCCorner =
            ivec2(coords[${g}], coords[${y}]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${p}; wR++) {
          int xR = xRCorner + wR * ${l};

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${d}; wC++) {
            int xC = xCCorner + wC * ${c};

            if (xC < 0 || xC >= ${e.inWidth}) {
              continue;
            }

            for (int d1 = 0; d1 < ${h}; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (${m}) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (${1==f}) {

              if (${m}) {
                dotProd +=
                    getX(batch, xR, xC, ${h}) *
                    getW(wR, wC, ${h}, d2);
              } else {
                dotProd +=
                    getX(batch, ${h}, xR, xC) *
                    getW(wR, wC, ${h}, d2);
              }

            } else if (${2==f}) {
              vec2 wValues = vec2(
                getW(wR, wC, ${h}, d2),
                getW(wR, wC, ${h} + 1, d2)
              );

              if (${m}) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, ${h}),
                  getX(batch, xR, xC, ${h} + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, ${h}, xR, xC),
                  getX(batch, ${h} + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (${3==f}) {
              vec3 wValues = vec3(
                getW(wR, wC, ${h}, d2),
                getW(wR, wC, ${h} + 1, d2),
                getW(wR, wC, ${h} + 2, d2)
              );

              if (${m}) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, ${h}),
                  getX(batch, xR, xC, ${h} + 1),
                  getX(batch, xR, xC, ${h} + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, ${h}, xR, xC),
                  getX(batch, ${h} + 1, xR, xC),
                  getX(batch, ${h} + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        ${n}
        ${b}
        setOutput(result);
      }
    `}}class Ea{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;var t=e.padInfo.front,n=e.padInfo.top,r=e.padInfo.left,a=e.strideDepth,o=e.strideHeight,s=e.strideWidth,i=e.dilationDepth,u=e.dilationHeight,l=e.dilationWidth,c=e.filterDepth,p=e.filterHeight,d=e.filterWidth,h=4*Math.floor(e.inChannels/4),f=e.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(${a}, ${o}, ${s});
      const ivec3 pads = ivec3(${t}, ${n}, ${r});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < ${c}; wF++) {
          int xF = xFCorner + wF * ${i};

          if (xF < 0 || xF >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${p}; wR++) {
            int xR = xRCorner + wR * ${u};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${d}; wC++) {
              int xC = xCCorner + wC * ${l};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              for (int d1 = 0; d1 < ${h}; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (${1==f}) {
                dotProd +=
                  getX(batch, xF, xR, xC, ${h}) *
                  getW(wF, wR, wC, ${h}, d2);
              } else if (${2==f}) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, ${h}),
                  getX(batch, xF, xR, xC, ${h} + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, ${h}, d2),
                  getW(wF, wR, wC, ${h} + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (${3==f}) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, ${h}),
                  getX(batch, xF, xR, xC, ${h} + 1),
                  getX(batch, xF, xR, xC, ${h} + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, ${h}, d2),
                  getW(wF, wR, wC, ${h} + 1, d2),
                  getW(wF, wR, wC, ${h} + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class Ra{constructor(n,r,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n;var{filterWidth:t,inChannels:a,strideWidth:o,strideHeight:s,padInfo:i,outWidth:u,dilationWidth:l,dilationHeight:c,dataFormat:e}=e,{left:p,top:d}=i,h=a*t,t=V(),f="channelsLast"===e,m=f?0:1,g=f?1:2;let y="";for(let t=0;t<=1;t++)for(let e=0;e<=1;e++)y+=`
          blockIndex = rc.y + ${e};
          pos = rc.x + ${t};

          if(blockIndex < ${n[1]} && pos < ${n[0]}) {
            offsetY = int(blockIndex / (${u})) * ${s} - ${d};
            d0 = offsetY + ${c} * (pos / ${h});

            if(d0 < ${r[m]} && d0 >= 0) {

              offsetX = int(mod(float(blockIndex), ${u}.) * ${o}. - ${p}.);
              d1 = offsetX + ${l} * (int(mod(float(pos), ${h}.) / ${a}.));

              if(d1 < ${r[g]} && d1 >= 0) {

                ch = int(mod(float(pos), ${a}.));

                if (${f}) {
                  innerDims = vec2(d1, ch);
                  result[${2*t+e}] = getChannel(
                    getA(d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[${2*t+e}] = getChannel(
                    getA(ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec2 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        ${y}

        ${t.output} = result;
      }
    `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Da({x:e,filter:t,convInfo:n,backend:r,bias:a=null,preluActivationWeights:o=null,leakyreluAlpha:s=0,activation:i=null}){var u=e.shape;const l=r.texData.get(e.dataId);var c=n.inChannels,p=u[0]*u[1]*u[2],d=n.outChannels,h="channelsLast"===n.dataFormat;let f;const m=[];d=(1==p||1===d)&&c>ur,c=u[2]%2!=0&&!!l.isPacked;if(!d&&(0,A.OBj)().getBool("WEBGL_LAZILY_UNPACK")&&(0,A.OBj)().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&c){d=h?u[0]*u[1]*(u[2]+1):u[0]*u[2]*(u[3]+1);const g={dataId:e.dataId,shape:[1,d,n.inChannels],dtype:e.dtype};c=l.shape;l.shape=l.shape.slice(),l.shape[l.shape.length-2]++,A.D5U.assert(R(l.shape,g.shape),()=>`packed reshape ${l.shape} to ${g.shape} isn't free`);d=Zn({inputs:{x:t},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}});m.push(d);d=lr({a:g,b:d,backend:r,transposeA:!1,transposeB:!1,bias:a,activation:i,preluActivationWeights:o,leakyreluAlpha:s});const y=r.texData.get(d.dataId);A.D5U.assert(y.isPacked,()=>"batchMatMul result is expected to be packed"),l.shape=c,y.shape=n.outShape,f=Dn({inputs:{x:d},backend:r}),f.shape=n.outShape,m.push(d)}else{u=Zn({inputs:{x:e},backend:r,attrs:{shape:[1,h?u[0]*u[1]*u[2]:u[0]*u[2]*u[3],n.inChannels]}}),t=Zn({inputs:{x:t},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}}),s=lr({a:u,b:t,transposeA:!1,transposeB:!1,backend:r,bias:a,activation:i,preluActivationWeights:o,leakyreluAlpha:s});f=Zn({inputs:{x:s},backend:r,attrs:{shape:n.outShape}}),m.push(u),m.push(t),m.push(s)}for(const v of m)r.disposeIntermediateTensorInfo(v);return f}function Aa({x:e,filter:t,convInfo:n,backend:r,bias:a=null,preluActivationWeights:o=null,leakyreluAlpha:s=0,activation:i=null}){var{filterWidth:u,filterHeight:l,inChannels:c,outWidth:p,outHeight:d,dataFormat:h}=n,f="channelsLast"===h,h=u*l*c,u=d*p,l=[h,u];const m=[];c=Zn({inputs:{x:e},backend:r,attrs:{shape:e.shape.slice(1)}}),e=Zn({inputs:{x:t},backend:r,attrs:{shape:[1,h,A.D5U.sizeFromShape(t.shape)/h]}});m.push(c),m.push(e);t=new Ra(l,c.shape,n),h=r.runWebGLProgram(t,[c],"float32"),t=Zn({inputs:{x:h},backend:r,attrs:{shape:[1,l[0],l[1]]}});m.push(h),m.push(t);c=null!=a,l=null!=o,h="leakyrelu"===i,i=i?zn(i,!0):null,i=new Gn(t.shape,e.shape,[1,u,n.outChannels],!0,!1,c,i,l,h);const g=[t,e];a&&g.push(a),l&&g.push(o),h&&(s=r.makeTensorInfo([],"float32",A.D5U.createScalarValue(s,"float32")),g.push(s),m.push(s));i=r.runWebGLProgram(i,g,"float32"),p=Zn({inputs:{x:i},backend:r,attrs:{shape:f?[1,d,p,n.outChannels]:[1,n.outChannels,d,p]}});m.push(i);for(const y of m)r.disposeIntermediateTensorInfo(y);return p}var _a={kernelName:A.mhS,backendName:"webgl",kernelFunc:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e){const{inputs:t,backend:n,attrs:r}=e;var{x:a,filter:o}=t,{strides:s,pad:i,dataFormat:u,dilations:l,dimRoundingMode:e}=r,u=A.Wap.convertConv2DDataFormat(u),e=A.Wap.computeConv2DInfo(a.shape,o.shape,s,l,i,e,!1,u);let c;return c=1!==e.filterHeight||1!==e.filterWidth||1!==e.dilationHeight||1!==e.dilationWidth||1!==e.strideHeight||1!==e.strideWidth||"SAME"!==e.padInfo.type&&"VALID"!==e.padInfo.type?(0,A.OBj)().getBool("WEBGL_CONV_IM2COL")&&1===a.shape[0]?Aa({x:a,filter:o,convInfo:e,backend:n}):(u=new Ta(e),n.runWebGLProgram(u,[a,o],"float32")):Da({x:a,filter:o,convInfo:e,backend:n}),e=Zn({inputs:{x:c},backend:n,attrs:{shape:e.outShape}}),n.disposeIntermediateTensorInfo(c),e}};
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class Oa{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;var t=e.strideHeight,n=e.strideWidth,r=e.padInfo.top,a=e.padInfo.left,o="channelsLast"===e.dataFormat;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${t} - ${r};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${n} - ${a};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              if (${o}) {
                float dyValue = getDy(b, yR, yC, d2);
                float xValue = getX(b, xR, xC, d1);
                dotProd += (xValue * dyValue);
              } else {
                float dyValue = getDy(b, d2, yR, yC);
                float xValue = getX(b, d1, xR, xC);
                dotProd += (xValue * dyValue);
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `}}class Fa{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;var t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,a=e.strideWidth,o="channelsLast"===e.dataFormat,s=t-1-e.padInfo.top,i=n-1-e.padInfo.left;this.userCode=`
      const ivec2 pads = ivec2(${s}, ${i});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[${o?3:1}];

        ivec2 dyCorner = ivec2(coords[${o?1:2}], coords[${o?2:3}]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${t}; wR++) {
          float dyR = float(dyRCorner + wR) / ${r}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${t} - 1 - wR;

          for (int wC = 0; wC < ${n}; wC++) {
            float dyC = float(dyCCorner + wC) / ${a}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${n} - 1 - wC;

            for (int d2 = 0; d2 < ${e.outChannels}; d2++) {

              if (${o}) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `}}class Ba{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;var t=e.strideDepth,n=e.strideHeight,r=e.strideWidth,a=e.padInfo.front,o=e.padInfo.top,s=e.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yF = 0; yF < ${e.outDepth}; yF++) {
            int xF = wF + yF * ${t} - ${a};

            if (xF < 0 || xF >= ${e.inDepth}) {
              continue;
            }

            for (int yR = 0; yR < ${e.outHeight}; yR++) {
              int xR = wR + yR * ${n} - ${o};

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int yC = 0; yC < ${e.outWidth}; yC++) {
                int xC = wC + yC * ${r} - ${s};

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class Pa{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;var t=e.filterDepth,n=e.filterHeight,r=e.filterWidth,a=e.strideDepth,o=e.strideHeight,s=e.strideWidth,i=t-1-e.padInfo.front,u=n-1-e.padInfo.top,l=r-1-e.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(${i}, ${u}, ${l});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < ${t}; wF++) {
          float dyF = float(dyFCorner + wF) / ${a}.0;

          if (dyF < 0.0 || dyF >= ${e.outDepth}.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = ${t} - 1 - wF;

          for (int wR = 0; wR < ${n}; wR++) {
            float dyR = float(dyRCorner + wR) / ${o}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = ${n} - 1 - wR;

            for (int wC = 0; wC < ${r}; wC++) {
              float dyC = float(dyCCorner + wC) / ${s}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = ${r} - 1 - wC;

              for (int d2 = 0; d2 < ${e.outChannels}; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}var Ma={kernelName:A.wUP,backendName:"webgl",kernelFunc:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e){const{inputs:t,backend:n,attrs:r}=e;var{x:a,dy:o}=t,{strides:s,pad:i,dataFormat:u,dimRoundingMode:l,filterShape:e}=r,u=A.Wap.convertConv2DDataFormat(u),u=A.Wap.computeConv2DInfo(a.shape,e,s,1,i,l,!1,u),u=new Oa(u);return n.runWebGLProgram(u,[a,o],"float32")}};var La={kernelName:A.wm,backendName:"webgl",kernelFunc:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e){const{inputs:t,backend:n,attrs:r}=e;var{dy:a,filter:o}=t,{inputShape:s,strides:i,pad:u,dataFormat:l,dimRoundingMode:e}=r,l=A.Wap.convertConv2DDataFormat(l),l=A.Wap.computeConv2DInfo(s,o.shape,i,1,u,e,!1,l),l=new Fa(l);return n.runWebGLProgram(l,[a,o],"float32")}};var Va={kernelName:A.x12,backendName:"webgl",kernelFunc:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e){const{inputs:t,backend:n,attrs:r}=e;var{x:a,filter:o}=t,{strides:s,pad:i,dilations:e}=r,i=A.Wap.computeConv3DInfo(a.shape,o.shape,s,e,i),i=new Ea(i);return n.runWebGLProgram(i,[a,o],"float32")}};var Ua={kernelName:A.o2y,backendName:"webgl",kernelFunc:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e){const{inputs:t,backend:n,attrs:r}=e;var{x:a,dy:o}=t,{strides:s,pad:i,filterShape:e}=r,i=A.Wap.computeConv3DInfo(a.shape,e,s,1,i),i=new Ba(i);return n.runWebGLProgram(i,[a,o],"float32")}};var Wa={kernelName:A.ik2,backendName:"webgl",kernelFunc:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e){const{inputs:t,backend:n,attrs:r}=e;var{dy:a,filter:o}=t,{pad:s,strides:i,inputShape:e}=r,s=A.Wap.computeConv3DInfo(e,o.shape,i,1,s),s=new Pa(s);return n.runWebGLProgram(s,[a,o],"float32")}},za=Un({opSnippet:"if (isnan(x)) return x;\n  return cos(x);\n"}),Ga={kernelName:A.mc4,backendName:"webgl",kernelFunc:za},Ha=Un({opSnippet:`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`}),ja={kernelName:A.TR1,backendName:"webgl",kernelFunc:Ha};
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class Xa{constructor(e,t,n,r,a){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];var[o,s,i,u]=e,[l]=t,[c,e]=n;this.outputShape=[l,c,e,u];var[t,n]=[`${s-1}.0`,`${i-1}.0`],[l,u,s]=1<c?[`${(s-1)/(c-1)}`,"(y2-y1) * height_ratio",`y1*${t} + float(y)*(height_scale)`]:["0.0","0.0",`0.5 * (y1+y2) * ${t}`],[c,i,e]=1<e?[`${(i-1)/(e-1)}`,"(x2-x1) * width_ratio",`x1*${n} + float(x)*(width_scale)`]:["0.0","0.0",`0.5 * (x1+x2) * ${n}`];this.userCode=`
      const float height_ratio = float(${l});
      const float width_ratio = float(${c});
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= ${o}) {
          return;
        }

        float height_scale = ${u};
        float width_scale = ${i};

        float in_y = ${s};
        if( in_y < 0.0 || in_y > ${t} ) {
          setOutput(float(${a}));
          return;
        }
        float in_x = ${e};
        if( in_x < 0.0 || in_x > ${n} ) {
          setOutput(float(${a}));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(${"bilinear"===r?1:0} == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
var qa={kernelName:A.VcC,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:r}=e;var{image:a,boxes:o,boxInd:s}=t,{cropSize:i,method:u,extrapolationValue:e}=r,e=new Xa(a.shape,o.shape,i,u,e);return n.runWebGLProgram(e,[a,o,s],"float32")}};class Ka{constructor(e,t,n){this.variableNames=["x"];var r=(this.outputShape=e).length,a=t?"0.0":`getX(${Za(r,"coords")})`,e=e[e.length-1];let o="",s="";s=t?(o=n?`end != ${e-1}`:"end != 0",n?"end + 1":"end - 1"):(o=n?`end + pow2 < ${e}`:"end >= pow2",n?"end + pow2":"end - pow2"),this.userCode=`
      uniform float index;
      void main() {
        ${ve(r)} coords = getOutputCoords();
        int end = ${Ya(r,"coords")};
        float val = ${a};
        int pow2 = int(pow(2.0, index));
        if (${o}) {
          int idx = ${s};
          ${Ya(r,"coords")} = idx;
          val += getX(${Za(r,"coords")});
        }
        setOutput(val);
      }
    `}getCustomSetupFunc(n){return(e,t)=>{null==this.index&&(this.index=e.getUniformLocation(t,"index")),e.gl.uniform1f(this.index,n)}}}function Za(e,t){if(1===e)return`${t}`;if(2===e)return`${t}.x, ${t}.y`;if(3===e)return`${t}.x, ${t}.y, ${t}.z`;if(4===e)return`${t}.x, ${t}.y, ${t}.z, ${t}.w`;throw Error(`Cumulative sum for rank ${e} is not yet supported`)}function Ya(e,t){if(1===e)return`${t}`;if(2===e)return`${t}.y`;if(3===e)return`${t}.z`;if(4===e)return`${t}.w`;throw Error(`Cumulative sum for rank ${e} is not yet supported`)}var Qa={kernelName:A.iHb,backendName:"webgl",kernelFunc:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e){const{inputs:t,backend:n,attrs:r}=e;var a=t["x"],{axis:o,exclusive:s,reverse:i}=r,u=a.shape.length,l=A.Wap.getAxesPermutation([o],u);let c=a;if(null!=l&&(c=sr({inputs:{x:a},backend:n,attrs:{perm:l}})),(e=A.Wap.getInnerMostAxes(1,u)[0])!==u-1)throw new Error(`WebGL cumsum shader expects an inner-most axis=${a.shape.length-1} `+`but got axis=${o}`);var p=c.shape[e];let d=Dn({inputs:{x:c},backend:n});for(let e=0;e<=Math.ceil(Math.log2(p))-1;e++){const m=new Ka(c.shape,!1,i);var h=m.getCustomSetupFunc(e),f=d;d=n.runWebGLProgram(m,[d],d.dtype,h),n.disposeIntermediateTensorInfo(f)}return s&&(e=new Ka(c.shape,s,i),s=d,d=n.runWebGLProgram(e,[d],d.dtype),n.disposeIntermediateTensorInfo(s)),null==l?d:(l=A.Wap.getUndoAxesPermutation(l),l=sr({inputs:{x:d},backend:n,attrs:{perm:l}}),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(c),l)}};var Ja={kernelName:A.QRR,backendName:"webgl",kernelFunc:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e){const{inputs:t,backend:n,attrs:r}=e;var{x:a,weights:o}=t,{size:s,binaryOutput:i}=r;if(1===a.shape.length){var e=n.readSync(a.dataId),u=n.readSync(o.dataId),u=Et(e,u,o.dtype,o.shape,s);return n.makeTensorInfo([s],o.dtype,u)}if(2!==a.shape.length)throw new Error("Error in denseBincount: input must be at most rank 2, but got rank"+`${a.shape.length}.`);return u=n.bufferSync(a),a=n.bufferSync(o),i=Rt(u,a,s,i),n.makeTensorInfo(i.shape,o.dtype,i.values)}};
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class eo{constructor(e,t,n){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=t,this.dataFormat=n,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = ${this.getHeightCoordString()};
      int w = ${this.getWidthCoordString()};
      int d = ${this.getDepthCoordString()};

      int in_h = h / ${t};
      int offset_h = imod(h, ${t});
      int in_w = w / ${t};
      int offset_w = imod(w, ${t});
      int offset_d = (offset_h * ${t} + offset_w) *
        ${this.getOutputDepthSize()};
      int in_d = d + offset_d;

      float result = ${this.getInputSamplingString()};
      setOutput(result);
    }
  `}getHeightCoordString(){return"NHWC"===this.dataFormat?"coords[1]":"coords[2]"}getWidthCoordString(){return"NHWC"===this.dataFormat?"coords[2]":"coords[3]"}getDepthCoordString(){return"NHWC"===this.dataFormat?"coords[3]":"coords[1]"}getOutputDepthSize(){return"NHWC"===this.dataFormat?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return"NHWC"===this.dataFormat?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}var to={kernelName:A.T0n,backendName:"webgl",kernelFunc:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e){const{inputs:t,backend:n,attrs:r}=e;var a=t["x"];const{blockSize:o,dataFormat:s}=r;A.D5U.assert(1<o,()=>`blockSize should be > 1 for depthToSpace, but was: ${o}`);var i=a.shape[0],u="NHWC"===s?a.shape[1]:a.shape[2],l="NHWC"===s?a.shape[2]:a.shape[3],e="NHWC"===s?a.shape[3]:a.shape[1],u=u*o,l=l*o,e=e/(o*o),l="NHWC"===s?[i,u,l,e]:[i,e,u,l],l=new eo(l,o,s);return n.runWebGLProgram(l,[a],a.dtype)}};
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class no{constructor(e,t=!1,n=null,r=!1,a=!1){this.variableNames=["x","W"],this.outputShape=e.outShape;var o=e.inHeight,s=e.inWidth,i=e.padInfo.top,u=e.padInfo.left,l=e.strideHeight,c=e.strideWidth,p=e.dilationHeight,d=e.dilationWidth,h=e.filterHeight,f=e.filterWidth,e=e.outChannels/e.inChannels;let m="",g="";n&&(m=r?`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${n}
        }`:a?`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${n}
        }`:`
          float activation(float x) {
            ${n}
          }
        `,g="result = activation(result);");n=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),a&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${m}

      const ivec2 strides = ivec2(${l}, ${c});
      const ivec2 pads = ivec2(${i}, ${u});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${e};
        int q = d2 - d1 * ${e};

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < ${h}; wR++) {
          int xR = xRCorner + wR * ${p};

          if (xR < 0 || xR >= ${o}) {
            continue;
          }

          for (int wC = 0; wC < ${f}; wC++) {
            int xC = xCCorner + wC * ${d};

            if (xC < 0 || xC >= ${s}) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        ${n}
        ${g}
        setOutput(result);
      }
    `}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class ro{constructor(e,t=!1,n=null,r=!1,a=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e.outShape;var o=e.inHeight,s=e.inWidth,i=e.padInfo.top,u=e.padInfo.left,l=e.strideHeight,c=e.strideWidth,p=e.dilationHeight,d=e.dilationWidth,h=e.filterHeight,f=e.filterWidth,m=f;let g="int xR; int xC; int xCOffset;";for(let t=0;t<h;t++)for(let e=0;e<f;e++)g+=`
          vec4 xTexelR${t}C${2*e} = vec4(0.);
          vec4 wR${t}C${e} = vec4(0.);
          vec4 xR${t}C${e} = vec4(0.);`;for(let t=0;t<h;t++)for(let e=0;e<m;e++){var y,v=2*e;g+=`
          xR = xRCorner + ${t*p};
          xC = xCCorner + ${v*d};
        `,1===c?v<f&&(g+=u%2==1?`
                xCOffset = xC + 1;
                if(xR >= 0 && xR < ${o} && xCOffset >= 0 && xCOffset < ${s}) {
                  xTexelR${t}C${v} = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if(xCOffset + 1 >= ${s}) {
                    xTexelR${t}C${v}.zw = vec2(0.);
                  }
                } else {
                  xTexelR${t}C${v} = vec4(0.);
                }

                xCOffset = xC + 1 - 2;
                if(xR >= 0 && xR < ${o} && xCOffset >= 0 && xCOffset < ${s}) {
                  vec4 previous = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if(xCOffset + 1 >= ${s}) {
                    previous.zw = vec2(0.);
                  }

                  xR${t}C${v} = vec4(previous.zw, xTexelR${t}C${v}.xy);
                } else {
                  xR${t}C${v} = vec4(0, 0, xTexelR${t}C${v}.xy);
                }
              `:`
                if(xR >= 0 && xR < ${o} && xC >= 0 && xC < ${s}) {
                  xTexelR${t}C${v} = getX(batch, xR, xC, d1);
                } else {
                  xTexelR${t}C${v} = vec4(0.);
                }

                xR${t}C${v} = xTexelR${t}C${v};
              `,1+v<f&&(y=u%2==0?A.D5U.nearestLargerEven(d):d,d%2==0&&u%2==1||d%2!=0&&u%2!=1?(g+=`
                  xCOffset = xC + ${u%2} + ${y};

                  if(xR >= 0 && xR < ${o} &&
                    xCOffset >= 0 && xCOffset < ${s}) {
                    xTexelR${t}C${2+v} = getX(batch, xR, xCOffset, d1);
                  }
                `,1<d&&(g+=`
                    xCOffset -= 2;
                    if(xR >= 0 && xR < ${o} &&
                      xCOffset >= 0 && xCOffset < ${s}) {
                      xTexelR${t}C${v} = getX(batch, xR, xCOffset, d1);
                    } else {
                      xTexelR${t}C${v} = vec4(0.);
                    }
                  `),g+=`
                  xR${t}C${1+v} = vec4(
                    xTexelR${t}C${v}.zw, xTexelR${t}C${2+v}.xy);
                `):g+=`
                  xCOffset = xC + ${y};

                  if(xR >= 0 && xR < ${o} &&
                    xCOffset >= 0 && xCOffset < ${s}) {
                    xTexelR${t}C${2+v} = getX(batch, xR, xCOffset, d1);
                  }

                  xR${t}C${1+v} = xTexelR${t}C${2+v};
                `)):v<f&&(g+=`
              if(xR >= 0 && xR < ${o}) {
            `,u%2==1?(g+=`
                xCOffset = xC + 1 - ${c};
                if(xCOffset >= 0 && xCOffset < ${s}) {
                  xTexelR${t}C${v} = getX(batch, xR, xCOffset, d1);
                } else {
                  xTexelR${t}C${v} = vec4(0.);
                }

                if(xC + 1 >= 0 && xC + 1 < ${s}) {
                  xTexelR${t}C${2+v} = getX(batch, xR, xC + 1, d1);
                } else {
                  xTexelR${t}C${2+v} = vec4(0.);
                }

                xR${t}C${v} = vec4(
                  xTexelR${t}C${v}.zw, xTexelR${t}C${2+v}.zw);
              `,1+v<f&&(g+=`
                  vec4 final = vec4(0.);
                  xCOffset = xC + 1 + ${c};
                  if(xCOffset >= 0 && xCOffset < ${s}) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xR${t}C${1+v} = vec4(xTexelR${t}C${2+v}.xy, final.xy);
                `)):(g+=`
                if(xC >= 0 && xC < ${s}) {
                  xTexelR${t}C${v} = getX(batch, xR, xC, d1);
                } else {
                  xTexelR${t}C${v} = vec4(0.);
                }

                xCOffset = xC + ${c};
                if(xCOffset >= 0 && xCOffset < ${s}) {
                  xTexelR${t}C${2+v} = getX(batch, xR, xCOffset, d1);
                } else {
                  xTexelR${t}C${2+v} = vec4(0.);
                }

                xR${t}C${v} = vec4(
                  xTexelR${t}C${v}.xy, xTexelR${t}C${2+v}.xy);
              `,1+v<f&&(g+=`
                  xR${t}C${1+v} = vec4(
                    xTexelR${t}C${v}.zw, xTexelR${t}C${2+v}.zw);
                `)),g+="}"),v<f&&(g+=`
            vec4 wTexelR${t}C${v} = getW(${t}, ${v}, d1, q);
            wR${t}C${v} = vec4(wTexelR${t}C${v}.xz, wTexelR${t}C${v}.xz);
          `,1+v<f&&(g+=`
              vec4 wTexelR${t}C${1+v} = getW(${t}, ${1+v}, d1, q);
              wR${t}C${1+v} =
                vec4(wTexelR${t}C${1+v}.xz, wTexelR${t}C${1+v}.xz);`))}for(let t=0;t<h;t++)for(let e=0;e<f;e++)g+=`dotProd += xR${t}C${e} * wR${t}C${e};`;let x="",b="";n&&(x=r?`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${n}
        }`:a?`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${n}
        }`:`vec4 activation(vec4 x) {
          ${n}
        }`,b="result = activation(result);");n=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),a&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${x}

      const ivec2 strides = ivec2(${l}, ${c});
      const ivec2 pads = ivec2(${i}, ${u});

      void main() {

        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2;
        int q = 0;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        vec4 dotProd = vec4(0.);

        ${g}

        vec4 result = dotProd;
        ${n}
        ${b}
        setOutput(result);
      }
    `}}var ao={kernelName:A.cie,backendName:"webgl",kernelFunc:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e){const{inputs:t,backend:n,attrs:r}=e;var{x:a,filter:o}=t;const{strides:s,pad:i,dilations:u,dimRoundingMode:l}=r;let c=u;null==c&&(c=[1,1]),A.D5U.assert(A.Wap.eitherStridesOrDilationsAreOne(s,c),()=>"Error in depthwiseConv2d: Either strides or dilations must be "+`1. Got strides ${s} and dilations '${c}'`),e=A.Wap.computeConv2DInfo(a.shape,o.shape,s,c,i,l,!0);let p;return p=new((0,A.OBj)().getBool("WEBGL_PACK_DEPTHWISECONV")&&e.strideWidth<=2&&e.outChannels/e.inChannels==1?ro:no)(e),n.runWebGLProgram(p,[a,o],"float32")}};
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class oo{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;var t=e.strideHeight,n=e.strideWidth,r=e.padInfo.top,a=e.padInfo.left,o=e.outChannels/e.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * ${o} + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${t} - ${r};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${n} - ${a};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class so{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;var t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,a=e.strideWidth,o=t-1-e.padInfo.top,s=n-1-e.padInfo.left,i=e.outChannels/e.inChannels;this.userCode=`
      const ivec2 pads = ivec2(${o}, ${s});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < ${t}; wR++) {
          float dyR = float(dyRCorner + wR) / ${r}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${t} - 1 - wR;

          for (int wC = 0; wC < ${n}; wC++) {
            float dyC = float(dyCCorner + wC) / ${a}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${n} - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < ${i}; dm++) {
              int d2 = d1 * ${i} + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}var io={kernelName:A.sL$,backendName:"webgl",kernelFunc:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e){const{inputs:t,backend:n,attrs:r}=e;var{x:a,dy:o}=t,{strides:s,dilations:i,pad:u,dimRoundingMode:l,filterShape:e}=r,l=A.Wap.computeConv2DInfo(a.shape,e,s,i,u,l,!0),l=new oo(l);return n.runWebGLProgram(l,[a,o],"float32")}};var uo={kernelName:A.y7R,backendName:"webgl",kernelFunc:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e){const{inputs:t,backend:n,attrs:r}=e;var{dy:a,filter:o}=t,{strides:s,dilations:i,pad:u,dimRoundingMode:l,inputShape:e}=r,l=A.Wap.computeConv2DInfo(e,o.shape,s,i,u,l,!0),l=new so(l);return n.runWebGLProgram(l,[a,o],"float32")}};
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class lo{constructor(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `}}var co={kernelName:A.$w,backendName:"webgl",kernelFunc:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e){const{inputs:t,backend:n}=e;var r=[...(a=t["x"]).shape,...a.shape],e=A.D5U.sizeFromShape(a.shape),a=Zn({inputs:{x:a},backend:n,attrs:{shape:[e]}}),e=new lo(e),r=Zn({inputs:{x:e=n.runWebGLProgram(e,[a],a.dtype)},backend:n,attrs:{shape:r}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(e),r}};
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class po{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;var{inHeight:t,inWidth:n,padInfo:r,strideHeight:a,strideWidth:o,filterHeight:s,filterWidth:i,dilationHeight:u,dilationWidth:l}=e,{top:e,left:r}=r;this.userCode=`
      const ivec2 strides = ivec2(${a}, ${o});
      const ivec2 pads = ivec2(${e}, ${r});
      const float neg_infinity = -3.4e38;

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.w;
        ivec2 outTopLeftCorner =
            coords.yz * strides - pads;
        int hBeg = outTopLeftCorner.x;
        int wBeg = outTopLeftCorner.y;

        float curVal = neg_infinity;
        for (int h = 0; h < ${s}; h++) {
          int hIn = hBeg + h * ${u};

          if (hIn >= 0 && hIn < ${t}) {
            for (int w = 0; w < ${i}; w++) {
              int wIn = wBeg + w * ${l};

              if (wIn >= 0 && wIn < ${n}) {
                float xVal = getX(batch, hIn, wIn, d1);
                float wVal = getW(h, w, d1);

                float val = xVal + wVal;
                if (val > curVal) {
                  curVal = val;
                }
              }
            }
          }
        }

        float result = curVal;
        setOutput(result);
      }
    `}}var ho={kernelName:A.p4S,backendName:"webgl",kernelFunc:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e){const{inputs:t,backend:n,attrs:r}=e;var{x:a,filter:o}=t,{strides:s,pad:i,dilations:e}=r,i=A.Wap.computeDilation2DInfo(a.shape,o.shape,s,i,"NHWC",e),e=new po(i),i=Zn({inputs:{x:o=n.runWebGLProgram(e,[a,o],"float32")},backend:n,attrs:{shape:i.outShape}});return n.disposeIntermediateTensorInfo(o),i}},fo=Un({opSnippet:"return (x >= 0.0) ? x : (exp(x) - 1.0);",packedOpSnippet:`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`}),mo={kernelName:A.SX0,backendName:"webgl",kernelFunc:fo};var go={kernelName:A.HEU,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n}=e;var{dy:r,y:a}=t,e=(0,A.OBj)().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Rn(`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,r.shape,a.shape):new En("return (b >= 1.0) ? a : a * (b + 1.0);",r.shape,a.shape);return n.runWebGLProgram(e,[r,a],r.dtype)}},yo=Wn({opSnippet:"return float(a == b);",packedOpSnippet:`
  return vec4(equal(a, b));
`,dtype:"bool"}),vo={kernelName:A.hdR,backendName:"webgl",kernelFunc:yo},xo=Un({opSnippet:`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = ${A.Wap.ERF_P};
  float a1 = ${A.Wap.ERF_A1};
  float a2 = ${A.Wap.ERF_A2};
  float a3 = ${A.Wap.ERF_A3};
  float a4 = ${A.Wap.ERF_A4};
  float a5 = ${A.Wap.ERF_A5};

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`}),bo={kernelName:A.Omj,backendName:"webgl",kernelFunc:xo},wo="return exp(x);";const ko=Un({opSnippet:wo,packedOpSnippet:wo,cpuKernelImpl:_t});var Io={kernelName:A.NEP,backendName:"webgl",kernelFunc:ko};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function No(e){var{inputs:t,attrs:n,backend:e}=e,n=n["dim"];const r=t["input"],a=r.shape.length,o=r.shape.slice();let s=n;return n<0&&(A.D5U.assert(-(a+1)<=n,()=>`Axis must be in the interval [${-(a+1)}, ${a}]`),s=a+n+1),o.splice(s,0,1),Zn({inputs:{x:r},backend:e,attrs:{shape:o}})}var $o={kernelName:A.YFo,backendName:"webgl",kernelFunc:No},Co="return exp(x) - 1.0;",So=Un({opSnippet:Co,packedOpSnippet:Co,cpuKernelImpl:Ot}),To={kernelName:A.Y0y,backendName:"webgl",kernelFunc:So};
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class Eo{constructor(e,t,n){this.variableNames=["real","imag"];var r=t[1];this.outputShape=t;t=n?`2.0 * ${Math.PI}`:`-2.0 * ${Math.PI}`,n=n?`${r}.0`:"1.0";let a;if("real"===e)a="return real * expR - imag * expI;";else{if("imag"!==e)throw new Error(`FFT component must be either "real" or "imag", got ${e}.`);a="return real * expI + imag * expR;"}this.userCode=`
      const float exponentMultiplier = ${t};

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        ${a}
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(${r});
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < ${r}; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / ${n};
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Ro(e,t,n){var r=n.texData.get(e.dataId),a=A.D5U.sizeFromShape(e.shape),o=e.shape[e.shape.length-1],s=Zn({inputs:{x:e},backend:n,attrs:{shape:[a/o,o]}}),a=s.shape,o=new Eo("real",a,t),t=new Eo("imag",a,t),a=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:a},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:a}],o=n.runWebGLProgram(o,a,"float32"),t=n.runWebGLProgram(t,a,"float32"),a=_n({inputs:{real:o,imag:t},backend:n});n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(t);e=Zn({inputs:{x:a},backend:n,attrs:{shape:e.shape}});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(a),e}var Do={kernelName:A.vwp,backendName:"webgl",kernelFunc:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e){var{inputs:t,backend:e}=e;return Ro(t=t["input"],!1,e)}};
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class Ao{constructor(e,t){this.outputShape=[],this.variableNames=["x"],this.outputShape=e,this.userCode=`
      uniform float value;
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}getCustomSetupFunc(n){return(e,t)=>{null==this.valueLoc&&(this.valueLoc=e.getUniformLocationNoThrow(t,"value")),e.gl.uniform1f(this.valueLoc,n)}}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function _o(e){const{backend:t,attrs:n}=e;var{shape:r,value:a}=n,e=n["dtype"];if("string"===(e=e||A.D5U.inferDtype(a))){const o=A.D5U.getArrayFromDType(e,A.D5U.sizeFromShape(r));return o.fill(a),t.makeTensorInfo(r,e,o)}{const s=new Ao(r,a);a=s.getCustomSetupFunc(a);return t.runWebGLProgram(s,[],e,a)}}var Oo={kernelName:A.deh,backendName:"webgl",kernelFunc:_o};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class Fo{constructor(e){this.variableNames=["Image"],this.outputShape=[];var t=e[2];this.outputShape=e,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];

          int coordX = ${t} - x;
          float outputValue;
          if(coordX >= 0 && coordX < ${t}) {
            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);
          } else {
            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);
          }
          setOutput(outputValue);
        }
    `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
var Bo={kernelName:A.Uyb,backendName:"webgl",kernelFunc:({inputs:e,backend:t})=>{var e=e["image"];const n=t;t=new Fo(e.shape);return n.runWebGLProgram(t,[e],e.dtype)}},Po="return floor(x);",Mo=Un({opSnippet:Po,packedOpSnippet:Po,cpuKernelImpl:Ft}),Lo={kernelName:A.OR,backendName:"webgl",kernelFunc:Mo},Vo=Wn({opSnippet:`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,packedOpSnippet:`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,dtype:"int32"}),Uo={kernelName:A.jeX,backendName:"webgl",kernelFunc:Vo};
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class Wo{constructor(e){this.variableNames=["A"];var t=V(),[n,r]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${r}.0, ${n}.0);

        vec4 values = ${t.texture2D}(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class zo{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var t=V(),[n,r]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(${r}.0, ${n}.0);
            vec4 values = ${t.texture2D}(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        ${t.output} = result;
      }
    `}}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
var Go={kernelName:A.eBW,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e;let a=t["pixels"];var o=r["numChannels"],s="undefined"!=typeof HTMLVideoElement&&a instanceof HTMLVideoElement,i="undefined"!=typeof HTMLImageElement&&a instanceof HTMLImageElement,u="undefined"!=typeof ImageBitmap&&a instanceof ImageBitmap,[l,c]=s?[a.videoWidth,a.videoHeight]:[a.width,a.height],e=[c,l],o=[c,l,o];(i||s||u)&&(null==Ho&&(Ho=document.createElement("canvas").getContext("2d")),Ho.canvas.width=l,Ho.canvas.height=c,Ho.drawImage(a,0,0,l,c),a=Ho.canvas);e=n.makeTensorInfo(e,"int32");n.texData.get(e.dataId).usage=h.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(e.dataId),a);o=new((0,A.OBj)().getBool("WEBGL_PACK")?zo:Wo)(o),o=n.runWebGLProgram(o,[e],"int32");return n.disposeData(e.dataId),o}};let Ho;var jo={kernelName:A._V0,backendName:"webgl",kernelFunc:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e){const{inputs:t,backend:n,attrs:r}=e;var{x:a,filter:o,bias:s,preluActivationWeights:i}=t,{strides:u,pad:l,dataFormat:c,dilations:p,dimRoundingMode:d,activation:h,leakyreluAlpha:e}=r,c=A.Wap.convertConv2DDataFormat(c),u=A.Wap.computeConv2DInfo(a.shape,o.shape,u,p,l,d,!1,c);let f;const m=[];if(1!==u.filterHeight||1!==u.filterWidth||1!==u.dilationHeight||1!==u.dilationWidth||1!==u.strideHeight||1!==u.strideWidth||"SAME"!==u.padInfo.type&&"VALID"!==u.padInfo.type)if((0,A.OBj)().getBool("WEBGL_CONV_IM2COL")&&1===a.shape[0])f=Aa({x:a,filter:o,convInfo:u,backend:n,bias:s,activation:h,preluActivationWeights:i,leakyreluAlpha:e});else{p=null!=s,l=null!=i,d="leakyrelu"===h,c=h?zn(h,!1):null,l=new Ta(u,p,c,l,d);const t=[a,o];s&&t.push(s),i&&t.push(i),d&&(d=n.makeTensorInfo([],"float32",A.D5U.createScalarValue(e,"float32")),t.push(d),m.push(d)),f=n.runWebGLProgram(l,t,"float32")}else f=Da({x:a,filter:o,convInfo:u,backend:n,bias:s,activation:h,preluActivationWeights:i,leakyreluAlpha:e});return u=Zn({inputs:{x:f},backend:n,attrs:{shape:u.outShape}}),m.push(f),m.forEach(e=>n.disposeIntermediateTensorInfo(e)),u}};var Xo={kernelName:A.luS,backendName:"webgl",kernelFunc:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e){const{inputs:t,backend:n,attrs:r}=e;var{x:a,filter:o,bias:s,preluActivationWeights:i}=t;const{strides:u,pad:l,dilations:c,dimRoundingMode:p,activation:d,leakyreluAlpha:h}=r,f=[];let m=c;null==m&&(m=[1,1]),A.D5U.assert(A.Wap.eitherStridesOrDilationsAreOne(u,m),()=>"Error in depthwiseConv2d: Either strides or dilations must be "+`1. Got strides ${u} and dilations '${m}'`);var g=A.Wap.computeConv2DInfo(a.shape,o.shape,u,m,l,p,!0),y=(0,A.OBj)().getBool("WEBGL_PACK_DEPTHWISECONV")&&g.strideWidth<=2&&g.outChannels/g.inChannels==1,v=d?zn(d,y):null;const x=[a,o];e=null!=s,a=null!=i,o="leakyrelu"===d,e&&x.push(s),a&&x.push(i),o&&(i=n.makeTensorInfo([],"float32",A.D5U.createScalarValue(h,"float32")),x.push(i),f.push(i));let b;return b=new(y?ro:no)(g,e,v,a,o),o=n.runWebGLProgram(b,x,"float32"),f.forEach(e=>n.disposeIntermediateTensorInfo(e)),o}};class qo{constructor(e,t,n){this.sliceDim=e,this.strides=t,this.variableNames=["x","indices"],this.outputShape=n;e=ve(t.length),t=ve(n.length),n=1<this.sliceDim?"strides[j]":"strides";this.userCode=`
        ${e} strides = ${e}(${this.strides});
         void main() {
          ${t} coords = getOutputCoords();
          int flattenIndex = 0;
          for (int j = 0; j < ${this.sliceDim}; j++) {
            int index = round(getIndices(coords[0], j));
            flattenIndex += index * ${n};
          }
          setOutput(getX(flattenIndex, coords[1]));
        }
      `}}var Ko={kernelName:A.q1x,backendName:"webgl",kernelFunc:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e){const{inputs:t,backend:n}=e;var{params:r,indices:a}=t,o=(u=a.shape)[u.length-1],[s,i,e,u]=A.Wap.prepareAndValidate(r,a),a=Zn({inputs:{x:a},backend:n,attrs:{shape:[i,o]}}),r=Zn({inputs:{x:r},backend:n,attrs:{shape:[A.D5U.sizeFromShape(r.shape)/e,e]}}),e=new qo(o,u,[i,e]),s=Zn({inputs:{x:e=n.runWebGLProgram(e,[r,a],r.dtype)},backend:n,attrs:{shape:s}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(r),n.disposeIntermediateTensorInfo(e),s}};
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class Zo{constructor(e,t){this.variableNames=["A","indices"],this.outputShape=t,this.rank=t.length;t=ve(this.rank),e=function(t){const n=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[];for(let e=0;e<t.length;e++)2===e?r.push("int(getIndices(resRC.x, resRC.z))"):r.push(`${n[e]}`);return r.join()}(e);this.userCode=`
      void main() {
        ${t} resRC = getOutputCoords();
        setOutput(getA(${e}));
      }
    `}}var Yo={kernelName:A.qi_,backendName:"webgl",kernelFunc:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e){const{inputs:t,backend:n,attrs:r}=e;var{x:a,indices:o}=t,{axis:s,batchDims:i}=r,u=A.D5U.parseAxisParam(s,a.shape)[0],e=A.Wap.segment_util.collectGatherOpShapeInfo(a,o,u,i),s=A.D5U.sizeFromShape(o.shape);const l=[];if(u=Zn({inputs:{x:a},backend:n,attrs:{shape:[e.batchSize,e.outerSize,e.dimSize,e.sliceSize]}}),i=Zn({inputs:{x:o},backend:n,attrs:{shape:[e.batchSize,s/e.batchSize]}}),l.push(u),l.push(i),s=[e.batchSize,e.outerSize,s/e.batchSize,e.sliceSize],n.shouldExecuteOnCPU([a,o])||"string"===a.dtype){o=n.bufferSync(i),a=n.bufferSync(u),o=Bt(a,o,s);return l.forEach(e=>n.disposeIntermediateTensorInfo(e)),n.makeTensorInfo(e.outputShape,o.dtype,o.values)}return s=new Zo(u.shape,s),u=n.runWebGLProgram(s,[u,i],u.dtype),l.push(u),e=Zn({inputs:{x:u},backend:n,attrs:{shape:e.outputShape}}),l.forEach(e=>n.disposeIntermediateTensorInfo(e)),e}},Qo=Wn({opSnippet:"return float(a > b);",packedOpSnippet:`
  return vec4(greaterThan(a, b));
`,cpuKernelImpl:Pt,dtype:"bool"}),Jo={kernelName:A.iZT,backendName:"webgl",kernelFunc:Qo},es=Wn({opSnippet:"return float(a >= b);",packedOpSnippet:`
  return vec4(greaterThanEqual(a, b));
`,dtype:"bool"}),ts={kernelName:A.Acj,backendName:"webgl",kernelFunc:es};var ns={kernelName:A.Qg5,backendName:"webgl",kernelFunc:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e){var{inputs:t,backend:e}=e;return Ro(t=t["input"],!0,e)}},rs=Un({opSnippet:"return float(!isnan(x) && !isinf(x));",dtype:"bool"}),as={kernelName:A.avt,backendName:"webgl",kernelFunc:rs},os=Un({opSnippet:"return float(isinf(x));",dtype:"bool"}),ss={kernelName:A.iWB,backendName:"webgl",kernelFunc:os},is=Un({opSnippet:"return float(isnan(x));",dtype:"bool"}),us={kernelName:A.r7n,backendName:"webgl",kernelFunc:is},ls=Wn({opSnippet:"return float(a < b);",packedOpSnippet:`
  return vec4(lessThan(a, b));
`,cpuKernelImpl:Mt,dtype:"bool"}),cs={kernelName:A.vtC,backendName:"webgl",kernelFunc:ls},ps=Wn({opSnippet:"return float(a <= b);",packedOpSnippet:`
  return vec4(lessThanEqual(a, b));
`,dtype:"bool"}),ds={kernelName:A.CAk,backendName:"webgl",kernelFunc:ps};var hs={kernelName:A.e7N,backendName:"webgl",kernelFunc:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e){const{backend:t,attrs:n}=e;var{start:r,stop:a,num:e}=n,e=Lt(r,a,e);return t.makeTensorInfo([e.length],"float32",e)}},fs=Un({opSnippet:`if (x < 0.0) return NAN;
  return log(x);`,packedOpSnippet:`
  vec4 result = log(x);
  vec4 isNaN = vec4(lessThan(x, vec4(0.0)));
  result.r = isNaN.r == 1.0 ? NAN : result.r;
  result.g = isNaN.g == 1.0 ? NAN : result.g;
  result.b = isNaN.b == 1.0 ? NAN : result.b;
  result.a = isNaN.a == 1.0 ? NAN : result.a;

  return result;
`,cpuKernelImpl:Vt}),ms={kernelName:A.ZbH,backendName:"webgl",kernelFunc:fs},gs=Un({opSnippet:"return log(1.0 + x);"}),ys={kernelName:A.kU,backendName:"webgl",kernelFunc:gs},vs=Wn({opSnippet:"return float(a >= 1.0 && b >= 1.0);",packedOpSnippet:`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,dtype:"bool"}),xs={kernelName:A.PYm,backendName:"webgl",kernelFunc:vs},bs=Un({opSnippet:"return float(!(x >= 1.0));"}),ws={kernelName:A.VfG,backendName:"webgl",kernelFunc:bs},ks=Wn({opSnippet:"return float(a >= 1.0 || b >= 1.0);",packedOpSnippet:`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,dtype:"bool"}),n={kernelName:A.MZg,backendName:"webgl",kernelFunc:ks};
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class Is{constructor(e,t,n,r,a){this.variableNames=["x"],this.outputShape=[];var o=t,t=e[3]-1;this.outputShape=e;let s;r=`float(${n}) + float(${r}) * sum`;s=.5===a?`inversesqrt(${r})`:1===a?`1.0/(${r})`:`exp(log(${r}) * float(-${a}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -${o}; j <= ${o}; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  ${t}) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * ${s};
        setOutput(val);
      }
    `}}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class Ns{constructor(e,t,n,r,a){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;var o=t,t=e[3]-1;this.outputShape=e;let s;r=`float(${n}) + float(${r}) * sum`;s=.5===a?`inversesqrt(${r})`:1===a?`1.0/(${r})`:`exp(log(${r}) * float(-${a}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < ${this.outputShape[3]};
        bool hasNextRow = c < ${this.outputShape[2]};

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - ${o};
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - ${o}; j <= ${o}; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(${t}));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * ${s};
        setOutput(result);
      }
    `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
var $s={kernelName:A.eZ0,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:r}=e;var a=t["x"],{depthRadius:o,bias:s,alpha:i,beta:e}=r,e=new((0,A.OBj)().getBool("WEBGL_PACK_NORMALIZATION")?Ns:Is)(a.shape,o,s,i,e);return n.runWebGLProgram(e,[a],a.dtype)}};
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class Cs{constructor(e,t,n,r,a){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=t,this.bias=n,this.alpha=r,this.beta=a,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < ${this.depth}; ++d) {
          int depthBegin = int(max(0.0, float(d - ${t})));
          int depthEnd = int(min(float(${this.depth}),
              float(d + ${t} + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = ${this.depth};

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(${r}) * norm + float(${n});

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(${r})
                * float(${a})
                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * ${a});
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
var Ss={kernelName:A.Hhh,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:r}=e;var{x:a,y:o,dy:s}=t,{depthRadius:i,bias:u,alpha:l,beta:e}=r,e=new Cs(a.shape,i,u,l,e);return n.runWebGLProgram(e,[a,o,s],a.dtype)}};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Ts(e){const{inputs:t,backend:n,attrs:r}=e;var a=t["x"],{reductionIndices:o,keepDims:s}=r,i=a.shape.length,u=A.D5U.parseAxisParam(o,a.shape);let l=u;var c=A.Wap.getAxesPermutation(l,i),e=null!=c,o=n.shouldExecuteOnCPU([a]);let p=a;if(e){if(o){var d=n.texData.get(p.dataId).values;const y=new Array(i);for(let e=0;e<y.length;e++)y[e]=a.shape[c[e]];d=tn(d,a.shape,a.dtype,c,y);p=n.makeTensorInfo(y,a.dtype);const v=n.texData.get(p.dataId);v.values=d}else p=rr(a,c,n);l=A.Wap.getInnerMostAxes(l.length,i)}A.Wap.assertAxesAreInnerMostDims("max",l,i);var[d,i]=A.Wap.computeOutAndReduceShapes(p.shape,l);let h=d;s&&(h=A.Wap.expandShapeToKeepDim(d,u));let f;if(o){var m=n.texData.get(p.dataId).values,g=Ut(m,A.D5U.sizeFromShape(i),h,a.dtype);f=n.makeTensorInfo(h,a.dtype);const x=n.texData.get(f.dataId);x.values=g}else f=(o=p,m=i,g=h,i=n,m=A.D5U.sizeFromShape(m),m=Zn({inputs:{x:o},attrs:{shape:[A.D5U.sizeFromShape(o.shape)/m,m]},backend:i}),o=er(m,o.dtype,"max",i),g=Zn({inputs:{x:o},attrs:{shape:g},backend:i}),i.disposeIntermediateTensorInfo(m),i.disposeIntermediateTensorInfo(o),g);return e&&n.disposeIntermediateTensorInfo(p),f}var Es={kernelName:A.YoZ,backendName:"webgl",kernelFunc:Ts},Ae=Wn({opSnippet:"\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return max(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(max(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",cpuKernelImpl:Wt}),_e={kernelName:A.BMI,backendName:"webgl",kernelFunc:Ae};Le={kernelName:A.mTV,backendName:"webgl",kernelFunc:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e){const{inputs:t,backend:n,attrs:r}=e;var a=t["x"];M(a,"maxPool");const{filterSize:o,strides:s,pad:i,dimRoundingMode:u}=r;return A.D5U.assert(A.Wap.eitherStridesOrDilationsAreOne(s,1),()=>"Error in maxPool: Either strides or dilations must be 1. "+`Got strides ${s} and dilations '1'`),1===(e=A.Wap.computePool2DInfo(a.shape,o,s,1,i,u)).filterWidth&&1===e.filterHeight&&A.D5U.arraysEqual(e.inShape,e.outShape)?Dn({inputs:{x:a},backend:n}):(e=new Vr(e,"max",!1),n.runWebGLProgram(e,[a],a.dtype))}};We={kernelName:A.OAf,backendName:"webgl",kernelFunc:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e){const{inputs:t,backend:n,attrs:r}=e;var a=t["x"],{filterSize:o,strides:s,pad:i,dataFormat:u,dimRoundingMode:e}=r,u=A.Wap.computePool3DInfo(a.shape,o,s,[1,1,1],i,e,u),u=new Ur(u,"max",!1);return n.runWebGLProgram(u,[a],a.dtype)}};
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class Rs{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;var t=e.strideHeight,n=e.strideWidth,r=e.dilationHeight,a=e.effectiveFilterHeight,o=e.effectiveFilterWidth,s=a-1-e.padInfo.top,i=o-1-e.padInfo.left;this.userCode=`
      const ivec2 pads = ivec2(${s}, ${i});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${a};
          wR += ${r}) {
          float dyR = float(dyRCorner + wR) / ${t}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${o}; wC++) {
            float dyC = float(dyCCorner + wC) / ${n}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = ${a*o-1} - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * ${o} + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `}}class Ds{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;var t=e.strideDepth,n=e.strideHeight,r=e.strideWidth,a=e.dilationDepth,o=e.dilationHeight,s=e.dilationWidth,i=e.effectiveFilterDepth,u=e.effectiveFilterHeight,l=e.effectiveFilterWidth,c=i-1-e.padInfo.front,p=u-1-e.padInfo.top,d=l-1-e.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(${c}, ${p}, ${d});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${i};
           wD += ${a}) {
          float dyD = float(dyDCorner + wD) / ${t}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${u};
              wR += ${o}) {
            float dyR = float(dyRCorner + wR) / ${n}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${l};
                wC += ${s}) {
              float dyC = float(dyCCorner + wC) / ${r}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = ${i*u*l-1} -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * ${u} * ${l} +
                  wR * ${l} + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}Ge={kernelName:A.OU7,backendName:"webgl",kernelFunc:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e){const{inputs:t,backend:n,attrs:r}=e;var{dy:a,input:o}=t,s=o,{filterSize:i,strides:u,pad:e,dimRoundingMode:o}=r,e=A.Wap.computePool3DInfo(s.shape,i,u,[1,1,1],e,o),o=new Ur(e,"max",!0),o=n.runWebGLProgram(o,[s],s.dtype),e=new Ds(e),s=n.runWebGLProgram(e,[a,o],s.dtype);return n.disposeIntermediateTensorInfo(o),s}};je={kernelName:A.OV7,backendName:"webgl",kernelFunc:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e){const{inputs:t,backend:n,attrs:r}=e;var{dy:a,input:o,output:s}=t,i=o;M([o,s],"maxPoolGrad");var{filterSize:u,strides:e,pad:o,dimRoundingMode:s}=r,o=A.Wap.computePool2DInfo(i.shape,u,e,1,o,s),s=new Vr(o,"max",!0),s=n.runWebGLProgram(s,[i],i.dtype),o=new Rs(o),i=n.runWebGLProgram(o,[a,s],i.dtype);return n.disposeIntermediateTensorInfo(s),i}};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Ke={kernelName:A.vFR,backendName:"webgl",kernelFunc:({inputs:e,attrs:t,backend:n})=>{const r=e["x"],{filterSize:a,strides:o,pad:s,includeBatchInIndex:i}=t;var u=n;A.D5U.assert(4===r.shape.length,()=>`Error in maxPool: input must be rank 4 but got rank ${r.shape.length}.`);const l=[1,1];A.D5U.assert(A.Wap.eitherStridesOrDilationsAreOne(o,l),()=>"Error in maxPool: Either strides or dilations must be 1. "+`Got strides ${o} and dilations '${l}'`);var c=A.Wap.computePool2DInfo(r.shape,a,o,l,s),[c,p]=(p=r,e=i,t=c,n=u,c=new Vr(t,"max",!1),u=n.runWebGLProgram(c,[p],"float32"),c=new Vr(t,"max",!0,!0,e),[u,n.runWebGLProgram(c,[p],"float32")]);return[c,p]}};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Ye={kernelName:A.q2K,backendName:"webgl",kernelFunc:({inputs:e,attrs:t,backend:n})=>{var r=e["x"],{keepDims:a,axis:o}=t;const s=n;e=r.shape.length,t=A.D5U.parseAxisParam(o,r.shape);let i=t;var u=A.Wap.getAxesPermutation(i,e),n=null!=u,o=s.shouldExecuteOnCPU([r]);const l=[];let c=r;if(n){if(o){var p=s.texData.get(c.dataId).values;const h=new Array(e);for(let e=0;e<h.length;e++)h[e]=r.shape[u[e]];var p=tn(p,r.shape,r.dtype,u,h);c=s.makeTensorInfo(h,r.dtype);const f=s.texData.get(c.dataId);f.values=p}else c=rr(r,u,s);l.push(c),i=A.Wap.getInnerMostAxes(i.length,e)}A.Wap.assertAxesAreInnerMostDims("sum",i,e);var[p,e]=A.Wap.computeOutAndReduceShapes(c.shape,i);let d=p;a&&(d=A.Wap.expandShapeToKeepDim(p,t));a=c,p=e,t=d,e=s,p=A.D5U.sizeFromShape(p),a=Zn({inputs:{x:a},attrs:{shape:[A.D5U.sizeFromShape(a.shape)/p,p]},backend:e}),p=er(a,"float32","mean",e),t=Zn({inputs:{x:p},attrs:{shape:t},backend:e}),e.disposeIntermediateTensorInfo(a),e.disposeIntermediateTensorInfo(p);for(const m of l)s.disposeIntermediateTensorInfo(m);return t}};et={kernelName:A.c17,backendName:"webgl",kernelFunc:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e){const{inputs:t,backend:n,attrs:r}=e;var a=t["x"],{axis:o,keepDims:s}=r,i=a.shape.length,u=A.D5U.parseAxisParam(o,a.shape);let l=u;e=A.Wap.getAxesPermutation(l,i);let c=a;null!=e&&(c=sr({inputs:{x:a},backend:n,attrs:{perm:e}}),l=A.Wap.getInnerMostAxes(l.length,a.shape.length)),A.Wap.assertAxesAreInnerMostDims("min",l,i);var[o,a]=A.Wap.computeOutAndReduceShapes(c.shape,l),i=A.D5U.sizeFromShape(a),i=er(a=Zn({inputs:{x:c},backend:n,attrs:{shape:[-1,i]}}),a.dtype,"min",n);let p;return p=s?(u=A.Wap.expandShapeToKeepDim(o,u),Zn({inputs:{x:i},backend:n,attrs:{shape:u}})):Zn({inputs:{x:i},backend:n,attrs:{shape:o}}),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),null!=e&&n.disposeIntermediateTensorInfo(c),p}},rt=Wn({opSnippet:"\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return min(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(min(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",cpuKernelImpl:zt}),ot={kernelName:A.q8u,backendName:"webgl",kernelFunc:rt};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class As{constructor(n,e,t){this.variableNames=["x"],this.outputShape=e.map((e,t)=>e[0]+n[t]+e[1]);var r=n.length,a=ve(r),o=e.map(e=>e[0]).join(","),s=e.map((e,t)=>e[0]+n[t]).join(","),e=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r),t="reflect"===t?0:1;this.userCode=1!==r?`
      ${a} start = ${a}(${o});
      ${a} end = ${a}(${s});

      void main() {
        ${a} outC = getOutputCoords();
        for (int i = 0; i < ${r}; i++) {
          if (outC[i] < start[i]) {
            outC[i] = start[i] * 2 - outC[i] - ${t};
          } else if(outC[i] >= end[i]) {
            outC[i] = (end[i] - 1) * 2 - outC[i] + ${t};
          }
        }
        ${a} coords = outC - start;
        setOutput(getX(${e}));
      }
    `:`
        int start = ${o};
        int end = ${s};

        void main() {
          int outC = getOutputCoords();
          if (outC < start) {
            outC = start * 2 - outC - ${t};
          } else if(outC >= end) {
            outC = (end - 1) * 2 - outC + ${t};
          }
          setOutput(getX(outC - start));
        }
      `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class _s{constructor(n,e,t){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e.map((e,t)=>e[0]+n[t]+e[1]);var r=n.length,a=ve(r),o=e.map(e=>e[0]).join(","),s=e.map((e,t)=>e[0]+n[t]).join(","),i=an("rc",r);const u=an("source",r);var l=`${i[r-1]} < ${this.outputShape[r-1]}`,c=1===r?"source":`vec2(${u.slice(-2).join()})`,e="reflect"===t?0:1;let p="";p=1===r?`
        ${a} rc = outputLoc;
        ${t=`
        ${a} source = rc;
        if (source < start) {
          source = start * 2 - source - ${e};
        } else if (source >= end) {
          source = (end - 1) * 2 - source + ${e};
        }
        source -= start;
      `}
        result[0] = getChannel(getX(${u.join()}), ${c});
        ${i[r-1]} += 1;
        if(${l}) {
          ${t}
          result[1] = getChannel(getX(${u.join()}), ${c});
        }
      `:`
        ${a} rc = outputLoc;
        ${e=`
        ${a} source = rc;
        ${a} lt = ${a}(lessThan(source, start));
        ${a} gte = ${a}(greaterThanEqual(source, end));
        ${a} orig = 1 - (lt + gte);
        source = orig * source +
                lt * (start * 2 - source - ${e}) +
                gte * ((end - 1) * 2 - source + ${e});
        source -= start;
      `}
        result[0] = getChannel(getX(${u.join()}), ${c});
        ${i[r-1]} += 1;
        if(${l}) {
          ${e}
          result[1] = getChannel(getX(${u.join()}), ${c});
        }
        rc = outputLoc;
        ${i[r-2]} += 1;
        if(${i[r-2]} < ${this.outputShape[r-2]}) {
          ${e}
          result[2] = getChannel(getX(${u.join()}), ${c});
          ${i[r-1]} += 1;
          if(${l}) {
            ${e}
            result[3] = getChannel(getX(${u.join()}), ${c});
          }
        }
      `,this.userCode=`
      const ${a} start = ${a}(${o});
      const ${a} end = ${a}(${s});

      void main() {
        ${a} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${p}
        setOutput(result);
      }
    `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
it={kernelName:A.jQs,backendName:"webgl",kernelFunc:({inputs:e,backend:t,attrs:n})=>{var r=e["x"],{paddings:e,mode:n}=n,n=new((0,A.OBj)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?_s:As)(r.shape,e,n);return t.runWebGLProgram(n,[r],r.dtype)}},ut=Wn({opSnippet:`if (b == 0.0) return NAN;
  return mod(a, b);`,packedOpSnippet:"\n  vec4 result = mod(a, b);\n  vec4 isNaN = vec4(equal(b, vec4(0.0)));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n"}),pt={kernelName:A.Vbg,backendName:"webgl",kernelFunc:ut};
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class Os{constructor(e,t,n){this.variableNames=["probs"],this.outputShape=[e,n],this.userCode=`
      uniform float seed;

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < ${t-1}; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(${t-1}));
      }
    `}getCustomSetupFunc(n){return(e,t)=>{null==this.seedLoc&&(this.seedLoc=e.getUniformLocation(t,"seed")),e.gl.uniform1f(this.seedLoc,n)}}}const Fs=Wn({opSnippet:`
if (a == b) {
  return 1.0;
};
return a / b;`,packedOpSnippet:`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,checkOutOfBounds:!0});yt={kernelName:A.oHH,backendName:"webgl",kernelFunc:Fs},bt="return a - b;";const Bs=Wn({opSnippet:bt,packedOpSnippet:bt,supportsComplex:!0,cpuKernelImpl:Qt});It={kernelName:A.Tr8,backendName:"webgl",kernelFunc:Bs};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Ps(e){const{inputs:t,backend:n,attrs:r}=e;var a=t["logits"],o=r["dim"],s=A.D5U.parseAxisParam([o],a.shape),i=Ts({inputs:{x:a},backend:n,attrs:{reductionIndices:s,keepDims:!1}}),u=A.Wap.expandShapeToKeepDim(i.shape,s),l=Zn({inputs:{x:i},backend:n,attrs:{shape:u}}),e=Bs({inputs:{a:a,b:l},backend:n}),o=ko({inputs:{x:e},backend:n}),a=ar({inputs:{x:o},backend:n,attrs:{axis:s,keepDims:!1}}),s=Zn({inputs:{x:a},backend:n,attrs:{shape:u}}),u=Fs({inputs:{a:o,b:s},backend:n});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(s),u}Nt={kernelName:A.Gcp,backendName:"webgl",kernelFunc:Ps};r={kernelName:A.NZg,backendName:"webgl",kernelFunc:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e){const{inputs:t,backend:n,attrs:r}=e;var a=t["logits"],{numSamples:o,seed:s,normalized:i}=r,u=i?a:Ps({inputs:{logits:a},backend:n,attrs:{dim:a.shape.length-1}}),e=u.shape[0],a=u.shape[1];const l=new Os(e,a,o);return s=l.getCustomSetupFunc(s),s=n.runWebGLProgram(l,[u],"int32",s),i||n.disposeIntermediateTensorInfo(u),s}};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const Ms="return -x;";hr={kernelName:A.kuV,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e;var r=t["x"];if(n.shouldExecuteOnCPU([r])){var a=n.texData.get(r.dataId),[e,a]=Ht(a.values,r.shape,r.dtype);return n.makeTensorInfo(a,r.dtype,e)}let o;return o=new((0,A.OBj)().getBool("WEBGL_PACK_UNARY_OPERATIONS")?Nn:dn)(r.shape,Ms),n.runWebGLProgram(o,[r],r.dtype)}};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const Ls=A.GDt.GP;mr={kernelName:A.uv1,backendName:"webgl",kernelFunc:function(e){A.Wap.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:t,backend:n,attrs:r}=e;var{boxes:a,scores:o}=t,{maxOutputSize:s,iouThreshold:i,scoreThreshold:e}=r,a=n.readSync(a.dataId),o=n.readSync(o.dataId),e=Ls(a,o,s,i,e)["selectedIndices"];return n.makeTensorInfo([e.length],"int32",new Int32Array(e))}};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const Vs=A.GDt.qP;yr={kernelName:A.cye,backendName:"webgl",kernelFunc:function(e){A.Wap.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:t,backend:n,attrs:r}=e;var{boxes:a,scores:o}=t,{maxOutputSize:s,iouThreshold:i,scoreThreshold:u,padToMaxOutputSize:e}=r,a=n.readSync(a.dataId),o=n.readSync(o.dataId),{selectedIndices:u,validOutputs:e}=Vs(a,o,s,i,u,e);return[n.makeTensorInfo([u.length],"int32",new Int32Array(u)),n.makeTensorInfo([],"int32",new Int32Array([e]))]}};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const Us=A.GDt.pA;vr={kernelName:A.W0H,backendName:"webgl",kernelFunc:function(e){A.Wap.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:t,backend:n,attrs:r}=e;var{boxes:a,scores:o}=t,{maxOutputSize:s,iouThreshold:i,scoreThreshold:u,softNmsSigma:e}=r,a=n.readSync(a.dataId),o=n.readSync(o.dataId),s=s,i=i,u=u,e=e,{selectedIndices:u,selectedScores:e}=Us(a,o,s,i,u,e);return[n.makeTensorInfo([u.length],"int32",new Int32Array(u)),n.makeTensorInfo([e.length],"float32",new Float32Array(e))]}};
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class Ws{constructor(e,t,n,r){this.variableNames=["indices"],this.outputShape=[e,t],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(${r}), float(${n}),
                      float(index == coords.y)));
      }
    `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Rr={kernelName:A.we_,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:r}=e;var a=t["indices"],{depth:o,onValue:s,offValue:i}=r,e=A.D5U.sizeFromShape(a.shape),i=new Ws(e,o,s,i),e=Zn({inputs:{x:a},backend:n,attrs:{shape:[e]}}),i=n.runWebGLProgram(i,[e],a.dtype);n.disposeIntermediateTensorInfo(e);o=[...a.shape,o],o=Zn({inputs:{x:i},backend:n,attrs:{shape:o}});return n.disposeIntermediateTensorInfo(i),o}};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function zs(e){const{inputs:t,backend:n}=e;var r=t["x"];if("complex64"!==r.dtype)return _o({attrs:{shape:r.shape,dtype:r.dtype,value:"string"===r.dtype?"":0},backend:n});var a=ia({inputs:{input:r},backend:n}),o=zs({inputs:{x:a},backend:n}),s=Ia({inputs:{input:r},backend:n}),e=zs({inputs:{x:s},backend:n}),r=_n({inputs:{real:o,imag:e},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(e),r}Ar={kernelName:A.RuY,backendName:"webgl",kernelFunc:zs};Or={kernelName:A.qWM,backendName:"webgl",kernelFunc:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function e(t){const{inputs:n,backend:r}=t;var a=n.x;if("string"===a.dtype)throw new Error("onesLike is not supported under string dtype");if("complex64"!==a.dtype)return _o({attrs:{shape:a.shape,dtype:a.dtype,value:1},backend:r});var o=ia({inputs:{input:a},backend:r}),s=e({inputs:{x:o},backend:r}),i=Ia({inputs:{input:a},backend:r}),t=zs({inputs:{x:i},backend:r}),a=_n({inputs:{real:s,imag:t},backend:r});return r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(s),r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(t),a}};Br={kernelName:A.QiL,backendName:"webgl",kernelFunc:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e){const{inputs:t,backend:n,attrs:r}=e,a=r["axis"];if(1===t.length)return No({inputs:{input:t[0]},backend:n,attrs:{dim:a}});const o=t[0].shape,s=t[0].dtype;t.forEach(e=>{A.D5U.assertShapesMatch(o,e.shape,"All tensors passed to stack must have matching shapes"),A.D5U.assert(s===e.dtype,()=>"All tensors passed to stack must have matching dtypes")});const i=[];return e=Ca({inputs:t.map(e=>{e=No({inputs:{input:e},backend:n,attrs:{dim:a}});return i.push(e),e}),backend:n,attrs:{axis:a}}),i.forEach(e=>n.disposeIntermediateTensorInfo(e)),e}};
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class Gs{constructor(n,e,t){this.variableNames=["x"],this.outputShape=e.map((e,t)=>e[0]+n[t]+e[1]);var r=n.length,a=ve(r),o=e.map(e=>e[0]).join(","),s=e.map((e,t)=>e[0]+n[t]).join(","),e=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r);this.userCode=1!==r?`
      ${a} start = ${a}(${o});
      ${a} end = ${a}(${s});

      void main() {
        ${a} outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(float(${t}));
        } else {
          ${a} coords = outC - start;
          setOutput(getX(${e}));
        }
      }
    `:`
        int start = ${o};
        int end = ${s};

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(float(${t}));
          } else {
            setOutput(getX(outC - start));
          }
        }
      `}}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class Hs{constructor(n,e,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e.map((e,t)=>e[0]+n[t]+e[1]);var a=n.length,o=ve(a),t=e.map(e=>e[0]).join(","),s=e.map((e,t)=>e[0]+n[t]).join(","),i=an("rc",a);const u=an("source",a);var e=`${i[a-1]} < ${this.outputShape[a-1]}`,l=1===a?"source":`vec2(${u.slice(-2).join()})`,c=[`${o} rc = outputLoc;`,`${i[a-1]} += 1;
       if(${e}) {
      `,1===a?"":`}
       rc = outputLoc;
       ${i[a-2]} += 1;
       if(${i[a-2]} < ${this.outputShape[a-2]}) {`,1===a?"":`  ${i[a-1]} += 1;
         if(${e}) {`],p=1===a?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))";let d="";for(let e=0,t=1===a?2:4;e<t;e++)d+=`
        ${c[e]}
        if (${p}) {
          result[${e}] = float(${r});
        } else {
          ${o} source = rc - start;
          result[${e}] = getChannel(getX(${u.join()}), ${l});
        }
      `;d+=1===a?"} ":"}}",this.userCode=`
      const ${o} start = ${o}(${t});
      const ${o} end = ${o}(${s});

      void main() {
        ${o} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${d}
        setOutput(result);
      }
    `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const js=e=>{const{inputs:t,backend:n,attrs:r}=e;var a=t["x"],{paddings:o,constantValue:e}=r,e=new((0,A.OBj)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?Hs:Gs)(a.shape,o,e);return n.runWebGLProgram(e,[a],a.dtype)};Mr={kernelName:A.lyA,backendName:"webgl",kernelFunc:js},pa=Wn({opSnippet:`
  if(a < 0.0 && floor(b) < b){
    return NAN;
  }
  if (b == 0.0) {
    return 1.0;
  }
  return (round(mod(b, 2.0)) != 1) ?
      pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,packedOpSnippet:"\n  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.\n  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));\n  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);\n  vec4 result = multiplier * pow(abs(a), b);\n\n  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS\n  bvec4 isExpZero = equal(b, vec4(0.0));\n  result.r = isExpZero.r ? 1.0 : result.r;\n  result.g = isExpZero.g ? 1.0 : result.g;\n  result.b = isExpZero.b ? 1.0 : result.b;\n  result.a = isExpZero.a ? 1.0 : result.a;\n\n  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n"}),da={kernelName:A.pe_,backendName:"webgl",kernelFunc:pa};za={kernelName:A.DlI,backendName:"webgl",kernelFunc:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e){const{inputs:t,backend:n,attrs:r}=e;var a=t["x"],{axis:o,keepDims:s}=r,i=a.shape.length;const u=[];let l=e=A.D5U.parseAxisParam(o,a.shape);var c,p,o=A.Wap.getAxesPermutation(l,i);let d=a;null!=o&&(d=sr({inputs:{x:a},backend:n,attrs:{perm:o}}),l=A.Wap.getInnerMostAxes(l.length,i),u.push(d)),A.Wap.assertAxesAreInnerMostDims("prod",l,i);let h;return n.shouldExecuteOnCPU([d])?(c=n.texData.get(d.dataId).values,{outVals:p,outShape:i,outDtype:c}=jt(d.shape,d.dtype,c,l),h=n.makeTensorInfo(i,c,p)):([c,p]=A.Wap.computeOutAndReduceShapes(d.shape,l),p=A.D5U.sizeFromShape(p),a=er(p=Zn({inputs:{x:d},backend:n,attrs:{shape:[-1,p]}}),(0,A.z4k)(a.dtype),"prod",n),h=Zn({inputs:{x:a},backend:n,attrs:{shape:c}}),u.push(p),u.push(a)),s&&(u.push(h),e=A.Wap.expandShapeToKeepDim(h.shape,e),h=Zn({inputs:{x:h},backend:n,attrs:{shape:e}})),u.forEach(e=>n.disposeIntermediateTensorInfo(e)),h}};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const Xs=e=>{const{backend:t,attrs:n}=e;var{start:r,stop:a,step:o,dtype:e}=n,o=Xt(r,a,o,e);return t.makeTensorInfo([o.length],e,o)};Ha={kernelName:A.e6w,backendName:"webgl",kernelFunc:Xs},fo=Un({opSnippet:"return 1.0 / x;"}),yo={kernelName:A.$HU,backendName:"webgl",kernelFunc:fo},hn,xo=Un({opSnippet:"if (isnan(x)) return x;\n  return (x < 0.0) ? 0.0 : x;\n",packedOpSnippet:`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`}),wo={kernelName:A.qkr,backendName:"webgl",kernelFunc:xo},hn,Co=Un({opSnippet:"if (isnan(x)) return x;\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",packedOpSnippet:`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`}),So={kernelName:A.SbG,backendName:"webgl",kernelFunc:Co};
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class qs{constructor(e,t,n,r,a){this.variableNames=["A"],this.outputShape=[];var[o,s,i,e]=e;this.outputShape=[o,t,n,e];e=[r&&1<t?s-1:s,r&&1<n?i-1:i],n=[r&&1<t?t-1:t,r&&1<n?n-1:n];let u;u=a?"(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${e[0]/n[0]},
          ${e[1]/n[1]});
      const vec2 inputShapeRC = vec2(${s}.0, ${i}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${u};

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `}}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class Ks{constructor(e,t,n,r,a){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var[o,s,i,e]=e;this.outputShape=[o,t,n,e];o=[r&&1<t?s-1:s,r&&1<n?i-1:i],r=[r&&1<t?t-1:t,r&&1<n?n-1:n];let u;u=a?"(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${o[0]/r[0]},
          ${o[1]/r[1]},
          ${o[1]/r[1]});
      const vec3 inputShapeRC = vec3(${s}.0, ${i}.0,
                                     ${i}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${u};

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${e-1};
        bool hasNextRow = coords.z < ${n-1};

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `}}Po={kernelName:A._Yw,backendName:"webgl",kernelFunc:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e){const{inputs:t,backend:n,attrs:r}=e;var a=t["images"],{alignCorners:o,halfPixelCenters:s,size:i}=r,[e,i]=i,s=new((0,A.OBj)().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?Ks:qs)(a.shape,e,i,o,s);return n.runWebGLProgram(s,[a],"float32")}};
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class Zs{constructor(e,t,n){this.variableNames=["dy"],this.outputShape=[];var[,r,a]=this.outputShape=t,[,o,s]=e,i=[n&&1<o?r-1:r,n&&1<s?a-1:a],u=[n&&1<o?o-1:o,n&&1<s?s-1:s],l=i[0]/u[0],t=i[1]/u[1],e=1/l,n=1/t,i=2*Math.ceil(e)+2,u=2*Math.ceil(n)+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${l});
        const float widthScale = float(${t});

        const float invHeightScale = float(${e});
        const float invWidthScale = float(${n});

        const int winHeight = int(${i});
        const int winWidth = int(${u});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${o}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${s}) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), ${r-1}.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), ${a-1}.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}Mo={kernelName:A.zbQ,backendName:"webgl",kernelFunc:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e){const{inputs:t,backend:n,attrs:r}=e;var{images:a,dy:o}=t,e=r["alignCorners"],e=new Zs(o.shape,a.shape,e);return n.runWebGLProgram(e,[o],o.dtype)}};
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class Ys{constructor(e,t,n,r,a){this.variableNames=["A"],this.outputShape=[];var[o,s,i,e]=e;this.outputShape=[o,t,n,e];e=[r&&1<t?s-1:s,r&&1<n?i-1:i],n=[r&&1<t?t-1:t,r&&1<n?n-1:n];let u;u=a?"max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${e[0]/n[0]},
          ${e[1]/n[1]});
      const vec2 inputShapeRC = vec2(${s}.0, ${i}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${u};

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${r?"0.5":"0.0"})));
        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `}}Vo={kernelName:A.dpD,backendName:"webgl",kernelFunc:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e){const{inputs:t,backend:n,attrs:r}=e;var a=t["images"],{alignCorners:o,halfPixelCenters:s,size:i}=r,[e,i]=i,s=new Ys(a.shape,e,i,o,s);return n.runWebGLProgram(s,[a],a.dtype)}};
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class Qs{constructor(e,t,n){this.variableNames=["dy"],this.outputShape=[];var[,r,a]=this.outputShape=t,[,o,s]=e,i=[n&&1<o?r-1:r,n&&1<s?a-1:a],u=[n&&1<o?o-1:o,n&&1<s?s-1:s],l=i[0]/u[0],c=i[1]/u[1],p=1/l,d=1/c,t=2*Math.ceil(p)+2,e=2*Math.ceil(d)+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${l});
        const float widthScale = float(${c});

        const float invHeightScale = float(${p});
        const float invWidthScale = float(${d});

        const int winHeight = int(${t});
        const int winWidth = int(${e});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${o}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${s}) {
              continue;
            }

            float sourceFracRow =
              float(${i[0]}) *
                (float(dyR) / float(${u[0]}));

            float sourceFracCol =
                float(${i[1]}) *
                  (float(dyC) / float(${u[1]}));

            int sourceNearestRow = int(min(
                float(int(${r}) - 1),
                ${n} ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(${a}) - 1),
                ${n} ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}Qo={kernelName:A.Hmb,backendName:"webgl",kernelFunc:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e){const{inputs:t,backend:n,attrs:r}=e;var{images:a,dy:o}=t,e=r["alignCorners"],e=new Qs(o.shape,a.shape,e);return n.runWebGLProgram(e,[o],o.dtype)}};
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class Js{constructor(n,r){this.variableNames=["x"];var e=n.length;if(4<e)throw new Error(`WebGL backend: Reverse of rank-${e} tensor is not yet supported`);if(this.outputShape=n,1!==e){var t=n.map((e,t)=>(e=>-1!==r.indexOf(e)&&1!==n[e]?`${n[e]} - coords[${e}] - 1`:`coords[${e}]`)(t)).join(","),e=ve(e);this.userCode=`
      void main() {
        ${e} coords = getOutputCoords();
        setOutput(getX(${t}));
      }
    `}else this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(${n[0]} - coord - 1));
        }
      `}}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class ei{constructor(r,a){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;const e=r.length;if(4<e)throw new Error(`WebGL backend: Reverse of rank-${e} tensor is not yet supported`);this.outputShape=r;const t=an("rc",e);var n,o,s,i=`${t[e-1]} + 1 < ${this.outputShape[e-1]}`,u=`${t[e-2]} + 1 < ${this.outputShape[e-2]}`,l=ve(e);function c(n){const e=r.map((e,t)=>function(e,t){return-1!==a.indexOf(e)&&1!==r[e]?`${r[e]} - ${t[e]} - 1`:`${t[e]}`}(t,n));return`getChannel(getX(${e.join(",")}), vec2(${e.slice(-2).join(",")}))`}1===e?this.userCode=`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(${r[0]} - rc - 1),
            ${r[0]} - rc - 1);
          if(${i}){
              result.g = getChannel(getX(${r[0]} - (rc  + 1) - 1),
                ${r[0]} - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:this.userCode=`
        void main() {
          ${l} rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = ${c(t.slice())};
          if(${i}){
            result.g = ${s=t.slice(),s[e-1]="("+s[e-1]+" + 1)",c(s)};
          }
          if(${u}) {
            result.b = ${o=t.slice(),o[e-2]="("+o[e-2]+" + 1)",c(o)};
            if(${i}) {
              result.a = ${n=t.slice(),n[e-1]="("+n[e-1]+" + 1)",n[e-2]="("+n[e-2]+" + 1)",c(n)};
            }
          }
          setOutput(result);
        }
    `}}es={kernelName:A.mKl,backendName:"webgl",kernelFunc:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e){const{inputs:t,backend:n,attrs:r}=e;var a=t["x"],o=r["dims"],e=a.shape.length,o=A.D5U.parseAxisParam(o,a.shape);return 0===e?Dn({inputs:{x:a},backend:n}):(o=new((0,A.OBj)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?ei:Js)(a.shape,o),n.runWebGLProgram(o,[a],a.dtype))}};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class ti{constructor(e,t,n,r){this.variableNames=["Image"],this.outputShape=[];var a=e[1],o=e[2],s=Math.sin(t).toFixed(3),t=Math.cos(t).toFixed(3);this.outputShape=e;const[i,u]=A.Wap.getImageCenter(r,a,o);e=i.toFixed(3),r=u.toFixed(3);let l="";l="number"==typeof n?`float outputValue = ${n.toFixed(2)};`:`
        vec3 fill = vec3(${n.join(",")});
        float outputValue = fill[coords[3]];`,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];
          int y = coords[1];
          float coordXFloat = (float(x) - ${e}) * ${t} - (float(y) - ${r}) * ${s};
          float coordYFloat = (float(x) - ${e}) * ${s} + (float(y) - ${r}) * ${t};
          int coordX = int(round(coordXFloat + ${e}));
          int coordY = int(round(coordYFloat + ${r}));
          ${l}
          if(coordX >= 0 && coordX < ${o} && coordY >= 0 && coordY < ${a}) {
            outputValue = getImage(coords[0], coordY, coordX, coords[3]);
          }
          setOutput(outputValue);
        }
    `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
rs={kernelName:A.b9H,backendName:"webgl",kernelFunc:({inputs:e,attrs:t,backend:n})=>{var r=e["image"],{radians:a,fillValue:e,center:t}=t;const o=n;t=new ti(r.shape,a,e,t);return o.runWebGLProgram(t,[r],r.dtype)}},os=Un({opSnippet:`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`}),is={kernelName:A.e07,backendName:"webgl",kernelFunc:os},ls=Un({opSnippet:"return inversesqrt(x);",cpuKernelImpl:qt}),ps={kernelName:A.bV0,backendName:"webgl",kernelFunc:ls};
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class ni{constructor(e,t,n,r,a,o,s=0){this.variableNames=["updates","indices","defaultValue"],this.outputShape=o;var i=ve(a.length),o=ve(o.length);let u="";1===n?u="i":2===n&&(u="i, j");n=`getIndices(${u})`;let l="";1===r?l="i":2===r&&(l="i, coords[1]");r=`getUpdates(${l})`;this.userCode=`
        ${i} strides = ${i}(${a});

        void main() {
          ${o} coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < ${e}; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < ${t}; j++) {
              int index = round(${n});
              flattenedIndex += index * ${1<t?"strides[j]":"strides"};
            }
            if (flattenedIndex == coords[0]) {
              sum += ${r};
              found = true;
            }
          }
          setOutput(mix(getDefaultValue(), sum, float(found)));
        }
      `}}fs={kernelName:A.xQA,backendName:"webgl",kernelFunc:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e){const{inputs:t,backend:n,attrs:r}=e;var{indices:a,updates:o}=t,s=r["shape"],{sliceRank:i,numUpdates:u,sliceSize:l,strides:c,outputSize:p}=A.Wap.calculateShapes(o,a,s),e=[p/l,l];return 0===p?n.makeTensorInfo(s,a.dtype):(a=Zn({inputs:{x:a},backend:n,attrs:{shape:[u,i]}}),o=Zn({inputs:{x:o},backend:n,attrs:{shape:[u,l]}}),l=n.makeTensorInfo([],"float32",new Float32Array([0])),e=new ni(u,i,a.shape.length,o.shape.length,c,e),e=n.runWebGLProgram(e,[o,a,l],o.dtype),s=Zn({inputs:{x:e},backend:n,attrs:{shape:s}}),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(l),s)}};
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class ri{constructor(t,n,e){this.variableNames=["c","a","b"],this.outputShape=n;let r,a;if(4<e)throw Error(`Where for rank ${e} is not yet supported`);if(1===e)a="resRC",r="resRC";else{var o=["resRC.x","resRC.y","resRC.z","resRC.w"];const s=[],i=[];for(let e=0;e<n.length;e++)i.push(`${o[e]}`),e<t&&s.push(`${o[e]}`);r=s.join(),a=i.join()}e=ve(e);this.userCode=`
      void main() {
        ${e} resRC = getOutputCoords();
        float cVal = getC(${r});
        if (cVal >= 1.0) {
          setOutput(getA(${a}));
        } else {
          setOutput(getB(${a}));
        }
      }
    `}}var gs={kernelName:A.PhF,backendName:"webgl",kernelFunc:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e){const{inputs:t,backend:n}=e;var{condition:r,t:a,e:o}=t,e=new ri(r.shape.length,a.shape,a.shape.length);return n.runWebGLProgram(e,[r,a,o],(0,A.x8V)(a.dtype,o.dtype))}},vs=Un({opSnippet:`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = ${A.Wap.SELU_SCALEALPHA};
  float scale = ${A.Wap.SELU_SCALE};
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`}),bs={kernelName:A.oFR,backendName:"webgl",kernelFunc:vs},ks=Un({opSnippet:"return 1.0 / (1.0 + exp(-1.0 * x));"}),Ae={kernelName:A.a5O,backendName:"webgl",kernelFunc:ks},ai=Un({opSnippet:`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`}),rt={kernelName:A.i5y,backendName:"webgl",kernelFunc:ai},ut=Un({opSnippet:"if (isnan(x)) return x;\n  return sin(x);\n"}),bt={kernelName:A.RQH,backendName:"webgl",kernelFunc:ut},oi=Un({opSnippet:`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`}),pa={kernelName:A.wYB,backendName:"webgl",kernelFunc:oi},fo=Un({opSnippet:`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`}),xo={kernelName:A.MRv,backendName:"webgl",kernelFunc:fo},Co={kernelName:A.TQc,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:r}=e;var a=t["x"];const{blockShape:o,paddings:s}=r;A.D5U.assert(a.shape.length<=4,()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");var i=o.reduce((e,t)=>e*t);const u=[[0,0]];u.push(...s);for(let e=1+o.length;e<a.shape.length;++e)u.push([0,0]);const l=[];var c=js({inputs:{x:a},backend:n,attrs:{paddings:u,constantValue:0}}),p=A.Wap.getReshaped(c.shape,o,i,!1),e=A.Wap.getPermuted(p.length,o.length,!1),i=A.Wap.getReshapedPermuted(c.shape,o,i,!1),p=Zn({inputs:{x:c},backend:n,attrs:{shape:p}}),e=sr({inputs:{x:p},backend:n,attrs:{perm:e}}),i=Zn({inputs:{x:e},backend:n,attrs:{shape:i}});return l.push(c),l.push(p),l.push(e),l.forEach(e=>n.disposeIntermediateTensorInfo(e)),i}};os={kernelName:A.D2d,backendName:"webgl",kernelFunc:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e){const{inputs:t,backend:n,attrs:r}=e;var{sparseIndices:a,sparseValues:o,defaultValue:s}=t,i=r["outputShape"],{sliceRank:u,numUpdates:l,strides:c,outputSize:e}=A.Wap.calculateShapes(o,a,i),e=new ni(l,u,a.shape.length,o.shape.length,c,[e,1],!1),i=Zn({inputs:{x:o=n.runWebGLProgram(e,[o,a,s],o.dtype)},backend:n,attrs:{shape:i}});return n.disposeIntermediateTensorInfo(o),i}};var ls={kernelName:A.L8s,backendName:"webgl",kernelFunc:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e){const{inputs:t,backend:r,attrs:n}=e,a=t["x"];var{numOrSizeSplits:o,axis:e}=n;const s=A.D5U.parseAxisParam(e,a.shape)[0],i=A.Wap.prepareSplitSize(a,o,s);o=a.shape.length;const u=new Array(o).fill(0),l=a.shape.slice();return i.map(e=>{const t=[...l];t[s]=e;var n=ta({inputs:{x:a},backend:r,attrs:{begin:u,size:t}});return u[s]+=e,n})}},vs=Un({opSnippet:"return sqrt(x);"}),ks={kernelName:A.FKq,backendName:"webgl",kernelFunc:vs},ai=Un({opSnippet:"return x * x;"}),si={kernelName:A.bK0,backendName:"webgl",kernelFunc:ai},ut="return (a - b) * (a - b);",oi=Wn({opSnippet:ut,packedOpSnippet:ut}),fo={kernelName:A._tC,backendName:"webgl",kernelFunc:oi};vs={kernelName:A.h8e,backendName:"webgl",kernelFunc:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function({inputs:e,attrs:t,backend:n}){e=e.x,t=hn+`
    return x > 0.0 ? 1.0 : float(${t.alpha});
  `,t=new dn(e.shape,t);return n.runWebGLProgram(t,[e],e.dtype)}};
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class ii{constructor(e,t,r){this.variableNames=["x"];var n=(this.outputShape=r).length,a=ve(r.length),o=ve(r.length);let s="";if(1===n)s="coords * strides + begin";else{let n=0;s=r.map((e,t)=>(n++,1===r.length?`coords * strides[${t}] + begin[${t}]`:`coords[${n-1}] * strides[${t}] + begin[${t}]`)).join(",")}this.userCode=`
      ${a} begin = ${a}(${e});
      ${a} strides = ${a}(${t});

      void main() {
        ${o} coords = getOutputCoords();
        setOutput(getX(${s}));
      }
    `}}ai={kernelName:A.jQk,backendName:"webgl",kernelFunc:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e){const{inputs:t,backend:n,attrs:r}=e;var a=t["x"],{begin:o,end:s,strides:i,beginMask:u,endMask:l,ellipsisMask:c,newAxisMask:p,shrinkAxisMask:e}=r;const{nonStrided:d,$begin:h,$strides:f,size:m,newShape:g,outShape:y}=A.kuN.sliceInfo(a.shape,o,s,i,u,l,c,p,e);p=Zn({inputs:{x:a},backend:n,attrs:{shape:g}});let v;d?(e=ta({inputs:{x:p},backend:n,attrs:{begin:h,size:m}}),v=Zn({inputs:{x:e},backend:n,attrs:{shape:y}}),n.disposeIntermediateTensorInfo(e)):v=y.some(e=>0===e)?n.makeTensorInfo(y,a.dtype,[]):n.shouldExecuteOnCPU([p])?(a=n.texData.get(p.dataId).values,a=(0,A.f3b)(p.shape,p.dtype,a),a=Yt(y,a,f,h),n.makeTensorInfo(y,p.dtype,a.values)):(x=new ii(h,f,y),n.runWebGLProgram(x,[p],p.dtype));var x=Zn({inputs:{x:v},backend:n,attrs:{shape:y}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(v),x}},ut=Un({opSnippet:"return tan(x);"}),oi={kernelName:A.sEM,backendName:"webgl",kernelFunc:ut},ut=Un({opSnippet:`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`});
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class ui{constructor(t,n){this.variableNames=["A"];const r=new Array(t.length);for(let e=0;e<r.length;e++)r[e]=t[e]*n[e];this.outputShape=r,this.rank=r.length;var e=ve(this.rank),a=function(t){var e=t.length;if(5<e)throw Error(`Tile for rank ${e} is not yet supported`);if(1===e)return`imod(resRC, ${t[0]})`;const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[];for(let e=0;e<t.length;e++)r.push(`imod(${n[e]}, ${t[e]})`);return r.join()}(t);this.userCode=`
      void main() {
        ${e} resRC = getOutputCoords();
        setOutput(getA(${a}));
      }
    `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function li(e){const{inputs:t,backend:n,attrs:r}=e;var a=t["x"],o=r["reps"];if("string"===a.dtype){const s=n.readSync(a.dataId);e=s.map(e=>A.D5U.decodeString(e)),e=(0,A.f3b)(a.shape,a.dtype,e),e=Jt(e,o);return n.makeTensorInfo(e.shape,e.dtype,e.values)}o=new ui(a.shape,o);return n.runWebGLProgram(o,[a],a.dtype)}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class ci{constructor(e,t){this.variableNames=["x","segmentIds"];var n=e.windowSize,r=e.batchSize,a=e.inSize,o=e.numSegments,s=o*Math.ceil(a/n);this.outputShape=[r,s];e=4*Math.floor(n/4),r=n%4,s=`
        sumValue += dot(values, segFilter);
    `;let i="";0<a%n&&(i=`
        if (inIdx < 0 || inIdx >= ${a}) {
          return initializationValue;
        }
      `);let u=0<a%n?`
        if (inIdx < 0 || inIdx >= ${a}) {
          return -1.0;
        }
      `:"";this.userCode=`
      const float initializationValue = 0.0;

      float getValue(int batch, int inIdx) {
        ${i}
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        ${u}
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          ${o})) * float(${n}));
        int currentSeg = int(mod(float(outIdx), float(${o})));

        float sumValue = 0.0;

        for (int i = 0; i < ${e}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          ${s}
        }

        int inIdx = inOffset + ${e};
        if (${1==r}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          ${s}
        } else if (${2==r}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          ${s}
        } else if (${3==r}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          ${s}
        }
        setOutput(sumValue);
      }
    `}}for(const pi of[$s,Ss,cr,dr,fr,gr,xr,kr,Ir,Nr,Tr,Er,Dr,_r,Pr,Fr,Lr,zr,Wr,jr,Xr,qr,Yr,ra,aa,ca,ha,ga,xa,On,Sa,Ma,La,_a,Ua,Wa,Va,Ga,ja,qa,Qa,Ja,to,io,uo,ao,co,ho,mo,go,vo,bo,Io,$o,To,Do,Oo,Bo,Lo,Uo,Go,jo,Xo,Ko,Yo,Jo,ts,An,ns,Na,as,ss,us,Pn,cs,ds,hs,ys,ms,xs,ws,n,Es,We,Le,Ge,je,Ke,_e,Ye,et,ot,it,pt,r,Kn,hr,mr,yr,vr,sa,Rr,Or,Br,Mr,da,Vn,za,Ha,ua,yt,yo,So,wo,Yn,Po,Mo,Vo,Qo,es,rs,is,ps,fs,gs,bs,Ae,rt,bt,pa,na,Nt,xo,Co,os,ls,ks,si,fo,vs,ai,It,or,oi,{kernelName:A.MIZ,backendName:"webgl",kernelFunc:ut},{kernelName:A.n9L,backendName:"webgl",kernelFunc:li},{kernelName:A.cWu,backendName:"webgl",kernelFunc:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e){const{inputs:t,backend:n,attrs:r}=e;var a=t["x"],{k:o,sorted:s}=r,e=n.readSync(a.dataId),[o,s]=en(e,a.shape,a.dtype,o,s);return[n.makeTensorInfo(o.shape,o.dtype,o.values),n.makeTensorInfo(s.shape,s.dtype,s.values)]}},ir,{kernelName:A.kpP,backendName:"webgl",kernelFunc:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e){const{inputs:t,attrs:n,backend:r}=e;var a=n["axis"],o=t["x"];M(o,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");var s=r.readSync(o.dataId),{outputValues:e,outputShape:s,indices:a}=nn(s,a,o.shape,o.dtype);return[r.makeTensorInfo(s,o.dtype,e),r.makeTensorInfo([a.length],"int32",a)]}},{kernelName:A.ToN,backendName:"webgl",kernelFunc:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e){const{inputs:t,backend:n,attrs:r}=e;e=t.value;let a=r["axis"];a<0&&(a+=e.shape.length);const o=e;var s=o.shape.length,e=e.shape[a];const i=new Array(s-1);let u=0;for(let e=0;e<s;e++)e!==a&&(i[u++]=o.shape[e]);const l=[],c=new Array(s).fill(0),p=o.shape.slice();p[a]=1;const d=new Array(e);for(let e=0;e<d.length;e++){c[a]=e;var h=ta({inputs:{x:o},backend:n,attrs:{begin:c,size:p}}),f=Zn({inputs:{x:h},backend:n,attrs:{shape:i}});d[e]=f,l.push(h)}return l.forEach(e=>n.disposeIntermediateTensorInfo(e)),d}},{kernelName:A.Qvg,backendName:"webgl",kernelFunc:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e){const{inputs:t,backend:u,attrs:n}=e;var{x:r,segmentIds:a}=t,o=n["numSegments"],s=r.shape.length;const l=[];let i=0;var c=A.Wap.getAxesPermutation([i],s);let p=r;null!=c&&(p=sr({inputs:{x:r},backend:u,attrs:{perm:c}}),l.push(p),i=A.Wap.getInnerMostAxes(1,s)[0]),e=A.Wap.segment_util.computeOutShape(p.shape,i,o),s=A.D5U.sizeFromShape([p.shape[i]]),s=Zn({inputs:{x:p},backend:u,attrs:{shape:[-1,s]}}),l.push(s),r=(0,A.z4k)(r.dtype);const d=(e,t,n,r,a)=>{var o=e.shape[0],s=e.shape[1],i=A.Wap.segment_util.segOpComputeOptimalWindowSize(s,a),o={windowSize:i,inSize:s,batchSize:o,numSegments:a},o=new ci(o,t),e=u.compileAndRun(o,[e,n],r);if(l.push(e),e.shape[1]===a)return e;n=Xs({backend:u,attrs:{start:0,stop:a,step:1,dtype:"float32"}}),i=li({inputs:{x:n},backend:u,attrs:{reps:[s/i]}});return l.push(n),l.push(i),d(e,t,i,r,a)};let h=e=Zn({inputs:{x:d(s,"unsortedSegmentSum",a,r,o)},backend:u,attrs:{shape:e}});return null!=c&&(l.push(e),c=A.Wap.getUndoAxesPermutation(c),h=sr({inputs:{x:h},backend:u,attrs:{perm:c}})),l.forEach(e=>u.disposeIntermediateTensorInfo(e)),h}},Ar])(0,A.wCN)(pi)},2073:function(e,t,n){"use strict";n.d(t,{JL:function(){return r},Zu:function(){return a}});class r{constructor(e,t){this.backend=e,this.dataMover=t,this.data=new WeakMap,this.dataIdsCount=0}get(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}set(e,t){this.dataIdsCount++,this.data.set(e,t)}has(e){return this.data.has(e)}delete(e){return this.dataIdsCount--,this.data.delete(e)}numDataIds(){return this.dataIdsCount}}class a{decComplexRef(e){}time(e){return i("time")}read(e){return i("read")}readSync(e){return i("readSync")}numDataIds(){return i("numDataIds")}disposeData(e){return i("disposeData")}write(e,t,n){return i("write")}move(e,t,n,r){return i("move")}memory(){return i("memory")}floatPrecision(){return i("floatPrecision")}epsilon(){return 32===this.floatPrecision()?1e-7:1e-4}batchMatMul(e,t,n,r){return i("batchMatMul")}fusedBatchMatMul({}){return i("fusedBatchMatMul")}slice(e,t,n){return i("slice")}stridedSlice(e,t,n,r){return i("stridedSlice")}unstack(e,t){return i("unstack")}reverse(e,t){return i("reverse")}concat(e,t){return i("concat")}neg(e){return i("neg")}add(e,t){return i("add")}addN(e){return i("addN")}subtract(e,t){return i("subtract")}multiply(e,t){return i("multiply")}realDivide(e,t){return i("realDivide")}floorDiv(e,t){return i("floorDiv")}sum(e,t){return i("sum")}prod(e,t){return i("prod")}unsortedSegmentSum(e,t,n){return i("unsortedSegmentSum")}argMin(e,t){return i("argMin")}argMax(e,t){return i("argMax")}equal(e,t){return i("equal")}notEqual(e,t){return i("notEqual")}less(e,t){return i("less")}lessEqual(e,t){return i("lessEqual")}greater(e,t){return i("greater")}greaterEqual(e,t){return i("greaterEqual")}logicalNot(e){return i("logicalNot")}logicalAnd(e,t){return i("logicalAnd")}logicalOr(e,t){return i("logicalOr")}where(e){return i("where")}select(e,t,n){return i("select")}topk(e,t,n){return i("topk")}min(e,t){return i("min")}minimum(e,t){return i("minimum")}mod(e,t){return i("mod")}max(e,t){return i("max")}maximum(e,t){return i("maximum")}all(e,t){return i("all")}any(e,t){return i("any")}squaredDifference(e,t){return i("squaredDifference")}ceil(e){return i("ceil")}floor(e){return i("floor")}round(e){return i("round")}sign(e){return i("sign")}isNaN(e){return i("isNaN")}isInf(e){return i("isInf")}isFinite(e){return i("isFinite")}pow(e,t){return i("pow")}exp(e){return i("exp")}expm1(e){return i("expm1")}softmax(e,t){return i("softmax")}log(e){return i("log")}log1p(e){return i("log1p")}sqrt(e){return i("sqrt")}rsqrt(e){return i("rsqrt")}square(e){return i("square")}reciprocal(e){return i("reciprocal")}relu(e){return i("relu")}relu6(e){return i("relu6")}prelu(e,t){return i("prelu")}elu(e){return i("elu")}eluDer(e,t){return i("eluDer")}selu(e){return i("selu")}int(e){return i("int")}clip(e,t,n){return i("clip")}abs(e){return i("abs")}complexAbs(e){return i("complexAbs")}sigmoid(e){return i("sigmoid")}softplus(e){return i("softplus")}sin(e){return i("sin")}cos(e){return i("cos")}tan(e){return i("tan")}asin(e){return i("asin")}acos(e){return i("acos")}atan(e){return i("atan")}atan2(e,t){return i("atan2")}sinh(e){return i("sinh")}cosh(e){return i("cosh")}tanh(e){return i("tanh")}asinh(e){return i("asinh")}acosh(e){return i("acosh")}atanh(e){return i("atanh")}erf(e){return i("erf")}step(e,t){return i("step")}fusedConv2d({}){return i("fusedConv2d")}conv2d(e,t,n){return i("conv2d")}conv2dDerInput(e,t,n){return i("conv2dDerInput")}conv2dDerFilter(e,t,n){return i("conv2dDerFilter")}fusedDepthwiseConv2D({}){return i("fusedDepthwiseConv2D")}depthwiseConv2D(e,t,n){return i("depthwiseConv2D")}depthwiseConv2DDerInput(e,t,n){return i("depthwiseConv2DDerInput")}depthwiseConv2DDerFilter(e,t,n){return i("depthwiseConv2DDerFilter")}conv3d(e,t,n){return i("conv3d")}conv3dDerInput(e,t,n){return i("conv3dDerInput")}conv3dDerFilter(e,t,n){return i("conv3dDerFilter")}maxPool(e,t){return i("maxPool")}maxPoolBackprop(e,t,n,r){return i("maxPoolBackprop")}avgPool(e,t){return i("avgPool")}avgPoolBackprop(e,t,n){return i("avgPoolBackprop")}avgPool3d(e,t){return i("avgPool3d")}avgPool3dBackprop(e,t,n){return i("avgPool3dBackprop")}maxPool3d(e,t){return i("maxPool3d")}maxPool3dBackprop(e,t,n,r){return i("maxPool3dBackprop")}reshape(e,t){return i("reshape")}cast(e,t){return i("cast")}tile(e,t){return i("tile")}pad(e,t,n){return i("pad")}transpose(e,t){return i("transpose")}gather(e,t,n,r=0){return i("gather")}gatherND(e,t){return i("gatherND")}scatterND(e,t,n){return i("scatterND")}batchToSpaceND(e,t,n){return i("batchToSpaceND")}spaceToBatchND(e,t,n){return i("spaceToBatchND")}resizeBilinear(e,t,n,r,a){return i("resizeBilinear")}resizeBilinearBackprop(e,t,n){return i("resizeBilinearBackprop")}resizeNearestNeighbor(e,t,n,r,a){return i("resizeNearestNeighbor")}resizeNearestNeighborBackprop(e,t,n){return i("resizeNearestNeighborBackprop")}batchNorm(e,t,n,r,a,o){return i("batchNorm")}localResponseNormalization4D(e,t,n,r,a){return i("localResponseNormalization4D")}LRNGrad(e,t,n,r,a,o,s){return i("LRNGrad")}multinomial(e,t,n,r){return i("multinomial")}oneHot(e,t,n,r){return i("oneHot")}cumsum(e,t,n,r){return i("cumsum")}nonMaxSuppression(e,t,n,r,a){return i("nonMaxSuppression")}fft(e){return i("fft")}ifft(e){return i("ifft")}complex(e,t){return i("complex")}real(e){return i("real")}imag(e){return i("imag")}cropAndResize(e,t,n,r,a,o){return i("cropAndResize")}depthToSpace(e,t,n){return i("depthToSpace")}split(e,t,n){return i("split")}sparseToDense(e,t,n,r){return i("sparseToDense")}diag(e){return i("diag")}fill(e,t,n){return i("fill")}onesLike(e){return i("onesLike")}zerosLike(e){return i("zerosLike")}linspace(e,t,n){return i("linspace")}dispose(){return i("dispose")}}function i(e){throw new Error(`'${e}' not yet implemented or not found in the registry. `+"This kernel may not be supported by the tfjs backend you have chosen")}},3337:function(e,t,n){"use strict";
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function b(e,t,n){n=function(e,t,n){let r=0,a=e.length,o=0,s=!1;for(;r<a;){o=r+(a-r>>>1);var i=n(t,e[o]);0<i?r=o+1:(a=o,s=!i)}return s?r:-r-1}(e,t,n||r);e.splice(n<0?-(n+1):n,0,t)}function r(e,t){return t<e?1:e<t?-1:0}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function a(e,t,n,r,a){return i(e,t,n,r,a,0)}function o(e,t,n,r,a,o){return i(e,t,n,r,a,0,!1,o,!0)}function s(e,t,n,r,a,o){return i(e,t,n,r,a,o,!0)}function i(n,t,e,r,a,o,s=!1,i=!1,u=!1){const l=[];for(let e=0;e<t.length;e++)t[e]>a&&l.push({score:t[e],boxIndex:e,suppressBeginIndex:0});l.sort(w);var c=0<o?-.5/o:0;const p=[],d=[];for(;p.length<e&&0<l.length;){const x=l.pop();var{score:h,boxIndex:f,suppressBeginIndex:m}=x;if(h<a)break;let t=!1;for(let e=p.length-1;e>=m;--e){var g=function(e,t,n){var r=e.subarray(4*t,4*t+4),a=e.subarray(4*n,4*n+4),o=Math.min(r[0],r[2]),s=Math.min(r[1],r[3]),i=Math.max(r[0],r[2]),u=Math.max(r[1],r[3]),l=Math.min(a[0],a[2]),t=Math.min(a[1],a[3]),e=Math.max(a[0],a[2]),n=Math.max(a[1],a[3]),r=(i-o)*(u-s),a=(e-l)*(n-t);if(r<=0||a<=0)return 0;l=Math.max(o,l),t=Math.max(s,t),e=Math.min(i,e),n=Math.min(u,n),t=Math.max(e-l,0)*Math.max(n-t,0);return t/(r+a-t)}(n,f,p[e]);if(r<=g){t=!0;break}if(x.score=x.score*function(e,t,n){t=Math.exp(t*n*n);return n<=e?t:0}(r,c,g),x.score<=a)break}x.suppressBeginIndex=p.length,t||(x.score===h?(p.push(f),d.push(x.score)):x.score>a&&b(l,x,w))}var y=p.length,o=e-y;i&&0<o&&(p.push(...new Array(o).fill(0)),d.push(...new Array(o).fill(0)));const v={selectedIndices:p};return s&&(v.selectedScores=d),u&&(v.validOutputs=y),v}function w(e,t){return e.score-t.score||e.score===t.score&&t.boxIndex-e.boxIndex}n.d(t,{GP:function(){return a},qP:function(){return o},pA:function(){return s}})},8333:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});var u=n(2657);
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function r(t,n){const r=[];for(let e=0;e<n.length;e++)n[e]&&r.push(e);const a=(0,u.f)(t,"int32"),o=(0,u.f)([r.length,t.length],"int32");for(let e=0;e<r.length;e++){var s=a.indexToLoc(r[e]),i=e*t.length;o.values.set(s,i)}return o.toTensor()}},7097:function(e,t,n){"use strict";n.d(t,{BV:function(){return g},wv:function(){return m}});var o=n(2073),s=n(2885),r=n(5938),a=n(9121),y=n(6151),h=n(569);
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class i{constructor(e,t){this.backendTimer=e,null==(this.logger=t)&&(this.logger=new u)}profileKernel(t,e,n){let r;const a=this.backendTimer.time(()=>{r=n()});if((0,s.OB)().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let e=0;e<r.length;e++){const o=r[e];o.data().then(e=>{!function(t,e,n){if("float32"!==e)return;for(let e=0;e<t.length;e++){var r=t[e];if(isNaN(r)||!isFinite(r))return console.warn(`Found ${r} in the result of '${n}'`)}}(e,o.dtype,t)})}return{kernelName:t,outputs:r,inputs:e,timeMs:a.then(e=>e.kernelMs),extraInfo:a.then(e=>null!=e.getExtraProfileInfo?e.getExtraProfileInfo():"")}}logKernelProfile(e){const{kernelName:n,outputs:t,timeMs:r,inputs:a,extraInfo:o}=e;t.forEach(t=>{Promise.all([t.data(),r,o]).then(e=>{this.logger.logKernelProfile(n,t,e[0],e[1],a,e[2])})})}}class u{logKernelProfile(e,t,n,r,a,o){var s="number"==typeof r?h.oj(`${r}ms`,9):r.error,i=h.oj(e,25),u=t.rank,r=t.size,e=h.oj(t.shape.toString(),14);let l="";for(const d in a){var c,p=a[d];null!=p&&(p=(c=p.shape||t.shape).length,l+=`${d}: ${p}D ${0<p?c:""} `)}console.log(`%c${i}\t%c${s}\t%c${u}D ${e}\t%c${r}\t%c${l}\t%c${o}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}var l=n(4077),c=n(747),p=n(9155);
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class d{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(e=>e.name)))}}}dispose(){for(const e in this.registeredVariables)this.registeredVariables[e].dispose()}}class f{constructor(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new d}async ready(){if(null!=this.pendingBackendInit)return this.pendingBackendInit.then(()=>{});if(null==this.backendInstance){var t=this.getSortedBackends();for(let e=0;e<t.length;e++){var n=t[e];if(await this.initializeBackend(n).success)return void await this.setBackend(n)}throw new Error("Could not initialize any backends, all backend initializations failed.")}}get backend(){if(null!=this.pendingBackendInit)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make `+"sure to await tf.ready() or await tf.setBackend() before calling other methods");if(null==this.backendInstance){var{name:e,asyncInit:t}=this.initializeBackendsAndReturnBest();if(t)throw new Error(`The highest priority backend '${e}' has not yet been `+"initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");this.setBackend(e)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(e){if(!(e in this.registry)){if(!(e in this.registryFactory))return null;var t=this.initializeBackend(e)["asyncInit"];if(t)return null}return this.registry[e]}findBackendFactory(e){return e in this.registryFactory?this.registryFactory[e].factory:null}registerBackend(e,t,n=1){return e in this.registryFactory?(console.warn(`${e} backend was already registered. `+"Reusing existing backend factory."),!1):(this.registryFactory[e]={factory:t,priority:n},!0)}async setBackend(e){if(null==this.registryFactory[e])throw new Error(`Backend name '${e}' not found in registry`);if(this.backendName=e,null==this.registry[e]){this.backendInstance=null;var{success:t,asyncInit:n}=this.initializeBackend(e);if(!(n?await t:t))return!1}return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new i(this.backendInstance),!0}setupRegisteredKernels(){const e=(0,y.tr)(this.backendName);e.forEach(e=>{null!=e.setupFunc&&e.setupFunc(this.backendInstance)})}disposeRegisteredKernels(t){const e=(0,y.tr)(t);e.forEach(e=>{null!=e.disposeFunc&&e.disposeFunc(this.registry[t])})}initializeBackend(t){const e=this.registryFactory[t];if(null==e)throw new Error(`Cannot initialize backend ${t}, no registration found.`);try{const r=e.factory();if(!r||r instanceof o.Zu||"function"!=typeof r.then)return this.registry[t]=r,{success:!0,asyncInit:!1};{const a=++this.pendingBackendInitId;var n=r.then(e=>!(a<this.pendingBackendInitId)&&(this.registry[t]=e,!(this.pendingBackendInit=null))).catch(e=>(a<this.pendingBackendInitId||(this.pendingBackendInit=null,console.warn(`Initialization of backend ${t} failed`),console.warn(e.stack||e.message)),!1));return{success:this.pendingBackendInit=n,asyncInit:!0}}}catch(e){return console.warn(`Initialization of backend ${t} failed`),console.warn(e.stack||e.message),{success:!1,asyncInit:!1}}}removeBackend(e){if(!(e in this.registryFactory))throw new Error(`${e} backend not found in registry`);this.backendName===e&&null!=this.pendingBackendInit&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(0===Object.keys(this.registryFactory).length)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((e,t)=>this.registryFactory[t].priority-this.registryFactory[e].priority)}initializeBackendsAndReturnBest(){var t=this.getSortedBackends();for(let e=0;e<t.length;e++){var n=t[e],{success:r,asyncInit:a}=this.initializeBackend(n);if(a||r)return{name:n,asyncInit:a}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(e,t){const n=this.state.tensorInfo.get(t),r=n.backend;var a=this.readSync(t);r.disposeData(t),(n.backend=e).move(t,a,n.shape,n.dtype),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(e,t){let n=null;if(null==t){if("function"!=typeof e)throw new Error("Please provide a function to tidy()");t=e}else{if("string"!=typeof e&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!=typeof t)throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");n=e}let r;return this.scopedRun(()=>this.startScope(n),()=>this.endScope(r),()=>(r=t(),r instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),r))}scopedRun(e,t,n){e();try{var r=n();return t(),r}catch(e){throw t(),e}}nextTensorId(){return f.nextTensorId++}nextVariableId(){return f.nextVariableId++}clone(e){var t=this.makeTensorFromDataId(e.dataId,e.shape,e.dtype);return this.addTapeNode(this.state.activeScope.name,{x:e},[t],n=>({x:()=>{var e={x:n},t={dtype:"float32"};return g.runKernelFunc(e=>e.cast(n,"float32"),e,null,a.RF,t)}}),[],{}),t}runKernel(e,t,n,r,a){return this.runKernelFunc(null,t,null,e,n,r,a)}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(e,t,n){var r=this.backend.numDataIds();let a=0;n.forEach(e=>{a+="complex64"===e.dtype?3:1});n=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],n=r-t-a-n;if(0<n)throw new Error(`Backend '${this.backendName}' has an internal memory leak `+`(${n} data ids) after running '${e}'`)}runKernelFunc(n,r,e,a,o,s,i){let t,u=[];const l=this.isTapeOn();null==a&&(a=null!=this.state.activeScope?this.state.activeScope.name:"");var c=this.state.numBytes,p=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);let d;null==this.backendName&&this.backend;const h=(0,y.pI)(a,this.backendName);let f;if(null!=h)d=()=>{var t=this.backend.numDataIds();f=h.kernelFunc({inputs:r,attrs:o,backend:this.backend});const e=Array.isArray(f)?f:[f];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(a,t,e);const n=e.map(e=>{if(null!=e.rank)return e;var{dataId:t,shape:n,dtype:e}=e;return this.makeTensorFromDataId(t,n,e)});if(l){let e=this.getTensorsForGradient(a,r,n);null==e&&(null==i&&(i=[]),t=n.filter((e,t)=>i[t]),e=(s||[]).slice().concat(t)),u=this.saveTensorsForBackwardMode(e)}return n};else{if(null==n)throw new Error(`Error running ${a}: Neither modular kernel nor forward func passed`);const g=e=>{l&&(u=e.map(e=>this.keep(this.clone(e))))};d=()=>{var e=this.backend.numDataIds();f=this.tidy(()=>n(this.backend,g));var t=Array.isArray(f)?f:[f];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(a,e,t),t}}let m;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{t=this.ENV.getBool("DEBUG")||this.state.profiling?(m=this.profiler.profileKernel(a,r,()=>d()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(m),m.outputs):d()}),l&&this.addTapeNode(a,r,t,e,u,o),this.state.profiling&&this.state.activeProfile.kernels.push({name:a,bytesAdded:this.state.numBytes-c,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-p,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(r).map(e=>null!=r[e]?r[e].shape:null),outputShapes:t.map(e=>e.shape),kernelTimeMs:m.timeMs,extraInfo:m.extraInfo}),Array.isArray(f)?t:t[0]}saveTensorsForBackwardMode(e){return e.map(e=>this.keep(this.clone(e)))}getTensorsForGradient(t,n,r){t=(0,y.uk)(t);if(null==t)return null;{const a=t.inputsToSave||[],o=t.outputsToSave||[];let e;e=t.saveAllInputs?(h.hu(Array.isArray(n),()=>"saveAllInputs is true, expected inputs to be an array."),Object.keys(n).map(e=>n[e])):a.map(e=>n[e]);r=r.filter((e,t)=>o[t]);return e.concat(r)}}makeTensor(e,t,n,r){if(null==e)throw new Error("Values passed to engine.makeTensor() are null");r=r||this.backend;let a=e;"string"===(n=n||"float32")&&h.HD(e[0])&&(a=e.map(e=>p.encodeString(e)));e=r.write(a,t,n),t=new l.es(t,n,e,this.nextTensorId());if(this.incRef(t,r),"string"===n){const o=this.state.tensorInfo.get(e);e=(0,h.Ub)(a);this.state.numBytes+=e-o.bytes,o.bytes=e}return t}makeTensorFromDataId(e,t,n,r){e=new l.es(t,n=n||"float32",e,this.nextTensorId());return this.incRef(e,r),e}makeVariable(e,t=!0,n,r){n=n||this.nextVariableId().toString(),null!=r&&r!==e.dtype&&(e=e.cast(r));n=new l._w(e,t,n,this.nextTensorId());if(null!=this.state.registeredVariables[n.name])throw new Error(`Variable with name ${n.name} was already registered`);return this.state.registeredVariables[n.name]=n,this.incRef(n,this.backend),n}incRef(t,n){var e=this.state.tensorInfo.has(t.dataId)?this.state.tensorInfo.get(t.dataId).refCount:0;if(this.state.numTensors++,"string"===t.dtype&&this.state.numStringTensors++,0===e){this.state.numDataBuffers++;let e=0;"complex64"!==t.dtype&&"string"!==t.dtype&&(e=t.size*h.bT(t.dtype)),this.state.tensorInfo.set(t.dataId,{backend:n||this.backend,dtype:t.dtype,shape:t.shape,bytes:e,refCount:0}),this.state.numBytes+=e}this.state.tensorInfo.get(t.dataId).refCount++,t instanceof l._w||this.track(t)}disposeTensor(e){if(this.state.tensorInfo.has(e.dataId)){this.state.numTensors--,"string"===e.dtype&&this.state.numStringTensors--;const t=this.state.tensorInfo.get(e.dataId);t.refCount<=1?("complex64"!==e.dtype&&(this.state.numBytes-=t.bytes),this.state.numDataBuffers--,t.backend.disposeData(e.dataId),this.state.tensorInfo.delete(e.dataId)):(t.backend.decComplexRef(e.dataId),this.state.tensorInfo.get(e.dataId).refCount--)}}disposeVariables(){for(const t in this.state.registeredVariables){var e=this.state.registeredVariables[t];this.disposeVariable(e)}}disposeVariable(e){this.disposeTensor(e),null!=this.state.registeredVariables[e.name]&&delete this.state.registeredVariables[e.name]}memory(){const e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,0<this.state.numStringTensors&&(e.unreliable=!0,null==e.reasons&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}async profile(e){this.state.profiling=!0;var t=this.state.numBytes,n=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(e=>e.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-t,this.state.activeProfile.newTensors=this.state.numTensors-n;for(const r of this.state.activeProfile.kernels)r.kernelTimeMs=await r.kernelTimeMs,r.extraInfo=await r.extraInfo;return this.state.activeProfile}isTapeOn(){return 0<this.state.gradientDepth&&0===this.state.kernelDepth}addTapeNode(e,t,n,r,a,o){const s={id:this.state.nextTapeNodeId++,kernelName:e,inputs:t,outputs:n,saved:a};e=(0,y.uk)(e);null!=(r=null!=e?e.gradFunc:r)&&(s.gradient=e=>(e=e.map((e,t)=>{if(null!=e)return e;e=n[t],t=h.wT(e.size,e.dtype);return this.makeTensor(t,e.shape,e.dtype)}),r(1<e.length?e:e[0],a,o))),this.state.activeTape.push(s)}keep(e){return e.kept=!0,e}startTape(){0===this.state.gradientDepth&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(e){const t={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(t.name=e),this.state.scopeStack.push(t),this.state.activeScope=t}endScope(e){const t=(0,c.Vu)(e),n=new Set(t.map(e=>e.id));for(let e=0;e<this.state.activeScope.track.length;e++){const a=this.state.activeScope.track[e];a.kept||n.has(a.id)||a.dispose()}const r=this.state.scopeStack.pop();this.state.activeScope=0===this.state.scopeStack.length?null:this.state.scopeStack[this.state.scopeStack.length-1],t.forEach(e=>{e.kept||e.scopeId!==r.id||this.track(e)})}gradients(e,r,a,t=!1){if(h.hu(0<r.length,()=>"gradients() received an empty list of xs."),null!=a&&"float32"!==a.dtype)throw new Error(`dy must have 'float32' dtype, but has '${a.dtype}'`);const o=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",e));h.hu(o instanceof l.es,()=>"The result y returned by f() must be a tensor.");const s=
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(t,n,e){const r={},a={};for(let e=0;e<n.length;e++)r[n[e].id]=!0;for(let e=0;e<t.length;e++){const f=t[e];var o=f.inputs;for(const m in o){var s=o[m];let t=!1;for(let e=0;e<n.length;e++)if(r[s.id]){f.outputs.forEach(e=>r[e.id]=!0),t=!0,a[f.id]=!0;break}if(t)break}}const i={};i[e.id]=!0;const u={};for(let e=t.length-1;0<=e;e--){var l=t[e],c=l.inputs;for(let e=0;e<l.outputs.length;e++)if(i[l.outputs[e].id]){for(const g in c)i[c[g].id]=!0,u[l.id]=!0;break}}const p=[];for(let e=0;e<t.length;e++){var d=t[e];if(a[d.id]&&u[d.id]){const y={};for(const x in d.inputs){var h=d.inputs[x];r[h.id]&&(y[x]=h)}const v=Object.assign({},d);v.inputs=y,v.outputs=d.outputs,p.push(v)}}return p}(this.state.activeTape,r,o);if(!t&&0===s.length&&0<r.length)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{const t={};var e;t[o.id]=null==a?(n=o.shape,e=(0,h.p8)((0,h.NA)(n),"float32"),g.makeTensor(e,n,"float32")):a,function(t,n,r,a){for(let e=n.length-1;0<=e;e--){const i=n[e],u=[];if(i.outputs.forEach(e=>{e=t[e.id];null!=e?u.push(e):u.push(null)}),null==i.gradient)throw new Error("Cannot compute gradient: gradient function not found "+`for ${i.kernelName}.`);const l=i.gradient(u);for(const c in i.inputs){if(!(c in l))throw new Error(`Cannot backprop through input ${c}. `+`Available gradients found: ${Object.keys(l)}.`);var o=r(()=>l[c]());if("float32"!==o.dtype)throw new Error(`Error in gradient for op ${i.kernelName}. The gradient of input `+`${c} must have 'float32' dtype, but has '${o.dtype}'`);var s=i.inputs[c];if(!h.cO(o.shape,s.shape))throw new Error(`Error in gradient for op ${i.kernelName}. The gradient of input `+`'${c}' has shape '${o.shape}', which does not match `+`the shape of the input '${s.shape}'`);if(null==t[s.id])t[s.id]=o;else{const p=t[s.id];t[s.id]=a(p,o),p.dispose()}}}}(t,s,e=>this.tidy(e),v);var n=r.map(e=>t[e.id]);return 0===this.state.gradientDepth&&(this.state.activeTape.forEach(e=>{for(const t of e.saved)t.dispose()}),this.state.activeTape=null),{value:o,grads:n}})}customGrad(r){return h.hu(h.mf(r),()=>"The f passed in customGrad(f) must be a function."),(...a)=>{h.hu(a.every(e=>e instanceof l.es),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");let o;const n={};return a.forEach((e,t)=>{n[t]=e}),this.runKernelFunc((e,t)=>(o=r(...a,t),h.hu(o.value instanceof l.es,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),h.hu(h.mf(o.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),o.value),n,(e,t)=>{t=o.gradFunc(e,t);const n=Array.isArray(t)?t:[t];h.hu(n.length===a.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),h.hu(n.every(e=>e instanceof l.es),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");const r={};return n.forEach((e,t)=>{r[t]=()=>e}),r})}}readSync(e){const t=this.state.tensorInfo.get(e);return t.backend.readSync(e)}read(e){const t=this.state.tensorInfo.get(e);return t.backend.read(e)}async time(e){var t=(0,p.now)();const n=await this.backend.time(e);return n.wallMs=(0,p.now)()-t,n}track(e){return null!=this.state.activeScope&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new d;for(const e in this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}function m(){const e=(0,r.D)();var t;return null==e._tfengine&&(t=new s.qA(e),e._tfengine=new f(t)),(0,s.iG)(e._tfengine.ENV),(0,l.Vi)(()=>e._tfengine),e._tfengine}f.nextTensorId=0,f.nextVariableId=0;const g=m();function v(e,t){t={a:e,b:t};return g.runKernel(a.mm,t)}},2885:function(e,t,n){"use strict";n.d(t,{qA:function(){return a},OB:function(){return o},iG:function(){return i}});var r=n(569);
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class a{constructor(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.populateURLFlags()}setPlatform(e,t){null!=this.platform&&console.warn(`Platform ${this.platformName} has already been set. `+`Overwriting the platform with ${t}.`),this.platformName=e,this.platform=t}registerFlag(e,t,n){this.flagRegistry[e]={evaluationFn:t,setHook:n},null!=this.urlFlags[e]&&(n=this.urlFlags[e],console.warn(`Setting feature override from URL ${e}: ${n}.`),this.set(e,n))}async getAsync(e){return e in this.flags||(this.flags[e]=await this.evaluateFlag(e)),this.flags[e]}get(e){if(e in this.flags)return this.flags[e];var t=this.evaluateFlag(e);if((0,r.tI)(t))throw new Error(`Flag ${e} cannot be synchronously evaluated. `+"Please use getAsync() instead.");return this.flags[e]=t,this.flags[e]}getNumber(e){return this.get(e)}getBool(e){return this.get(e)}getFlags(){return this.flags}get features(){return this.flags}set(e,t){if(null==this.flagRegistry[e])throw new Error(`Cannot set flag ${e} as it has not been registered.`);this.flags[e]=t,null!=this.flagRegistry[e].setHook&&this.flagRegistry[e].setHook(t)}evaluateFlag(e){if(null==this.flagRegistry[e])throw new Error(`Cannot evaluate flag '${e}': no evaluation function found.`);return this.flagRegistry[e].evaluationFn()}setFlags(e){this.flags=Object.assign({},e)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(void 0!==this.global&&void 0!==this.global.location&&void 0!==this.global.location.search){const e=function(e){const o={};return e.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(e,...t)=>{var n,r,a;return n=o,r=t[0],a=t[1],n[decodeURIComponent(r)]=decodeURIComponent(a||""),t.join("=")}),o}(this.global.location.search);if("tfjsflags"in e){const t=e.tfjsflags.split(",");t.forEach(e=>{var[t,e]=e.split(":");this.urlFlags[t]=function(e,t){{if("true"===(t=t.toLowerCase())||"false"===t)return"true"===t;if(`${+t}`===t)return+t}throw new Error(`Could not parse value flag value ${t} for flag ${e}.`)}(t,e)})}}}}function o(){return s}let s=null;function i(e){s=e}},5938:function(e,t,n){"use strict";n.d(t,{D:function(){return o},R:function(){return s}});var r=n(4155);
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let a;function o(){if(null==a){let e;if("undefined"!=typeof window)e=window;else if(void 0!==n.g)e=n.g;else if(void 0!==r)e=r;else{if("undefined"==typeof self)throw new Error("Could not find a global object");e=self}a=e}return a}function s(e,t){const n=function(){const e=o();return null==e._tfGlobals&&(e._tfGlobals=new Map),e._tfGlobals}();if(n.has(e))return n.get(e);t=t();return n.set(e,t),n.get(e)}},4368:function(e,t,n){"use strict";n.d(t,{MX:function(){return s},SR:function(){return i},lu:function(){return u},B9:function(){return l},Cn:function(){return c},CQ:function(){return p},N_:function(){return d},jq:function(){return h}});var r=n(7097),a=n(2885),t=n(4077),o=n(747);function s(e){(0,a.OB)().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(e+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function i(){return r.BV}function u(e,t){return r.BV.tidy(e,t)}function l(e){const t=(0,o.Vu)(e);t.forEach(e=>e.dispose())}function c(e){return r.BV.keep(e)}function p(e){return r.BV.setBackend(e)}function d(){return r.BV.backendName}function h(e,t,n=1){return r.BV.registerBackend(e,t,n)}(0,t.FZ)(s)},633:function(e,t,n){"use strict";n.d(t,{cb:function(){return a}});var r=n(7097);
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function a(e){return r.BV.customGrad(e)}},1934:function(e,t,n){"use strict";n.d(t,{SYM:function(){return Ae.SY},VGw:function(){return Ae.VG},SpW:function(){return Ae.Sp},mm_:function(){return Ae.mm},Xze:function(){return Ae.Xz},oT6:function(){return Ae.oT},IKK:function(){return Ae.IK},sJF:function(){return Ae.sJ},aJk:function(){return Ae.aJ},M2y:function(){return Ae.M2},qw7:function(){return Ae.qw},jMg:function(){return Ae.jM},QCc:function(){return Ae.QC},Oyi:function(){return Ae.Oy},JhU:function(){return Ae.Jh},_k9:function(){return Ae._k},IMb:function(){return Ae.IM},ROF:function(){return Ae.RO},XLW:function(){return Ae.XL},zws:function(){return Ae.zw},zvY:function(){return Ae.zv},RFZ:function(){return Ae.RF},gJX:function(){return Ae.gJ},xnO:function(){return Ae.xn},Zz9:function(){return Ae.Zz},yj2:function(){return Ae.yj},Eh3:function(){return Ae.Eh},mhS:function(){return Ae.mh},wUP:function(){return Ae.wU},wm:function(){return Ae.wm},x12:function(){return Ae.x1},o2y:function(){return Ae.o2},ik2:function(){return Ae.ik},mc4:function(){return Ae.mc},TR1:function(){return Ae.TR},VcC:function(){return Ae.Vc},iHb:function(){return Ae.iH},JLz:function(){return Qt.JL},QRR:function(){return Ae.QR},T0n:function(){return Ae.T0},cie:function(){return Ae.ci},sL$:function(){return Ae.sL},y7R:function(){return Ae.y7},$w:function(){return Ae.$w},p4S:function(){return Ae.p4},SX0:function(){return Ae.SX},HEU:function(){return Ae.HE},hdR:function(){return Ae.hd},Omj:function(){return Ae.Om},NEP:function(){return Ae.NE},YFo:function(){return Ae.YF},Y0y:function(){return Ae.Y0},vwp:function(){return Ae.vw},deh:function(){return Ae.de},Uyb:function(){return Ae.Uy},OR:function(){return Ae.OR},jeX:function(){return Ae.je},eBW:function(){return Ae.eB},sHE:function(){return Ae.sH},_V0:function(){return Ae._V},luS:function(){return Ae.lu},q1x:function(){return Ae.q1},qi_:function(){return Ae.qi},iZT:function(){return Ae.iZ},Acj:function(){return Ae.Ac},Qg5:function(){return Ae.Qg},iJz:function(){return Ae.iJ},J_u:function(){return Ae.J_},avt:function(){return Ae.av},iWB:function(){return Ae.iW},r7n:function(){return Ae.r7},Zuw:function(){return Qt.Zu},eZ0:function(){return Ae.eZ},Hhh:function(){return Ae.Hh},J$2:function(){return Ae.J$},vtC:function(){return Ae.vt},CAk:function(){return Ae.CA},e7N:function(){return Ae.e7},ZbH:function(){return Ae.Zb},kU:function(){return Ae.kU},PYm:function(){return Ae.PY},VfG:function(){return Ae.Vf},MZg:function(){return Ae.MZ},YoZ:function(){return Ae.Yo},mTV:function(){return Ae.mT},OAf:function(){return Ae.OA},OU7:function(){return Ae.OU},OV7:function(){return Ae.OV},vFR:function(){return Ae.vF},BMI:function(){return Ae.BM},q2K:function(){return Ae.q2},c17:function(){return Ae.c1},q8u:function(){return Ae.q8},jQs:function(){return Ae.jQ},Vbg:function(){return Ae.Vb},NZg:function(){return Ae.NZ},wYn:function(){return Ae.wY},kuV:function(){return Ae.ku},uv1:function(){return Ae.uv},cye:function(){return Ae.cy},W0H:function(){return Ae.W0},yQU:function(){return Ae.yQ},we_:function(){return Ae.we},qWM:function(){return Ae.qW},QiL:function(){return Ae.Qi},lyA:function(){return Ae.ly},pe_:function(){return Ae.pe},o0g:function(){return Ae.o0},DlI:function(){return Ae.Dl},e6w:function(){return Ae.e6},xJR:function(){return Ae.xJ},oHH:function(){return Ae.oH},$HU:function(){return Ae.$H},qkr:function(){return Ae.qk},SbG:function(){return Ae.Sb},HZH:function(){return Ae.HZ},_Yw:function(){return Ae._Y},zbQ:function(){return Ae.zb},dpD:function(){return Ae.dp},Hmb:function(){return Ae.Hm},mKl:function(){return Ae.mK},b9H:function(){return Ae.b9},e07:function(){return Ae.e0},bV0:function(){return Ae.bV},xQA:function(){return Ae.xQ},PhF:function(){return Ae.Ph},oFR:function(){return Ae.oF},a5O:function(){return Ae.a5},i5y:function(){return Ae.i5},RQH:function(){return Ae.RQ},wYB:function(){return Ae.w3},p2w:function(){return Ae.p2},Gcp:function(){return Ae.Gc},MRv:function(){return Ae.MR},TQc:function(){return Ae.TQ},D2d:function(){return Ae.D2},L8s:function(){return Ae.L8},FKq:function(){return Ae.FK},bK0:function(){return Ae.bK},_tC:function(){return Ae._t},h8e:function(){return Ae.h8},jQk:function(){return Ae.m2},Tr8:function(){return Ae.Tr},GBy:function(){return Ae.GB},sEM:function(){return Ae.sE},MIZ:function(){return Ae.MI},esB:function(){return he.es},YDk:function(){return he.YD},n9L:function(){return Ae.n9},cWu:function(){return Ae.cW},G3Y:function(){return Ae.G3},kpP:function(){return Ae.kp},ToN:function(){return Ae.To},Qvg:function(){return Ae.Qv},RuY:function(){return Ae.Ru},usg:function(){return Ae.us},IHx:function(){return at.IHx},Wap:function(){return u},Xhn:function(){return o},f3b:function(){return at.f3b},d9v:function(){return at.d9v},zoF:function(){return at.zoF},Izb:function(){return at.Izb},C2$:function(){return r},hiC:function(){return at.hiC},SRH:function(){return ot.SR},OBj:function(){return d.OB},N_N:function(){return ot.N_},BHj:function(){return at.BHj},io:function(){return a},CnY:function(){return ot.Cn},GDt:function(){return l},dC7:function(){return at.dC7},jqO:function(){return ot.jq},wCN:function(){return _e.wC},XLQ:function(){return at.XLQ},iD$:function(){return at.iD$},CQI:function(){return ot.CQ},XD2:function(){return at.XD2},tPi:function(){return at.tPi},kuN:function(){return s},knu:function(){return at.knu},luU:function(){return at.luU},z4k:function(){return rt.z4},XeE:function(){return at.XeE},RRF:function(){return at.RRF},odF:function(){return at.odF},lub:function(){return ot.lu},HHK:function(){return at.HHK},x8V:function(){return rt.x8},D5U:function(){return nt},lls:function(){return at.lls}});var r={};n.r(r),n.d(r,{isBrowser:function(){return p},isMobile:function(){return c}});var a={};n.r(a),n.d(a,{browserFiles:function(){return ve},browserHTTPRequest:function(){return Se},concatenateArrayBuffers:function(){return w},copyModel:function(){return oe},decodeWeights:function(){return v},encodeWeights:function(){return y},fromMemory:function(){return Re},getLoadHandlers:function(){return _},getModelArtifactsInfoForJSON:function(){return I},getSaveHandlers:function(){return A},http:function(){return Ce},isHTTPScheme:function(){return Ne},listModels:function(){return re},loadWeights:function(){return we},moveModel:function(){return se},registerLoadRouter:function(){return D},registerSaveRouter:function(){return R},removeModel:function(){return ae},weightsLoaderFactory:function(){return ke},withSaveHandler:function(){return De}});var o={};n.r(o),n.d(o,{fromPixels:function(){return Le},toPixels:function(){return Me}});var s={};n.r(s),n.d(s,{assertParamsValid:function(){return Ve},computeFlatOffset:function(){return Je},computeOutShape:function(){return We},getNormalizedAxes:function(){return je},isSliceContinous:function(){return Qe},maskToAxes:function(){return Ue},parseSliceParams:function(){return et},sliceInfo:function(){return tt},startForAxis:function(){return Ze},startIndicesWithElidedDims:function(){return Xe},stopForAxis:function(){return Ye},stopIndicesWithElidedDims:function(){return qe},stridesForAxis:function(){return Ke},stridesWithElidedDims:function(){return ze}});var i={};n.r(i),n.d(i,{collectGatherOpShapeInfo:function(){return Ht},computeOutShape:function(){return Gt},segOpComputeOptimalWindowSize:function(){return zt}});var u={};n.r(u),n.d(u,{ERF_A1:function(){return St},ERF_A2:function(){return Tt},ERF_A3:function(){return Et},ERF_A4:function(){return Rt},ERF_A5:function(){return Dt},ERF_P:function(){return Ct},PARALLELIZE_THRESHOLD:function(){return ft},SELU_SCALE:function(){return $t},SELU_SCALEALPHA:function(){return Nt},applyActivation:function(){return ht.QH},assertAndGetBroadcastShape:function(){return lt.$N},assertAxesAreInnerMostDims:function(){return ut.lB},assertParamsConsistent:function(){return ct},assignToTypedArray:function(){return Lt},axesAreInnerMostDims:function(){return ut.YB},calculateShapes:function(){return It.SU},castTensor:function(){return jt},combineLocations:function(){return ut.Vh},complexWithEvenIndex:function(){return Bt},complexWithOddIndex:function(){return Pt},computeConv2DInfo:function(){return dt.Ix},computeConv3DInfo:function(){return dt.jw},computeDefaultPad:function(){return dt.aO},computeDilation2DInfo:function(){return dt.Rf},computeOptimalWindowSize:function(){return mt},computeOutAndReduceShapes:function(){return ut.kz},computeOutShape:function(){return pt},computePool2DInfo:function(){return dt.Xw},computePool3DInfo:function(){return dt.pl},convertConv2DDataFormat:function(){return dt.sl},eitherStridesOrDilationsAreOne:function(){return dt.jT},expandShapeToKeepDim:function(){return ut.rv},exponent:function(){return Ut},exponents:function(){return Vt},fromStringArrayToUint8:function(){return Kt},fromUint8ToStringArray:function(){return qt},getAxesPermutation:function(){return ut.Q3},getBroadcastDims:function(){return lt.XF},getComplexWithIndex:function(){return Mt},getFusedBiasGradient:function(){return ht.pf},getFusedDyActivation:function(){return ht.Fr},getImageCenter:function(){return gt},getInnerMostAxes:function(){return ut.sY},getPermuted:function(){return vt},getReductionAxes:function(){return lt.RR},getReshaped:function(){return yt},getReshapedPermuted:function(){return xt},getSliceBeginCoords:function(){return bt},getSliceSize:function(){return wt},getUndoAxesPermutation:function(){return ut.LJ},log:function(){return _t},mergeRealAndImagArrays:function(){return Ot},prepareAndValidate:function(){return kt},prepareSplitSize:function(){return Wt},reshapeTensor:function(){return Xt},segment_util:function(){return i},shouldFuse:function(){return ht.uy},slice_util:function(){return s},splitRealAndImagArrays:function(){return Ft},tupleValuesAreOne:function(){return dt.I0},upcastType:function(){return rt.x8},validateInput:function(){return It.b0},validateUpdateShape:function(){return It.l5},warn:function(){return At}});var l={};n.r(l),n.d(l,{GP:function(){return Zt.GP},qP:function(){return Zt.qP},pA:function(){return Zt.pA},ZA:function(){return Yt.Z}});var h=n(7097);function c(){if("undefined"==typeof navigator||null==navigator)return!1;{const e=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}}function p(){return"undefined"!=typeof window&&null!=window.document||"undefined"!=typeof WorkerGlobalScope}var d=n(2885),f=n(4155);
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const m=(0,d.OB)();m.registerFlag("DEBUG",()=>!1,e=>{e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")}),m.registerFlag("IS_BROWSER",()=>p()),m.registerFlag("IS_NODE",()=>void 0!==f&&void 0!==f.versions&&void 0!==f.versions.node),m.registerFlag("IS_CHROME",()=>"undefined"!=typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)),m.registerFlag("PROD",()=>!1),m.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>m.getBool("DEBUG")),m.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0),m.registerFlag("IS_TEST",()=>!1),m.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>!0);var N=n(1661),$=n(701),C=n(569);
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const S={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8};var g=n(8764).Buffer;
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const T=4;async function y(t,n){const r=[],a=[];var o=Array.isArray(t)?t.map(e=>e.name):Object.keys(t);for(let e=0;e<o.length;++e){var s=o[e];const i=Array.isArray(t)?t[e].tensor:t[s];if("float32"!==i.dtype&&"int32"!==i.dtype&&"bool"!==i.dtype&&"string"!==i.dtype&&"complex64"!==i.dtype)throw new Error(`Unsupported dtype in weight '${s}': ${i.dtype}`);const u={name:s,shape:i.shape,dtype:i.dtype};"string"===i.dtype?(s=new Promise(async e=>{const t=await i.bytes();var n=t.reduce((e,t)=>e+t.length,0)+T*t.length;const r=new Uint8Array(n);let a=0;for(let e=0;e<t.length;e++){var o=t[e],s=new Uint8Array(new Uint32Array([o.length]).buffer);r.set(s,a),a+=T,r.set(o,a),a+=o.length}e(r)}),a.push(s)):a.push(i.data()),null!=n&&(u.group=n),r.push(u)}return{data:function(e){if(null===e)throw new Error(`Invalid input value: ${JSON.stringify(e)}`);let t=0;const n=[];e.forEach(e=>{if(t+=e.byteLength,n.push(e.byteLength===e.buffer.byteLength?e:new e.constructor(e)),!(e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${e.constructor.name}`)});const r=new Uint8Array(t);let a=0;return n.forEach(e=>{r.set(new Uint8Array(e.buffer),a),a+=e.byteLength}),r.buffer}(await Promise.all(a)),specs:r}}function v(n,e){const r={};let a,o=0;for(const x of e){var s=x.name,i=x.dtype,u=x.shape,l=(0,C.NA)(u);let t;if("quantization"in x){var c=x.quantization;if("uint8"===c.dtype||"uint16"===c.dtype){if(!("min"in c&&"scale"in c))throw new Error(`Weight ${x.name} with quantization ${c.dtype} `+"doesn't have corresponding metadata min and scale.")}else{if("float16"!==c.dtype)throw new Error(`Weight ${x.name} has unknown `+`quantization dtype ${c.dtype}. `+"Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.");if("float32"!==i)throw new Error(`Weight ${x.name} is quantized with ${c.dtype} `+`which only supports weights of type float32 not ${i}.`)}var p=S[c.dtype],d=n.slice(o,o+l*p),h=new("uint8"===c.dtype?Uint8Array:Uint16Array)(d);if("float32"===i)if("uint8"===c.dtype||"uint16"===c.dtype){t=new Float32Array(h.length);for(let e=0;e<h.length;e++){var f=h[e];t[e]=f*c.scale+c.min}}else{if("float16"!==c.dtype)throw new Error(`Unsupported quantization type ${c.dtype} `+"for weight type float32.");void 0===a&&(a=function(){const a=function(){const t=new Uint32Array(2048);t[0]=0;for(let e=1;e<1024;e++)t[e]=(e=>{let t=e<<13,n=0;for(;0==(8388608&t);)n-=8388608,t<<=1;return t&=-8388609,n+=947912704,t|n})(e);for(let e=1024;e<2048;e++)t[e]=939524096+(e-1024<<13);return t}(),o=function(){const t=new Uint32Array(64);t[0]=0,t[31]=1199570944,t[32]=2147483648,t[63]=3347054592;for(let e=1;e<31;e++)t[e]=e<<23;for(let e=33;e<63;e++)t[e]=2147483648+(e-32<<23);return t}(),s=function(){const t=new Uint32Array(64);for(let e=0;e<64;e++)t[e]=1024;return t[0]=t[32]=0,t}();return t=>{var e=new ArrayBuffer(4*t.length);const n=new Uint32Array(e);for(let e=0;e<t.length;e++){var r=t[e],r=a[s[r>>10]+(1023&r)]+o[r>>10];n[e]=r}return new Float32Array(e)}}()),t=a(h)}else{if("int32"!==i)throw new Error(`Unsupported dtype in weight '${s}': ${i}`);if("uint8"!==c.dtype&&"uint16"!==c.dtype)throw new Error(`Unsupported quantization type ${c.dtype} `+"for weight type int32.");t=new Int32Array(h.length);for(let e=0;e<h.length;e++){var m=h[e];t[e]=Math.round(m*c.scale+c.min)}}o+=l*p}else if("string"===i){var g=(0,C.NA)(x.shape);t=[];for(let e=0;e<g;e++){var y=new Uint32Array(n.slice(o,o+T))[0];o+=T;var v=new Uint8Array(n.slice(o,o+y));t.push(v),o+=y}}else{d=S[i],p=n.slice(o,o+l*d);if("float32"===i)t=new Float32Array(p);else if("int32"===i)t=new Int32Array(p);else if("bool"===i)t=new Uint8Array(p);else{if("complex64"!==i)throw new Error(`Unsupported dtype in weight '${s}': ${i}`);{t=new Float32Array(p);const b=new Float32Array(t.length/2),w=new Float32Array(t.length/2);for(let e=0;e<b.length;e++)b[e]=t[2*e],w[e]=t[2*e+1];const k=(0,$.X)(b,u,"float32"),I=(0,$.X)(w,u,"float32");r[s]=(0,N.P)(k,I),k.dispose(),I.dispose()}}o+=l*d}"complex64"!==i&&(r[s]=(0,$.X)(t,u,i))}return r}const x=void 0!==g&&("undefined"==typeof Blob||"undefined"==typeof atob||"undefined"==typeof btoa);function b(e){return x?g.byteLength(e):new Blob([e]).size}function w(e){if(1===e.length)return e[0];let t=0;e.forEach(e=>{t+=e.byteLength});const n=new Uint8Array(t);let r=0;return e.forEach(e=>{n.set(new Uint8Array(e),r),r+=e.byteLength}),n.buffer}function k(e){for(e=e.trim();e.endsWith("/");)e=e.slice(0,e.length-1);var t=e.split("/");return t[t.length-1]}function I(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==e.modelTopology?0:b(JSON.stringify(e.modelTopology)),weightSpecsBytes:null==e.weightSpecs?0:b(JSON.stringify(e.weightSpecs)),weightDataBytes:null==e.weightData?0:e.weightData.byteLength}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class E{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return null==E.instance&&(E.instance=new E),E.instance}static registerSaveRouter(e){E.getInstance().saveRouters.push(e)}static registerLoadRouter(e){E.getInstance().loadRouters.push(e)}static getSaveHandlers(e){return E.getHandlers(e,"save")}static getLoadHandlers(e,t){return E.getHandlers(e,"load",t)}static getHandlers(t,e,n){const r=[],a="load"===e?E.getInstance().loadRouters:E.getInstance().saveRouters;return a.forEach(e=>{e=e(t,n);null!==e&&r.push(e)}),r}}const R=e=>E.registerSaveRouter(e),D=e=>E.registerLoadRouter(e),A=e=>E.getSaveHandlers(e),_=(e,t)=>E.getLoadHandlers(e,t),O="tensorflowjs",F="models_store",B="model_info_store";function P(){if(!(0,d.OB)().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var e="undefined"==typeof window?self:window,e=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(null==e)throw new Error("The current browser does not appear to support IndexedDB.");return e}function M(e){const t=e.result;t.createObjectStore(F,{keyPath:"modelPath"}),t.createObjectStore(B,{keyPath:"modelPath"})}class L{constructor(e){if(this.indexedDB=P(),null==e||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,e)}async load(){return this.databaseAction(this.modelPath)}databaseAction(e,c){return new Promise((u,l)=>{const r=this.indexedDB.open(O,1);r.onupgradeneeded=()=>M(r),r.onsuccess=()=>{const a=r.result;if(null==c){const e=a.transaction(F,"readonly"),t=e.objectStore(F),n=t.get(this.modelPath);n.onsuccess=()=>{if(null==n.result)return a.close(),l(new Error(`Cannot find model with path '${this.modelPath}' `+"in IndexedDB."));u(n.result.modelArtifacts)},n.onerror=e=>(a.close(),l(n.error)),e.oncomplete=()=>a.close()}else{const o=I(c),s=a.transaction(B,"readwrite");let r=s.objectStore(B);const i=r.put({modelPath:this.modelPath,modelArtifactsInfo:o});let t;i.onsuccess=()=>{t=a.transaction(F,"readwrite");const e=t.objectStore(F),n=e.put({modelPath:this.modelPath,modelArtifacts:c,modelArtifactsInfo:o});n.onsuccess=()=>u({modelArtifactsInfo:o}),n.onerror=e=>{r=s.objectStore(B);const t=r.delete(this.modelPath);t.onsuccess=()=>(a.close(),l(n.error)),t.onerror=e=>(a.close(),l(n.error))}},i.onerror=e=>(a.close(),l(i.error)),s.oncomplete=()=>{null==t?a.close():t.oncomplete=()=>a.close()}}},r.onerror=e=>l(r.error)})}}L.URL_SCHEME="indexeddb://";var V=e=>{return(0,d.OB)().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(L.URL_SCHEME)?(e=e.slice(L.URL_SCHEME.length),new L(e)):null};E.registerSaveRouter(V),E.registerLoadRouter(V);class U{constructor(){this.indexedDB=P()}async listModels(){return new Promise((a,o)=>{const s=this.indexedDB.open(O,1);s.onupgradeneeded=()=>M(s),s.onsuccess=()=>{const t=s.result,e=t.transaction(B,"readonly"),n=e.objectStore(B),r=n.getAll();r.onsuccess=()=>{const e={};for(const t of r.result)e[t.modelPath]=t.modelArtifactsInfo;a(e)},r.onerror=e=>(t.close(),o(r.error)),e.oncomplete=()=>t.close()},s.onerror=e=>o(s.error)})}async removeModel(u){var e;return u=(e=u).startsWith(L.URL_SCHEME)?e.slice(L.URL_SCHEME.length):e,new Promise((s,i)=>{const t=this.indexedDB.open(O,1);t.onupgradeneeded=()=>M(t),t.onsuccess=()=>{const n=t.result,e=n.transaction(B,"readwrite"),r=e.objectStore(B),a=r.get(u);let o;a.onsuccess=()=>{if(null==a.result)return n.close(),i(new Error(`Cannot find model with path '${u}' `+"in IndexedDB."));{const e=r.delete(u),t=()=>{o=n.transaction(F,"readwrite");const e=o.objectStore(F),t=e.delete(u);t.onsuccess=()=>s(a.result.modelArtifactsInfo),t.onerror=e=>i(a.error)};e.onsuccess=t,e.onerror=e=>(t(),n.close(),i(a.error))}},a.onerror=e=>(n.close(),i(a.error)),e.oncomplete=()=>{null==o?n.close():o.oncomplete=()=>n.close()}},t.onerror=e=>i(t.error)})}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const W="tensorflowjs_models",z="info",G="model_topology",H="weight_specs",j="weight_data",X="model_metadata";function q(e){return{info:[W,e,z].join("/"),topology:[W,e,G].join("/"),weightSpecs:[W,e,H].join("/"),weightData:[W,e,j].join("/"),modelMetadata:[W,e,X].join("/")}}function K(e){const t=e.split("/");if(t.length<3)throw new Error(`Invalid key format: ${e}`);return t.slice(1,t.length-1).join("/")}class Z{constructor(e){if(!(0,d.OB)().getBool("IS_BROWSER")||"undefined"==typeof window||void 0===window.localStorage)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==e||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=q(this.modelPath)}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");var t=JSON.stringify(e.modelTopology),n=JSON.stringify(e.weightSpecs),r=I(e);try{this.LS.setItem(this.keys.info,JSON.stringify(r)),this.LS.setItem(this.keys.topology,t),this.LS.setItem(this.keys.weightSpecs,n),this.LS.setItem(this.keys.weightData,function(e){if(x)return g.from(e).toString("base64");var n=new Uint8Array(e);let r="";for(let e=0,t=n.length;e<t;e++)r+=String.fromCharCode(n[e]);return btoa(r)}(e.weightData));const a={format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy};return null!=e.signature&&(a.signature=e.signature),null!=e.userDefinedMetadata&&(a.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(a.modelInitializer=e.modelInitializer),this.LS.setItem(this.keys.modelMetadata,JSON.stringify(a)),{modelArtifactsInfo:r}}catch(e){throw this.LS.removeItem(this.keys.info),this.LS.removeItem(this.keys.topology),this.LS.removeItem(this.keys.weightSpecs),this.LS.removeItem(this.keys.weightData),this.LS.removeItem(this.keys.modelMetadata),new Error(`Failed to save model '${this.modelPath}' to local storage: `+"size quota being exceeded is a possible cause of this failure: "+`modelTopologyBytes=${r.modelTopologyBytes}, `+`weightSpecsBytes=${r.weightSpecsBytes}, `+`weightDataBytes=${r.weightDataBytes}.`)}}async load(){var e=JSON.parse(this.LS.getItem(this.keys.info));if(null==e)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if("JSON"!==e.modelTopologyType)throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const t={};e=JSON.parse(this.LS.getItem(this.keys.topology));if(null==e)throw new Error(`In local storage, the topology of model '${this.modelPath}' `+"is missing.");t.modelTopology=e;e=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(null==e)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' `+"are missing.");t.weightSpecs=e;e=this.LS.getItem(this.keys.modelMetadata);null!=e&&(n=JSON.parse(e),t.format=n.format,t.generatedBy=n.generatedBy,t.convertedBy=n.convertedBy,null!=n.signature&&(t.signature=n.signature),null!=n.userDefinedMetadata&&(t.userDefinedMetadata=n.userDefinedMetadata),null!=n.modelInitializer&&(t.modelInitializer=n.modelInitializer));var n=this.LS.getItem(this.keys.weightData);if(null==n)throw new Error("In local storage, the binary weight values of model "+`'${this.modelPath}' are missing.`);return t.weightData=function(e){if(x){const r=g.from(e,"base64");return r.buffer.slice(r.byteOffset,r.byteOffset+r.byteLength)}const t=atob(e),n=new Uint8Array(t.length);for(let e=0;e<t.length;++e)n.set([t.charCodeAt(e)],e);return n.buffer}(n),t}}Z.URL_SCHEME="localstorage://";var Y=e=>{return(0,d.OB)().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(Z.URL_SCHEME)?(e=e.slice(Z.URL_SCHEME.length),new Z(e)):null};E.registerSaveRouter(Y),E.registerLoadRouter(Y);class Q{constructor(){(0,C.hu)((0,d.OB)().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),(0,C.hu)("undefined"==typeof window||void 0!==window.localStorage,()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}async listModels(){const t={};var n,r=W+"/",a="/"+z;for(let e=0;e<this.LS.length;++e){const o=this.LS.key(e);o.startsWith(r)&&o.endsWith(a)&&(n=K(o),t[n]=JSON.parse(this.LS.getItem(o)))}return t}async removeModel(e){var t=q(e=(t=e).startsWith(Z.URL_SCHEME)?t.slice(Z.URL_SCHEME.length):t);if(null==this.LS.getItem(t.info))throw new Error(`Cannot find model at path '${e}'`);e=JSON.parse(this.LS.getItem(t.info));return this.LS.removeItem(t.info),this.LS.removeItem(t.topology),this.LS.removeItem(t.weightSpecs),this.LS.removeItem(t.weightData),e}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const J="://";class ee{constructor(){this.managers={}}static getInstance(){return null==ee.instance&&(ee.instance=new ee),ee.instance}static registerManager(e,t){(0,C.hu)(null!=e,()=>"scheme must not be undefined or null."),e.endsWith(J)&&(e=e.slice(0,e.indexOf(J))),(0,C.hu)(0<e.length,()=>"scheme must not be an empty string.");const n=ee.getInstance();(0,C.hu)(null==n.managers[e],()=>`A model store manager is already registered for scheme '${e}'.`),n.managers[e]=t}static getManager(e){var t=this.getInstance().managers[e];if(null==t)throw new Error(`Cannot find model manager for scheme '${e}'`);return t}static getSchemes(){return Object.keys(this.getInstance().managers)}}function te(e){if(-1===e.indexOf(J))throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+`${ee.getSchemes().join(",")}`);return{scheme:e.split(J)[0],path:e.split(J)[1]}}async function ne(e,t,n=!1){(0,C.hu)(e!==t,()=>`Old path and new path are the same: '${e}'`);const r=E.getLoadHandlers(e);(0,C.hu)(0<r.length,()=>`Copying failed because no load handler is found for source URL ${e}.`),(0,C.hu)(r.length<2,()=>`Copying failed because more than one (${r.length}) `+`load handlers for source URL ${e}.`);const a=r[0];var o=E.getSaveHandlers(t);(0,C.hu)(0<o.length,()=>"Copying failed because no save handler is found for destination "+`URL ${t}.`),(0,C.hu)(o.length<2,()=>`Copying failed because more than one (${r.length}) `+`save handlers for destination URL ${t}.`);const s=o[0];var i=te(e).scheme,u=te(e).path,l=i===te(e).scheme,o=await a.load();n&&l&&await ee.getManager(i).removeModel(u);o=await s.save(o);return n&&!l&&await ee.getManager(i).removeModel(u),o.modelArtifactsInfo}async function re(){const e={};for(const r of ee.getSchemes()){var t=await ee.getManager(r).listModels();for(const a in t){var n=r+J+a;e[n]=t[a]}}return e}async function ae(e){e=te(e);const t=ee.getManager(e.scheme);return t.removeModel(e.path)}async function oe(e,t){return ne(e,t,!1)}async function se(e,t){return ne(e,t,!0)}if((0,d.OB)().get("IS_BROWSER")){(0,d.OB)().setPlatform("browser",new
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class{fetch(e,t){return fetch(e,t)}now(){return performance.now()}encode(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error(`Browser's encoder only supports utf-8, but got ${t}`);return null==this.textEncoder&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}decode(e,t){return new TextDecoder(t).decode(e)}});try{ee.registerManager(Z.URL_SCHEME,new Q)}catch(e){}try{ee.registerManager(L.URL_SCHEME,new U)}catch(e){}}var ie=n(4155);
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ue={importFetch:()=>n(5410)};let le;(0,d.OB)().get("IS_NODE")&&(0,d.OB)().setPlatform("node",new class{constructor(){this.util=n(8628),this.textEncoder=new this.util.TextEncoder}fetch(e,t){return null!=(0,d.OB)().global.fetch?(0,d.OB)().global.fetch(e,t):(null==le&&(le=ue.importFetch()),le(e,t))}now(){var e=ie.hrtime();return 1e3*e[0]+e[1]/1e6}encode(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error(`Node built-in encoder only supports utf-8, but got ${t}`);return this.textEncoder.encode(e)}decode(e,t){return 0===e.length?"":new this.util.TextDecoder(t).decode(e)}});var ce=n(2657),pe=n(2271),de=n(8723);var he=n(4077);
/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
(0,h.wv)();var fe={buffer:ce.f,cast:pe.p,clone:de.d,print:
/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e,t=!1){console.log(e.toString(t))}};(0,he.Vp)(fe);function me(e){return new Promise(e=>setTimeout(e)).then(e)}class ge{constructor(e){if(!(0,d.OB)().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");null!=(e=e.startsWith(ge.URL_SCHEME)?e.slice(ge.URL_SCHEME.length):e)&&0!==e.length||(e="model"),this.modelTopologyFileName=e+".json",this.weightDataFileName=e+".weights.bin"}async save(e){if("undefined"==typeof document)throw new Error("Browser downloads are not supported in this environment since `document` is not present");var t=window.URL.createObjectURL(new Blob([e.weightData],{type:"application/octet-stream"}));if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{var n=[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}];const r={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:n};null!=e.signature&&(r.signature=e.signature),null!=e.userDefinedMetadata&&(r.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(r.modelInitializer=e.modelInitializer);n=window.URL.createObjectURL(new Blob([JSON.stringify(r)],{type:"application/json"}));const a=null==this.jsonAnchor?document.createElement("a"):this.jsonAnchor;if(a.download=this.modelTopologyFileName,a.href=n,await me(()=>a.dispatchEvent(new MouseEvent("click"))),null!=e.weightData){const o=null==this.weightDataAnchor?document.createElement("a"):this.weightDataAnchor;o.download=this.weightDataFileName,o.href=t,await me(()=>o.dispatchEvent(new MouseEvent("click")))}return{modelArtifactsInfo:I(e)}}}}ge.URL_SCHEME="downloads://";class ye{constructor(e){if(null==e||e.length<1)throw new Error("When calling browserFiles, at least 1 file is required, "+`but received ${e}`);this.files=e}async load(){const t=this.files[0],r=this.files.slice(1);return new Promise((l,c)=>{const e=new FileReader;e.onload=e=>{const a=JSON.parse(e.target.result),o=a.modelTopology;if(null!=o){0===r.length&&l({modelTopology:o});const n=a.weightsManifest;if(null!=n){let t;try{t=this.checkManifestAndWeightFiles(n,r)}catch(e){return void c(e)}const s=[],i=[],u=[];n.forEach(e=>{e.paths.forEach(e=>{i.push(e),u.push(null)}),s.push(...e.weights)}),n.forEach(e=>{e.paths.forEach(r=>{const e=new FileReader;e.onload=e=>{var t=e.target.result,e=i.indexOf(r);if(u[e]=t,-1===u.indexOf(null)){const n={modelTopology:o,weightSpecs:s,weightData:w(u),format:a.format,generatedBy:a.generatedBy,convertedBy:a.convertedBy};null!=a.signature&&(n.signature=a.signature),null!=a.userDefinedMetadata&&(n.userDefinedMetadata=a.userDefinedMetadata),null!=a.modelInitializer&&(n.modelInitializer=a.modelInitializer),l(n)}},e.onerror=e=>c(`Failed to weights data from file of path '${r}'.`),e.readAsArrayBuffer(t[r])})})}else c(new Error(`weightManifest field is missing from file ${t.name}`))}else c(new Error(`modelTopology field is missing from file ${t.name}`))},e.onerror=e=>c("Failed to read model topology and weights manifest JSON "+`from file '${t.name}'. BrowserFiles supports loading `+"Keras-style tf.Model artifacts only."),e.readAsText(t)})}checkManifestAndWeightFiles(e,n){const r=[],a=n.map(e=>k(e.name)),o={};for(const t of e)t.paths.forEach(e=>{var t=k(e);if(-1!==r.indexOf(t))throw new Error("Duplicate file basename found in weights manifest: "+`'${t}'`);if(r.push(t),-1===a.indexOf(t))throw new Error(`Weight file with basename '${t}' is not provided.`);o[e]=n[a.indexOf(t)]});if(r.length!==n.length)throw new Error("Mismatch in the number of files in weights manifest "+`(${r.length}) and the number of weight files provided `+`(${n.length}).`);return o}}function ve(e){return new ye(e)}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function xe(n,r,a,o){var e,t,s;e=n,(0,C.hu)(null!=e&&Array.isArray(e)&&0<e.length,()=>"promises must be a none empty array"),t=a=null==a?0:a,s=o=null==o?1:o,(0,C.hu)(0<=t&&t<=1,()=>"Progress fraction must be in range [0, 1], but "+`got startFraction ${t}`),(0,C.hu)(0<=s&&s<=1,()=>"Progress fraction must be in range [0, 1], but "+`got endFraction ${s}`),(0,C.hu)(t<=s,()=>"startFraction must be no more than endFraction, but "+`got startFraction ${t} and endFraction `+`${s}`);let i=0;return Promise.all(n.map(e=>(e.then(e=>{var t=a+ ++i/n.length*(o-a);return r(t),e}),e)))}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
async function be(e,t){const n=null==(t=null==t?{}:t).fetchFunc?(0,d.OB)().platform.fetch:t.fetchFunc;e=e.map(e=>n(e,t.requestInit,{isBinary:!0}));const r=null==t.onProgress?await Promise.all(e):await xe(e,t.onProgress,0,.5);e=r.map(e=>e.arrayBuffer());return null==t.onProgress?await Promise.all(e):await xe(e,t.onProgress,.5,1)}async function we(e,t="",n,r){const a=ke(e=>be(e,{requestInit:r}));return a(e,t,n)}function ke(a){return async(u,t="",s)=>{const i=u.map(()=>!1),l={},c=null!=s?s.map(()=>!1):[],p=[];if(u.forEach((e,a)=>{let o=0;e.weights.forEach(n=>{var e=("quantization"in n?n.quantization:n).dtype;const t=S[e]*C.NA(n.shape),r=()=>{i[a]=!0,null==l[a]&&(l[a]=[]),l[a].push({manifestEntry:n,groupOffset:o,sizeBytes:t})};null!=s?s.forEach((e,t)=>{e===n.name&&(r(),c[t]=!0)}):r(),p.push(n.name),o+=t})}),!c.every(e=>e)){const r=s.filter((e,t)=>!c[t]);throw new Error("Could not find weights in manifest with names: "+`${r.join(", ")}. \n`+"Manifest JSON has weights with names: "+`${p.join(", ")}.`)}const e=i.reduce((e,t,n)=>(t&&e.push(n),e),[]),n=[];e.forEach(e=>{u[e].paths.forEach(e=>{e=t+(t.endsWith("/")?"":"/")+e;n.push(e)})});const d=await a(n),h={};let f=0;return e.forEach(e=>{var t=u[e].paths.length;let n=0;for(let e=0;e<t;e++)n+=d[f+e].byteLength;const r=new ArrayBuffer(n),a=new Uint8Array(r);let o=0;for(let e=0;e<t;e++){var s=new Uint8Array(d[f+e]);a.set(s,o),o+=s.byteLength}const i=l[e];i.forEach(e=>{var t=v(r.slice(e.groupOffset,e.groupOffset+e.sizeBytes),[e.manifestEntry]);for(const n in t)h[n]=t[n]}),f+=t}),h}}E.registerSaveRouter(e=>{return(0,d.OB)().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(ge.URL_SCHEME)?([e="model"]=[e.slice(ge.URL_SCHEME.length)],new ge(e)):null});class Ie{constructor(e,t){if(this.DEFAULT_METHOD="POST",this.weightPathPrefix=(t=null==t?{}:t).weightPathPrefix,this.onProgress=t.onProgress,this.weightUrlConverter=t.weightUrlConverter,null!=t.fetchFunc?((0,C.hu)("function"==typeof t.fetchFunc,()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"),this.fetch=t.fetchFunc):this.fetch=(0,d.OB)().platform.fetch,(0,C.hu)(null!=e&&0<e.length,()=>"URL path for http must not be null, undefined or empty."),Array.isArray(e)&&(0,C.hu)(2===e.length,()=>"URL paths for http must have a length of 2, "+`(actual length is ${e.length}).`),this.path=e,null!=t.requestInit&&null!=t.requestInit.body)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=t.requestInit||{}}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");const t=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);t.body=new FormData;var n=[{paths:["./model.weights.bin"],weights:e.weightSpecs}];const r={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:n};null!=e.signature&&(r.signature=e.signature),null!=e.userDefinedMetadata&&(r.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(r.modelInitializer=e.modelInitializer),t.body.append("model.json",new Blob([JSON.stringify(r)],{type:"application/json"}),"model.json"),null!=e.weightData&&t.body.append("model.weights.bin",new Blob([e.weightData],{type:"application/octet-stream"}),"model.weights.bin");n=await this.fetch(this.path,t);if(n.ok)return{modelArtifactsInfo:I(e),responses:[n]};throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+`${n.status}.`)}async load(){const e=await this.fetch(this.path,this.requestInit);if(!e.ok)throw new Error(`Request to ${this.path} failed with status code `+`${e.status}. Please verify this URL points to `+"the model JSON of the model to load.");let t;try{t=await e.json()}catch(e){let t=`Failed to parse model JSON of response from ${this.path}.`;throw this.path.endsWith(".pb")?t+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":t+=" Please make sure the server is serving valid JSON for this request.",new Error(t)}var n=t.modelTopology,r=t.weightsManifest,a=t.generatedBy,o=t.convertedBy,s=t.format,i=t.signature,u=t.userDefinedMetadata;if(null==n&&null==r)throw new Error(`The JSON from HTTP path ${this.path} contains neither model `+"topology or manifest for weights.");let l,c;null!=r&&(r=await this.loadWeights(r),[l,c]=r);const p={modelTopology:n,weightSpecs:l,weightData:c,generatedBy:a,convertedBy:o,format:s};null!=i&&(p.signature=i),null!=u&&(p.userDefinedMetadata=u);u=t.modelInitializer;return u&&(p.modelInitializer=u),p}async loadWeights(e){var t,n,r=Array.isArray(this.path)?this.path[1]:this.path,[a,o]=(n=(t=r).lastIndexOf("/"),a=t.lastIndexOf("?"),r=t.substring(0,n),a=n<a?t.substring(a):"",[r+"/",a]),s=this.weightPathPrefix||a;const i=[];for(const c of e)i.push(...c.weights);const u=[],l=[];for(const p of e)for(const d of p.paths)null!=this.weightUrlConverter?l.push(this.weightUrlConverter(d)):u.push(s+d+o);this.weightUrlConverter&&u.push(...await Promise.all(l));e=await be(u,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress});return[i,w(e)]}}function Ne(e){return null!=e.match(Ie.URL_SCHEME_REGEX)}Ie.URL_SCHEME_REGEX=/^https?:\/\//;var $e=(t,n)=>{if("undefined"==typeof fetch&&(null==n||null==n.fetchFunc))return null;{let e=!0;if(e=Array.isArray(t)?t.every(e=>Ne(e)):Ne(t),e)return Ce(t,n)}return null};function Ce(e,t){return new Ie(e,t)}function Se(e,t){return Ce(e,t)}E.registerSaveRouter($e),E.registerLoadRouter($e);
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class Te{constructor(e){this.modelArtifacts=e}async load(){return this.modelArtifacts}}class Ee{constructor(e){this.saveHandler=e}async save(e){return this.saveHandler(e)}}function Re(e,t,n,r){return 1!==arguments.length?(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new Te({modelTopology:e,weightSpecs:t,weightData:n,trainingConfig:r})):null!=e.modelTopology||null!=e.weightSpecs?new Te(e):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new Te({modelTopology:e}))}function De(e){return new Ee(e)}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
var Ae=n(9121),_e=n(6151),Oe=n(3740),Fe=n(2668),Be=n(7852);
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
let Pe;async function Me(e,t){let n=(0,Oe._1)(e,"img","toPixels");if(!(e instanceof he.es)){const p=n;n=(0,pe.p)(p,"int32"),p.dispose()}if(2!==n.rank&&3!==n.rank)throw new Error(`toPixels only supports rank 2 or 3 tensors, got rank ${n.rank}.`);var[r,a]=n.shape.slice(0,2),o=2===n.rank?1:n.shape[2];if(4<o||2===o)throw new Error("toPixels only supports depth of size "+`1, 3 or 4 but got ${o}`);if("float32"!==n.dtype&&"int32"!==n.dtype)throw new Error(`Unsupported type for toPixels: ${n.dtype}.`+" Please use float32 or int32 tensors.");var s=await n.data(),i="float32"===n.dtype?255:1;const u=new Uint8ClampedArray(a*r*4);for(let t=0;t<r*a;++t){const d=[0,0,0,255];for(let e=0;e<o;e++){var l=s[t*o+e];if("float32"===n.dtype){if(l<0||1<l)throw new Error("Tensor values for a float32 Tensor must be in the "+`range [0 - 1] but encountered ${l}.`)}else if("int32"===n.dtype&&(l<0||255<l))throw new Error("Tensor values for a int32 Tensor must be in the "+`range [0 - 255] but encountered ${l}.`);1===o?(d[0]=l*i,d[1]=l*i,d[2]=l*i):d[e]=l*i}var c=4*t;u[0+c]=Math.round(d[0]),u[1+c]=Math.round(d[1]),u[2+c]=Math.round(d[2]),u[3+c]=Math.round(d[3])}if(null!=t){t.width=a,t.height=r;const h=t.getContext("2d");t=new ImageData(u,a,r);h.putImageData(t,0,0)}return n!==e&&n.dispose(),u}const Le=(0,Fe.op)({fromPixels_:function(e,n=3){if(4<n)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(null==e)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");let t=!1,r=!1,a=!1,o=!1,s=!1,i=!1;if(e.data instanceof Uint8Array)t=!0;else if("undefined"!=typeof ImageData&&e instanceof ImageData)r=!0;else if("undefined"!=typeof HTMLVideoElement&&e instanceof HTMLVideoElement)a=!0;else if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement)o=!0;else if(null!=e.getContext)s=!0;else{if(!("undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap))throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, "+`but was ${e.constructor.name}`);i=!0}if(a)if(a&&e.readyState<2)throw new Error("The video element has not loaded data yet. Please wait for `loadeddata` event on the <video> element.");var u=(0,_e.pI)(Ae.eB,h.BV.backendName);if(null!=u)return h.BV.runKernel(Ae.eB,{pixels:e},{numChannels:n});var[l,u]=a?[e.videoWidth,e.videoHeight]:[e.width,e.height];let c;s?c=e.getContext("2d").getImageData(0,0,l,u).data:r||t?c=e.data:(o||a||i)&&(null==Pe&&(Pe=document.createElement("canvas").getContext("2d")),Pe.canvas.width=l,Pe.canvas.height=u,Pe.drawImage(e,0,0,l,u),c=Pe.getImageData(0,0,l,u).data);let p;if(4===n)p=new Int32Array(c);else{var d=l*u;p=new Int32Array(d*n);for(let t=0;t<d;t++)for(let e=0;e<n;++e)p[t*n+e]=c[4*t+e]}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
return function(e,t,n){if((0,C.Cq)(e),null!=t&&3!==t.length)throw new Error("tensor3d() requires shape to have three numbers");var r=(0,Oe.C)(e,n);if(3!==r.length&&1!==r.length)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return(0,Be.H)(e,t,r,n)}(p,[u,l,n],"int32")}});
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Ve(t,n,r){const a=t.shape.length;C.hu(a===n.length,()=>`Error in slice${a}D: Length of begin ${n} must `+`match the rank of the array (${a}).`),C.hu(a===r.length,()=>`Error in slice${a}D: Length of size ${r} must `+`match the rank of the array (${a}).`);for(let e=0;e<a;++e)C.hu(n[e]+r[e]<=t.shape[e],()=>`Error in slice${a}D: begin[${e}] + size[${e}] `+`(${n[e]+r[e]}) would overflow input.shape[${e}] (${t.shape[e]})`)}function Ue(e){const t=[];let n=0;for(;0<e;)1&e&&t.push(n),e/=2,n++;return t}function We(t,n,r){const a=[];for(let e=0;e<t.length;e++)a[e]=Math.ceil((n[e]-t[e])/r[e]);return a}function ze(e,t,n,r){const a=[...e];for(let e=a.length;e<r.length;e++)a.push(1);for(let e=0;e<n;e++)0===e?a[t]=1:(a.splice(t,0,1),a.pop());return a}function Ge(e,t,n){return n<=e?n:n-(t-1)}function He(t,n){const r=[];for(let e=0;e<t;e++)r.push(n+e);return r}function je(t,e,n,r,a,o,s,i,u){var l=t.length;let c=new Array(l),p=new Array(l),d=new Array(l);if(e.length&&0<n){e=e[0],n=n+1;c=Xe(s,e,n,r,t),p=qe(i,e,n,a,t),d=ze(o,e,n,t)}else for(let e=0;e<l;e++)c[e]=Ze(s,r,o,t,e,u),p[e]=Ye(i,a,o,t,e,u),d[e]=Ke(o,e,u);return{begin:c,end:p,strides:d}}function Xe(n,r,a,o,e){const s=[...e],i=He(a,r);for(let t=0;t<s.length;t++)if(-1<i.indexOf(t))s[t]=0;else{var u=Ge(r,a,t);let e=o[u];n&1<<u&&(e=0),s[t]=e}return s}function qe(n,r,a,o,t){const s=[...t],e=He(a,r);for(let t=0;t<s.length;t++)if(-1<e.indexOf(t))s[t]=Number.MAX_SAFE_INTEGER;else{var i=Ge(r,a,t);let e=o[i];n&1<<i&&(e=Number.MAX_SAFE_INTEGER),s[t]=e}for(let e=0;e<s.length;e++){var u=t[e];s[e]<0&&(s[e]+=u),s[e]=C.uZ(0,s[e],t[e])}return s}function Ke(e,t,n){let r=e[t];return(n&1<<t||null==r)&&(r=1),r}function Ze(e,t,n,r,a,o){let s=t[a];n=n[a]||1;(e&1<<a||o&1<<a||null==s)&&(s=0<n?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);a=r[a];return s<0&&(s+=a),s=C.uZ(0,s,a-1),s}function Ye(e,t,n,r,a,o){let s=t[a];n=n[a]||1;(e&1<<a||o&1<<a||null==s)&&(s=0<n?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);a=r[a];return s<0&&(s+=a),s=0<n?C.uZ(0,s,a):C.uZ(-1,s,a-1),s}function Qe(t,n,r){let a=r.length;for(let e=0;e<r.length;e++)if(1<r[e]){a=e;break}for(let e=a+1;e<r.length;e++)if(0<n[e]||r[e]!==t[e])return!1;return!0}function Je(t,n){let r=0<t.length?t[t.length-1]:1;for(let e=0;e<t.length-1;e++)r+=t[e]*n[e];return r}function et(n,e,t){let r;var a=n.shape.length;r="number"==typeof e?[e,...new Array(a-1).fill(0)]:e.length<a?e.concat(new Array(a-e.length).fill(0)):e.slice(),r.forEach(e=>{C.hu(-1!==e,()=>"slice() does not support negative begin indexing.")});let o;return o=null==t?new Array(a).fill(-1):"number"==typeof t?[t,...new Array(a-1).fill(-1)]:t.length<a?t.concat(new Array(a-t.length).fill(-1)):t,o=o.map((e,t)=>0<=e?e:(C.hu(-1===e,()=>"Negative size values should be exactly -1 but got "+`${e} for the slice() size at index ${t}.`),n.shape[t]-r[t])),[r,o]}function tt(e,t,n,r,a,o,s,i,u){let l=t.slice(),c=n.slice(),p=r;null==r&&(p=new Array(l.length));n=Ue(s);if(1<n.length)throw new Error("Multiple ellipses in slice is not allowed.");if(0!==s&&0!==i)throw new Error("Using both ellipsisMask and newAxisMask is not yet supported.");if(0!==s&&0!==u)throw new Error("Using both ellipsisMask and shrinkAxisMask is not yet supported.");r=e.length-l.length;const d=Ue(i),h=e.slice();d.forEach(e=>{l[e]=0,c[e]=1,h.splice(e,0,1)});var{begin:a,end:o,strides:s}=je(h,n,r,l,c,p,a,o,s);l=a,c=o,p=s;const f=Ue(u);f.forEach(e=>{c[e]=l[e]+1,p[e]=1});const m=We(l,c,p);u=m.filter((e,t)=>-1===f.indexOf(t));return{nonStrided:p.every(e=>1===e),$begin:l,$end:c,$strides:p,size:m,newShape:h,outShape:u}}var nt=n(9155),rt=n(1221),at=n(5139),ot=n(4368),st=n(9494),it=n(9640),ut=n(3591),lt=n(2200);
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function ct(e,r){const a=e[0].length;e.forEach((e,t)=>{C.hu(e.length===a,()=>`Error in concat${a}D: rank of tensors[${t}] must be the same `+`as the rank of the rest (${a})`)}),C.hu(0<=r&&r<a,()=>`Error in concat${a}D: axis must be between 0 and ${a-1}.`);const o=e[0];e.forEach((t,n)=>{for(let e=0;e<a;e++)C.hu(e===r||t[e]===o[e],()=>`Error in concat${a}D: Shape of tensors[${n}] (${t}) `+`does not match the shape of the rest (${o}) `+`along the non-concatenated axis ${n}.`)})}function pt(t,n){const r=t[0].slice();for(let e=1;e<t.length;e++)r[n]+=t[e][n];return r}var dt=n(2582),ht=n(9323);
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const ft=30;function mt(e){return e<=ft?e:(0,C.jP)(e,Math.floor(Math.sqrt(e)))}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function gt(e,t,n){return[n*("number"==typeof e?e:e[0]),t*("number"==typeof e?e:e[1])]}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function yt(t,n,e,r=!0){let a=[];if(r)a=a.concat(n.slice(0)),a.push(t[0]/e),a=a.concat(t.slice(1));else{a=a.concat(t[0]);var o=n.length;for(let e=0;e<o;++e)a=a.concat([t[e+1]/n[e],n[e]]);a=a.concat(t.slice(o+1))}return a}function vt(t,n,e=!0){const r=[];if(e){r.push(n);for(let e=n+1;e<t;++e)e<=2*n?(r.push(e),r.push(e-(n+1))):r.push(e)}else{const a=[],o=[];for(let e=1;e<t;++e)(e>=2*n+1||e%2==1?o:a).push(e);r.push(...a),r.push(0),r.push(...o)}return r}function xt(t,n,e,r=!0){const a=[];r?a.push(t[0]/e):a.push(t[0]*e);for(let e=1;e<t.length;++e)e<=n.length?r?a.push(n[e-1]*t[e]):a.push(t[e]/n[e-1]):a.push(t[e]);return a}function bt(t,n){const r=[0];for(let e=0;e<n;++e)r.push(t[e][0]);return r}function wt(t,n,r){const a=t.slice(0,1);for(let e=0;e<r;++e)a.push(t[e+1]-n[e][0]-n[e][1]);return a}function kt(e,t){var n=e.shape.length,r=t.shape.length;if(n<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher,"+` but the rank was ${n}.`);if(r<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher,"+` but the rank was ${r}.`);if("int32"!==t.dtype)throw new Error("tf.gatherND() expects the indices to be int32 type,"+` but the dtype was ${t.dtype}.`);if(t.shape[r-1]>n)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+`${t.shape[r-1]} vs. ${n}`);if(0===(0,C.NA)(e.shape))throw new Error("Requested more than 0 entries, but input is empty."+` Input shape: ${e.shape}.`);const a=t.shape;t=a[a.length-1];let o=1;for(let e=0;e<a.length-1;++e)o*=a[e];var s=e.shape;const i=a.slice();i.pop();let u=1;for(let e=t;e<n;++e)u*=s[e],i.push(s[e]);t=[...(0,C.e3)(e.shape).map(e=>e/u),1].slice(0,t);return[i,o,u,t]}var It=n(3028);
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const Nt=1.7580993408473768,$t=1.0507009873554805,Ct=.3275911,St=.254829592,Tt=-.284496736,Et=1.421413741,Rt=-1.453152027,Dt=1.061405429;
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function At(...e){(0,d.OB)().getBool("IS_TEST")||console.warn(...e)}function _t(...e){(0,d.OB)().getBool("IS_TEST")||console.log(...e)}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Ot(t,n){if(t.length!==n.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+`${t.length}, imag: ${n.length}.`);const r=new Float32Array(2*t.length);for(let e=0;e<r.length;e+=2)r[e]=t[e/2],r[e+1]=n[e/2];return r}function Ft(t){const n=new Float32Array(t.length/2),r=new Float32Array(t.length/2);for(let e=0;e<t.length;e+=2)n[e/2]=t[e],r[e/2]=t[e+1];return{real:n,imag:r}}function Bt(t){var e=Math.ceil(t.length/4);const n=new Float32Array(e),r=new Float32Array(e);for(let e=0;e<t.length;e+=4)n[Math.floor(e/4)]=t[e],r[Math.floor(e/4)]=t[e+1];return{real:n,imag:r}}function Pt(t){var e=Math.floor(t.length/4);const n=new Float32Array(e),r=new Float32Array(e);for(let e=2;e<t.length;e+=4)n[Math.floor(e/4)]=t[e],r[Math.floor(e/4)]=t[e+1];return{real:n,imag:r}}function Mt(e,t){return{real:e[2*t],imag:e[2*t+1]}}function Lt(e,t,n,r){e[2*r]=t,e[2*r+1]=n}function Vt(t,n){const r=new Float32Array(t/2),a=new Float32Array(t/2);for(let e=0;e<Math.ceil(t/2);e++){var o=(n?2:-2)*Math.PI*(e/t);r[e]=Math.cos(o),a[e]=Math.sin(o)}return{real:r,imag:a}}function Ut(e,t,n){t=(n?2:-2)*Math.PI*(e/t);return{real:Math.cos(t),imag:Math.sin(t)}}function Wt(e,t,n=0){let r=[];var a,o;return r="number"==typeof t?((0,C.hu)(e.shape[n]%t==0,()=>"Number of splits must evenly divide the axis."),new Array(t).fill(e.shape[n]/t)):(o=t.reduce((e,t)=>(-1===t&&(e+=1),e),0),(0,C.hu)(o<=1,()=>"There should be only one negative value in split array."),-1!==(a=t.indexOf(-1))&&(o=t.reduce((e,t)=>0<t?e+t:e),t[a]=e.shape[n]-o),(0,C.hu)(e.shape[n]===t.reduce((e,t)=>e+t),()=>"The sum of sizes must match the size of the axis dimension."),t),r}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function zt(e,t){let n=!1,r;for(e<=ft?(r=e,n=!0):r=(0,C.jP)(e,Math.floor(Math.sqrt(e)));!n;)r>t||r===e?n=!0:r=(0,C.jP)(e,r+1);return r}function Gt(t,n,r){const a=[];var o=t.length;for(let e=0;e<o;e++)e!==n?a.push(t[e]):a.push(r);return a}function Ht(t,n,r,a){var o=n.shape.length,s=t.shape.length;if(0!==a&&(a<-o||o<a))throw new Error(`Expect batchDims in the range of [-${o}, ${o}], but got ${a}`);if(a<0&&(a+=o),s<a)throw new Error(`batchDims (${a}) must be less than rank(x) (
    ${s}).`);if(r<a)throw new Error(`batchDims (${a}) must be less than or equal to axis (${r}).`);for(let e=0;e<a;++e)if(t.shape[e]!==n.shape[e])throw new Error(`x.shape[${e}]: ${t.shape[e]} should be equal to indices.shape[${e}]: ${n.shape[e]}.`);var e=t.shape[r];const i=[];let u=1,l=1,c=1;for(let e=0;e<a;++e)i.push(t.shape[e]),u*=t.shape[e];for(let e=a;e<r;e++)i.push(t.shape[e]),l*=t.shape[e];for(let e=a;e<o;e++)i.push(n.shape[e]);for(let e=r+1;e<s;e++)i.push(t.shape[e]),c*=t.shape[e];return{batchSize:u,sliceSize:c,outerSize:l,dimSize:e,outputShape:i}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function jt(e,t,n){if("complex64"===t){if("complex64"===e.dtype)return e.clone();const a=(0,it.l)(e.shape),o=(0,pe.p)(e,"float32");var r=n.complex(o,a);return a.dispose(),o.dispose(),r}if(!(0,C.QB)(e.dtype,t))return h.BV.makeTensorFromDataId(e.dataId,e.shape,t);if("complex64"===e.dtype){const s=n.real(e);r=(0,pe.p)(s,t);return s.dispose(),r}if("int32"===t)return n.int(e);if("bool"!==t)throw new Error(`Error in Cast: failed to cast ${e.dtype} to ${t}`);{const i=(0,st.i)(0,e.dtype);e=n.notEqual(e,i);return i.dispose(),e}}function Xt(e,t){return h.BV.makeTensorFromDataId(e.dataId,t,e.dtype)}function qt(e){try{return e.map(e=>(0,nt.decodeString)(e))}catch(e){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${e}`)}}function Kt(e){return e.map(e=>(0,nt.encodeString)(e))}var Zt=n(3337),Yt=n(8333),Qt=n(2073),Jt=n(4841),en=n(1901),tn={kernelName:Ae.SY,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>(0,Jt.d)(e,(0,en.N)((0,pe.p)(n,"float32"),-1))}}},nn=n(1274),rn=n(7370),an=n(3261),on=n(248),sn=n(827),un={kernelName:Ae.VG,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{var e=(0,on.h)((0,pe.p)(n,"float32")),e=(0,an._)((0,sn.l)((0,st.i)(1),e));return(0,rn.W)((0,nn.h)(t,e))}}}},ln={kernelName:Ae.Sp,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{var e=(0,an._)((0,sn.l)((0,on.h)((0,pe.p)(n,"float32")),1));return(0,nn.h)(t,e)}}}},cn=n(4968),pn=n(5475),dn={kernelName:Ae.mm,inputsToSave:["a","b"],gradFunc:(n,e)=>{const[r,a]=e,o=lt.$N(r.shape,a.shape);return{a:()=>{let e=n;var t=lt.RR(r.shape,o);return 0<t.length&&(e=(0,pn.S)(e,t)),(0,cn.X)(e,r.shape)},b:()=>{let e=n;var t=lt.RR(a.shape,o);return 0<t.length&&(e=(0,pn.S)(e,t)),(0,cn.X)(e,a.shape)}}}},hn={kernelName:Ae.Xz,saveAllInputs:!0,gradFunc:(n,e)=>{const r={};return e.forEach((e,t)=>{r[t]=()=>n.clone()}),r}},fn=n(6577),mn={kernelName:Ae.sJ,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>(0,fn.P)(n)}}},gn={kernelName:Ae.aJ,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>(0,fn.P)(n)}}},yn={kernelName:Ae.M2,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>(0,nn.h)(e,(0,an._)((0,sn.l)((0,st.i)(1),(0,on.h)((0,pe.p)(n,"float32")))))}}},vn=n(6407),xn={kernelName:Ae.qw,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{var e=(0,an._)((0,vn.I)((0,st.i)(1),(0,on.h)((0,pe.p)(n,"float32"))));return(0,nn.h)(t,e)}}}},bn={kernelName:Ae.QC,inputsToSave:["a","b"],gradFunc:(n,e)=>{const[r,a]=e,o=(0,lt.$N)(r.shape,a.shape);return{a:()=>{var e=(0,vn.I)((0,on.h)(r),(0,on.h)(a));let t=(0,Jt.d)(n,(0,nn.h)(a,e));e=(0,lt.RR)(r.shape,o);return 0<e.length&&(t=(0,pn.S)(t,e)),(0,cn.X)(t,r.shape)},b:()=>{var e=(0,vn.I)((0,on.h)(r),(0,on.h)(a));let t=(0,rn.W)((0,Jt.d)(n,(0,nn.h)(r,e)));e=(0,lt.RR)(a.shape,o);return 0<e.length&&(t=(0,pn.S)(t,e)),(0,cn.X)(t,a.shape)}}}},wn={kernelName:Ae.jM,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>(0,nn.h)(e,(0,vn.I)((0,on.h)((0,pe.p)(n,"float32")),1))}}},kn={kernelName:Ae.Oy,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>(0,nn.h)(e,(0,sn.l)((0,st.i)(1),(0,on.h)((0,pe.p)(n,"float32"))))}}};const In=(0,Fe.op)({avgPool3dGrad_:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e,t,n,r,a=[1,1,1],o,s){e=(0,Oe._1)(e,"dy","avgPool3dGrad"),t=(0,Oe._1)(t,"input","avgPool3dGrad");let i=e,u=t,l=!1;return 4===t.rank&&(l=!0,i=(0,cn.X)(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]),u=(0,cn.X)(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]])),C.hu(5===i.rank,()=>"Error in avgPool3dGrad: dy must be rank 5 but got rank "+`${i.rank}.`),C.hu(5===u.rank,()=>"Error in avgPool3dGrad: input must be rank 5 but got rank "+`${u.rank}.`),C.hu(dt.jT(r,a),()=>"Error in avgPool3dGrad: Either strides or dilations "+`must be 1. Got strides ${r} and dilations '${a}'`),null!=s&&C.hu(C.GN(o),()=>"Error in avgPool3dGrad: pad must be an integer when "+`using, dimRoundingMode ${s} but got pad ${o}.`),t={dy:i,input:u},n=h.BV.runKernel(Ae.IM,t,{filterSize:n,strides:r,dilations:a,pad:o,dimRoundingMode:s}),l?(0,cn.X)(n,[n.shape[1],n.shape[2],n.shape[3],n.shape[4]]):n}});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
var Nn={kernelName:Ae._k,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{filterSize:a,strides:o,dilations:s,pad:i,dimRoundingMode:u}=n,l=null==s?[1,1,1]:s;return{x:()=>In(e,r,a,o,l,i,u)}}};const $n=(0,Fe.op)({avgPoolGrad_:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e,t,n,r,a){const o=(0,Oe._1)(e,"dy","avgPoolGrad"),s=(0,Oe._1)(t,"input","avgPoolGrad");C.hu(s.rank===o.rank,()=>`Rank of input (${s.rank}) does not match rank of dy (${o.rank})`);let i=s,u=o,l=!1;return 3===s.rank&&(l=!0,i=(0,cn.X)(s,[1,s.shape[0],s.shape[1],s.shape[2]]),u=(0,cn.X)(o,[1,o.shape[0],o.shape[1],o.shape[2]])),C.hu(4===u.rank,()=>"Error in avgPoolGrad: dy must be rank 4 but got rank "+`${u.rank}.`),C.hu(4===i.rank,()=>"Error in avgPoolGrad: input must be rank 4 but got rank "+`${i.rank}.`),t={dy:u,input:i},a=h.BV.runKernel(Ae.RO,t,{filterSize:n,strides:r,pad:a}),l?(0,cn.X)(a,[a.shape[1],a.shape[2],a.shape[3]]):a}});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
var Cn={kernelName:Ae.Jh,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{filterSize:a,strides:o,pad:s}=n;return{x:()=>$n(e,r,a,o,s)}}},Sn=n(8687),Tn={kernelName:Ae.XL,inputsToSave:["a","b"],gradFunc:(e,t,n)=>{const[r,a]=t;var{transposeA:t,transposeB:n}=n;return t||n?!t&&n?{a:()=>(0,Sn.O)(e,a,!1,!1),b:()=>(0,Sn.O)(e,r,!0,!1)}:t&&!n?{a:()=>(0,Sn.O)(a,e,!1,!0),b:()=>(0,Sn.O)(r,e,!1,!1)}:{a:()=>(0,Sn.O)(a,e,!0,!0),b:()=>(0,Sn.O)(e,r,!0,!0)}:{a:()=>(0,Sn.O)(e,a,!1,!0),b:()=>(0,Sn.O)(r,e,!0,!1)}}},En=n(7918),Rn={kernelName:Ae.zw,gradFunc:(e,t,n)=>{const{blockShape:r,crops:a}=n;return{x:()=>(0,En.f)(e,r,a)}}},Dn={kernelName:Ae.Ly,gradFunc:(e,t,n)=>{var r=n.inputShape,a=n.shape;const o=Array.from(a);for(let e=r.length-1;0<=e;e--)if(r[e]===a[e])o[e]=1;else if(1!==r[e])throw new Error(`broadcastTo(): [${r}] cannot be broadcast to [${a}].`);const s=[];for(let e=0;e<o.length;e++)1<o[e]&&s.push(e);return{x:()=>(0,pn.S)(e,s,!0)}}},An={kernelName:Ae.RF,gradFunc:e=>({x:()=>e.clone()})},_n={kernelName:Ae.gJ,gradFunc:e=>({x:()=>(0,fn.P)(e)})},On=n(7630),Fn=n(624),Bn=n(2856),Pn=n(5912),Mn={kernelName:Ae.xn,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{clipValueMin:a,clipValueMax:o}=n;return{x:()=>(0,Pn.a)((0,Bn.H)((0,On.b)(r,a),(0,Fn.z)(r,o)),e,(0,fn.P)(e))}}},Ln={kernelName:Ae.yj,inputsToSave:["x"],gradFunc:tn.gradFunc},Vn=n(8644),Un={kernelName:Ae.Eh,saveAllInputs:!0,gradFunc:(e,t,n)=>{const r=t.map(e=>e.shape);var n=n["axis"];const a=(0,C.EC)(n,t[0].shape)[0];t=r.map(e=>e[a]);const o=(0,Vn.V)(e,t,a);return o.map(e=>()=>e)}},Wn=n(6013),zn=n(9832),Gn={kernelName:Ae.mh,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{const[r,a]=t,{dilations:o,strides:s,pad:i,dataFormat:u}=n;return C.hu(dt.I0(o),()=>"Error in gradient of conv2D: dilation rates greater than 1 "+`are not yet supported in gradients. Got dilations '${o}'`),{x:()=>(0,zn._)(r.shape,e,a,s,i,u),filter:()=>(0,Wn.p)(r,e,a.shape,s,i,u)}}},Hn=n(4794),jn={kernelName:Ae.wm,inputsToSave:["dy","filter"],gradFunc:(e,t,n)=>{const[r,a]=t,{strides:o,pad:s,dataFormat:i,dimRoundingMode:u}=n;return{dy:()=>(0,Hn.T)(e,a,o,s,i,1,u),filter:()=>(0,Wn.p)(e,r,a.shape,o,s,i,u)}}};const Xn=(0,Fe.op)({conv3DBackpropFilter_:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e,t,n,r,a){let o=e;4===e.rank&&(o=(0,cn.X)(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]));let s=t;return 4===s.rank&&(s=(0,cn.X)(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]])),C.hu(5===o.rank,()=>"Error in conv3dDerFilter: input must be rank 5, but got shape "+`${o.shape}.`),C.hu(5===s.rank,()=>"Error in conv3dDerFilter: dy must be rank 5, but got shape "+`${s.shape}.`),C.hu(5===n.length,()=>"Error in conv3dDerFilter: filterShape must be length 5, but got "+`${n}.`),C.hu(o.shape[4]===n[3],()=>`Error in conv3dDerFilter: depth of input ${o.shape[4]}) must `+`match input depth in filter (${n[3]}.`),C.hu(s.shape[4]===n[4],()=>`Error in conv3dDerFilter: depth of dy (${s.shape[4]}) must `+`match output depth for filter (${n[4]}).`),t={x:o,dy:s},h.BV.runKernel(Ae.o2,t,{strides:r,pad:a,filterShape:n})}});const qn=(0,Fe.op)({conv3DBackpropInput_:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e,t,n,r,a){C.hu(e.length===t.rank,()=>"Length of inShape "+`(${e.length}) and rank of dy (${t.rank}) must match`);let o=e,s=t,i=!1;4===t.rank&&(i=!0,s=(0,cn.X)(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]),o=[1,e[0],e[1],e[2],e[3]]);const u=o[4],l=s.shape[4];C.hu(5===o.length,()=>"Error in conv3dDerInput: inShape must be length 5, but got length "+`${o.length}.`),C.hu(5===s.rank,()=>"Error in conv3dDerInput: dy must be rank 5, but got "+`rank ${s.rank}`),C.hu(5===n.rank,()=>"Error in conv3dDerInput: filter must be rank 5, but got "+`rank ${n.rank}`),C.hu(u===n.shape[3],()=>`Error in conv3dDerInput: depth of input (${u}) must `+`match input depth for filter ${n.shape[3]}.`),C.hu(l===n.shape[4],()=>`Error in conv3dDerInput: depth of output (${l}) must `+`match output depth for filter ${n.shape[4]}.`);var c={dy:s,filter:n},r={pad:a,strides:r,inputShape:o},r=h.BV.runKernel(Ae.ik,c,r);return i?(0,cn.X)(r,[r.shape[1],r.shape[2],r.shape[3],r.shape[4]]):r}});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
var Kn={kernelName:Ae.x1,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{const{dilations:r,strides:a,pad:o}=n;C.hu((0,dt.I0)(r),()=>"Error in gradient of conv3D: dilation rates greater than 1 are "+`not yet supported in gradients. Got dilations '${r}'`);const[s,i]=t;return{x:()=>qn(s.shape,e,i,a,o),filter:()=>Xn(s,e,i.shape,a,o)}}},Zn=n(9331),Yn={kernelName:Ae.mc,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>(0,Jt.d)((0,rn.W)((0,Zn.O)((0,pe.p)(n,"float32"))),e)}}},Qn=n(3254),Jn={kernelName:Ae.TR,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>(0,Jt.d)((0,Qn.R)((0,pe.p)(n,"float32")),e)}}},er=n(7405),tr=n(9065),nr={kernelName:Ae.iH,inputsToSave:["x"],gradFunc:(n,e,t)=>{const[r]=e,{axis:a,exclusive:o,reverse:s}=t;return{x:()=>{var e=(0,ut.Q3)([a],r.rank);let t=(0,er.z)(n,a,o,!s);return null!=e&&(t=(0,tr.p)(t,e)),t}}}},rr=n(8098),ar=n(4375),or={kernelName:Ae.ci,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{const{dilations:r,strides:a,pad:o,dimRoundingMode:s}=n,i=null==r?[1,1]:r;C.hu(dt.I0(i),()=>"Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations "+`'${i}'`);const[u,l]=t;return C.hu(4===u.rank,()=>"Error in gradient of depthwiseConv2dNative: input must be "+`rank 4, but got rank ${u.rank}.`),C.hu(4===l.rank,()=>"Error in gradient of depthwiseConv2dNative: filter must be "+`rank 4, but got rank ${l.rank}.`),C.hu(u.shape[3]===l.shape[2],()=>"Error in gradient of depthwiseConv2d: number of input "+`channels (${u.shape[3]}) must match the inChannels dimension `+`in filter ${l.shape[2]}.`),C.hu(dt.jT(a,i),()=>"Error in gradient of depthwiseConv2d: Either strides or "+`dilations must be  1. Got strides ${a} and dilations `+`'${i}'.`),null!=s&&C.hu(C.GN(o),()=>"Error in depthwiseConv2d: pad must be an integer when using, "+`dimRoundingMode ${s} but got pad ${o}.`),{x:()=>(0,ar.v)(u.shape,e,l,a,o,r,s),filter:()=>(0,rr.z)(u,e,l.shape,a,o,r,s)}}},sr={kernelName:Ae.p4,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{var[r,t]=t;const a={x:r,filter:t,dy:e},o={x:r,filter:t,dy:e};return{x:()=>h.BV.runKernel(Ae.ek,a,n),filter:()=>h.BV.runKernel(Ae.Vn,o,n)}}},ir={kernelName:Ae.SX,outputsToSave:[!0],gradFunc:(e,t)=>{var[t]=t;const n={dy:e,y:t};return{x:()=>h.BV.runKernel(Ae.HE,n)}}},ur=n(4842),lr={kernelName:Ae.Om,inputsToSave:["x"],gradFunc:(e,t)=>{var[t]=t;const n=(0,Jt.d)((0,ur.Q)((0,rn.W)((0,on.h)(t))),2/Math.sqrt(Math.PI));return{x:()=>(0,Jt.d)(e,n)}}},cr={kernelName:Ae.NE,outputsToSave:[!0],gradFunc:(e,t)=>{const[n]=t;return{x:()=>(0,Jt.d)(e,n)}}},pr={kernelName:Ae.YF,inputsToSave:["input"],gradFunc:(e,t)=>{const[n]=t;return{input:()=>(0,cn.X)(e,n.shape)}}},dr={kernelName:Ae.Y0,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>(0,Jt.d)(e,(0,ur.Q)(n))}}},hr={kernelName:Ae.OR,gradFunc:e=>({x:()=>(0,fn.P)(e)})},fr={kernelName:Ae.je,inputsToSave:["a","b"],gradFunc:(n,e)=>{const[r,a]=e,o=(0,lt.$N)(r.shape,a.shape);return{a:()=>{var e=(0,nn.h)(n,(0,pe.p)(a,"float32")),t=(0,lt.RR)(r.shape,o);return 0<t.length?(0,cn.X)((0,pn.S)(e,t),r.shape):e},b:()=>{let e=(0,Jt.d)(n,(0,pe.p)(r,"float32"));var t=(0,lt.RR)(a.shape,o);0<t.length&&(e=(0,cn.X)((0,pn.S)(e,t),a.shape));t=(0,on.h)(a);return(0,rn.W)((0,nn.h)(e,(0,pe.p)(t,"float32")))}}}},mr=n(2634),gr=n(7501),yr={kernelName:Ae.sH,inputsToSave:["x","mean","variance","scale"],gradFunc:(n,e,t)=>{var t=t["varianceEpsilon"];const[r,a,o,s]=e,i=null==s?(0,st.i)(1):s,u=(0,lt.RR)(a.shape,r.shape),l=[];if(1===a.rank){for(let e=0;e<r.shape.length-1;++e)l.push(r.shape[e]);l.push(1)}const c=(0,sn.l)(r,a),p=(0,Jt.d)(n,i),d=(0,mr.b)((0,vn.I)(o,(0,st.i)(t))),h=(0,Jt.d)((0,Jt.d)((0,Jt.d)(d,d),d),(0,st.i)(-.5));return{x:()=>1===a.rank?(0,cn.X)((0,Jt.d)((0,Jt.d)(n,(0,gr.G)((0,cn.X)(d,[1,1,1,a.shape[0]]),l)),i),r.shape):(0,cn.X)((0,Jt.d)((0,Jt.d)(n,d),i),r.shape),mean:()=>{let e=(0,Jt.d)((0,Jt.d)(d,(0,st.i)(-1)),p);return 1===a.rank&&(e=(0,pn.S)(e,u)),(0,cn.X)(e,a.shape)},variance:()=>{let e=(0,Jt.d)((0,Jt.d)(h,c),p);return 1===a.rank&&(e=(0,pn.S)(e,u)),(0,cn.X)(e,a.shape)},scale:()=>{var e=(0,Jt.d)(c,d);let t=(0,Jt.d)(n,e);return 1===a.rank&&(t=(0,pn.S)(t,u)),(0,cn.X)(t,a.shape)},offset:()=>{let e=n;return 1===a.rank&&(e=(0,pn.S)(e,u)),(0,cn.X)(e,a.shape)}}}};const vr=(0,Fe.op)({unsortedSegmentSum_:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e,t,n){return e=(0,Oe._1)(e,"x","unsortedSegmentSum"),t=(0,Oe._1)(t,"segmentIds","unsortedSegmentSum","int32"),(0,C.hu)((0,C.GN)(n),()=>"numSegments must be of dtype int"),h.BV.runKernel(Ae.Qv,{x:e,segmentIds:t},{numSegments:n})}});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
var xr={kernelName:Ae.qi,inputsToSave:["x","indices"],gradFunc:(i,e,t)=>{const[u,l]=e,c=t["axis"],p=(0,C.EC)(c,u.shape)[0];return{x:()=>{const e=u.shape;var t=l.size,n=e.slice(0,p),r=n.length,a=e.slice(c,e.length).slice(1),o=a.length,s=br(0,r),o=br(r+1,r+1+o),a=wr([n,[t],a]),a=(0,cn.X)(i,a),t=(0,cn.X)(l,[t]),o=wr([[r],s,o]),a=(0,tr.p)(a,o),t=vr(a,t,u.shape[p]),o=(0,ut.LJ)(o);return t=(0,tr.p)(t,o)},indices:()=>l}}};function br(t,n){const r=[];for(let e=t;e<n;++e)r.push(e);return r}function wr(n){const r=[];for(let t=0;t<n.length;++t)for(let e=0;e<n[t].length;++e)r.push(n[t][e]);return r}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
var kr={kernelName:Ae.Ac,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t;return{a:()=>(0,fn.P)(n),b:()=>(0,fn.P)(r)}}},Ir={kernelName:Ae.iJ,gradFunc:e=>({x:()=>(0,pe.p)(e,"float32")})},Nr={kernelName:Ae.av,gradFunc:e=>({x:()=>(0,fn.P)(e)})},$r={kernelName:Ae.iW,gradFunc:e=>({x:()=>(0,fn.P)(e)})},Cr={kernelName:Ae.r7,gradFunc:e=>({x:()=>(0,fn.P)(e)})},Sr=n(636),Tr={kernelName:Ae.J$,inputsToSave:["x"],gradFunc:(e,t,n)=>{var[t]=t;const r=n["alpha"],a=(0,Sr.p)(t,0);return{x:()=>(0,Pn.a)(a,e,(0,Jt.d)(e,r))}}},Er={kernelName:Ae.kU,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>(0,nn.h)(e,(0,vn.I)(n,1))}}},Rr={kernelName:Ae.Zb,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>(0,nn.h)(e,(0,pe.p)(n,"float32"))}}},Dr={kernelName:Ae.qC,inputsToSave:[],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r]=e,a=n["axis"];return{logits:()=>{var e=(0,ur.Q)(r);return(0,sn.l)(t,(0,Jt.d)((0,pn.S)(t,a,!0),e))}}}};const Ar=(0,Fe.op)({localResponseNormalizationBackprop_:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e,t,n,r=5,a=1,o=1,s=.5){return h.BV.runKernel(Ae.Hh,{x:e,y:t,dy:n},{depthRadius:r,bias:a,alpha:o,beta:s})}});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
var _r={kernelName:Ae.eZ,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const[r,a]=t,{depthRadius:o,bias:s,alpha:i,beta:u}=n;return{x:()=>Ar(r,a,e,o,s,i,u)}}},Or=n(6477);
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Fr(e,t,n,r){return t.rank<n.rank&&(t=(0,cn.X)(t,ut.rv(t.shape,r))),e.rank<n.rank&&(e=(0,cn.X)(e,ut.rv(e.shape,r))),{x:()=>{return(0,Jt.d)(e,(0,pe.p)((0,Or.D)(n,t),e.dtype))}}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
var Br={kernelName:Ae.Yo,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{var r=n["reductionIndices"],n=t[0];const a=Fr(e,t[1],n,C.EC(r,n.shape));return{x:()=>a.x()}}},Pr=n(6573),Mr={kernelName:Ae.BM,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t;return{a:()=>(0,Jt.d)(e,(0,pe.p)((0,On.b)(n,r),"float32")),b:()=>(0,Jt.d)(e,(0,pe.p)((0,Pr.d)(n,r),"float32"))}}};const Lr=(0,Fe.op)({maxPool3dGrad_:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e,t,n,r,a,o=[1,1,1],s,i){e=(0,Oe._1)(e,"dy","maxPool3dGrad"),t=(0,Oe._1)(t,"input","maxPool3dGrad"),n=(0,Oe._1)(n,"output","maxPool3dGrad");let u=e,l=t,c=n,p=!1;return 4===t.rank&&(p=!0,u=(0,cn.X)(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]),l=(0,cn.X)(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]),c=(0,cn.X)(n,[1,n.shape[0],n.shape[1],n.shape[2],n.shape[3]])),C.hu(5===u.rank,()=>"Error in maxPool3dGrad: dy must be rank 5 but got rank "+`${u.rank}.`),C.hu(5===l.rank,()=>"Error in maxPool3dGrad: input must be rank 5 but got rank "+`${l.rank}.`),C.hu(5===c.rank,()=>"Error in maxPool3dGrad: output must be rank 5 but got rank "+`${c.rank}.`),C.hu(dt.jT(a,o),()=>"Error in maxPool3dGrad: Either strides or dilations "+`must be 1. Got strides ${a} and dilations '${o}'`),null!=i&&C.hu(C.GN(s),()=>"Error in maxPool3dGrad: pad must be an integer when "+`using, dimRoundingMode ${i} but got pad ${s}.`),n={dy:u,input:l,output:c},r=h.BV.runKernel(Ae.OU,n,{filterSize:r,strides:a,dilations:o,pad:s,dimRoundingMode:i}),p?(0,cn.X)(r,[r.shape[1],r.shape[2],r.shape[3],r.shape[4]]):r}});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
var Vr={kernelName:Ae.OA,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const[r,a]=t,{filterSize:o,strides:s,dilations:i,pad:u,dimRoundingMode:l}=n,c=null==i?[1,1,1]:i;return{x:()=>Lr(e,r,a,o,s,c,u,l)}}};const Ur=(0,Fe.op)({maxPoolGrad_:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e,t,n,r,a,o,s){const i=(0,Oe._1)(e,"dy","maxPoolGrad"),u=(0,Oe._1)(t,"input","maxPoolGrad");return n=(0,Oe._1)(n,"output","maxPoolGrad"),C.hu(u.rank===i.rank,()=>`Rank of input (${u.rank}) does not match rank of dy `+`(${i.rank})`),C.hu(4===i.rank,()=>"Error in maxPoolGrad: dy must be rank 4 but got rank "+`${i.rank}.`),C.hu(4===u.rank,()=>"Error in maxPoolGrad: input must be rank 4 but got rank "+`${u.rank}.`),null!=s&&C.hu(C.GN(o),()=>"Error in maxPoolGrad: pad must be an integer when using, "+`dimRoundingMode ${s} but got pad ${o}.`),n={dy:i,input:u,output:n},h.BV.runKernel(Ae.OV,n,{filterSize:r,strides:a,pad:o,dimRoundingMode:s})}});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
var Wr={kernelName:Ae.mT,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const[r,a]=t,{filterSize:o,strides:s,pad:i}=n;return{x:()=>Ur(e,r,a,o,s,i)}}},zr=n(4917),Gr={kernelName:Ae.q2,inputsToSave:["x"],gradFunc:(n,e,t)=>{const[r]=e;var t=t["axis"];const a=C.EC(t,r.shape);t=(0,ut.kz)(r.shape,a)[1];const o=C.NA(t);return{x:()=>{const t=r.shape.slice();a.forEach(e=>{t[e]=1});var e=(0,cn.X)(n,t);return(0,nn.h)((0,Jt.d)(e,(0,zr.i)(r.shape,"float32")),o)}}}},Hr={kernelName:Ae.c1,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{var r=n["axis"],[n,t]=t;const a=Fr(e,t,n,C.EC(r,n.shape));return{x:()=>a.x()}}},jr={kernelName:Ae.q8,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t;return{a:()=>(0,Jt.d)(e,(0,pe.p)((0,Fn.z)(n,r),"float32")),b:()=>(0,Jt.d)(e,(0,pe.p)((0,Sr.p)(n,r),"float32"))}}},Xr=n(2676),qr={kernelName:Ae.jQ,inputsToSave:["x"],gradFunc:(e,t,n)=>{const r=t[0],a=n["paddings"],o=a.map(e=>e[0]);return{x:()=>(0,Xr.t)(e,o,r.shape)}}},Kr=n(6943),Zr={kernelName:Ae.Vb,inputsToSave:["a","b"],gradFunc:(n,e)=>{const[r,a]=e,o=(0,lt.$N)(r.shape,a.shape);return{a:()=>{var e=(0,lt.RR)(r.shape,o);return 0<e.length?(0,cn.X)((0,pn.S)(n,e),r.shape):n},b:()=>{var e=(0,Jt.d)(n,(0,rn.W)((0,Kr.G)((0,nn.h)(r,a)))),t=(0,lt.RR)(a.shape,o);return 0<t.length?(0,cn.X)((0,pn.S)(e,t),a.shape):e}}}},Yr={kernelName:Ae.wY,inputsToSave:["a","b"],gradFunc:(n,e)=>{const[r,a]=e,o=(0,lt.$N)(r.shape,a.shape);return{a:()=>{var e=(0,Jt.d)(n,(0,pe.p)(a,"float32")),t=(0,lt.RR)(r.shape,o);return 0<t.length?(0,cn.X)((0,pn.S)(e,t),r.shape):e},b:()=>{var e=(0,Jt.d)(n,(0,pe.p)(r,"float32")),t=(0,lt.RR)(a.shape,o);return 0<t.length?(0,cn.X)((0,pn.S)(e,t),a.shape):e}}}},Qr={kernelName:Ae.ku,gradFunc:e=>({x:()=>(0,rn.W)(e)})},Jr={kernelName:Ae.we,inputsToSave:["indices"],gradFunc:(e,t)=>{const n=t[0];return{indices:()=>(0,it.l)(n.shape,"float32")}}},ea={kernelName:Ae.qW,gradFunc:e=>({x:()=>(0,fn.P)(e)})},ta=n(4136),na={kernelName:Ae.Qi,saveAllInputs:!0,gradFunc:(e,t,n)=>{var n=n["axis"];const r=(0,ta.H)(e,n);return r.map(e=>()=>e)}},ra={kernelName:Ae.ly,inputsToSave:["x"],gradFunc:(e,t,n)=>{const r=t[0],a=n["paddings"],o=a.map(e=>e[0]);return{x:()=>(0,Xr.t)(e,o,r.shape)}}},aa=n(2597),oa=n(3453),sa={kernelName:Ae.pe,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:(n,e)=>{const[t,r,a]=e,o=t,s=r,i=lt.$N(o.shape,s.shape);return{a:()=>{var e=(0,pe.p)(s,"float32");let t=(0,Jt.d)(n,(0,Jt.d)(e,(0,oa.s)(o,(0,sn.l)(e,(0,st.i)(1)))));e=lt.RR(o.shape,i);return 0<e.length&&(t=(0,pn.S)(t,e)),(0,cn.X)(t,o.shape)},b:()=>{var e=(0,Sr.p)(o,0),e=(0,Pn.a)(e,(0,aa.c)(o),(0,fn.P)(o));let t=(0,Jt.d)(n,(0,Jt.d)(a,e));e=lt.RR(s.shape,i);return 0<e.length&&(t=(0,pn.S)(t,e)),(0,cn.X)(t,s.shape)}}}},ia={kernelName:Ae.o0,inputsToSave:["x","alpha"],gradFunc:(n,e)=>{const[r,a]=e,o=(0,Sr.p)(r,0);return{x:()=>(0,Pn.a)(o,n,(0,Jt.d)(n,a)),alpha:()=>{let e=(0,Pn.a)(o,(0,fn.P)(n),(0,Jt.d)(n,r));var t=(0,lt.RR)(a.shape,n.shape);return 0<t.length&&(e=(0,pn.S)(e,t)),(0,cn.X)(e,a.shape)}}}},ua={kernelName:Ae.oH,inputsToSave:["a","b"],gradFunc:(n,e)=>{const[r,a]=e,o=lt.$N(r.shape,a.shape);return{a:()=>{var e=(0,nn.h)(n,(0,pe.p)(a,"float32")),t=lt.RR(r.shape,o);return 0<t.length?(0,cn.X)((0,pn.S)(e,t),r.shape):e},b:()=>{let e=(0,Jt.d)(n,(0,pe.p)(r,"float32"));var t=lt.RR(a.shape,o);0<t.length&&(e=(0,cn.X)((0,pn.S)(e,t),a.shape));t=(0,on.h)(a);return(0,rn.W)((0,nn.h)(e,(0,pe.p)(t,"float32")))}}}},la={kernelName:Ae.$H,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>(0,nn.h)(e,(0,rn.W)((0,on.h)(n)))}}},ca={kernelName:Ae.Sb,inputsToSave:["x"],gradFunc:(e,t)=>{var[t]=t;const n=(0,Jt.d)((0,Fn.z)(t,6),(0,en.N)(t));return{x:()=>(0,Jt.d)(e,(0,pe.p)(n,"float32"))}}},pa={kernelName:Ae.qk,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>(0,Jt.d)(e,(0,pe.p)((0,en.N)(n),"float32"))}}},da={kernelName:Ae.HZ,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>(0,cn.X)(e,n.shape)}}},ha={kernelName:Ae._Y,inputsToSave:["images"],gradFunc:(e,t,n)=>{var[t]=t;const r={dy:e,images:t};return{images:()=>h.BV.runKernel(Ae.zb,r,n)}}},fa={kernelName:Ae.dp,inputsToSave:["images"],gradFunc:(e,t,n)=>{var[t]=t;const r={dy:e,images:t};return{images:()=>h.BV.runKernel(Ae.Hm,r,n)}}},ma=n(7486),ga={kernelName:Ae.mK,gradFunc:(e,t,n)=>{var n=n["dims"];const r=(0,C.EC)(n,e.shape);return{x:()=>(0,ma.G)(e,r)}}},ya={kernelName:Ae.e0,gradFunc:e=>({x:()=>(0,fn.P)(e)})},va={kernelName:Ae.bV,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>(0,rn.W)((0,nn.h)(e,(0,Jt.d)((0,oa.s)(n,1.5),2)))}}},xa=n(8651),ba={kernelName:Ae.Ph,inputsToSave:["condition"],gradFunc:(e,t)=>{const[n]=t;return{condition:()=>(0,pe.p)((0,fn.P)(n),"float32"),t:()=>(0,Jt.d)(e,(0,pe.p)(n,e.dtype)),e:()=>(0,Jt.d)(e,(0,pe.p)((0,xa.h)(n),e.dtype))}}},wa={kernelName:Ae.oF,inputsToSave:["x"],gradFunc:(r,e)=>{const[a]=e;return{x:()=>{var e=(0,Sr.p)(a,(0,st.i)(0)),t=(0,st.i)(Nt),n=(0,st.i)($t),n=(0,Jt.d)(r,n),t=(0,Jt.d)((0,Jt.d)(r,t),(0,ur.Q)((0,pe.p)(a,"float32")));return(0,Pn.a)(e,n,t)}}}},ka={kernelName:Ae.a5,outputsToSave:[!0],gradFunc:(e,t)=>{const[n]=t;return{x:()=>(0,Jt.d)(e,(0,Jt.d)(n,(0,sn.l)((0,st.i)(1),n)))}}},Ia={kernelName:Ae.i5,gradFunc:e=>({x:()=>(0,fn.P)(e)})},Na=n(173),$a={kernelName:Ae.RQ,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>(0,Jt.d)((0,Na.m)((0,pe.p)(n,"float32")),e)}}},Ca=n(2699),Sa={kernelName:Ae.w3,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>(0,Jt.d)((0,Ca.f)((0,pe.p)(n,"float32")),e)}}},Ta=n(9682),Ea={kernelName:Ae.p2,inputsToSave:["x"],gradFunc:(t,e,n)=>{var[r]=e,{begin:e,size:n}=n,a=r.shape,[o,s]=et(r,e,n);const i=[];for(let e=0;e<t.rank;e++)i.push([o[e],a[e]-o[e]-s[e]]);return{x:()=>(0,Ta.v)(t,i)}}},Ra={kernelName:Ae.Gc,outputsToSave:[!0],gradFunc:(e,t,n)=>{const[r]=t,a=n["dim"],o=(0,Jt.d)(e,r);return{logits:()=>(0,sn.l)(o,(0,Jt.d)((0,pn.S)(o,[a],!0),r))}}},Da=n(625),Aa={kernelName:Ae.MR,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>(0,Jt.d)(e,(0,Da.X)(n))}}},_a=n(8441),Oa={kernelName:Ae.TQ,gradFunc:(e,t,n)=>{const{blockShape:r,paddings:a}=n;return{x:()=>(0,_a.E)(e,r,a)}}},Fa=n(6884),Ba={kernelName:Ae.L8,gradFunc:(e,t,n)=>{const r=n["axis"];return{x:()=>(0,Fa.z)(e,r)}}},Pa={kernelName:Ae.FK,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>(0,nn.h)(e,(0,Jt.d)((0,an._)((0,pe.p)(n,"float32")),2))}}},Ma={kernelName:Ae.bK,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>(0,Jt.d)(e,(0,Jt.d)((0,pe.p)(n,"float32"),2))}}},La={kernelName:Ae._t,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,a=(0,st.i)(2);return{a:()=>(0,Jt.d)(e,(0,Jt.d)(a,(0,sn.l)(n,r))),b:()=>(0,Jt.d)(e,(0,Jt.d)(a,(0,sn.l)(r,n)))}}},Va={kernelName:Ae.h8,gradFunc:e=>({x:()=>(0,fn.P)(e)})},t={kernelName:Ae.Tr,inputsToSave:["a","b"],gradFunc:(n,e)=>{const[r,a]=e,o=lt.$N(r.shape,a.shape);return{a:()=>{let e=n;var t=lt.RR(r.shape,o);return 0<t.length&&(e=(0,pn.S)(e,t)),(0,cn.X)(e,r.shape)},b:()=>{let e=n;var t=lt.RR(a.shape,o);return 0<t.length&&(e=(0,pn.S)(e,t)),(0,cn.X)((0,rn.W)(e),a.shape)}}}},V={kernelName:Ae.GB,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,a=r.shape.slice();var n=n["axis"];const o=(0,C.EC)(n,r.shape);o.forEach(e=>{a[e]=1});e=(0,cn.X)(e,a);const s=(0,Jt.d)(e,(0,zr.i)(r.shape,"float32"));return{x:()=>s}}},Y={kernelName:Ae.sE,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>(0,nn.h)(e,(0,on.h)((0,Na.m)(n)))}}},ce={kernelName:Ae.MI,outputsToSave:[!0],gradFunc:(e,t)=>{const[n]=t;return{x:()=>(0,Jt.d)((0,sn.l)((0,st.i)(1),(0,on.h)(n)),e)}}},de={kernelName:Ae.n9,inputsToSave:["x"],gradFunc:(o,e,t)=>{const[s]=e,i=t["reps"];return{x:()=>{let a=(0,fn.P)(s);if(1===s.rank)for(let e=0;e<i[0];++e)a=(0,vn.I)(a,(0,Xr.t)(o,[e*s.shape[0]],[s.shape[0]]));else if(2===s.rank)for(let t=0;t<i[0];++t)for(let e=0;e<i[1];++e)a=(0,vn.I)(a,(0,Xr.t)(o,[t*s.shape[0],e*s.shape[1]],[s.shape[0],s.shape[1]]));else if(3===s.rank)for(let n=0;n<i[0];++n)for(let t=0;t<i[1];++t)for(let e=0;e<i[2];++e)a=(0,vn.I)(a,(0,Xr.t)(o,[n*s.shape[0],t*s.shape[1],e*s.shape[2]],[s.shape[0],s.shape[1],s.shape[2]]));else{if(4!==s.rank)throw new Error("Gradient for tile operation is not implemented for rank-"+`${s.rank} tensors yet.`);for(let r=0;r<i[0];++r)for(let n=0;n<i[1];++n)for(let t=0;t<i[2];++t)for(let e=0;e<i[3];++e)a=(0,vn.I)(a,(0,Xr.t)(o,[r*s.shape[0],n*s.shape[1],t*s.shape[2],e*s.shape[3]],[s.shape[0],s.shape[1],s.shape[2],s.shape[3]]))}return a}}}},fe={kernelName:Ae.G3,gradFunc:(e,t,n)=>{var n=n["perm"];const r=ut.LJ(n);return{x:()=>(0,tr.p)(e,r)}}},Ua=n(2991),$e={kernelName:Ae.To,gradFunc:(e,t,n)=>{const r=n["axis"];return{value:()=>(0,Ua.k)(e,r)}}},Wa=n(1300),za=n(4926),Ga=n(632);for(const Es of[tn,un,ln,dn,hn,mn,gn,yn,xn,bn,wn,kn,Nn,Cn,Tn,Rn,Dn,An,_n,Mn,Ln,Un,jn,Gn,Kn,Yn,Jn,nr,or,sr,ua,ir,lr,cr,pr,dr,fr,hr,yr,xr,kr,Ir,Nr,$r,Cr,Tr,Er,Rr,Dr,_r,Br,Br,Mr,Vr,Wr,Gr,Hr,jr,qr,Zr,Yr,Qr,Jr,ea,na,ra,ra,sa,ia,la,ca,pa,da,ha,fa,ga,ya,va,ba,wa,ka,Ia,$a,Sa,Ea,Ra,Aa,Oa,Oa,Ba,Ba,Pa,La,Ma,Va,t,V,Y,ce,de,fe,$e,{kernelName:Ae.Qv,inputsToSave:["segmentIds"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>function(e,t){var n=(0,Ga.g)(t,(0,fn.P)(t)),n=(0,za.I)(e,n);let r=(0,On.b)(t,(0,st.i)(0,"int32"));var a=n.rank-r.rank;for(let e=0;e<a;++e)r=(0,Wa.d)(r,e+1);r=(0,Bn.H)(r,(0,zr.i)(n.shape,"bool"));t=(0,fn.P)(n);return(0,Pn.a)(r,n,t)}(e,n)}}},{kernelName:Ae.Ru,gradFunc:e=>({x:()=>(0,fn.P)(e)})}])(0,_e.Li)(Es);var Ha=n(6235);
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.abs=function(){return this.throwIfDisposed(),(0,Ha.W)(this)};var ja=n(7839);
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.acos=function(){return this.throwIfDisposed(),(0,ja.K)(this)};var Xa=n(1470);
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.acosh=function(){return this.throwIfDisposed(),(0,Xa._)(this)};var qa=n(4513),Ka=n(5228),Za=n(5265);const Ya=(0,Fe.op)({addStrict_:
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e,t){return(0,ot.MX)("strict variants of ops have been deprecated and will be removed in future"),e=(0,Oe._1)(e,"a","addStrict"),t=(0,Oe._1)(t,"b","addStrict"),C.k5(e.shape,t.shape,"Error in addStrict: "),(0,vn.I)(e,t)}}),Qa=(0,Fe.op)({divStrict_:function(e,t){return(0,ot.MX)("strict variants of ops have been deprecated and will be removed in future"),e=(0,Oe._1)(e,"a","div"),t=(0,Oe._1)(t,"b","div"),C.k5(e.shape,t.shape,"Error in divideStrict: "),(0,nn.h)(e,t)}}),Ja=(0,Fe.op)({maximumStrict_:function(e,t){return(0,ot.MX)("strict variants of ops have been deprecated and will be removed in future"),e=(0,Oe._1)(e,"a","maximumStrict"),t=(0,Oe._1)(t,"b","maximumStrict"),C.k5(e.shape,t.shape,"Error in maximumStrict: "),(0,Ga.g)(e,t)}}),eo=(0,Fe.op)({minimumStrict_:function(e,t){return(0,ot.MX)("strict variants of ops have been deprecated and will be removed in future"),e=(0,Oe._1)(e,"a","minimumStrict"),t=(0,Oe._1)(t,"b","minimumStrict"),C.k5(e.shape,t.shape,"Error in minimumStrict: "),(0,qa.L)(e,t)}}),to=(0,Fe.op)({modStrict_:function(e,t){return(0,ot.MX)("strict variants of ops have been deprecated and will be removed in future"),e=(0,Oe._1)(e,"a","modStrict"),t=(0,Oe._1)(t,"b","modStrict"),C.k5(e.shape,t.shape,"Error in modStrict: "),(0,Ka.w)(e,t)}}),no=(0,Fe.op)({mulStrict_:function(e,t){return(0,ot.MX)("strict variants of ops have been deprecated and will be removed in future"),e=(0,Oe._1)(e,"a","mul"),t=(0,Oe._1)(t,"b","mul"),C.k5(e.shape,t.shape,"Error in multiplyStrict: "),(0,Jt.d)(e,t)}}),ro=(0,Fe.op)({powStrict_:function(e,t){return(0,ot.MX)("strict variants of ops have been deprecated and will be removed in future"),C.k5(e.shape,t.shape,"Error in powStrict: "),(0,oa.s)(e,t)}}),ao=(0,Fe.op)({squaredDifferenceStrict_:function(e,t){return(0,ot.MX)("strict variants of ops have been deprecated and will be removed in future"),e=(0,Oe._1)(e,"a","squaredDifferenceStrict"),t=(0,Oe._1)(t,"b","squaredDifferenceStrict"),C.k5(e.shape,t.shape,"Error in squaredDifferenceStrict: "),(0,Za.$)(e,t)}}),oo=(0,Fe.op)({subStrict_:function(e,t){return(0,ot.MX)("strict variants of ops have been deprecated and will be removed in future"),e=(0,Oe._1)(e,"a","subStrict"),t=(0,Oe._1)(t,"b","subStrict"),C.k5(e.shape,t.shape,"Error in subStrict: "),(0,sn.l)(e,t)}});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.addStrict=function(e){return this.throwIfDisposed(),Ya(this,e)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.add=function(e){return this.throwIfDisposed(),(0,vn.I)(this,e)};var so=n(781);
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.all=function(e,t){return this.throwIfDisposed(),(0,so.$)(this,e,t)};var io=n(2998);
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.any=function(e,t){return this.throwIfDisposed(),(0,io.Y)(this,e,t)};var uo=n(47);
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.argMax=function(e){return this.throwIfDisposed(),(0,uo.N)(this,e)};var lo=n(7394);
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.argMin=function(e){return this.throwIfDisposed(),(0,lo.v)(this,e)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.asScalar=function(){return this.throwIfDisposed(),(0,C.hu)(1===this.size,()=>"The array must have only 1 element."),(0,cn.X)(this,[])},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.asType=function(e){return this.throwIfDisposed(),(0,pe.p)(this,e)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.as1D=function(){return this.throwIfDisposed(),(0,cn.X)(this,[this.size])},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.as2D=function(e,t){return this.throwIfDisposed(),(0,cn.X)(this,[e,t])},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.as3D=function(e,t,n){return this.throwIfDisposed(),(0,cn.X)(this,[e,t,n])},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.as4D=function(e,t,n,r){return this.throwIfDisposed(),(0,cn.X)(this,[e,t,n,r])},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.as5D=function(e,t,n,r,a){return this.throwIfDisposed(),(0,cn.X)(this,[e,t,n,r,a])};var co=n(2421);
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.asin=function(){return this.throwIfDisposed(),(0,co.Z)(this)};var po=n(1891);
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.asinh=function(){return this.throwIfDisposed(),(0,po.V)(this)};var ho=n(7037);
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.atan=function(){return this.throwIfDisposed(),(0,ho.z)(this)};var fo=n(9812);
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.atan2=function(e){return this.throwIfDisposed(),(0,fo.f)(this,e)};var mo=n(369);
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.atanh=function(){return this.throwIfDisposed(),(0,mo.C)(this)};var go=n(5176);
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.avgPool=function(e,t,n,r){return this.throwIfDisposed(),(0,go.w)(this,e,t,n,r)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.batchToSpaceND=function(e,t){return this.throwIfDisposed(),(0,_a.E)(this,e,t)};var yo=n(7505);
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.batchNorm=function(e,t,n,r,a){return this.throwIfDisposed(),(0,yo.t)(this,e,t,n,r,a)};var vo=n(8247);
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.broadcastTo=function(e){return this.throwIfDisposed(),(0,vo.U)(this,e)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.cast=function(e){return this.throwIfDisposed(),(0,pe.p)(this,e)};var xo=n(6825);
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.ceil=function(){return this.throwIfDisposed(),(0,xo.m)(this)};var bo=n(2279);
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.clipByValue=function(e,t){return this.throwIfDisposed(),(0,bo.i)(this,e,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.concat=function(e,t){return this.throwIfDisposed(),e instanceof he.es&&(e=[e]),(0,Fa.z)([this,...e],t)};var wo=n(1355);
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.conv1d=function(e,t,n,r,a,o){return this.throwIfDisposed(),(0,wo.P)(this,e,t,n,r,a,o)};var ko=n(1405);
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.conv2dTranspose=function(e,t,n,r,a){return this.throwIfDisposed(),(0,ko.b)(this,e,t,n,r,a)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.conv2d=function(e,t,n,r,a,o){return this.throwIfDisposed(),(0,Hn.T)(this,e,t,n,r,a,o)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.cos=function(){return this.throwIfDisposed(),(0,Na.m)(this)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.cosh=function(){return this.throwIfDisposed(),(0,Ca.f)(this)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.cumsum=function(e,t,n){return this.throwIfDisposed(),(0,er.z)(this,e,t,n)};var Io=n(9112);
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.depthToSpace=function(e,t){return this.throwIfDisposed(),(0,Io.n)(this,e,t)};var No=n(4718);
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.depthwiseConv2D=function(e,t,n,r,a,o){return(0,ot.MX)("depthwiseConv2D is deprecated, use depthwiseConv2d instead"),this.throwIfDisposed(),(0,No.B)(this,e,t,n,r,a,o)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.depthwiseConv2d=function(e,t,n,r,a,o){return this.throwIfDisposed(),(0,No.B)(this,e,t,n,r,a,o)};var $o=n(557);
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.dilation2d=function(e,t,n,r,a){return this.throwIfDisposed(),(0,$o.W)(this,e,t,n,r,a)};var Co=n(9322);
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.divNoNan=function(e){return this.throwIfDisposed(),(0,Co.N)(this,e)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.divStrict=function(e){return this.throwIfDisposed(),Qa(this,e)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.div=function(e){return this.throwIfDisposed(),(0,nn.h)(this,e)};const So=(0,Fe.op)({dot_:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e,t){const n=(0,Oe._1)(e,"t1","dot"),r=(0,Oe._1)(t,"t2","dot");C.hu(!(1!==n.rank&&2!==n.rank||1!==r.rank&&2!==r.rank),()=>"Error in dot: inputs must all be rank 1 or 2, but got ranks "+`${n.rank} and ${r.rank}.`);const a=1===n.rank?n.size:n.shape[1],o=1===r.rank?r.size:r.shape[0];if(C.hu(a===o,()=>"Error in dot: inner dimensions of inputs must match, but got "+`${a} and ${o}.`),1===n.rank&&1===r.rank){var s=(0,cn.X)(n,[1,-1]),i=(0,cn.X)(r,[-1,1]),s=(0,Sn.O)(s,i);return(0,cn.X)(s,[])}if(1===n.rank&&2===r.rank){i=(0,cn.X)(n,[1,-1]),s=(0,cn.X)(r,[r.shape[0],r.shape[1]]),s=(0,Sn.O)(i,s);return(0,cn.X)(s,[s.size])}if(2!==n.rank||1!==r.rank)return u=(0,cn.X)(r,[r.shape[0],r.shape[1]]),(0,Sn.O)(n,u);var u=(0,cn.X)(r,[-1,1]),u=(0,Sn.O)(n,u);return(0,cn.X)(u,[u.size])}});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.dot=function(e){return this.throwIfDisposed(),So(this,e)};var To=n(3233);
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.elu=function(){return this.throwIfDisposed(),(0,To.p)(this)};var Eo=n(6500);const Ro=(0,Fe.op)({equalStrict_:function(e,t){return(0,ot.MX)("strict variants of ops have been deprecated and will be removed in future"),e=(0,Oe._1)(e,"a","equalStrict"),t=(0,Oe._1)(t,"b","equalStrict"),(0,C.k5)(e.shape,t.shape,"Error in equalStrict: "),(0,Or.D)(e,t)}}),Do=(0,Fe.op)({greaterEqualStrict_:function(e,t){return(0,ot.MX)("strict variants of ops have been deprecated and will be removed in future"),e=(0,Oe._1)(e,"a","greaterEqualStrict"),t=(0,Oe._1)(t,"b","greaterEqualStrict"),(0,C.k5)(e.shape,t.shape,"Error in greaterEqualStrict: "),(0,On.b)(e,t)}}),Ao=(0,Fe.op)({greaterStrict_:function(e,t){return(0,ot.MX)("strict variants of ops have been deprecated and will be removed in future"),e=(0,Oe._1)(e,"a","greaterStrict"),t=(0,Oe._1)(t,"b","greaterStrict"),(0,C.k5)(e.shape,t.shape,"Error in greaterStrict: "),(0,Sr.p)(e,t)}}),_o=(0,Fe.op)({lessEqualStrict_:function(e,t){return(0,ot.MX)("strict variants of ops have been deprecated and will be removed in future"),e=(0,Oe._1)(e,"a","lessEqualStrict"),t=(0,Oe._1)(t,"b","lessEqualStrict"),(0,C.k5)(e.shape,t.shape,"Error in lessEqualStrict: "),(0,Fn.z)(e,t)}}),Oo=(0,Fe.op)({lessStrict_:function(e,t){return(0,ot.MX)("strict variants of ops have been deprecated and will be removed in future"),e=(0,Oe._1)(e,"a","lessStrict"),t=(0,Oe._1)(t,"b","lessStrict"),(0,C.k5)(e.shape,t.shape,"Error in lessStrict: "),(0,Pr.d)(e,t)}}),Fo=(0,Fe.op)({notEqualStrict_:
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e,t){return(0,ot.MX)("strict variants of ops have been deprecated and will be removed in future"),e=(0,Oe._1)(e,"a","notEqualStrict"),t=(0,Oe._1)(t,"b","notEqualStrict"),(0,C.k5)(e.shape,t.shape,"Error in notEqualStrict: "),(0,Eo.Q)(e,t)}});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.equalStrict=function(e){return this.throwIfDisposed(),Ro(this,e)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.equal=function(e){return this.throwIfDisposed(),(0,Or.D)(this,e)};var Bo=n(4650);
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.erf=function(){return this.throwIfDisposed(),(0,Bo.q)(this)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.exp=function(){return this.throwIfDisposed(),(0,ur.Q)(this)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.expandDims=function(e){return this.throwIfDisposed(),(0,Wa.d)(this,e)};var Po=n(3426);
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.expm1=function(){return this.throwIfDisposed(),(0,Po.t)(this)};var Mo=n(7020);
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.fft=function(){return this.throwIfDisposed(),(0,Mo.k)(this)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.flatten=function(){return this.throwIfDisposed(),(0,cn.X)(this,[this.size])},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.floor=function(){return this.throwIfDisposed(),(0,Kr.G)(this)};var Lo=n(9165);
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.floorDiv=function(e){return this.throwIfDisposed(),(0,Lo.q)(this,e)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.gather=function(e,t){return this.throwIfDisposed(),(0,za.I)(this,e,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.greaterEqualStrict=function(e){return this.throwIfDisposed(),Do(this,e)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.greaterEqual=function(e){return this.throwIfDisposed(),(0,On.b)(this,e)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.greaterStrict=function(e){return this.throwIfDisposed(),Ao(this,e)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.greater=function(e){return this.throwIfDisposed(),(0,Sr.p)(this,e)};var Vo=n(8447);
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.ifft=function(){return this.throwIfDisposed(),(0,Vo.S)(this)};var Uo=n(4415);
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.irfft=function(){return this.throwIfDisposed(),(0,Uo.w)(this)};const Wo=(0,Fe.op)({isFinite_:
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e){return e=(0,Oe._1)(e,"x","isFinite"),h.BV.runKernel(Ae.av,{x:e})}});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.isFinite=function(){return this.throwIfDisposed(),Wo(this)};const zo=(0,Fe.op)({isInf_:
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e){return e=(0,Oe._1)(e,"x","isInf"),h.BV.runKernel(Ae.iW,{x:e})}});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.isInf=function(){return this.throwIfDisposed(),zo(this)};const Go=(0,Fe.op)({isNaN_:
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e){return e=(0,Oe._1)(e,"x","isNaN"),h.BV.runKernel(Ae.r7,{x:e})}});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.isNaN=function(){return this.throwIfDisposed(),Go(this)};var Ho=n(9133);
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.leakyRelu=function(e){return this.throwIfDisposed(),(0,Ho.h)(this,e)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.lessEqualStrict=function(e){return this.throwIfDisposed(),_o(this,e)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.lessEqual=function(e){return this.throwIfDisposed(),(0,Fn.z)(this,e)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.lessStrict=function(e){return this.throwIfDisposed(),Oo(this,e)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.less=function(e){return this.throwIfDisposed(),(0,Pr.d)(this,e)};var jo=n(9648);
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.localResponseNormalization=function(e,t,n,r){return this.throwIfDisposed(),(0,jo.G)(this,e,t,n,r)};var Xo=n(633),qo=n(3694);const Ko=(0,Fe.op)({logSigmoid_:
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e){e=(0,Oe._1)(e,"x","logSigmoid");const t=(0,Xo.cb)(t=>{return{value:(0,rn.W)((0,qo.W)((0,rn.W)(t))),gradFunc:e=>{return(0,Jt.d)(e,(0,Da.X)((0,rn.W)(t)))}}});return t(e)}});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.logSigmoid=function(){return this.throwIfDisposed(),Ko(this)};var Zo=n(1510);
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.logSoftmax=function(e){return this.throwIfDisposed(),(0,Zo.C)(this,e)};var Yo=n(1391);
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.logSumExp=function(e,t){return this.throwIfDisposed(),(0,Yo.l)(this,e,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.log=function(){return this.throwIfDisposed(),(0,aa.c)(this)};var Qo=n(7474);
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.log1p=function(){return this.throwIfDisposed(),(0,Qo.K)(this)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.logicalAnd=function(e){return this.throwIfDisposed(),(0,Bn.H)(this,e)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.logicalNot=function(){return this.throwIfDisposed(),(0,xa.h)(this)};var Jo=n(5750);
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.logicalOr=function(e){return this.throwIfDisposed(),(0,Jo.K)(this,e)};const es=(0,Fe.op)({logicalXor_:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e,t){var n=(0,Oe._1)(e,"a","logicalXor","bool"),r=(0,Oe._1)(t,"b","logicalXor","bool");return(0,lt.$N)(n.shape,r.shape),(0,Bn.H)((0,Jo.K)(e,t),(0,xa.h)((0,Bn.H)(e,t)))}});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.logicalXor=function(e){return this.throwIfDisposed(),es(this,e)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.matMul=function(e,t,n){return this.throwIfDisposed(),(0,Sn.O)(this,e,t,n)};var ts=n(1174);
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.maxPool=function(e,t,n,r){return this.throwIfDisposed(),(0,ts._)(this,e,t,n,r)};var ns=n(3307);
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.max=function(e,t){return this.throwIfDisposed(),(0,ns.F)(this,e,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.maximumStrict=function(e){return this.throwIfDisposed(),Ja(this,e)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.maximum=function(e){return this.throwIfDisposed(),(0,Ga.g)(this,e)};var rs=n(5130);
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.mean=function(e,t){return this.throwIfDisposed(),(0,rs.J)(this,e,t)};var as=n(5735);
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.min=function(e,t){return this.throwIfDisposed(),(0,as.V)(this,e,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.minimumStrict=function(e){return this.throwIfDisposed(),eo(this,e)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.minimum=function(e){return this.throwIfDisposed(),(0,qa.L)(this,e)};var os=n(1483);
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.mirrorPad=function(e,t){return this.throwIfDisposed(),(0,os.V)(this,e,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.modStrict=function(e){return this.throwIfDisposed(),to(this,e)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.mod=function(e){return this.throwIfDisposed(),(0,Ka.w)(this,e)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.mulStrict=function(e){return this.throwIfDisposed(),no(this,e)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.mul=function(e){return this.throwIfDisposed(),(0,Jt.d)(this,e)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.neg=function(){return this.throwIfDisposed(),(0,rn.W)(this)};var ss=n(3561);
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.norm=function(e,t,n){return this.throwIfDisposed(),(0,ss.K)(this,e,t,n)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.notEqualStrict=function(e){return this.throwIfDisposed(),Fo(this,e)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.notEqual=function(e){return this.throwIfDisposed(),(0,Eo.Q)(this,e)};var is=n(6708);
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.oneHot=function(e,t=1,n=0){return this.throwIfDisposed(),(0,is.l)(this,e,t,n)};var us=n(7846);
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.onesLike=function(){return this.throwIfDisposed(),(0,us.J)(this)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.pad=function(e,t){return this.throwIfDisposed(),(0,Ta.v)(this,e,t)};const ls=(0,Fe.op)({pool_:
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e,t,n,r,a,o){null==a&&(a=[1,1]),null==o&&(o=1),0===r&&(r="valid");let s=c=(0,Oe._1)(e,"x","maxPool"),i=!1;3===c.rank&&(i=!0,s=(0,cn.X)(c,[1,c.shape[0],c.shape[1],c.shape[2]])),C.hu(dt.jT(o,a),()=>"Error in pool: Either strides or dilations must be 1. "+`Got strides ${o} and dilations '${a}'`);var u=[(p=dt.Xw(s.shape,t,o,a,r)).dilationHeight,p.dilationWidth];let l;l="same"===r?function(e,n){const t=e.map((e,t)=>e+(e-1)*(n[t]-1)),r=t.map(e=>e-1),a=r.map(e=>Math.floor(e/2)),o=r.map((e,t)=>e-a[t]);return r.map((e,t)=>[a[t],o[t]])}([p.filterHeight,p.filterWidth],u):[[0,0],[0,0]];var e=1===u[0]&&1===u[1],[c,p]=function(e,t,n){const r=n.map(e=>e[0]),a=n.map(e=>e[1]),o=e.concat(r,a),s=t.map((e,t)=>(e-o[t]%e)%e),i=a.map((e,t)=>e+s[t]),u=t.map((e,t)=>[r[t],i[t]]),l=t.map((e,t)=>[0,s[t]]);return[u,l]}([p.inHeight,p.inWidth],u,l);const d=e?r:"valid",h=e?s:(0,En.f)(s,u,c),f="avg"===n?()=>(0,go.w)(h,t,o,d):()=>(0,ts._)(h,t,o,d);return n=f(),p=e?n:(0,_a.E)(n,u,p),i?(0,cn.X)(p,[p.shape[1],p.shape[2],p.shape[3]]):p}});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.pool=function(e,t,n,r,a){return this.throwIfDisposed(),ls(this,e,t,n,r,a)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.powStrict=function(e){return this.throwIfDisposed(),ro(this,e)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.pow=function(e){return this.throwIfDisposed(),(0,oa.s)(this,e)};var cs=n(8151);
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.prelu=function(e){return this.throwIfDisposed(),(0,cs.A)(this,e)};var ps=n(9451);
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.prod=function(e,t){return this.throwIfDisposed(),(0,ps.W)(this,e,t)};var ds=n(9036);
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.reciprocal=function(){return this.throwIfDisposed(),(0,ds.M)(this)};var hs=n(7409);
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.relu=function(){return this.throwIfDisposed(),(0,hs.U)(this)};var fs=n(3582);
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.relu6=function(){return this.throwIfDisposed(),(0,fs.b)(this)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.reshapeAs=function(e){return this.throwIfDisposed(),(0,cn.X)(this,e.shape)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.reshape=function(e){return this.throwIfDisposed(),(0,cn.X)(this,e)};var ms=n(3305);
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.resizeBilinear=function(e,t,n){return this.throwIfDisposed(),(0,ms.I)(this,e,t,n)};var gs=n(5098);
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.resizeNearestNeighbor=function(e,t,n){return this.throwIfDisposed(),(0,gs.j)(this,e,t,n)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.reverse=function(e){return this.throwIfDisposed(),(0,ma.G)(this,e)};var ys=n(3710);
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.rfft=function(){return this.throwIfDisposed(),(0,ys.Q)(this)};var vs=n(7809);
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.round=function(){return this.throwIfDisposed(),(0,vs.N)(this)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.rsqrt=function(){return this.throwIfDisposed(),(0,mr.b)(this)};var xs=n(5503);
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.selu=function(){return this.throwIfDisposed(),(0,xs.U)(this)};const bs=(0,Fe.op)({separableConv2d_:function(e,t,n,r,a,o=[1,1],s="NHWC"){e=(0,Oe._1)(e,"x","separableConv2d");const i=(0,Oe._1)(t,"depthwiseFilter","separableConv2d"),u=(0,Oe._1)(n,"pointwiseFilter","separableConv2d");let l=e,c=!1;if(3===e.rank&&(c=!0,l=(0,cn.X)(e,[1,e.shape[0],e.shape[1],e.shape[2]])),"NCHW"===s)throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");C.hu(4===l.rank,()=>"Error in separableConv2d: input must be rank 4, but got "+`rank ${l.rank}.`),C.hu(4===i.rank,()=>"Error in separableConv2d: depthwise filter must be rank 4, but "+`got rank ${i.rank}.`),C.hu(4===u.rank,()=>"Error in separableConv2d: pointwise filter must be rank 4, but "+`got rank ${i.rank}.`),C.hu(1===u.shape[0],()=>"Error in separableConv2d: the first dimension of pointwise filter "+` must be 1, but got ${u.shape[0]}.`),C.hu(1===u.shape[1],()=>"Error in separableConv2d: the second dimension of pointwise "+`filter must be 1, but got ${u.shape[1]}.`);const p=i.shape[2],d=i.shape[3];return C.hu(u.shape[2]===p*d,()=>"Error in separableConv2d: the third dimension of pointwise filter "+`must be ${p*d}, `+`but got ${u.shape[2]}.`),o=(0,No.B)(l,i,r,a,s,o),s=(0,Hn.T)(o,u,1,"valid",s),c?(0,cn.X)(s,[s.shape[1],s.shape[2],s.shape[3]]):s}});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.separableConv2d=function(e,t,n,r,a,o){return this.throwIfDisposed(),bs(this,e,t,n,r,a,o)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.sigmoid=function(){return this.throwIfDisposed(),(0,Da.X)(this)};var ws=n(4434);
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.sign=function(){return this.throwIfDisposed(),(0,ws.X)(this)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.sin=function(){return this.throwIfDisposed(),(0,Zn.O)(this)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.sinh=function(){return this.throwIfDisposed(),(0,Qn.R)(this)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.slice=function(e,t){return this.throwIfDisposed(),(0,Xr.t)(this,e,t)};var ks=n(682);
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.softmax=function(e){return this.throwIfDisposed(),(0,ks.X)(this,e)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.softplus=function(){return this.throwIfDisposed(),(0,qo.W)(this)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.spaceToBatchND=function(e,t){return this.throwIfDisposed(),(0,En.f)(this,e,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.split=function(e,t){return this.throwIfDisposed(),(0,Vn.V)(this,e,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.sqrt=function(){return this.throwIfDisposed(),(0,an._)(this)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.square=function(){return this.throwIfDisposed(),(0,on.h)(this)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.squaredDifference=function(e){return this.throwIfDisposed(),(0,Za.$)(this,e)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.squaredDifferenceStrict=function(e){return this.throwIfDisposed(),ao(this,e)};var Is=n(9590);
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.squeeze=function(e){return this.throwIfDisposed(),(0,Is.L)(this,e)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.stack=function(e,t){this.throwIfDisposed();e=e instanceof he.es?[this,e]:[this,...e];return(0,Ua.k)(e,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.step=function(e){return this.throwIfDisposed(),(0,en.N)(this,e)};var Ns=n(5158);
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.stridedSlice=function(e,t,n,r,a,o,s,i){return this.throwIfDisposed(),(0,Ns.N)(this,e,t,n,r,a,o,s,i)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.subStrict=function(e){return this.throwIfDisposed(),oo(this,e)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.sub=function(e){return this.throwIfDisposed(),(0,sn.l)(this,e)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.sum=function(e,t){return this.throwIfDisposed(),(0,pn.S)(this,e,t)};var $s=n(1173);
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.tan=function(){return this.throwIfDisposed(),(0,$s.O)(this)};var Cs=n(1869);
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.tanh=function(){return this.throwIfDisposed(),(0,Cs.A)(this)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.tile=function(e){return this.throwIfDisposed(),(0,gr.G)(this,e)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.toBool=function(){return this.throwIfDisposed(),(0,pe.p)(this,"bool")},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.toFloat=function(){return this.throwIfDisposed(),(0,pe.p)(this,"float32")},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.toInt=function(){return this.throwIfDisposed(),(0,pe.p)(this,"int32")};var Ss=n(3243);
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.topk=function(e,t){return this.throwIfDisposed(),(0,Ss.h)(this,e,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.transpose=function(e){return this.throwIfDisposed(),(0,tr.p)(this,e)};var Ts=n(9608);
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.unique=function(e){return this.throwIfDisposed(),(0,Ts.T)(this,e)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.unsortedSegmentSum=function(e,t){return this.throwIfDisposed(),vr(this,e,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.unstack=function(e){return this.throwIfDisposed(),(0,ta.H)(this,e)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.where=function(e,t){return this.throwIfDisposed(),(0,Pn.a)(e,this,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
he.es.prototype.zerosLike=function(){return this.throwIfDisposed(),(0,fn.P)(this)}},9121:function(e,t,n){"use strict";n.d(t,{SY:function(){return r},VG:function(){return a},Sp:function(){return o},mm:function(){return s},Xz:function(){return i},oT:function(){return u},IK:function(){return l},sJ:function(){return c},aJ:function(){return p},M2:function(){return d},qw:function(){return h},jM:function(){return f},Oy:function(){return m},QC:function(){return g},Jh:function(){return y},RO:function(){return v},_k:function(){return x},IM:function(){return b},XL:function(){return w},zw:function(){return k},zv:function(){return I},Ly:function(){return N},RF:function(){return $},gJ:function(){return C},xn:function(){return S},Zz:function(){return T},yj:function(){return E},Eh:function(){return R},mh:function(){return D},wU:function(){return A},wm:function(){return _},x1:function(){return O},o2:function(){return F},ik:function(){return B},mc:function(){return P},TR:function(){return M},iH:function(){return L},Vc:function(){return V},QR:function(){return U},T0:function(){return W},ci:function(){return z},sL:function(){return G},y7:function(){return H},$w:function(){return j},p4:function(){return X},ek:function(){return q},Vn:function(){return K},oH:function(){return Z},SX:function(){return Y},HE:function(){return Q},Om:function(){return J},hd:function(){return ee},NE:function(){return te},YF:function(){return ne},Y0:function(){return re},vw:function(){return ae},de:function(){return oe},Uy:function(){return se},OR:function(){return ie},je:function(){return ue},sH:function(){return le},qi:function(){return ce},q1:function(){return pe},iZ:function(){return de},Ac:function(){return he},iJ:function(){return fe},Qg:function(){return me},J_:function(){return ge},av:function(){return ye},iW:function(){return ve},r7:function(){return xe},J$:function(){return be},vt:function(){return we},CA:function(){return ke},e7:function(){return Ie},Zb:function(){return Ne},kU:function(){return $e},PY:function(){return Ce},Vf:function(){return Se},MZ:function(){return Te},qC:function(){return Ee},eZ:function(){return Re},Hh:function(){return De},Yo:function(){return Ae},BM:function(){return _e},mT:function(){return Oe},OV:function(){return Fe},OA:function(){return Be},OU:function(){return Pe},vF:function(){return Me},q2:function(){return Le},c1:function(){return Ve},q8:function(){return Ue},jQ:function(){return We},Vb:function(){return ze},NZ:function(){return Ge},wY:function(){return He},ku:function(){return je},yQ:function(){return Xe},uv:function(){return qe},cy:function(){return Ke},W0:function(){return Ze},qW:function(){return Ye},we:function(){return Qe},Qi:function(){return Je},ly:function(){return et},pe:function(){return tt},o0:function(){return nt},Dl:function(){return rt},e6:function(){return at},xJ:function(){return ot},$H:function(){return st},qk:function(){return it},HZ:function(){return ut},dp:function(){return lt},Hm:function(){return ct},_Y:function(){return pt},zb:function(){return dt},Sb:function(){return ht},mK:function(){return ft},e0:function(){return mt},bV:function(){return gt},xQ:function(){return yt},Ph:function(){return vt},oF:function(){return xt},p2:function(){return bt},RQ:function(){return wt},w3:function(){return kt},i5:function(){return It},a5:function(){return Nt},MR:function(){return $t},FK:function(){return Ct},GB:function(){return St},TQ:function(){return Tt},L8:function(){return Et},Gc:function(){return Rt},_t:function(){return Dt},bK:function(){return At},Tr:function(){return _t},D2:function(){return Ot},m2:function(){return Ft},sE:function(){return Bt},MI:function(){return Pt},n9:function(){return Mt},cW:function(){return Lt},G3:function(){return Vt},kp:function(){return Ut},To:function(){return Wt},Qv:function(){return zt},Ru:function(){return Gt},h8:function(){return Ht},eB:function(){return jt},b9:function(){return Xt},us:function(){return qt},_V:function(){return Kt},lu:function(){return Zt}});const r="Abs",a="Acos",o="Acosh",s="Add",i="AddN",u="All",l="Any",c="ArgMax",p="ArgMin",d="Asin",h="Asinh",f="Atan",m="Atanh",g="Atan2",y="AvgPool",v="AvgPoolGrad",x="AvgPool3D",b="AvgPool3DGrad",w="BatchMatMul",k="BatchToSpaceND",I="Bincount",N="BroadcastTo",$="Cast",C="Ceil",S="ClipByValue",T="Complex",E="ComplexAbs",R="Concat",D="Conv2D",A="Conv2DBackpropFilter",_="Conv2DBackpropInput",O="Conv3D",F="Conv3DBackpropFilterV2",B="Conv3DBackpropInputV2",P="Cos",M="Cosh",L="Cumsum",V="CropAndResize",U="DenseBincount",W="DepthToSpace",z="DepthwiseConv2dNative",G="DepthwiseConv2dNativeBackpropFilter",H="DepthwiseConv2dNativeBackpropInput",j="Diag",X="Dilation2D",q="Dilation2DBackpropInput",K="Dilation2DBackpropFilter",Z="RealDiv",Y="Elu",Q="EluGrad",J="Erf",ee="Equal",te="Exp",ne="ExpandDims",re="Expm1",ae="FFT",oe="Fill",se="FlipLeftRight",ie="Floor",ue="FloorDiv",le="FusedBatchNorm",ce="GatherV2",pe="GatherNd",de="Greater",he="GreaterEqual",fe="Identity",me="IFFT",ge="Imag",ye="IsFinite",ve="IsInf",xe="IsNan",be="LeakyRelu",we="Less",ke="LessEqual",Ie="LinSpace",Ne="Log",$e="Log1p",Ce="LogicalAnd",Se="LogicalNot",Te="LogicalOr",Ee="LogSoftmax",Re="LRN",De="LRNGrad",Ae="Max",_e="Maximum",Oe="MaxPool",Fe="MaxPoolGrad",Be="MaxPool3D",Pe="MaxPool3DGrad",Me="MaxPoolWithArgmax",Le="Mean",Ve="Min",Ue="Minimum",We="MirrorPad",ze="Mod",Ge="Multinomial",He="Multiply",je="Neg",Xe="NotEqual",qe="NonMaxSuppressionV3",Ke="NonMaxSuppressionV4",Ze="NonMaxSuppressionV5",Ye="OnesLike",Qe="OneHot",Je="Pack",et="PadV2";const tt="Pow",nt="Prelu",rt="Prod",at="Range",ot="Real",st="Reciprocal",it="Relu",ut="Reshape",lt="ResizeNearestNeighbor",ct="ResizeNearestNeighborGrad",pt="ResizeBilinear",dt="ResizeBilinearGrad",ht="Relu6",ft="Reverse",mt="Round",gt="Rsqrt",yt="ScatterNd",vt="Select",xt="Selu",bt="Slice",wt="Sin",kt="Sinh",It="Sign",Nt="Sigmoid",$t="Softplus",Ct="Sqrt",St="Sum",Tt="SpaceToBatchND",Et="SplitV",Rt="Softmax",Dt="SquaredDifference",At="Square",_t="Sub",Ot="SparseToDense",Ft="StridedSlice",Bt="Tan",Pt="Tanh",Mt="Tile",Lt="TopK",Vt="Transpose",Ut="Unique",Wt="Unpack",zt="UnsortedSegmentSum",Gt="ZerosLike",Ht="Step",jt="FromPixels",Xt="RotateWithOffset",qt="_FusedMatMul",Kt="FusedConv2D",Zt="FusedDepthwiseConv2D"},6151:function(e,t,n){"use strict";n.d(t,{pI:function(){return o},uk:function(){return s},tr:function(){return u},wC:function(){return l},Li:function(){return c}});var r=n(2885),n=n(5938);
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const i=(0,n.R)("kernelRegistry",()=>new Map),a=(0,n.R)("gradRegistry",()=>new Map);function o(e,t){t=p(e,t);return i.get(t)}function s(e){return a.get(e)}function u(e){const t=i.entries(),n=[];for(;;){var{done:r,value:a}=t.next();if(r)break;const[o,s]=a;var[a]=o.split("_");a===e&&n.push(s)}return n}function l(e){var{kernelName:t,backendName:n}=e,r=p(t,n);i.has(r)&&console.warn(`The kernel '${t}' for backend `+`'${n}' is already registered`),i.set(r,e)}function c(e){var t=e["kernelName"];a.has(t)&&(0,r.OB)().getBool("DEBUG")&&console.warn(`Overriding the gradient for '${t}'`),a.set(t,e)}function p(e,t){return`${t}_${e}`}},6235:function(e,t,n){"use strict";n.d(t,{W:function(){return s}});var r=n(7097),a=n(9121),o=n(3740);const s=(0,n(2668).op)({abs_:
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e){return"complex64"!==(e=(0,o._1)(e,"x","abs")).dtype?r.BV.runKernel(a.SY,{x:e}):r.BV.runKernel(a.yj,{x:e})}})},7839:function(e,t,n){"use strict";n.d(t,{K:function(){return s}});var r=n(7097),a=n(9121),o=n(3740);const s=(0,n(2668).op)({acos_:
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e){return e=(0,o._1)(e,"x","acos"),r.BV.runKernel(a.VG,{x:e})}})},1470:function(e,t,n){"use strict";n.d(t,{_:function(){return s}});var r=n(7097),a=n(9121),o=n(3740);const s=(0,n(2668).op)({acosh_:
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e){return e=(0,o._1)(e,"x","acosh"),r.BV.runKernel(a.Sp,{x:e})}})},6407:function(e,t,n){"use strict";n.d(t,{I:function(){return i}});var r=n(7097),a=n(9121),o=n(747),s=n(3740);const i=(0,n(2668).op)({add_:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e,t){return e=(0,s._1)(e,"a","add"),t=(0,s._1)(t,"b","add"),[e,t]=(0,o.T_)(e,t),r.BV.runKernel(a.mm,{a:e,b:t})}})},781:function(e,t,n){"use strict";n.d(t,{$:function(){return s}});var r=n(7097),a=n(9121),o=n(3740);const s=(0,n(2668).op)({all_:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e,t=null,n=!1){return e=(0,o._1)(e,"x","all","bool"),r.BV.runKernel(a.oT,{x:e},{axis:t,keepDims:n})}})},2998:function(e,t,n){"use strict";n.d(t,{Y:function(){return s}});var r=n(7097),a=n(9121),o=n(3740);const s=(0,n(2668).op)({any_:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e,t=null,n=!1){return e=(0,o._1)(e,"x","any","bool"),r.BV.runKernel(a.IK,{x:e},{axis:t,keepDims:n})}})},47:function(e,t,n){"use strict";n.d(t,{N:function(){return s}});var r=n(7097),a=n(9121),o=n(3740);const s=(0,n(2668).op)({argMax_:
/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e,t=0){return e=(0,o._1)(e,"x","argMax"),r.BV.runKernel(a.sJ,{x:e},{axis:t})}})},7394:function(e,t,n){"use strict";n.d(t,{v:function(){return s}});var r=n(7097),a=n(9121),o=n(3740);const s=(0,n(2668).op)({argMin_:
/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e,t=0){return e=(0,o._1)(e,"x","argMin"),r.BV.runKernel(a.aJ,{x:e},{axis:t})}})},2421:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(7097),a=n(9121),o=n(3740);const s=(0,n(2668).op)({asin_:
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e){return e=(0,o._1)(e,"x","asin"),r.BV.runKernel(a.M2,{x:e})}})},1891:function(e,t,n){"use strict";n.d(t,{V:function(){return s}});var r=n(7097),a=n(9121),o=n(3740);const s=(0,n(2668).op)({asinh_:
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e){return e=(0,o._1)(e,"x","asinh"),r.BV.runKernel(a.qw,{x:e})}})},7037:function(e,t,n){"use strict";n.d(t,{z:function(){return s}});var r=n(7097),a=n(9121),o=n(3740);const s=(0,n(2668).op)({atan_:
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e){return e=(0,o._1)(e,"x","atan"),r.BV.runKernel(a.jM,{x:e})}})},9812:function(e,t,n){"use strict";n.d(t,{f:function(){return i}});var r=n(7097),a=n(9121),o=n(747),s=n(3740);const i=(0,n(2668).op)({atan2_:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e,t){return e=(0,s._1)(e,"a","atan2"),t=(0,s._1)(t,"b","atan2"),[e,t]=(0,o.T_)(e,t),r.BV.runKernel(a.QC,{a:e,b:t})}})},369:function(e,t,n){"use strict";n.d(t,{C:function(){return s}});var r=n(7097),a=n(9121),o=n(3740);const s=(0,n(2668).op)({atanh_:
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e){return e=(0,o._1)(e,"x","atanh"),r.BV.runKernel(a.Oy,{x:e})}})},5176:function(e,t,n){"use strict";n.d(t,{w:function(){return r}});var u=n(7097),l=n(9121),c=n(3740),p=n(569),d=n(2271),h=n(2582),t=n(2668),f=n(4968);const r=(0,t.op)({avgPool_:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e,t,n,r,a){var o=(0,c._1)(e,"x","avgPool","float32");p.hu(h.jT(n,1),()=>"Error in avgPool: Either strides or dilations must be 1. "+`Got strides ${n} and dilations '1'`);let s=o,i=!1;return 3===o.rank&&(i=!0,s=(0,f.X)(o,[1,o.shape[0],o.shape[1],o.shape[2]])),p.hu(4===s.rank,()=>`Error in avgPool: x must be rank 4 but got rank ${s.rank}.`),null!=a&&p.hu(p.GN(r),()=>"Error in avgPool: pad must be an integer when using, "+`dimRoundingMode ${a} but got pad ${r}.`),e={x:s},t=u.BV.runKernel(l.Jh,e,{filterSize:t,strides:n,pad:r,dimRoundingMode:a}),t=(0,d.p)(t,o.dtype),i?(0,f.X)(t,[t.shape[1],t.shape[2],t.shape[3]]):t}})},3591:function(e,t,n){"use strict";n.d(t,{YB:function(){return a},Vh:function(){return o},kz:function(){return s},rv:function(){return i},lB:function(){return u},Q3:function(){return l},LJ:function(){return c},sY:function(){return p}});var r=n(569);
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function a(t,n){for(let e=0;e<t.length;++e)if(t[t.length-e-1]!==n-1-e)return!1;return!0}function o(t,n,r){var a=t.length+n.length;const o=[];let s=0,i=0;for(let e=0;e<a;e++)-1===r.indexOf(e)?o.push(t[s++]):o.push(n[i++]);return o}function s(t,n){const r=[];var a=t.length;for(let e=0;e<a;e++)-1===n.indexOf(e)&&r.push(t[e]);var e=n.map(e=>t[e]);return[r,e]}function i(e,t){return o(e,t.map(e=>1),t)}function u(e,t,n){r.hu(a(t,n),()=>`${e} supports only inner-most axes for now. `+`Got axes ${t} and rank-${n} input.`)}function l(t,n){if(a(t,n))return null;const r=[];for(let e=0;e<n;++e)-1===t.indexOf(e)&&r.push(e);return t.forEach(e=>r.push(e)),r}function c(e){return e.map((e,t)=>[t,e]).sort((e,t)=>e[1]-t[1]).map(e=>e[0])}function p(t,n){const r=[];for(let e=n-t;e<n;++e)r.push(e);return r}},8441:function(e,t,n){"use strict";n.d(t,{E:function(){return r}});var o=n(7097),s=n(9121),i=n(3740),u=n(569);const r=(0,n(2668).op)({batchToSpaceND_:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e,t,n){const r=(0,i._1)(e,"x","batchToSpaceND"),a=t.reduce((e,t)=>e*t);return u.hu(r.rank>=1+t.length,()=>`input rank is ${r.rank} but should be > than blockShape.length ${t.length}`),u.hu(n.length===t.length,()=>`crops.length is ${n.length} but should be equal to blockShape.length  ${t.length}`),u.hu(r.shape[0]%a==0,()=>`input tensor batch is ${r.shape[0]} but is not divisible by the product of `+`the elements of blockShape ${t.join(" * ")} === ${a}`),e={x:r},o.BV.runKernel(s.zw,e,{blockShape:t,crops:n})}})},7505:function(e,t,n){"use strict";n.d(t,{t:function(){return r}});var u=n(7097),l=n(9121),c=n(3740),p=n(569),d=n(4968);const r=(0,n(2668).op)({batchNorm_:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e,t,n,r,a,o){null==o&&(o=.001),e=(0,c._1)(e,"x","batchNorm"),t=(0,c._1)(t,"mean","batchNorm"),n=(0,c._1)(n,"variance","batchNorm");let s;null!=a&&(s=(0,c._1)(a,"scale","batchNorm"));let i;return null!=r&&(i=(0,c._1)(r,"offset","batchNorm")),p.hu(t.rank===n.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),p.hu(null==i||t.rank===i.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),p.hu(null==s||t.rank===s.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks."),n={x:function(e){let t;return t=0===e.rank||1===e.rank?(0,d.X)(e,[1,1,1,e.size]):2===e.rank?(0,d.X)(e,[1,1,e.shape[0],e.shape[1]]):3===e.rank?(0,d.X)(e,[1,e.shape[0],e.shape[1],e.shape[2]]):e,t}(e),scale:s,offset:i,mean:t,variance:n},o=u.BV.runKernel(l.sH,n,{varianceEpsilon:o}),(0,d.X)(o,e.shape)}})},8247:function(e,t,n){"use strict";n.d(t,{U:function(){return r}});var u=n(7097),l=n(9121),c=n(3740),p=n(8723),t=n(2668),d=n(4968);const r=(0,t.op)({broadcastTo_:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e,t){let n=(0,c._1)(e,"broadcastTo","x");var r=n.shape;if(t.some(e=>!(0<e)||e%1!=0))throw new Error(`broadcastTo(): Invalid broadcast shape [${t}].`);if(t.length<n.rank)throw new Error(`broadcastTo(): shape.length=${t.length} < input.rank=${n.rank}.`);if(t.length>n.rank){const i=n.shape.slice();for(;i.length<t.length;)i.unshift(1);n=(0,d.X)(n,i)}var a=n.shape;const o=Array.from(t);for(let e=t.length-1;0<=e;e--)if(a[e]===t[e])o[e]=1;else if(1!==n.shape[e])throw new Error(`broadcastTo(): [${r}] cannot be broadcast to [${t}].`);if(0===o.map((e,t)=>1<e?t:-1).filter(e=>0<=e).length)return(0,p.d)(n);var s={x:n},e={reps:o};return u.BV.runKernel(l.n9,s,e)}})},2200:function(e,t,n){"use strict";
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function r(t,n){var r=t.length;const a=[];for(let e=0;e<r;e++){var o=r-1-e,s=t[o]||1;1<(n[n.length-1-e]||1)&&1===s&&a.unshift(o)}return a}function a(t,n){const r=[];for(let e=0;e<n.length;e++){var a=t[t.length-e-1],o=n.length-e-1,s=n[o];(null==a||1===a&&1<s)&&r.unshift(o)}return r}function o(r,a){const o=[];var e=Math.max(r.length,a.length);for(let n=0;n<e;n++){let e=r[r.length-n-1];null==e&&(e=1);let t=a[a.length-n-1];if(null==t&&(t=1),1===e)o.unshift(t);else if(1===t)o.unshift(e);else{if(e!==t)throw Error("Operands could not be broadcast together with shapes "+`${r} and ${a}.`);o.unshift(e)}}return o}n.d(t,{XF:function(){return r},RR:function(){return a},$N:function(){return o}})},2657:function(e,t,n){"use strict";n.d(t,{f:function(){return o}});var r=n(4077),a=n(569);
/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function o(e,t="float32",n){return t=t||"float32",a.Mu(e),new r.YD(e,t,n)}},2271:function(e,t,n){"use strict";n.d(t,{p:function(){return i}});var r=n(7097),a=n(9121),o=n(3740),s=n(569);const i=(0,n(2668).op)({cast_:
/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e,t){if(e=(0,o._1)(e,"x","cast"),!s.LP(t))throw new Error(`Failed to cast to unknown dtype ${t}`);if("string"===t&&"string"!==e.dtype||"string"!==t&&"string"===e.dtype)throw new Error("Only strings can be casted to strings");return r.BV.runKernel(a.RF,{x:e},{dtype:t})}})},6825:function(e,t,n){"use strict";n.d(t,{m:function(){return s}});var r=n(7097),a=n(9121),o=n(3740);const s=(0,n(2668).op)({ceil_:
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e){return e=(0,o._1)(e,"x","ceil"),r.BV.runKernel(a.gJ,{x:e})}})},2279:function(e,t,n){"use strict";n.d(t,{i:function(){return i}});var r=n(7097),a=n(9121),o=n(3740),s=n(569);const i=(0,n(2668).op)({clipByValue_:
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e,t,n){return e=(0,o._1)(e,"x","clipByValue"),s.hu(t<=n,()=>`Error in clip: min (${t}) must be `+`less than or equal to max (${n}).`),r.BV.runKernel(a.xn,{x:e},{clipValueMin:t,clipValueMax:n})}})},8723:function(e,t,n){"use strict";n.d(t,{d:function(){return s}});var r=n(7097),a=n(9121),o=n(3740);const s=(0,n(2668).op)({clone_:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e){return e=(0,o._1)(e,"x","clone","string_or_numeric"),r.BV.runKernel(a.iJ,{x:e})}})},1661:function(e,t,n){"use strict";n.d(t,{P:function(){return i}});var r=n(7097),a=n(9121),o=n(3740),s=n(569);const i=(0,n(2668).op)({complex_:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e,t){return e=(0,o._1)(e,"real","complex"),t=(0,o._1)(t,"imag","complex"),s.k5(e.shape,t.shape,`real and imag shapes, ${e.shape} and ${t.shape}, `+"must match in call to tf.complex()."),r.BV.runKernel(a.Zz,{real:e,imag:t})}})},6884:function(e,t,n){"use strict";n.d(t,{z:function(){return u}});var r=n(7097),a=n(9121),o=n(3740),s=n(569),i=n(8723);const u=(0,n(2668).op)({concat_:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e,t=0){(0,s.hu)(1<=e.length,()=>"Pass at least one tensor to concat");const n=(0,o.sI)(e,"tensors","concat","string_or_numeric");return"complex64"===n[0].dtype&&n.forEach(e=>{if("complex64"!==e.dtype)throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype ${e.dtype}. `)}),1===n.length?(0,i.d)(n[0]):(e=n,r.BV.runKernel(a.Eh,e,{axis:t}))}})},1355:function(e,t,n){"use strict";n.d(t,{P:function(){return r}});var c=n(3740),p=n(569),d=n(4794),h=n(2582),t=n(2668),f=n(4968);const r=(0,t.op)({conv1d_:function(e,t,n,r,a="NWC",o=1,s){e=(0,c._1)(e,"x","conv1d");const i=(0,c._1)(t,"filter","conv1d");let u=e,l=!1;return 2===e.rank&&(l=!0,u=(0,f.X)(e,[1,e.shape[0],e.shape[1]])),p.hu(3===u.rank,()=>`Error in conv1d: input must be rank 3, but got rank ${u.rank}.`),p.hu(3===i.rank,()=>"Error in conv1d: filter must be rank 3, but got rank "+`${i.rank}.`),null!=s&&p.hu(p.GN(r),()=>"Error in conv1d: pad must be an integer when using, "+`dimRoundingMode ${s} but got pad ${r}.`),p.hu(u.shape[2]===i.shape[1],()=>`Error in conv1d: depth of input (${u.shape[2]}) must match `+`input depth for filter ${i.shape[1]}.`),p.hu(h.jT(n,o),()=>"Error in conv1D: Either stride or dilation must be 1. "+`Got stride ${n} and dilation '${o}'`),p.hu("NWC"===a,()=>`Error in conv1d: got dataFormat of ${a} but only NWC is currently supported.`),t=(0,f.X)(i,[1,i.shape[0],i.shape[1],i.shape[2]]),e=(0,f.X)(u,[u.shape[0],1,u.shape[1],u.shape[2]]),t=(0,d.T)(e,t,[1,n],r,"NHWC",[1,o],s),l?(0,f.X)(t,[t.shape[2],t.shape[3]]):(0,f.X)(t,[t.shape[0],t.shape[2],t.shape[3]])}})},4794:function(e,t,n){"use strict";n.d(t,{T:function(){return r}});var p=n(7097),d=n(9121),h=n(3740),f=n(569),m=n(2582),t=n(2668),g=n(4968);const r=(0,t.op)({conv2d_:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e,t,n,r,a="NHWC",o=[1,1],s){e=(0,h._1)(e,"x","conv2d");const i=(0,h._1)(t,"filter","conv2d");let u=e,l=!1;3===e.rank&&(l=!0,u=(0,g.X)(e,[1,e.shape[0],e.shape[1],e.shape[2]])),f.hu(4===u.rank,()=>`Error in conv2d: input must be rank 4, but got rank ${u.rank}.`),f.hu(4===i.rank,()=>"Error in conv2d: filter must be rank 4, but got rank "+`${i.rank}.`),null!=s&&f.hu(f.GN(r),()=>"Error in conv2d: pad must be an integer when using, "+`dimRoundingMode ${s} but got pad ${r}.`);const c="NHWC"===a?u.shape[3]:u.shape[1];return f.hu(c===i.shape[2],()=>`Error in conv2d: depth of input (${c}) must match `+`input depth for filter ${i.shape[2]}.`),f.hu(m.jT(n,o),()=>"Error in conv2D: Either strides or dilations must be 1. "+`Got strides ${n} and dilations '${o}'`),e={x:u,filter:i},a=p.BV.runKernel(d.mh,e,{strides:n,pad:r,dataFormat:a,dilations:o,dimRoundingMode:s}),l?(0,g.X)(a,[a.shape[1],a.shape[2],a.shape[3]]):a}})},6013:function(e,t,n){"use strict";n.d(t,{p:function(){return r}});var p=n(7097),d=n(9121),h=n(569),t=n(2668),f=n(4968);const r=(0,t.op)({conv2DBackpropFilter_:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e,t,n,r,a,o="NHWC",s){let i=e;3===e.rank&&(i=(0,f.X)(e,[1,e.shape[0],e.shape[1],e.shape[2]]));let u=t;3===u.rank&&(u=(0,f.X)(t,[1,t.shape[0],t.shape[1],t.shape[2]])),h.hu(4===i.rank,()=>"Error in conv2dDerFilter: input must be rank 4, but got shape "+`${i.shape}.`),h.hu(4===u.rank,()=>"Error in conv2dDerFilter: dy must be rank 4, but got shape "+`${u.shape}.`),h.hu(4===n.length,()=>"Error in conv2dDerFilter: filterShape must be length 4, but got "+`${n}.`);const l="NHWC"===o?i.shape[3]:i.shape[1],c="NHWC"===o?u.shape[3]:u.shape[1];return h.hu(l===n[2],()=>`Error in conv2dDerFilter: depth of input ${l}) must `+`match input depth in filter (${n[2]}.`),h.hu(c===n[3],()=>`Error in conv2dDerFilter: depth of dy (${c}) must `+`match output depth for filter (${n[3]}).`),null!=s&&h.hu(h.GN(a),()=>"Error in conv2dDerFilter: pad must be an integer when using, "+`dimRoundingMode ${s} but got pad ${a}.`),t={x:i,dy:u},p.BV.runKernel(d.wU,t,{strides:r,pad:a,dataFormat:o,dimRoundingMode:s,filterShape:n})}})},9832:function(e,t,n){"use strict";n.d(t,{_:function(){return r}});var h=n(7097),f=n(9121),m=n(569),t=n(2668),g=n(4968);const r=(0,t.op)({conv2DBackpropInput_:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e,t,n,r,a,o="NHWC",s){m.hu(e.length===t.rank,()=>"Length of inShape "+`(${e.length}) and rank of dy (${t.rank}) must match`);let i=e,u=t,l=!1;3===t.rank&&(l=!0,u=(0,g.X)(t,[1,t.shape[0],t.shape[1],t.shape[2]]),i=[1,e[0],e[1],e[2]]),m.hu(4===i.length,()=>"Error in conv2dDerInput: inShape must be length 4, but got length "+`${i.length}.`),m.hu(4===u.rank,()=>"Error in conv2dDerInput: dy must be rank 4, but got "+`rank ${u.rank}`),m.hu(4===n.rank,()=>"Error in conv2dDerInput: filter must be rank 4, but got "+`rank ${n.rank}`);const c="NHWC"===o?i[3]:i[1],p="NHWC"===o?u.shape[3]:u.shape[1];m.hu(c===n.shape[2],()=>`Error in conv2dDerInput: depth of input (${c}) must `+`match input depth for filter ${n.shape[2]}.`),m.hu(p===n.shape[3],()=>`Error in conv2dDerInput: depth of output (${p}) must `+`match output depth for filter ${n.shape[3]}.`),null!=s&&m.hu(m.GN(a),()=>"Error in conv2dDerInput: pad must be an integer when using, "+`dimRoundingMode ${s} but got pad ${a}.`);var d={dy:u,filter:n},o={strides:r,pad:a,dataFormat:o,dimRoundingMode:s,inputShape:i},o=h.BV.runKernel(f.wm,d,o);return l?(0,g.X)(o,[o.shape[1],o.shape[2],o.shape[3]]):o}})},1405:function(e,t,n){"use strict";n.d(t,{b:function(){return r}});var s=n(3740),i=n(9832);const r=(0,n(2668).op)({conv2dTranspose_:function(e,t,n,r,a,o){return e=(0,s._1)(e,"x","conv2dTranspose"),t=(0,s._1)(t,"filter","conv2dTranspose"),(0,i._)(n,e,t,r,a,"NHWC",o)}})},2582:function(e,t,n){"use strict";
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function r(e,t,n,r,a="NHWC",o){var s=e[3];return l(e,[...t,s],n,o,r,null,null,u(a))}function a(e,t,n,r,a,o,s="channelsLast"){var[i,t]=w(t);let u;if("channelsLast"===s)u=[i,t,e[3],e[3]];else{if("channelsFirst"!==s)throw new Error(`Unknown dataFormat ${s}`);u=[i,t,e[1],e[1]]}return l(e,u,n,r,a,o,!1,s)}function o(e,t,n,r,a,o,s="NDHWC"){var[i,u,t]=T(t);let l,c;if("NDHWC"===s)c="channelsLast",l=[i,u,t,e[4],e[4]];else{if("NCDHW"!==s)throw new Error(`Unknown dataFormat ${s}`);c="channelsFirst",l=[i,u,t,e[1],e[1]]}return p(e,l,n,r,a,!1,c,o)}function l(e,t,n,r,a,o,s=!1,i="channelsLast"){let[u,l,c,p]=[-1,-1,-1,-1];if("channelsLast"===i)[u,l,c,p]=e;else{if("channelsFirst"!==i)throw new Error(`Unknown dataFormat ${i}`);[u,p,l,c]=e}var[d,h,,f]=t,[m,g]=w(n),[y,v]=w(r),x=E(d,y),n=E(h,v),{padInfo:r,outHeight:a,outWidth:o}=function(e,t,n,r,a,o,s,i,u){let l,c,p;if("number"==typeof e){var d=0===e?"VALID":"NUMBER";l={top:e,bottom:e,left:e,right:e,type:d};d=function(e,t,n,r,a){null==r&&(r=S(e,t,n));var o=e[0],e=e[1],o=R((o-t+2*r)/n+1,a),a=R((e-t+2*r)/n+1,a);return[o,a]}([t,n],o,r,e,i);c=d[0],p=d[1]}else if("same"===e){c=Math.ceil(t/r),p=Math.ceil(n/a);var h=Math.max(0,(c-1)*r+o-t),f=Math.max(0,(p-1)*a+s-n),d=Math.floor(h/2),m=h-d,h=Math.floor(f/2),f=f-h;l={top:d,bottom:m,left:h,right:f,type:"SAME"}}else if("valid"===e)l={top:0,bottom:0,left:0,right:0,type:"VALID"},c=Math.ceil((t-o+1)/r),p=Math.ceil((n-s+1)/a);else{if("object"!=typeof e)throw Error(`Unknown padding parameter: ${e}`);m=("channelsLast"===u?e[1]:e[2])[0],h=("channelsLast"===u?e[1]:e[2])[1],f=("channelsLast"===u?e[2]:e[3])[0],u=("channelsLast"===u?e[2]:e[3])[1],e=0===m&&0===h&&0===f&&0===u?"VALID":"EXPLICIT";l={top:m,bottom:h,left:f,right:u,type:e},c=R((t-o+m+h)/r+1,i),p=R((n-s+f+u)/a+1,i)}return{padInfo:l,outHeight:c,outWidth:p}}(a,l,c,m,g,x,n,o,i),f=s?f*p:f;let b;return"channelsFirst"===i?b=[u,f,a,o]:"channelsLast"===i&&(b=[u,a,o,f]),{batchSize:u,dataFormat:i,inHeight:l,inWidth:c,inChannels:p,outHeight:a,outWidth:o,outChannels:f,padInfo:r,strideHeight:m,strideWidth:g,filterHeight:d,filterWidth:h,effectiveFilterHeight:x,effectiveFilterWidth:n,dilationHeight:y,dilationWidth:v,inShape:e,outShape:b,filterShape:t}}function p(e,t,n,r,a,o=!1,s="channelsLast",i){let[u,l,c,p,d]=[-1,-1,-1,-1,-1];if("channelsLast"===s)[u,l,c,p,d]=e;else{if("channelsFirst"!==s)throw new Error(`Unknown dataFormat ${s}`);[u,d,l,c,p]=e}var[h,f,m,,g]=t,[y,v,x]=T(n),[b,w,k]=T(r),I=E(h,b),N=E(f,w),$=E(m,k),{padInfo:n,outDepth:r,outHeight:a,outWidth:i}=function(e,t,n,r,a,o,s,i,u,l,c){let p,d,h,f;if("number"==typeof e){var m=0===e?"VALID":"NUMBER";p={top:e,bottom:e,left:e,right:e,front:e,back:e,type:m};var g=function(e,t,n,r,a,o){null==a&&(a=S(e,t,r));var s=e[0],i=e[1],e=e[2],s=R((s-t+2*a)/r+1,o),i=R((i-t+2*a)/r+1,o),o=R((e-t+2*a)/r+1,o);return[s,i,o,n]}([t,n,r,1],i,1,a,e,c);d=g[0],h=g[1],f=g[2]}else if("same"===e){d=Math.ceil(t/a),h=Math.ceil(n/o),f=Math.ceil(r/s);var y=(d-1)*a+i-t,v=(h-1)*o+u-n,x=(f-1)*s+l-r,m=Math.floor(y/2),c=y-m,g=Math.floor(v/2),y=v-g,v=Math.floor(x/2),x=x-v;p={top:g,bottom:y,left:v,right:x,front:m,back:c,type:"SAME"}}else{if("valid"!==e)throw Error(`Unknown padding parameter: ${e}`);p={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},d=Math.ceil((t-i+1)/a),h=Math.ceil((n-u+1)/o),f=Math.ceil((r-l+1)/s)}return{padInfo:p,outDepth:d,outHeight:h,outWidth:f}}(a,l,c,p,y,v,x,I,N,$,i),g=o?g*d:g;let C;return"channelsFirst"===s?C=[u,g,r,a,i]:"channelsLast"===s&&(C=[u,r,a,i,g]),{batchSize:u,dataFormat:s,inDepth:l,inHeight:c,inWidth:p,inChannels:d,outDepth:r,outHeight:a,outWidth:i,outChannels:g,padInfo:n,strideDepth:y,strideHeight:v,strideWidth:x,filterDepth:h,filterHeight:f,filterWidth:m,effectiveFilterDepth:I,effectiveFilterHeight:N,effectiveFilterWidth:$,dilationDepth:b,dilationHeight:w,dilationWidth:k,inShape:e,outShape:C,filterShape:t}}function S(e,t,n,r=1){r=E(t,r);return Math.floor((e[0]*(n-1)-n+r)/2)}function w(e){return"number"==typeof e?[e,e,e]:2===e.length?[e[0],e[1],1]:e}function T(e){return"number"==typeof e?[e,e,e]:e}function E(e,t){return t<=1?e:e+(e-1)*(t-1)}function R(e,t){if(!t)return Math.trunc(e);switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error(`Unknown roundingMode ${t}`)}}function s(e){var[t,n,e]=w(e);return 1===t&&1===n&&1===e}function i(e,t){return s(e)||s(t)}function u(e){if("NHWC"===e)return"channelsLast";if("NCHW"===e)return"channelsFirst";throw new Error(`Unknown dataFormat ${e}`)}n.d(t,{Rf:function(){return r},Xw:function(){return a},pl:function(){return o},Ix:function(){return l},jw:function(){return p},aO:function(){return S},I0:function(){return s},jT:function(){return i},sl:function(){return u}})},173:function(e,t,n){"use strict";n.d(t,{m:function(){return s}});var r=n(7097),a=n(9121),o=n(3740);const s=(0,n(2668).op)({cos_:
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e){return e=(0,o._1)(e,"x","cos"),r.BV.runKernel(a.mc,{x:e})}})},2699:function(e,t,n){"use strict";n.d(t,{f:function(){return s}});var r=n(7097),a=n(9121),o=n(3740);const s=(0,n(2668).op)({cosh_:
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e){return e=(0,o._1)(e,"x","cosh"),r.BV.runKernel(a.TR,{x:e})}})},7405:function(e,t,n){"use strict";n.d(t,{z:function(){return r}});var a=n(7097),o=n(9121),s=n(3740);const r=(0,n(2668).op)({cumsum_:
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e,t=0,n=!1,r=!1){return e=(0,s._1)(e,"x","cumsum"),a.BV.runKernel(o.iH,{x:e},{axis:t,exclusive:n,reverse:r})}})},9112:function(e,t,n){"use strict";n.d(t,{n:function(){return r}});var i=n(7097),u=n(9121),l=n(3740),c=n(569);const r=(0,n(2668).op)({depthToSpace_:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e,t,n="NHWC"){const r=(0,l._1)(e,"x","depthToSpace"),a="NHWC"===n?r.shape[1]:r.shape[2],o="NHWC"===n?r.shape[2]:r.shape[3],s="NHWC"===n?r.shape[3]:r.shape[1];return c.hu(0<=a*t,()=>`Negative dimension size caused by overflow when multiplying
    ${a} and ${t}  for depthToSpace with input shape
    ${r.shape}`),c.hu(0<=o*t,()=>`Negative dimension size caused by overflow when multiplying
    ${o} and ${t} for depthToSpace with input shape
        ${r.shape}`),c.hu(s%(t*t)==0,()=>`Dimension size must be evenly divisible by ${t*t} but is ${s} for depthToSpace with input shape ${r.shape}`),e={x:r},i.BV.runKernel(u.T0,e,{blockSize:t,dataFormat:n})}})},4718:function(e,t,n){"use strict";n.d(t,{B:function(){return r}});var c=n(7097),p=n(9121),d=n(3740),h=n(569),t=n(2668),f=n(4968);const r=(0,t.op)({depthwiseConv2d_:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e,t,n,r,a="NHWC",o=[1,1],s){e=(0,d._1)(e,"x","depthwiseConv2d");const i=(0,d._1)(t,"filter","depthwiseConv2d");let u=e,l=!1;return 3===e.rank&&(l=!0,u=(0,f.X)(e,[1,e.shape[0],e.shape[1],e.shape[2]])),h.hu(4===u.rank,()=>"Error in depthwiseConv2d: input must be rank 4, but got "+`rank ${u.rank}.`),h.hu(4===i.rank,()=>"Error in depthwiseConv2d: filter must be rank 4, but got rank "+`${i.rank}.`),h.hu(u.shape[3]===i.shape[2],()=>"Error in depthwiseConv2d: number of input channels "+`(${u.shape[3]}) must match the inChannels dimension in `+`filter ${i.shape[2]}.`),null!=s&&h.hu(h.GN(r),()=>"Error in depthwiseConv2d: pad must be an integer when using, "+`dimRoundingMode ${s} but got pad ${r}.`),e={x:u,filter:i},o=c.BV.runKernel(p.ci,e,{strides:n,pad:r,dataFormat:a,dilations:o,dimRoundingMode:s}),l?(0,f.X)(o,[o.shape[1],o.shape[2],o.shape[3]]):o}})},8098:function(e,t,n){"use strict";n.d(t,{z:function(){return r}});var l=n(7097),c=n(9121),t=n(2668),p=n(4968);const r=(0,t.op)({depthwiseConv2dNativeBackpropFilter_:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e,t,n,r,a,o=[1,1],s){let i=e;3===e.rank&&(i=(0,p.X)(e,[1,e.shape[0],e.shape[1],e.shape[2]]));let u=t;return 3===u.rank&&(u=(0,p.X)(t,[1,t.shape[0],t.shape[1],t.shape[2]])),t={x:i,dy:u},l.BV.runKernel(c.sL,t,{strides:r,pad:a,dimRoundingMode:s,dilations:o,filterShape:n})}})},4375:function(e,t,n){"use strict";n.d(t,{v:function(){return r}});var l=n(7097),c=n(9121),t=n(2668),p=n(4968);const r=(0,t.op)({depthwiseConv2dNativeBackpropInput_:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e,t,n,r,a,o=[1,1],s){let i=t,u=!1;return 3===t.rank&&(u=!0,i=(0,p.X)(t,[1,t.shape[0],t.shape[1],t.shape[2]])),n={dy:i,filter:n},e=l.BV.runKernel(c.y7,n,{strides:r,pad:a,dimRoundingMode:s,dilations:o,inputShape:e}),u?(0,p.X)(e,[e.shape[1],e.shape[2],e.shape[3]]):e}})},557:function(e,t,n){"use strict";n.d(t,{W:function(){return r}});var c=n(7097),p=n(9121),d=n(3740),h=n(569),t=n(2668),f=n(4968);const r=(0,t.op)({dilation2d_:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e,t,n,r,a=[1,1],o="NHWC"){const s=(0,d._1)(e,"x","dilation2d"),i=(0,d._1)(t,"filter","dilation2d");h.hu(3===s.rank||4===s.rank,()=>"Error in dilation2d: input must be rank 3 or 4, but got rank "+`${s.rank}.`),h.hu(3===i.rank,()=>"Error in dilation2d: filter must be rank 3, but got rank "+`${i.rank}.`),h.hu("NHWC"===o,()=>"Error in dilation2d: Only NHWC is currently supported, "+`but got dataFormat of ${o}`);let u=s,l=!1;return 3===s.rank&&(u=(0,f.X)(s,[1,s.shape[0],s.shape[1],s.shape[2]]),l=!0),t={x:u,filter:i},a=c.BV.runKernel(p.p4,t,{strides:n,pad:r,dilations:a}),l?(0,f.X)(a,[a.shape[1],a.shape[2],a.shape[3]]):a}})},1274:function(e,t,n){"use strict";n.d(t,{h:function(){return u}});var r=n(7097),a=n(9121),o=n(747),s=n(3740),i=n(9165);const u=(0,n(2668).op)({div_:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e,t){return e=(0,s._1)(e,"a","div"),t=(0,s._1)(t,"b","div"),[e,t]=(0,o.T_)(e,t),"int32"===e.dtype&&"int32"===t.dtype?(0,i.q)(e,t):r.BV.runKernel(a.oH,{a:e,b:t},{})}})},9322:function(e,t,n){"use strict";n.d(t,{N:function(){return l}});var r=n(747),a=n(3740),o=n(1274),s=n(6477),t=n(2668),i=n(5912),u=n(6577);const l=(0,t.op)({divNoNan_:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e,t){var n=(0,a._1)(e,"a","div"),e=(0,a._1)(t,"b","div");return[n,e]=(0,r.T_)(n,e),t=(0,o.h)(n,e),n=(0,u.P)(t),e=(0,s.D)(e,n),(0,i.a)(e,n,t)}})},3233:function(e,t,n){"use strict";n.d(t,{p:function(){return s}});var r=n(7097),a=n(9121),o=n(3740);const s=(0,n(2668).op)({elu_:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e){return e=(0,o._1)(e,"x","elu"),r.BV.runKernel(a.SX,{x:e})}})},6477:function(e,t,n){"use strict";n.d(t,{D:function(){return u}});var r=n(7097),a=n(9121),o=n(747),s=n(3740),i=n(2200);const u=(0,n(2668).op)({equal_:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e,t){return e=(0,s._1)(e,"a","equal"),t=(0,s._1)(t,"b","equal"),[e,t]=(0,o.T_)(e,t),(0,i.$N)(e.shape,t.shape),r.BV.runKernel(a.hd,{a:e,b:t})}})},4650:function(e,t,n){"use strict";n.d(t,{q:function(){return u}});var r=n(7097),a=n(9121),o=n(3740),s=n(569),i=n(2271);const u=(0,n(2668).op)({erf_:
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e){let t=(0,o._1)(e,"x","erf");return s.hu("int32"===t.dtype||"float32"===t.dtype,()=>"Input dtype must be `int32` or `float32`."),"int32"===t.dtype&&(t=(0,i.p)(t,"float32")),e={x:t},r.BV.runKernel(a.Om,e)}})},4842:function(e,t,n){"use strict";n.d(t,{Q:function(){return s}});var r=n(7097),a=n(9121),o=n(3740);const s=(0,n(2668).op)({exp_:
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e){return e=(0,o._1)(e,"x","exp"),r.BV.runKernel(a.NE,{x:e})}})},1300:function(e,t,n){"use strict";n.d(t,{d:function(){return i}});var r=n(7097),a=n(9121),o=n(3740),s=n(569);const i=(0,n(2668).op)({expandDims_:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e,t=0){return e=(0,o._1)(e,"x","expandDims","string_or_numeric"),s.hu(t<=e.rank,()=>"Axis must be <= rank of the tensor"),r.BV.runKernel(a.YF,{input:e},{dim:t})}})},3426:function(e,t,n){"use strict";n.d(t,{t:function(){return s}});var r=n(7097),a=n(9121),o=n(3740);const s=(0,n(2668).op)({expm1_:
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e){return e=(0,o._1)(e,"x","expm1"),r.BV.runKernel(a.Y0,{x:e})}})},4006:function(e,t,n){"use strict";n.d(t,{h:function(){return o}});var r=n(7097),a=n(9121);
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function o(e,t,n){return r.BV.runKernel(a.de,{},{shape:e,value:t,dtype:n})}},6943:function(e,t,n){"use strict";n.d(t,{G:function(){return s}});var r=n(7097),a=n(9121),o=n(3740);const s=(0,n(2668).op)({floor_:
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e){return e=(0,o._1)(e,"x","floor"),r.BV.runKernel(a.OR,{x:e})}})},9165:function(e,t,n){"use strict";n.d(t,{q:function(){return i}});var r=n(7097),a=n(9121),o=n(747),s=n(3740);const i=(0,n(2668).op)({floorDiv_:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e,t){return e=(0,s._1)(e,"a","floorDiv"),t=(0,s._1)(t,"b","floorDiv"),[e,t]=(0,o.T_)(e,t),r.BV.runKernel(a.je,{a:e,b:t})}})},9323:function(e,t,n){"use strict";n.d(t,{Fr:function(){return h},pf:function(){return f},QH:function(){return m},uy:function(){return g}});var r=n(2200),a=n(3233),o=n(9133),s=n(4841),i=n(8151),u=n(7409),l=n(3582),c=n(4968),p=n(1901),d=n(5475);
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function h(e,t,n){if(null==n||"linear"===n)return e;if("relu"===n)return(0,s.d)(e,(0,p.N)(t));throw new Error(`Cannot compute gradient for fused activation ${n}.`)}function f(e,t){let n=t;t=r.RR(e.shape,t.shape);return 0<t.length&&(n=(0,d.S)(n,t)),(0,c.X)(n,e.shape)}function m(e,t,n,r){if("linear"===t)return e;if("relu"===t)return(0,u.U)(e);if("elu"===t)return(0,a.p)(e);if("relu6"===t)return(0,l.b)(e);if("prelu"===t)return(0,i.A)(e,n);if("leakyrelu"===t)return(0,o.h)(e,r);throw new Error(`Unknown fused activation ${t}.`)}const g=(e,t)=>{return!(0<e)||"linear"===t}},4926:function(e,t,n){"use strict";n.d(t,{I:function(){return r}});var a=n(7097),o=n(9121),s=n(3740);const r=(0,n(2668).op)({gather_:
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e,t,n=0,r=0){return e=(0,s._1)(e,"x","gather"),t=(0,s._1)(t,"indices","gather","int32"),a.BV.runKernel(o.qi,{x:e,indices:t},{axis:n,batchDims:r})}})},636:function(e,t,n){"use strict";n.d(t,{p:function(){return u}});var r=n(7097),a=n(9121),o=n(747),s=n(3740),i=n(2200);const u=(0,n(2668).op)({greater_:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e,t){return e=(0,s._1)(e,"a","greater"),t=(0,s._1)(t,"b","greater"),[e,t]=(0,o.T_)(e,t),(0,i.$N)(e.shape,t.shape),r.BV.runKernel(a.iZ,{a:e,b:t})}})},7630:function(e,t,n){"use strict";n.d(t,{b:function(){return u}});var r=n(7097),a=n(9121),o=n(747),s=n(3740),i=n(2200);const u=(0,n(2668).op)({greaterEqual_:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e,t){return e=(0,s._1)(e,"a","greaterEqual"),t=(0,s._1)(t,"b","greaterEqual"),[e,t]=(0,o.T_)(e,t),(0,i.$N)(e.shape,t.shape),r.BV.runKernel(a.Ac,{a:e,b:t})}})},4386:function(e,t,n){"use strict";n.d(t,{a:function(){return s}});var r=n(7097),a=n(9121),o=n(3740);const s=(0,n(2668).op)({imag_:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e){return e=(0,o._1)(e,"input","imag"),r.BV.runKernel(a.J_,{input:e})}})},3305:function(e,t,n){"use strict";n.d(t,{I:function(){return r}});var i=n(7097),u=n(9121),l=n(3740),c=n(569),t=n(2668),p=n(4968);const r=(0,t.op)({resizeBilinear_:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e,t,n=!1,r=!1){const a=(0,l._1)(e,"images","resizeBilinear");c.hu(3===a.rank||4===a.rank,()=>"Error in resizeBilinear: x must be rank 3 or 4, but got "+`rank ${a.rank}.`),c.hu(2===t.length,()=>"Error in resizeBilinear: new shape must 2D, but got shape "+`${t}.`),c.hu(!1===r||!1===n,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let o=a,s=!1;3===a.rank&&(s=!0,o=(0,p.X)(a,[1,a.shape[0],a.shape[1],a.shape[2]]));var[]=t,e={images:o},r=i.BV.runKernel(u._Y,e,{alignCorners:n,halfPixelCenters:r,size:t});return s?(0,p.X)(r,[r.shape[1],r.shape[2],r.shape[3]]):r}})},5098:function(e,t,n){"use strict";n.d(t,{j:function(){return r}});var i=n(7097),u=n(9121),l=n(3740),c=n(569),t=n(2668),p=n(4968);const r=(0,t.op)({resizeNearestNeighbor_:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e,t,n=!1,r=!1){const a=(0,l._1)(e,"images","resizeNearestNeighbor");c.hu(3===a.rank||4===a.rank,()=>"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got "+`rank ${a.rank}.`),c.hu(2===t.length,()=>"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+`${t}.`),c.hu("float32"===a.dtype||"int32"===a.dtype,()=>"`images` must have `int32` or `float32` as dtype"),c.hu(!1===r||!1===n,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let o=a,s=!1;3===a.rank&&(s=!0,o=(0,p.X)(a,[1,a.shape[0],a.shape[1],a.shape[2]]));var[]=t,e={images:o},r=i.BV.runKernel(u.dp,e,{alignCorners:n,halfPixelCenters:r,size:t});return s?(0,p.X)(r,[r.shape[1],r.shape[2],r.shape[3]]):r}})},9133:function(e,t,n){"use strict";n.d(t,{h:function(){return s}});var r=n(7097),a=n(9121),o=n(3740);const s=(0,n(2668).op)({leakyRelu_:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e,t=.2){return e=(0,o._1)(e,"x","leakyRelu"),r.BV.runKernel(a.J$,{x:e},{alpha:t})}})},6573:function(e,t,n){"use strict";n.d(t,{d:function(){return u}});var r=n(7097),a=n(9121),o=n(747),s=n(3740),i=n(2200);const u=(0,n(2668).op)({less_:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e,t){return e=(0,s._1)(e,"a","less"),t=(0,s._1)(t,"b","less"),[e,t]=(0,o.T_)(e,t),(0,i.$N)(e.shape,t.shape),r.BV.runKernel(a.vt,{a:e,b:t})}})},624:function(e,t,n){"use strict";n.d(t,{z:function(){return u}});var r=n(7097),a=n(9121),o=n(747),s=n(3740),i=n(2200);const u=(0,n(2668).op)({lessEqual_:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e,t){return e=(0,s._1)(e,"a","lessEqual"),t=(0,s._1)(t,"b","lessEqual"),[e,t]=(0,o.T_)(e,t),(0,i.$N)(e.shape,t.shape),r.BV.runKernel(a.CA,{a:e,b:t})}})},9648:function(e,t,n){"use strict";n.d(t,{G:function(){return r}});var u=n(7097),l=n(9121),c=n(3740),p=n(569),t=n(2668),d=n(4968);const r=(0,t.op)({localResponseNormalization_:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e,t=5,n=1,r=1,a=.5){const o=(0,c._1)(e,"x","localResponseNormalization");p.hu(4===o.rank||3===o.rank,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank ${o.rank}.`),p.hu(p.GN(t),()=>"Error in localResponseNormalization: depthRadius must be an "+`integer but got depthRadius ${t}.`);let s=o,i=!1;return 3===o.rank&&(i=!0,s=(0,d.X)(o,[1,o.shape[0],o.shape[1],o.shape[2]])),e={x:s},a=u.BV.runKernel(l.eZ,e,{depthRadius:t,bias:n,alpha:r,beta:a}),i?(0,d.X)(a,[a.shape[1],a.shape[2],a.shape[3]]):a}})},2597:function(e,t,n){"use strict";n.d(t,{c:function(){return s}});var r=n(7097),a=n(9121),o=n(3740);const s=(0,n(2668).op)({log_:
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e){return e=(0,o._1)(e,"x","log"),r.BV.runKernel(a.Zb,{x:e})}})},7474:function(e,t,n){"use strict";n.d(t,{K:function(){return s}});var r=n(7097),a=n(9121),o=n(3740);const s=(0,n(2668).op)({log1p_:
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e){return e=(0,o._1)(e,"x","log1p"),r.BV.runKernel(a.kU,{x:e})}})},1510:function(e,t,n){"use strict";n.d(t,{C:function(){return r}});var a=n(633),o=n(3740),s=n(2271),i=n(4842),u=n(2597),l=n(3307),c=n(4841),t=n(2668),p=n(827),d=n(5475);const r=(0,t.op)({logSoftmax_:
/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e,r=-1){if(e=(0,o._1)(e,"logits","logSoftmax"),(r=-1===r?e.rank-1:r)!==e.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. "+`Logits was rank ${e.rank} and axis was ${r}`);const t=(0,a.cb)((e,t)=>{var n=(0,l.F)(e,r,!0),n=(0,p.l)(e,n),n=(0,p.l)((0,s.p)(n,"float32"),(0,u.c)((0,d.S)((0,i.Q)(n),r,!0)));t([n]);return{value:n,gradFunc:(e,t)=>{var[t]=t,t=(0,i.Q)(t);return(0,p.l)(e,(0,c.d)((0,d.S)(e,r,!0),t))}}});return t(e)}})},1391:function(e,t,n){"use strict";n.d(t,{l:function(){return r}});var a=n(3740),o=n(569),s=n(6407),i=n(3591),u=n(4842),l=n(2597),c=n(3307),t=n(2668),p=n(4968),d=n(827),h=n(5475);const r=(0,t.op)({logSumExp_:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e,t=null,n=!1){var r=(0,a._1)(e,"x","logSumExp"),e=(0,o.EC)(t,r.shape),t=(0,c.F)(r,e,!0),r=(0,d.l)(r,t),r=(0,u.Q)(r),r=(0,h.S)(r,e),r=(0,l.c)(r),r=(0,s.I)((0,p.X)(t,r.shape),r);if(n){e=(0,i.rv)(r.shape,e);return(0,p.X)(r,e)}return r}})},2856:function(e,t,n){"use strict";n.d(t,{H:function(){return i}});var r=n(7097),a=n(9121),o=n(3740),s=n(2200);const i=(0,n(2668).op)({logicalAnd_:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e,t){return e=(0,o._1)(e,"a","logicalAnd","bool"),t=(0,o._1)(t,"b","logicalAnd","bool"),(0,s.$N)(e.shape,t.shape),r.BV.runKernel(a.PY,{a:e,b:t})}})},8651:function(e,t,n){"use strict";n.d(t,{h:function(){return s}});var r=n(7097),a=n(9121),o=n(3740);const s=(0,n(2668).op)({logicalNot_:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e){return e=(0,o._1)(e,"x","logicalNot","bool"),r.BV.runKernel(a.Vf,{x:e})}})},5750:function(e,t,n){"use strict";n.d(t,{K:function(){return i}});var r=n(7097),a=n(9121),o=n(3740),s=n(2200);const i=(0,n(2668).op)({logicalOr_:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e,t){return e=(0,o._1)(e,"a","logicalOr","bool"),t=(0,o._1)(t,"b","logicalOr","bool"),(0,s.$N)(e.shape,t.shape),r.BV.runKernel(a.MZ,{a:e,b:t})}})},8687:function(e,t,n){"use strict";n.d(t,{O:function(){return r}});var a=n(7097),o=n(9121),s=n(747),i=n(3740);const r=(0,n(2668).op)({matMul_:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e,t,n=!1,r=!1){return e=(0,i._1)(e,"a","matMul"),t=(0,i._1)(t,"b","matMul"),[e,t]=(0,s.T_)(e,t),a.BV.runKernel(o.XL,{a:e,b:t},{transposeA:n,transposeB:r})}})},3307:function(e,t,n){"use strict";n.d(t,{F:function(){return s}});var r=n(7097),a=n(9121),o=n(3740);const s=(0,n(2668).op)({max_:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e,t=null,n=!1){return e=(0,o._1)(e,"x","max"),r.BV.runKernel(a.Yo,{x:e},{reductionIndices:t,keepDims:n})}})},1174:function(e,t,n){"use strict";n.d(t,{_:function(){return r}});var i=n(7097),u=n(9121),l=n(3740),c=n(569),p=n(2582),t=n(2668),d=n(4968);const r=(0,t.op)({maxPool_:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e,t,n,r,a){let o=e=(0,l._1)(e,"x","maxPool"),s=!1;return 3===e.rank&&(s=!0,o=(0,d.X)(e,[1,e.shape[0],e.shape[1],e.shape[2]])),c.hu(4===o.rank,()=>`Error in maxPool: input must be rank 4 but got rank ${o.rank}.`),c.hu(p.jT(n,1),()=>"Error in maxPool: Either strides or dilations must be 1. "+`Got strides ${n} and dilations '1'`),null!=a&&c.hu(c.GN(r),()=>"Error in maxPool: pad must be an integer when using, "+`dimRoundingMode ${a} but got pad ${r}.`),e={x:o},t=i.BV.runKernel(u.mT,e,{filterSize:t,strides:n,pad:r,dimRoundingMode:a}),s?(0,d.X)(t,[t.shape[1],t.shape[2],t.shape[3]]):t}})},632:function(e,t,n){"use strict";n.d(t,{g:function(){return r}});var a=n(7097),o=n(9121),s=n(747),i=n(3740),u=n(2200),l=n(2271);const r=(0,n(2668).op)({maximum_:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e,t){let n=(0,i._1)(e,"a","maximum"),r=(0,i._1)(t,"b","maximum");return[n,r]=(0,s.T_)(n,r),"bool"===n.dtype&&(n=(0,l.p)(n,"int32"),r=(0,l.p)(r,"int32")),(0,u.$N)(n.shape,r.shape),t={a:n,b:r},a.BV.runKernel(o.BM,t)}})},5130:function(e,t,n){"use strict";n.d(t,{J:function(){return s}});var r=n(7097),a=n(9121),o=n(3740);const s=(0,n(2668).op)({mean_:
/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e,t=null,n=!1){return e=(0,o._1)(e,"x","mean"),r.BV.runKernel(a.q2,{x:e},{axis:t,keepDims:n})}})},5735:function(e,t,n){"use strict";n.d(t,{V:function(){return s}});var r=n(7097),a=n(9121),o=n(3740);const s=(0,n(2668).op)({min_:
/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e,t=null,n=!1){return e=(0,o._1)(e,"x","min"),r.BV.runKernel(a.c1,{x:e},{axis:t,keepDims:n})}})},4513:function(e,t,n){"use strict";n.d(t,{L:function(){return r}});var a=n(7097),o=n(9121),s=n(747),i=n(3740),u=n(2200),l=n(2271);const r=(0,n(2668).op)({minimum_:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e,t){let n=(0,i._1)(e,"a","minimum"),r=(0,i._1)(t,"b","minimum");return[n,r]=(0,s.T_)(n,r),"bool"===n.dtype&&(n=(0,l.p)(n,"int32"),r=(0,l.p)(r,"int32")),(0,u.$N)(n.shape,r.shape),t={a:n,b:r},a.BV.runKernel(o.q8,t)}})},1483:function(e,t,n){"use strict";n.d(t,{V:function(){return r}});var o=n(7097),s=n(9121),i=n(3740),u=n(569);const r=(0,n(2668).op)({mirrorPad_:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e,t,n){u.hu("reflect"===n||"symmetric"===n,()=>"Invalid mode. Mode must be either reflect or symmetric. "+`Got ${n}.`);const r=(0,i._1)(e,"x","mirrorPad");if(0===r.rank)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");u.hu(t.length===r.rank,()=>`Padding doesn't match input. Must be ${r.rank}. `+`Got ${t.length}.`);const a="reflect"===n?1:0;for(let e=0;e<r.rank;e++)u.hu(2===t[e].length,()=>"Invalid number of paddings. Must be length of 2 each."),u.hu(0<=t[e][0]&&t[e][0]<=r.shape[e]-a&&0<=t[e][1]&&t[e][1]<=r.shape[e]-a,()=>`Padding in dimension ${e} cannot be greater than or equal `+`to ${r.shape[e]-a} or less than 0 for input of `+`shape ${r.shape}`);return e={x:r},o.BV.runKernel(s.jQ,e,{paddings:t,mode:n})}})},5228:function(e,t,n){"use strict";n.d(t,{w:function(){return i}});var r=n(7097),a=n(9121),o=n(747),s=n(3740);const i=(0,n(2668).op)({mod_:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e,t){return e=(0,s._1)(e,"a","mod"),t=(0,s._1)(t,"b","mod"),[e,t]=(0,o.T_)(e,t),r.BV.runKernel(a.Vb,{a:e,b:t})}})},4841:function(e,t,n){"use strict";n.d(t,{d:function(){return i}});var r=n(7097),a=n(9121),o=n(747),s=n(3740);const i=(0,n(2668).op)({mul_:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e,t){return e=(0,s._1)(e,"a","mul"),t=(0,s._1)(t,"b","mul"),[e,t]=(0,o.T_)(e,t),r.BV.runKernel(a.wY,{a:e,b:t})}})},7370:function(e,t,n){"use strict";n.d(t,{W:function(){return s}});var r=n(7097),a=n(9121),o=n(3740);const s=(0,n(2668).op)({neg_:
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e){return e=(0,o._1)(e,"x","neg"),r.BV.runKernel(a.ku,{x:e})}})},3561:function(e,t,n){"use strict";n.d(t,{K:function(){return r}});var o=n(3740),s=n(569),i=n(6235),u=n(3591),l=n(3307),c=n(5735),t=n(2668),p=n(3453),d=n(4968),h=n(9494),f=n(3261),m=n(248),g=n(5475);const r=(0,t.op)({norm_:
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e,t="euclidean",n=null,r=!1){let a=(t=function e(t,n,r=null){if(0===t.rank)return(0,i.W)(t);if(1!==t.rank&&null===r)return e((0,d.X)(t,[-1]),n,r);if(1===t.rank||"number"==typeof r||Array.isArray(r)&&1===r.length){if(1===n)return(0,g.S)((0,i.W)(t),r);if(n===1/0)return(0,l.F)((0,i.W)(t),r);if(n===-1/0)return(0,c.V)((0,i.W)(t),r);if("euclidean"===n||2===n)return(0,f._)((0,g.S)((0,p.s)((0,i.W)(t),(0,h.i)(2,"int32")),r));throw new Error(`Error in norm: invalid ord value: ${n}`)}if(Array.isArray(r)&&2===r.length){if(1===n)return(0,l.F)((0,g.S)((0,i.W)(t),r[0]),r[1]-1);if(n===1/0)return(0,l.F)((0,g.S)((0,i.W)(t),r[1]),r[0]);if(n===-1/0)return(0,c.V)((0,g.S)((0,i.W)(t),r[1]),r[0]);if("fro"===n||"euclidean"===n)return(0,f._)((0,g.S)((0,m.h)(t),r));throw new Error(`Error in norm: invalid ord value: ${n}`)}throw new Error(`Error in norm: invalid axis: ${r}`)}(e=(0,o._1)(e,"x","norm"),t,n)).shape;return r&&(e=(0,s.EC)(n,e.shape),a=u.rv(t.shape,e)),(0,d.X)(t,a)}})},6500:function(e,t,n){"use strict";n.d(t,{Q:function(){return u}});var r=n(7097),a=n(9121),o=n(747),s=n(3740),i=n(2200);const u=(0,n(2668).op)({notEqual_:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e,t){return e=(0,s._1)(e,"a","notEqual"),t=(0,s._1)(t,"b","notEqual"),[e,t]=(0,o.T_)(e,t),(0,i.$N)(e.shape,t.shape),r.BV.runKernel(a.yQ,{a:e,b:t})}})},6708:function(e,t,n){"use strict";n.d(t,{l:function(){return r}});var a=n(7097),o=n(9121),s=n(3740);const r=(0,n(2668).op)({oneHot_:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e,t,n=1,r=0){if(t<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${t}`);return e=(0,s._1)(e,"indices","oneHot","int32"),a.BV.runKernel(o.we,{indices:e},{depth:t,onValue:n,offValue:r})}})},4917:function(e,t,n){"use strict";n.d(t,{i:function(){return u}});var a=n(7097),o=n(569),s=n(1661),i=n(9640);
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function u(e,t="float32"){if("complex64"===t){var n=u(e,"float32"),r=(0,i.l)(e,"float32");return(0,s.P)(n,r)}r=(0,o.p8)((0,o.NA)(e),t);return a.BV.makeTensor(r,e,t)}},7846:function(e,t,n){"use strict";n.d(t,{J:function(){return s}});var r=n(7097),a=n(9121),o=n(3740);const s=(0,n(2668).op)({onesLike_:
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e){return e=(0,o._1)(e,"x","onesLike"),r.BV.runKernel(a.qW,{x:e})}})},2668:function(e,t,n){"use strict";n.d(t,{op:function(){return r}});var a=n(7097),o=n(569);
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const s="__op";function r(e){var t=Object.keys(e);if(1!==t.length)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+`${t.length} keys.`);let n=t[0];const r=e[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n+=s;e=(...e)=>{a.BV.startScope(n);try{var t=r(...e);return(0,o.tI)(t)&&console.error("Cannot return a Promise inside of tidy."),a.BV.endScope(t),t}catch(e){throw a.BV.endScope(null),e}};return Object.defineProperty(e,"name",{value:n,configurable:!0}),e}},5139:function(e,t,n){"use strict";n.d(t,{IHx:function(){return l.I},f3b:function(){return s.f},d9v:function(){return d.d},zoF:function(){return h.z},Izb:function(){return a},hiC:function(){return f.h},BHj:function(){return Pe},dC7:function(){return m.d},XLQ:function(){return c.X},iD$:function(){return p.i},XD2:function(){return o.X},tPi:function(){return g.t},knu:function(){return y.k},luU:function(){return v.l},XeE:function(){return i.X},RRF:function(){return x.R},odF:function(){return k},HHK:function(){return I.H},lls:function(){return N.l}});var l=n(6407),s=n(2657),d=n(8723),h=n(6884),r=n(2668);const a=(0,r.op)({concat2d_:function(e,t){return(0,h.z)(e,t)}});var f=n(1274),m=n(4841),c=n(4968),p=n(9494),o=n(625),g=n(2676),y=n(2991),v=n(827),i=n(701),x=n(6092),b=n(3740),w=n(569),u=n(7852);
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function k(e,t,n){if((0,w.Cq)(e),null!=t&&2!==t.length)throw new Error("tensor2d() requires shape to have two numbers");var r=(0,b.C)(e,n);if(2!==r.length&&1!==r.length)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return(0,u.H)(e,t,r,n)}var I=n(4136),N=n(9640),$=n(3710),C=n(7020),S=n(8447),T=n(4415);function E(t,n,r){var a=1-t%2;const o=new Float32Array(t);for(let e=0;e<t;++e){var s=2*Math.PI*e/(t+a-1);o[e]=n-r*Math.cos(s)}return(0,x.R)(o,"float32")}var R=(0,r.op)({hammingWindow_:
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e){return E(e,.54,.46)}});const D=(0,r.op)({hannWindow_:
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e){return E(e,.5,.5)}});var A=n(4006);const _=(0,r.op)({frame_:
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e,t,n,r=!1,a=0){let o=0;const s=[];for(;o+t<=e.size;)s.push((0,g.t)(e,o,t)),o+=n;if(r)for(;o<e.size;){var i=o+t-e.size,i=(0,h.z)([(0,g.t)(e,o,t-i),(0,A.h)([i],a)]);s.push(i),o+=n}return 0===s.length?k([],[0,t]):(0,c.X)((0,h.z)(s),[s.length,t])}});var O=(0,r.op)({stft_:
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e,t,n,r,a=D){null==r&&(r=Math.floor(Math.pow(2,Math.ceil(Math.log(t)/Math.log(2)))));var o=_(e,t,n),s=(0,m.d)(o,a(t));const i=[];for(let e=0;e<o.shape[0];e++)i.push((0,$.Q)((0,g.t)(s,[e,0],[1,t]),r));return(0,h.z)(i)}}),F=n(7097),B=n(9121);var P=(0,r.op)({cropAndResize_:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e,t,n,r,a="bilinear",o=0){const s=(0,b._1)(e,"image","cropAndResize"),i=(0,b._1)(t,"boxes","cropAndResize","float32");n=(0,b._1)(n,"boxInd","cropAndResize","int32");const u=i.shape[0];return w.hu(4===s.rank,()=>"Error in cropAndResize: image must be rank 4,"+`but got rank ${s.rank}.`),w.hu(2===i.rank&&4===i.shape[1],()=>`Error in cropAndResize: boxes must be have size [${u},4] `+`but had shape ${i.shape}.`),w.hu(1===n.rank&&n.shape[0]===u,()=>`Error in cropAndResize: boxInd must be have size [${u}] `+`but had shape ${i.shape}.`),w.hu(2===r.length,()=>"Error in cropAndResize: cropSize must be of length 2, but got "+`length ${r.length}.`),w.hu(1<=r[0]&&1<=r[1],()=>`cropSize must be atleast [1,1], but was ${r}`),w.hu("bilinear"===a||"nearest"===a,()=>`method must be bilinear or nearest, but was ${a}`),n={image:s,boxes:i,boxInd:n},F.BV.runKernel(B.Vc,n,{method:a,extrapolationValue:o,cropSize:r})}});var M=(0,r.op)({flipLeftRight_:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e){const t=(0,b._1)(e,"image","flipLeftRight","float32");return w.hu(4===t.rank,()=>"Error in flipLeftRight: image must be rank 4,"+`but got rank ${t.rank}.`),e={image:t},F.BV.runKernel(B.Uy,e,{})}});var L=(0,r.op)({rotateWithOffset_:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e,t,n=0,r=.5){const a=(0,b._1)(e,"image","rotateWithOffset","float32");return w.hu(4===a.rank,()=>"Error in rotateWithOffset: image must be rank 4,"+`but got rank ${a.rank}.`),e={image:a},F.BV.runKernel(B.b9,e,{radians:t,fillValue:n,center:r})}});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function V(e,t,n,r,a,o){null==r&&(r=.5),null==a&&(a=Number.NEGATIVE_INFINITY),null==o&&(o=0);const s=e.shape[0];return n=Math.min(n,s),w.hu(0<=r&&r<=1,()=>`iouThreshold must be in [0, 1], but was '${r}'`),w.hu(2===e.rank,()=>`boxes must be a 2D tensor, but was of rank '${e.rank}'`),w.hu(4===e.shape[1],()=>`boxes must have 4 columns, but 2nd dimension was ${e.shape[1]}`),w.hu(1===t.rank,()=>"scores must be a 1D tensor"),w.hu(t.shape[0]===s,()=>`scores has incompatible shape with boxes. Expected ${s}, `+`but was ${t.shape[0]}`),w.hu(0<=o&&o<=1,()=>`softNmsSigma must be in [0, 1], but was '${o}'`),{maxOutputSize:n,iouThreshold:r,scoreThreshold:a,softNmsSigma:o}}var U=(0,r.op)({nonMaxSuppression_:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e,t,n,r=.5,a=Number.NEGATIVE_INFINITY){var o=(0,b._1)(e,"boxes","nonMaxSuppression"),e=(0,b._1)(t,"scores","nonMaxSuppression"),t=V(o,e,n,r,a);return n=t.maxOutputSize,r=t.iouThreshold,a=t.scoreThreshold,F.BV.runKernel(B.uv,{boxes:o,scores:e},{maxOutputSize:n,iouThreshold:r,scoreThreshold:a})}}),W=n(3337);
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
async function z(e,t,n,r=.5,a=Number.NEGATIVE_INFINITY){const o=(0,b._1)(e,"boxes","nonMaxSuppressionAsync"),s=(0,b._1)(t,"scores","nonMaxSuppressionAsync");var i=V(o,s,n,r,a);n=i.maxOutputSize,r=i.iouThreshold,a=i.scoreThreshold;var i=(u=await Promise.all([o.data(),s.data()]))[0],u=u[1],a=(0,W.GP)(i,u,n,r,a)["selectedIndices"];return o!==e&&o.dispose(),s!==t&&s.dispose(),(0,x.R)(a,"int32")}var G=(0,r.op)({nonMaxSuppressionWithScore_:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e,t,n,r=.5,a=Number.NEGATIVE_INFINITY,o=0){var s=(0,b._1)(e,"boxes","nonMaxSuppression"),e=(0,b._1)(t,"scores","nonMaxSuppression"),t=V(s,e,n,r,a,o);return n=t.maxOutputSize,r=t.iouThreshold,a=t.scoreThreshold,o=t.softNmsSigma,{selectedIndices:(o=F.BV.runKernel(B.W0,{boxes:s,scores:e},{maxOutputSize:n,iouThreshold:r,scoreThreshold:a,softNmsSigma:o}))[0],selectedScores:o[1]}}});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
async function H(e,t,n,r=.5,a=Number.NEGATIVE_INFINITY,o=0){const s=(0,b._1)(e,"boxes","nonMaxSuppressionAsync"),i=(0,b._1)(t,"scores","nonMaxSuppressionAsync");var u=V(s,i,n,r,a,o);n=u.maxOutputSize,r=u.iouThreshold,a=u.scoreThreshold,o=u.softNmsSigma;var u=(l=await Promise.all([s.data(),i.data()]))[0],l=l[1],{selectedIndices:a,selectedScores:o}=(0,W.pA)(u,l,n,r,a,o);return s!==e&&s.dispose(),i!==t&&i.dispose(),{selectedIndices:(0,x.R)(a,"int32"),selectedScores:(0,x.R)(o)}}var j=(0,r.op)({nonMaxSuppressionPadded_:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e,t,n,r=.5,a=Number.NEGATIVE_INFINITY,o=!1){return e=(0,b._1)(e,"boxes","nonMaxSuppression"),t=(0,b._1)(t,"scores","nonMaxSuppression"),n=V(e,t,n,r,a,null),r=n.maxOutputSize,a=n.iouThreshold,n=n.scoreThreshold,{selectedIndices:(o=F.BV.runKernel(B.cy,{boxes:e,scores:t},{maxOutputSize:r,iouThreshold:a,scoreThreshold:n,padToMaxOutputSize:o}))[0],validOutputs:o[1]}}});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
async function X(e,t,n,r=.5,a=Number.NEGATIVE_INFINITY,o=!1){const s=(0,b._1)(e,"boxes","nonMaxSuppressionAsync"),i=(0,b._1)(t,"scores","nonMaxSuppressionAsync");var u=(l=V(s,i,n,r,a,null)).maxOutputSize,n=l.iouThreshold,r=l.scoreThreshold,[a,l]=await Promise.all([s.data(),i.data()]),{selectedIndices:r,validOutputs:o}=(0,W.qP)(a,l,u,n,r,o);return s!==e&&s.dispose(),i!==t&&i.dispose(),{selectedIndices:(0,x.R)(r,"int32"),validOutputs:(0,p.i)(o,"int32")}}var q=n(3305),K=n(5098),Z=n(7630),Y=n(624),Q=n(2856),J=n(7245),ee=n(5912);(0,r.op)({bandPart_:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e,t,n){(0,w.hu)(t%1==0,()=>`bandPart(): numLower must be an integer, got ${t}.`),(0,w.hu)(n%1==0,()=>`bandPart(): numUpper must be an integer, got ${n}.`);const r=(0,b._1)(e,"a","bandPart");(0,w.hu)(2<=r.rank,()=>`bandPart(): Rank must be at least 2, got ${r.rank}.`);var a=r.shape,[o,s]=r.shape.slice(-2);if(!(t<=o))throw new Error(`bandPart(): numLower (${t})`+` must not be greater than the number of rows (${o}).`);if(!(n<=s))throw new Error(`bandPart(): numUpper (${n})`+` must not be greater than the number of columns (${s}).`);t<0&&(t=o),n<0&&(n=s);var i=(0,c.X)((0,J.w)(0,o,1,"int32"),[-1,1]),e=(0,J.w)(0,s,1,"int32"),e=(0,v.l)(i,e);const u=(0,Q.H)((0,Y.z)(e,(0,p.i)(+t,"int32")),(0,Z.b)(e,(0,p.i)(-n,"int32"))),l=(0,N.l)([o,s],r.dtype);return(0,c.X)((0,y.k)((0,I.H)((0,c.X)(r,[-1,o,s])).map(e=>(0,ee.a)(u,e,l))),a)}});var te=n(3561),ne=n(8644),re=n(9590),ae=n(5475);(0,r.op)({gramSchmidt_:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(t){let e;if(Array.isArray(t)){(e=!1,w.hu)(null!=t&&0<t.length,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");const n=t[0].shape[0];for(let e=1;e<t.length;++e)(0,w.hu)(t[e].shape[0]===n,()=>"Gram-Schmidt: Non-unique lengths found in the input vectors: "+`(${t[e].shape[0]} vs. ${n})`)}else e=!0,t=(0,ne.V)(t,t.shape[0],0).map(e=>(0,re.L)(e,[0]));(0,w.hu)(t.length<=t[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${t.length}) exceeds `+`number of dimensions (${t[0].shape[0]}).`);const a=[],o=t;for(let r=0;r<t.length;++r)a.push(F.BV.tidy(()=>{let t=o[r];if(0<r)for(let e=0;e<r;++e){var n=(0,m.d)((0,ae.S)((0,m.d)(a[e],t)),a[e]);t=(0,v.l)(t,n)}return(0,f.h)(t,(0,te.K)(t,"euclidean"))}));return e?(0,y.k)(a,0):a}});var oe=n(4368),se=n(1300),ie=n(7501);const ue=(0,r.op)({eye_:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e,t,n,r="float32"){const a=(0,s.f)([e,t=null==t?e:t],r);var o=e<=t?e:t;for(let e=0;e<o;++e)a.set(1,e,e);if(t=(0,c.X)(a.toTensor(),[e,t]),null==n)return t;if(1===n.length)return(0,ie.G)((0,se.d)(t,0),[n[0],1,1]);if(2===n.length)return(0,ie.G)((0,se.d)((0,se.d)(t,0),0),[n[0],n[1],1,1]);if(3===n.length)return(0,ie.G)((0,se.d)((0,se.d)((0,se.d)(t,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error("eye() currently supports only 1D and 2D "+`batchShapes, but received ${n.length}D.`)}});var le=n(636),ce=n(8687),pe=n(7370),de=n(9065);function he(a,o=!1){return F.BV.tidy(()=>{(0,w.hu)(2===a.shape.length,()=>`qr2d() requires a 2D Tensor, but got a ${a.shape.length}D Tensor.`);const s=a.shape[0],i=a.shape[1];let u=ue(s),l=(0,d.d)(a);const c=k([[1]],[1,1]);let p=(0,d.d)(c);var e=s>=i?i:s;for(let o=0;o<e;++o){var t=l,n=p,r=u;[p,l,u]=F.BV.tidy(()=>{var e=(0,g.t)(l,[o,o],[s-o,1]),t=(0,te.K)(e),n=(0,g.t)(l,[o,o],[1,1]),r=(0,ee.a)((0,le.p)(n,0),k([[-1]]),k([[1]])),n=(0,v.l)(n,(0,m.d)(r,t)),e=(0,f.h)(e,n);p=1===e.shape[0]?(0,d.d)(c):(0,h.z)([c,(0,g.t)(e,[1,0],[e.shape[0]-1,e.shape[1]])],0);r=(0,pe.W)((0,f.h)((0,ce.O)(r,n),t)),n=(0,g.t)(l,[o,0],[s-o,i]),t=(0,m.d)(r,p),r=(0,de.p)(p);l=0===o?(0,v.l)(n,(0,ce.O)(t,(0,ce.O)(r,n))):(a=(0,v.l)(n,(0,ce.O)(t,(0,ce.O)(r,n))),(0,h.z)([(0,g.t)(l,[0,0],[o,i]),a],0));var a=(0,de.p)(t),t=(0,g.t)(u,[0,o],[s,u.shape[1]-o]);return u=0===o?(0,v.l)(t,(0,ce.O)((0,ce.O)(t,p),a)):(a=(0,v.l)(t,(0,ce.O)((0,ce.O)(t,p),a)),(0,h.z)([(0,g.t)(u,[0,0],[s,o]),a],1)),[p,l,u]}),(0,oe.B9)([t,n,r])}return!o&&s>i&&(u=(0,g.t)(u,[0,0],[s,i]),l=(0,g.t)(l,[0,0],[i,i])),[u,l]})}(0,r.op)({qr_:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e,n=!1){if((0,w.hu)(2<=e.rank,()=>`qr() requires input tensor to have a rank >= 2, but got rank ${e.rank}`),2===e.rank)return he(e,n);{var t=e.shape.slice(0,e.shape.length-2).reduce((e,t)=>e*t);const r=(0,I.H)((0,c.X)(e,[t,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),a=[],o=[];return r.forEach(e=>{var[t,e]=he(e,n);a.push(t),o.push(e)}),[(0,c.X)((0,y.k)(a,0),e.shape),(0,c.X)((0,y.k)(o,0),e.shape)]}}});var fe,me=n(6235);(_e=fe=fe||{})[_e.NONE=0]="NONE",_e[_e.MEAN=1]="MEAN",_e[_e.SUM=2]="SUM",_e[_e.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS";var ge=n(2271),ye=n(5130),ve=n(6500),xe=n(4917);const be=(0,r.op)({computeWeightedLoss_:function(e,t,n=fe.SUM_BY_NONZERO_WEIGHTS){var r=(0,b._1)(e,"losses","computeWeightedLoss");let a=null;null!=t&&(a=(0,b._1)(t,"weights","computeWeightedLoss"));var o=null==a?r:(0,m.d)(r,a);if(n===fe.NONE)return o;if(n===fe.SUM)return(0,ae.S)(o);if(n===fe.MEAN){if(null==a)return(0,ye.J)(o);e=r.size/a.size,t=(0,f.h)((0,ae.S)(o),(0,ae.S)(a));return 1<e?(0,f.h)(t,(0,p.i)(e)):t}if(n!==fe.SUM_BY_NONZERO_WEIGHTS)throw Error(`Unknown reduction: ${n}`);return null==a?(0,f.h)((0,ae.S)(o),(0,p.i)(r.size)):(r=(0,m.d)(a,(0,xe.i)(r.shape)),r=(0,ge.p)((0,ae.S)((0,ve.Q)(r,(0,p.i)(0))),"float32"),(0,f.h)((0,ae.S)(o),r))}});var we=(0,r.op)({absoluteDifference_:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e,t,n,r=fe.SUM_BY_NONZERO_WEIGHTS){e=(0,b._1)(e,"labels","absoluteDifference"),t=(0,b._1)(t,"predictions","absoluteDifference");let a=null;return null!=n&&(a=(0,b._1)(n,"weights","absoluteDifference")),(0,w.k5)(e.shape,t.shape,"Error in absoluteDifference: "),t=(0,me.W)((0,v.l)(e,t)),be(t,a,r)}});var ke=(0,r.op)({cosineDistance_:function(e,t,n,r,a=fe.SUM_BY_NONZERO_WEIGHTS){e=(0,b._1)(e,"labels","cosineDistance"),t=(0,b._1)(t,"predictions","cosineDistance");let o=null;return null!=r&&(o=(0,b._1)(r,"weights","cosineDistance")),(0,w.k5)(e.shape,t.shape,"Error in cosineDistance: "),r=(0,p.i)(1),n=(0,v.l)(r,(0,ae.S)((0,m.d)(e,t),n,!0)),be(n,o,a)}}),Ie=n(7409);var Ne=(0,r.op)({hingeLoss_:function(e,t,n,r=fe.SUM_BY_NONZERO_WEIGHTS){e=(0,b._1)(e,"labels","hingeLoss"),t=(0,b._1)(t,"predictions","hingeLoss");let a=null;return null!=n&&(a=(0,b._1)(n,"weights","hingeLoss")),(0,w.k5)(e.shape,t.shape,"Error in hingeLoss: "),n=(0,p.i)(1),e=(0,v.l)((0,m.d)((0,p.i)(2),e),n),t=(0,Ie.U)((0,v.l)(n,(0,m.d)(e,t))),be(t,a,r)}}),$e=n(4513),Ce=n(248);var Se=(0,r.op)({huberLoss_:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e,t,n,r=1,a=fe.SUM_BY_NONZERO_WEIGHTS){e=(0,b._1)(e,"labels","huberLoss"),t=(0,b._1)(t,"predictions","huberLoss");let o=null;return null!=n&&(o=(0,b._1)(n,"weights","huberLoss")),(0,w.k5)(e.shape,t.shape,"Error in huberLoss: "),r=(0,p.i)(r),t=(0,me.W)((0,v.l)(t,e)),e=(0,$e.L)(t,r),t=(0,v.l)(t,e),t=(0,l.I)((0,m.d)((0,p.i)(.5),(0,Ce.h)(e)),(0,m.d)(r,t)),be(t,o,a)}}),Te=n(2597);var Ee=(0,r.op)({logLoss_:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e,t,n,r=1e-7,a=fe.SUM_BY_NONZERO_WEIGHTS){var o=(0,b._1)(e,"labels","logLoss"),e=(0,b._1)(t,"predictions","logLoss");let s=null;return null!=n&&(s=(0,b._1)(n,"weights","logLoss")),(0,w.k5)(o.shape,e.shape,"Error in logLoss: "),t=(0,p.i)(1),n=(0,p.i)(r),r=(0,pe.W)((0,m.d)(o,(0,Te.c)((0,l.I)(e,n)))),n=(0,m.d)((0,v.l)(t,o),(0,Te.c)((0,l.I)((0,v.l)(t,e),n))),n=(0,v.l)(r,n),be(n,s,a)}}),Re=n(5265);var t=(0,r.op)({meanSquaredError_:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e,t,n,r=fe.SUM_BY_NONZERO_WEIGHTS){e=(0,b._1)(e,"labels","meanSquaredError"),t=(0,b._1)(t,"predictions","meanSquaredError");let a=null;return null!=n&&(a=(0,b._1)(n,"weights","meanSquaredError")),(0,w.k5)(e.shape,t.shape,"Error in meanSquaredError: "),t=(0,Re.$)(e,t),be(t,a,r)}}),De=n(4842),Ae=n(7474);var _e=(0,r.op)({sigmoidCrossEntropy_:function(e,t,n,r=0,a=fe.SUM_BY_NONZERO_WEIGHTS){let o=(0,b._1)(e,"multiClassLabels","sigmoidCrossEntropy");var t=(0,b._1)(t,"logits","sigmoidCrossEntropy");let s=null;null!=n&&(s=(0,b._1)(n,"weights","sigmoidCrossEntropy")),(0,w.k5)(o.shape,t.shape,"Error in sigmoidCrossEntropy: "),0<r&&(i=(0,p.i)(r),r=(0,p.i)(1),u=(0,p.i)(.5),o=(0,l.I)((0,m.d)(o,(0,v.l)(r,i)),(0,m.d)(u,i)));var i,u=(u=o,i=t,t=(0,b._1)(u,"labels","sigmoidCrossEntropyWithLogits"),u=(0,b._1)(i,"logits","sigmoidCrossEntropyWithLogits"),(0,w.k5)(t.shape,u.shape,"Error in sigmoidCrossEntropyWithLogits: "),i=(0,Ie.U)(u),t=(0,m.d)(u,t),u=(0,Ae.K)((0,De.Q)((0,pe.W)((0,me.W)(u)))),(0,l.I)((0,v.l)(i,t),u));return be(u,s,a)}}),Oe=n(633),Fe=n(3591),Be=n(1391);r=(0,r.op)({softmaxCrossEntropy_:function(e,t,n,r=0,a=fe.SUM_BY_NONZERO_WEIGHTS){let o=(0,b._1)(e,"onehotLabels","softmaxCrossEntropy");e=(0,b._1)(t,"logits","softmaxCrossEntropy");let s=null;return null!=n&&(s=(0,b._1)(n,"weights","softmaxCrossEntropy")),(0,w.k5)(o.shape,e.shape,"Error in softmaxCrossEntropy: "),0<r&&(t=(0,p.i)(r),n=(0,p.i)(1),r=(0,p.i)(o.shape[1]),o=(0,l.I)((0,m.d)(o,(0,v.l)(n,t)),(0,f.h)(t,r))),e=
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e,t,a=-1){if((a=-1===a?t.rank-1:a)!==t.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet "+`supported. Labels / logits was rank ${t.rank} `+`and dim was ${a}`);const n=(0,Oe.cb)((e,t,n)=>{var r=(0,Be.l)(t,[a],!0),r=(0,v.l)((0,ge.p)(t,"float32"),r);n([e,r]);e=(0,pe.W)((0,m.d)(r,e));return{value:(0,ae.S)(e,[a]),gradFunc:(e,t)=>{var[n,r]=t,t=(0,Fe.rv)(e.shape,[a]);return[(0,m.d)((0,c.X)(e,t),(0,v.l)((0,ge.p)(n,"float32"),(0,De.Q)(r))),(0,m.d)((0,c.X)(e,t),(0,v.l)((0,De.Q)(r),(0,ge.p)(n,"float32")))]}}});return n(e,t)}(o,e),be(e,s,a)}}),C.k,S.S,$.Q,T.w,D,_;const Pe={flipLeftRight:M,resizeNearestNeighbor:K.j,resizeBilinear:q.I,rotateWithOffset:L,cropAndResize:P,nonMaxSuppression:U,nonMaxSuppressionAsync:z,nonMaxSuppressionWithScore:G,nonMaxSuppressionWithScoreAsync:H,nonMaxSuppressionPadded:j,nonMaxSuppressionPaddedAsync:X};be},9682:function(e,t,n){"use strict";n.d(t,{v:function(){return s}});var r=n(7097),a=n(9121),o=n(3740);const s=(0,n(2668).op)({pad_:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e,t,n=0){if(0===(e=(0,o._1)(e,"x","pad")).rank)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");return r.BV.runKernel(a.ly,{x:e},{paddings:t,constantValue:n})}})},3453:function(e,t,n){"use strict";n.d(t,{s:function(){return i}});var r=n(7097),a=n(9121),o=n(747),s=n(3740);const i=(0,n(2668).op)({pow_:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e,t){return e=(0,s._1)(e,"base","pow"),t=(0,s._1)(t,"exp","pow"),[e,t]=(0,o.T_)(e,t),r.BV.runKernel(a.pe,{a:e,b:t})}})},8151:function(e,t,n){"use strict";n.d(t,{A:function(){return s}});var r=n(7097),a=n(9121),o=n(3740);const s=(0,n(2668).op)({prelu_:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e,t){return e=(0,o._1)(e,"x","prelu"),t=(0,o._1)(t,"alpha","prelu"),r.BV.runKernel(a.o0,{x:e,alpha:t})}})},9451:function(e,t,n){"use strict";n.d(t,{W:function(){return r}});var a=n(7097),o=n(9121),s=n(3740),i=n(2271);const r=(0,n(2668).op)({prod_:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e,t=null,n=!1){let r=(0,s._1)(e,"x","prod");return"bool"===r.dtype&&(r=(0,i.p)(r,"int32")),e={x:r},a.BV.runKernel(o.Dl,e,{axis:t,keepDims:n})}})},7245:function(e,t,n){"use strict";n.d(t,{w:function(){return r}});var a=n(7097),o=n(9121);
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function r(e,t,n=1,r="float32"){if(0===n)throw new Error("Cannot have a step of zero");return a.BV.runKernel(o.e6,{},{start:e,stop:t,step:n,dtype:r})}},766:function(e,t,n){"use strict";n.d(t,{k:function(){return s}});var r=n(7097),a=n(9121),o=n(3740);const s=(0,n(2668).op)({real_:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e){return e=(0,o._1)(e,"input","real"),r.BV.runKernel(a.xJ,{input:e})}})},9036:function(e,t,n){"use strict";n.d(t,{M:function(){return s}});var r=n(7097),a=n(9121),o=n(3740);const s=(0,n(2668).op)({reciprocal_:
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e){return e=(0,o._1)(e,"x","reciprocal"),r.BV.runKernel(a.$H,{x:e})}})},7409:function(e,t,n){"use strict";n.d(t,{U:function(){return s}});var r=n(7097),a=n(9121),o=n(3740);const s=(0,n(2668).op)({relu_:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e){return e=(0,o._1)(e,"x","relu"),r.BV.runKernel(a.qk,{x:e})}})},3582:function(e,t,n){"use strict";n.d(t,{b:function(){return s}});var r=n(7097),a=n(9121),o=n(3740);const s=(0,n(2668).op)({relu6_:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e){return e=(0,o._1)(e,"x","relu6"),r.BV.runKernel(a.Sb,{x:e})}})},4968:function(e,t,n){"use strict";n.d(t,{X:function(){return s}});var r=n(7097),a=n(9121),o=n(3740);const s=(0,n(2668).op)({reshape_:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e,t){return e=(0,o._1)(e,"x","reshape","string_or_numeric"),r.BV.runKernel(a.HZ,{x:e},{shape:t})}})},7486:function(e,t,n){"use strict";n.d(t,{G:function(){return s}});var r=n(7097),a=n(9121),o=n(3740);const s=(0,n(2668).op)({reverse_:
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e,t){return e=(0,o._1)(e,"x","reverse"),r.BV.runKernel(a.mK,{x:e},{dims:t})}})},7809:function(e,t,n){"use strict";n.d(t,{N:function(){return s}});var r=n(7097),a=n(9121),o=n(3740);const s=(0,n(2668).op)({round_:
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e){return e=(0,o._1)(e,"x","round"),r.BV.runKernel(a.e0,{x:e})}})},2634:function(e,t,n){"use strict";n.d(t,{b:function(){return s}});var r=n(7097),a=n(9121),o=n(3740);const s=(0,n(2668).op)({rsqrt_:
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e){return e=(0,o._1)(e,"x","rsqrt"),r.BV.runKernel(a.bV,{x:e})}})},9494:function(e,t,n){"use strict";n.d(t,{i:function(){return o}});var r=n(569),a=n(7852);
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function o(e,t){if(((0,r.fU)(e)&&"string"!==t||Array.isArray(e))&&"complex64"!==t)throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if("string"===t&&(0,r.fU)(e)&&!(e instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return(0,a.H)(e,[],[],t)}},3028:function(e,t,n){"use strict";n.d(t,{l5:function(){return r},b0:function(){return a},SU:function(){return o}});var u=n(569);function r(t,n,r){var a=1<n.rank?n.shape[n.rank-1]:1,o=1<n.rank?n.rank-1:1,s="Must have updates.shape = indices.shape[:batchDim] + "+`shape[sliceDim:], got updates.shape: ${r.shape}`+`, indices.shape: ${n.shape}, shape: ${t}`+`, sliceDim: ${a}, and batchDim: ${o}.`;if(r.rank<o)throw new Error(s+` update.rank < ${o}. `);if(t.length<a+(r.rank-o))throw new Error(s+` Output shape length < ${a+(r.rank-o)}`);if(r.rank!==o+t.length-a)throw new Error(s+` update.rank != ${o+t.length-a}`);for(let e=0;e<o;++e)if(r.shape[e]!==n.shape[e])throw new Error(s+` updates.shape[${e}] (${r.shape[e]}) != indices.shape[${e}] (${n.shape[e]}).`);for(let e=0;e<r.rank-o;++e)if(r.shape[e+o]!==t[e+a])throw new Error(s+` updates.shape[${e+o}] (${r.shape[e+o]}) != shape[${e+o}] (${t[e+o]})`)}function a(e,t,n){if(t.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher,"+` but the rank was ${t.rank}.`);if(e.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher,"+` but the rank was ${e.rank}.`);if("int32"!==t.dtype)throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${t.dtype}`);if(n.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${n}`);if(0===n.length){if(0===t.size)throw new Error(`Indices specified for empty output. indices shape: ${t.shape}`);if(0===e.size)throw new Error(`Updates specified for empty output. updates shape: ${e.shape}`)}r(n,t,e)}function o(e,t,n){var r=t.shape.length,a=1<r?t.shape[r-1]:1,o=n.length;let s=1;for(let e=a;e<o;++e)s*=n[e];var i=a<1?1:a,r=(0,u.NA)(t.shape)/i,t=[...(0,u.e3)(n.slice(0,a)),1],i=(0,u.NA)(n);return{sliceRank:a,numUpdates:r,sliceSize:s,strides:t,outputSize:i}}},5503:function(e,t,n){"use strict";n.d(t,{U:function(){return s}});var r=n(7097),a=n(9121),o=n(3740);const s=(0,n(2668).op)({selu_:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e){return e=(0,o._1)(e,"x","selu"),r.BV.runKernel(a.oF,{x:e})}})},625:function(e,t,n){"use strict";n.d(t,{X:function(){return s}});var r=n(7097),a=n(9121),o=n(3740);const s=(0,n(2668).op)({sigmoid_:
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e){return e=(0,o._1)(e,"x","sigmoid"),r.BV.runKernel(a.a5,{x:e})}})},4434:function(e,t,n){"use strict";n.d(t,{X:function(){return s}});var r=n(7097),a=n(9121),o=n(3740);const s=(0,n(2668).op)({sign_:
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e){return e=(0,o._1)(e,"x","sign"),r.BV.runKernel(a.i5,{x:e})}})},9331:function(e,t,n){"use strict";n.d(t,{O:function(){return s}});var r=n(7097),a=n(9121),o=n(3740);const s=(0,n(2668).op)({sin_:
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e){return e=(0,o._1)(e,"x","sin"),r.BV.runKernel(a.RQ,{x:e})}})},3254:function(e,t,n){"use strict";n.d(t,{R:function(){return s}});var r=n(7097),a=n(9121),o=n(3740);const s=(0,n(2668).op)({sinh_:
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e){return e=(0,o._1)(e,"x","sinh"),r.BV.runKernel(a.w3,{x:e})}})},2676:function(e,t,n){"use strict";n.d(t,{t:function(){return s}});var r=n(7097),a=n(9121),o=n(3740);const s=(0,n(2668).op)({slice_:
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e,t,n){if(0===(e=(0,o._1)(e,"x","slice","string_or_numeric")).rank)throw new Error("Slicing scalar is not possible");return r.BV.runKernel(a.p2,{x:e},{begin:t,size:n})}})},682:function(e,t,n){"use strict";n.d(t,{X:function(){return s}});var r=n(7097),a=n(9121),o=n(3740);const s=(0,n(2668).op)({softmax_:
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e,t=-1){if(e=(0,o._1)(e,"logits","softmax","float32"),(t=-1===t?e.rank-1:t)!==e.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. "+`Logits was rank ${e.rank} and dim was ${t}`);return r.BV.runKernel(a.Gc,{logits:e},{dim:t})}})},3694:function(e,t,n){"use strict";n.d(t,{W:function(){return s}});var r=n(7097),a=n(9121),o=n(3740);const s=(0,n(2668).op)({softplus_:
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e){return e=(0,o._1)(e,"x","softplus"),r.BV.runKernel(a.MR,{x:e})}})},7918:function(e,t,n){"use strict";n.d(t,{f:function(){return r}});var o=n(7097),s=n(9121),i=n(3740),u=n(569);const r=(0,n(2668).op)({spaceToBatchND_:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e,r,a){const t=(0,i._1)(e,"x","spaceToBatchND");return u.hu(t.rank>=1+r.length,()=>`input rank ${t.rank} should be > than [blockShape] ${r.length}`),u.hu(a.length===r.length,()=>`paddings.shape[0] ${a.length} must be equal to [blockShape] ${r.length}`),u.hu(t.shape.reduce((e,t,n)=>0<n&&n<=r.length?e&&(t+a[n-1][0]+a[n-1][1])%r[n-1]==0:e,!0),()=>`input spatial dimensions ${t.shape.slice(1)} with paddings ${a.toString()} must be divisible by blockShapes ${r.toString()}`),e={x:t},o.BV.runKernel(s.TQ,e,{blockShape:r,paddings:a})}})},7020:function(e,t,n){"use strict";n.d(t,{k:function(){return s}});var r=n(7097),a=n(9121),o=n(569);const s=(0,n(2668).op)({fft_:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e){return(0,o.hu)("complex64"===e.dtype,()=>"The dtype for tf.spectral.fft() must be complex64 "+`but got ${e.dtype}.`),r.BV.runKernel(a.vw,{input:e})}})},8447:function(e,t,n){"use strict";n.d(t,{S:function(){return s}});var r=n(7097),a=n(9121),o=n(569);const s=(0,n(2668).op)({ifft_:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e){return(0,o.hu)("complex64"===e.dtype,()=>"The dtype for tf.spectral.ifft() must be complex64 "+`but got ${e.dtype}.`),r.BV.runKernel(a.Qg,{input:e})}})},4415:function(e,t,n){"use strict";n.d(t,{w:function(){return r}});var l=n(1661),c=n(6884),p=n(4386),d=n(4841),t=n(2668),h=n(766),f=n(4968),m=n(7486),g=n(9494),y=n(2676),v=n(8447);const r=(0,t.op)({irfft_:
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e){var t,n,r,a,o=e.shape[e.shape.length-1];const s=e.size/o;let i;if(i=o<=2?(r=(0,f.X)(e,[s,o]),(0,v.S)(r)):(a=[s,2*(o-1)],t=(0,f.X)((0,h.k)(e),[s,o]),n=(0,f.X)((0,p.a)(e),[s,o]),r=(0,m.G)((0,y.t)(t,[0,1],[s,o-2]),1),o=(0,d.d)((0,m.G)((0,y.t)(n,[0,1],[s,o-2]),1),(0,g.i)(-1)),r=(0,c.z)([t,r],1),o=(0,c.z)([n,o],1),a=(0,f.X)((0,l.P)(r,o),[a[0],a[1]]),(0,v.S)(a)),i=(0,h.k)(i),3===e.rank&&0!==e.shape[0]){const u=i,s=e.shape[0];i=(0,f.X)(i,[s,i.shape[0]/s,i.shape[1]]),u.dispose()}return i}})},3710:function(e,t,n){"use strict";n.d(t,{Q:function(){return r}});var l=n(569),c=n(1661),p=n(6884),d=n(4386),t=n(2668),h=n(766),f=n(4968),m=n(2676),g=n(8644),y=n(9640),v=n(6577),x=n(7020);const r=(0,t.op)({rfft_:
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e,t){(0,l.hu)("float32"===e.dtype,()=>`The dtype for rfft() must be real value but got ${e.dtype}`);let n=e.shape[e.shape.length-1];var r=e.size/n;let a;if(null!=t&&t<n){var o=e.shape.map(e=>0);const i=e.shape.map(e=>e);i[e.shape.length-1]=t,a=(0,m.t)(e,o,i),n=t}else if(null!=t&&t>n){const u=e.shape.map(e=>e);u[e.shape.length-1]=t-n,a=(0,p.z)([e,(0,y.l)(u)],e.shape.length-1),n=t}else a=e;o=(0,v.P)(a),t=(0,f.X)((0,c.P)(a,o),[r,n]),o=(0,x.k)(t),r=Math.floor(n/2)+1,t=(0,h.k)(o),o=(0,d.a)(o),t=(0,g.V)(t,[r,n-r],t.shape.length-1),o=(0,g.V)(o,[r,n-r],o.shape.length-1);const s=a.shape.slice();return s[a.shape.length-1]=r,(0,f.X)((0,c.P)(t[0],o[0]),s)}})},8644:function(e,t,n){"use strict";n.d(t,{V:function(){return s}});var r=n(7097),a=n(9121),o=n(3740);const s=(0,n(2668).op)({split_:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e,t,n=0){return e=(0,o._1)(e,"x","split"),r.BV.runKernel(a.L8,{x:e},{numOrSizeSplits:t,axis:n})}})},3261:function(e,t,n){"use strict";n.d(t,{_:function(){return s}});var r=n(7097),a=n(9121),o=n(3740);const s=(0,n(2668).op)({sqrt_:
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e){return e=(0,o._1)(e,"x","sqrt"),r.BV.runKernel(a.FK,{x:e})}})},248:function(e,t,n){"use strict";n.d(t,{h:function(){return o}});var r=n(7097),a=n(3740);const o=(0,n(2668).op)({square_:
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e){return e=(0,a._1)(e,"x","square"),r.BV.runKernel("Square",{x:e},{})}})},5265:function(e,t,n){"use strict";n.d(t,{$:function(){return u}});var r=n(7097),a=n(9121),o=n(747),s=n(3740),i=n(2200);const u=(0,n(2668).op)({squaredDifference_:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e,t){return e=(0,s._1)(e,"a","squaredDifference"),t=(0,s._1)(t,"b","squaredDifference"),[e,t]=(0,o.T_)(e,t),(0,i.$N)(e.shape,t.shape),r.BV.runKernel(a._t,{a:e,b:t},{})}})},9590:function(e,t,n){"use strict";n.d(t,{L:function(){return s}});var r=n(3740),a=n(569),t=n(2668),o=n(4968);const s=(0,t.op)({squeeze_:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e,t){return e=(0,r._1)(e,"x","squeeze"),(0,o.X)(e,(0,a.bp)(e.shape,t).newShape)}})},2991:function(e,t,n){"use strict";n.d(t,{k:function(){return i}});var r=n(7097),a=n(9121),o=n(3740),s=n(569);const i=(0,n(2668).op)({stack_:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e,t=0){return e=(0,o.sI)(e,"tensors","stack","string_or_numeric"),s.hu(1<=e.length,()=>"Pass at least one tensor to tf.stack"),0<e.length&&s.hu(t<=e[0].rank,()=>"Axis must be <= rank of the tensor"),r.BV.runKernel(a.Qi,e,{axis:t})}})},1901:function(e,t,n){"use strict";n.d(t,{N:function(){return s}});var r=n(7097),a=n(9121),o=n(3740);const s=(0,n(2668).op)({step_:
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e,t=0){return e=(0,o._1)(e,"x","step"),r.BV.runKernel(a.h8,{x:e},{alpha:t})}})},5158:function(e,t,n){"use strict";n.d(t,{N:function(){return r}});var l=n(7097),c=n(9121),p=n(3740);const r=(0,n(2668).op)({stridedSlice_:
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e,t,n,r,a=0,o=0,s=0,i=0,u=0){return e=(0,p._1)(e,"x","stridedSlice"),l.BV.runKernel(c.m2,{x:e},{begin:t,end:n,strides:r,beginMask:a,endMask:o,ellipsisMask:s,newAxisMask:i,shrinkAxisMask:u})}})},827:function(e,t,n){"use strict";n.d(t,{l:function(){return i}});var r=n(7097),a=n(9121),o=n(747),s=n(3740);const i=(0,n(2668).op)({sub_:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e,t){return e=(0,s._1)(e,"a","sub"),t=(0,s._1)(t,"b","sub"),[e,t]=(0,o.T_)(e,t),r.BV.runKernel(a.Tr,{a:e,b:t})}})},5475:function(e,t,n){"use strict";n.d(t,{S:function(){return r}});var a=n(7097),o=n(9121),s=n(3740),i=n(2271);const r=(0,n(2668).op)({sum_:
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e,t=null,n=!1){let r=(0,s._1)(e,"x","sum");return"bool"===r.dtype&&(r=(0,i.p)(r,"int32")),e={x:r},a.BV.runKernel(o.GB,e,{axis:t,keepDims:n})}})},1173:function(e,t,n){"use strict";n.d(t,{O:function(){return s}});var r=n(7097),a=n(9121),o=n(3740);const s=(0,n(2668).op)({tan_:
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e){return e=(0,o._1)(e,"x","tan"),r.BV.runKernel(a.sE,{x:e})}})},1869:function(e,t,n){"use strict";n.d(t,{A:function(){return s}});var r=n(7097),a=n(9121),o=n(3740);const s=(0,n(2668).op)({tanh_:
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e){return e=(0,o._1)(e,"x","tanh"),r.BV.runKernel(a.MI,{x:e})}})},701:function(e,t,n){"use strict";n.d(t,{X:function(){return r}});var a=n(3740),o=n(7852);
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function r(e,t,n){var r=(0,a.C)(e,n);return(0,o.H)(e,t,r,n)}},6092:function(e,t,n){"use strict";n.d(t,{R:function(){return s}});var r=n(3740),a=n(569),o=n(7852);
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function s(e,t){(0,a.Cq)(e);var n=(0,r.C)(e,t);if(1!==n.length)throw new Error("tensor1d() requires values to be a flat/TypedArray");return(0,o.H)(e,null,n,t)}},7852:function(e,t,n){"use strict";n.d(t,{H:function(){return r}});var i=n(7097),u=n(569),l=n(9155);
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function r(e,t,n,r){if("complex64"===(r=null==r?(0,u.D2)(e):r))throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!(0,u.fU)(e)&&!Array.isArray(e)&&"number"!=typeof e&&"boolean"!=typeof e&&"string"!=typeof e)throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(null!=t){(0,u.Mu)(t);const o=(0,u.NA)(t),s=(0,u.NA)(n);(0,u.hu)(o===s,()=>`Based on the provided shape, [${t}], the tensor should have `+`${o} values but has ${s}`);for(let e=0;e<n.length;++e){var a=n[e],a=e!==n.length-1||a!==(0,u.NA)(t.slice(e));(0,u.hu)(n[e]===t[e]||!a,()=>"Error creating a new Tensor. Inferred shape "+`(${n}) does not match the provided `+`shape (${t}). `)}}return(0,u.fU)(e)||Array.isArray(e)||(e=[e]),t=t||n,e="string"!==r?(0,l.toTypedArray)(e,r):(0,u.xH)(e,[],!0),i.BV.makeTensor(e,t,r)}},7501:function(e,t,n){"use strict";n.d(t,{G:function(){return i}});var r=n(7097),a=n(9121),o=n(3740),s=n(569);const i=(0,n(2668).op)({tile_:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e,t){const n=(0,o._1)(e,"x","tile","string_or_numeric");return s.hu(n.rank===t.length,()=>`Error in transpose: rank of input ${n.rank} `+`must match length of reps ${t}.`),e={x:n},r.BV.runKernel(a.n9,e,{reps:t})}})},3243:function(e,t,n){"use strict";n.d(t,{h:function(){return r}});var a=n(7097),o=n(9121),s=n(3740);const r=(0,n(2668).op)({topk_:
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e,t=1,n=!0){var r=(0,s._1)(e,"x","topk");if(0===r.rank)throw new Error("topk() expects the input to be of rank 1 or higher");if((e=r.shape[r.shape.length-1])<t)throw new Error(`'k' passed to topk() must be <= the last dimension (${e}) `+`but got ${t}`);var[t,n]=a.BV.runKernel(o.cW,{x:r},{k:t,sorted:n});return{values:t,indices:n}}})},9065:function(e,t,n){"use strict";n.d(t,{p:function(){return r}});var a=n(7097),o=n(9121),s=n(3740),i=n(569);const r=(0,n(2668).op)({transpose_:
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e,t){const n=(0,s._1)(e,"x","transpose");if(null==t&&(t=n.shape.map((e,t)=>t).reverse()),i.hu(n.rank===t.length,()=>`Error in transpose: rank of input ${n.rank} `+`must match length of perm ${t}.`),t.forEach(e=>{i.hu(0<=e&&e<n.rank,()=>`All entries in 'perm' must be between 0 and ${n.rank-1}`+` but got ${t}`)}),n.rank<=1)return n.clone();var r={x:n},e={perm:t};return a.BV.runKernel(o.G3,r,e)}})},9608:function(e,t,n){"use strict";n.d(t,{T:function(){return i}});var r=n(7097),a=n(9121),o=n(3740),s=n(569);const i=(0,n(2668).op)({unique_:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e,t=0){e=(0,o._1)(e,"x","unique","string_or_numeric"),(0,s.hu)(0<e.rank,()=>"The input tensor must be at least 1D");var[e,t]=r.BV.runKernel(a.kp,{x:e},{axis:t});return{values:e,indices:t}}})},4136:function(e,t,n){"use strict";n.d(t,{H:function(){return i}});var r=n(7097),a=n(9121),o=n(3740),s=n(569);const i=(0,n(2668).op)({unstack_:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e,t=0){const n=(0,o._1)(e,"x","unstack","string_or_numeric");return s.hu(t>=-n.shape.length&&t<n.shape.length,()=>`Axis = ${t} is not in [-${n.shape.length}, ${n.shape.length})`),e={value:n},r.BV.runKernel(a.To,e,{axis:t})}})},5912:function(e,t,n){"use strict";n.d(t,{a:function(){return r}});var o=n(7097),s=n(9121),i=n(3740),u=n(569),l=n(8247),c=n(2200);const r=(0,n(2668).op)({where_:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e,t,n){var r=(0,i._1)(t,"a","where"),a=(0,i._1)(n,"b","where"),t=(0,i._1)(e,"condition","where","bool"),n=(0,c.$N)(r.shape,a.shape),e=(0,l.U)(r,n),n=(0,l.U)(a,n);return 1===t.rank&&(0,u.hu)(t.shape[0]===r.shape[0],()=>"The first dimension of `a` must match the size of `condition`."),1!==t.rank&&(0,u.k5)(t.shape,n.shape,"Error in where: "),o.BV.runKernel(s.Ph,{condition:t,t:e,e:n})}})},9640:function(e,t,n){"use strict";n.d(t,{l:function(){return i}});var a=n(7097),o=n(569),s=n(1661);
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function i(e,t="float32"){if("complex64"===t){var n=i(e,"float32"),r=i(e,"float32");return(0,s.P)(n,r)}r=(0,o.wT)((0,o.NA)(e),t);return a.BV.makeTensor(r,e,t)}},6577:function(e,t,n){"use strict";n.d(t,{P:function(){return s}});var r=n(7097),a=n(9121),o=n(3740);const s=(0,n(2668).op)({zerosLike_:
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(e){return e=(0,o._1)(e,"x","zerosLike"),r.BV.runKernel(a.Ru,{x:e})}})},4077:function(e,t,n){"use strict";n.d(t,{es:function(){return f},YD:function(){return s},_w:function(){return m},FZ:function(){return h},Vp:function(){return d},Vi:function(){return p}});var c=n(569);
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const $=20,C=3,a=7;function r(e,t,n,r){var a=(0,c.e3)(t),o=function(e,t,n,r){const a=(0,c.NA)(t),o=r[r.length-1],s=new Array(o).fill(0),i=t.length,u="complex64"===n?E(e):e;if(1<i)for(let e=0;e<a/o;e++){var l=e*o;for(let e=0;e<o;e++)s[e]=Math.max(s[e],S(u[l+e],0,n).length)}return s}(e,t,n,a),s=t.length;const i=function t(n,e,r,a,o,s=!0){const i="complex64"===r?2:1;const u=e[0];const l=e.length;if(0===l){if("complex64"!==r)return"bool"===r?[T(n[0])]:[n[0].toString()];{const g=E(n);return[S(g[0],0,r)]}}if(1===l){if(u>$){const v=C*i;let e=Array.from(n.slice(0,v)),t=Array.from(n.slice((u-C)*i,u*i));return"complex64"===r&&(e=E(e),t=E(t)),["["+e.map((e,t)=>S(e,o[t],r)).join(", ")+", ..., "+t.map((e,t)=>S(e,o[u-C+t],r)).join(", ")+"]"]}const y="complex64"===r?E(n):Array.from(n);return["["+y.map((e,t)=>S(e,o[t],r)).join(", ")+"]"]}const c=e.slice(1);const p=a.slice(1);const d=a[0]*i;const h=[];if(u>$){for(let e=0;e<C;e++){const x=e*d,b=x+d;h.push(...t(n.slice(x,b),c,r,p,o,!1))}h.push("...");for(let e=u-C;e<u;e++){const w=e*d,k=w+d;h.push(...t(n.slice(w,k),c,r,p,o,e===u-1))}}else for(let e=0;e<u;e++){const I=e*d,N=I+d;h.push(...t(n.slice(I,N),c,r,p,o,e===u-1))}const f=2===l?",":"";h[0]="["+h[0]+f;for(let e=1;e<h.length-1;e++)h[e]=" "+h[e]+f;let m=",\n";for(let e=2;e<l;e++)m+="\n";h[h.length-1]=" "+h[h.length-1]+"]"+(s?"":m);return h}(e,t,n,a,o),u=["Tensor"];return r&&(u.push(`  dtype: ${n}`),u.push(`  rank: ${s}`),u.push(`  shape: [${t}]`),u.push("  values:")),u.push(i.map(e=>"    "+e).join("\n")),u.join("\n")}function S(e,t,n){let r;return r=Array.isArray(e)?`${parseFloat(e[0].toFixed(a))} + `+`${parseFloat(e[1].toFixed(a))}j`:(0,c.HD)(e)?`'${e}'`:"bool"===n?T(e):parseFloat(e.toFixed(a)).toString(),(0,c.oj)(r,t)}function T(e){return 0===e?"false":"true"}function E(t){const n=[];for(let e=0;e<t.length;e+=2)n.push([t[e],t[e+1]]);return n}var o=n(9155);
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class s{constructor(e,t,n){if(this.dtype=t,this.shape=e.slice(),this.size=c.NA(e),null!=n){const r=n.length;c.hu(r===this.size,()=>`Length of values '${r}' does not match the size `+`inferred by the shape '${this.size}'.`)}if("complex64"===t)throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=n||c.rQ(t,this.size),this.strides=(0,c.e3)(e)}set(e,...t){0===t.length&&(t=[0]),c.hu(t.length===this.rank,()=>`The number of provided coordinates (${t.length}) must `+`match the rank (${this.rank})`);var n=this.locToIndex(t);this.values[n]=e}get(...t){let e=0;for(const a of t=0===t.length?[0]:t){if(a<0||a>=this.shape[e]){var n=`Requested out of range element at ${t}. `+`  Buffer shape=${this.shape}`;throw new Error(n)}e++}let r=t[t.length-1];for(let e=0;e<t.length-1;++e)r+=this.strides[e]*t[e];return this.values[r]}locToIndex(t){if(0===this.rank)return 0;if(1===this.rank)return t[0];let n=t[t.length-1];for(let e=0;e<t.length-1;++e)n+=this.strides[e]*t[e];return n}indexToLoc(t){if(0===this.rank)return[];if(1===this.rank)return[t];const n=new Array(this.shape.length);for(let e=0;e<n.length-1;++e)n[e]=Math.floor(t/this.strides[e]),t-=n[e]*this.strides[e];return n[n.length-1]=t,n}get rank(){return this.shape.length}toTensor(){return i().makeTensor(this.values,this.shape,this.dtype)}}let i=null,u=null,l=null;function p(e){i=e}function d(e){u=e}function h(e){l=e}l;class f{constructor(e,t,n,r){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=t||"float32",this.size=c.NA(e),this.strides=(0,c.e3)(e),this.dataId=n,this.id=r,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){var e=await this.data();return u.buffer(this.shape,this.dtype,e)}bufferSync(){return u.buffer(this.shape,this.dtype,this.dataSync())}async array(){var e=await this.data();return(0,c.GX)(this.shape,e)}arraySync(){return(0,c.GX)(this.shape,this.dataSync())}async data(){this.throwIfDisposed();var e=i().read(this.dataId);if("string"===this.dtype){const t=await e;try{return t.map(e=>o.decodeString(e))}catch(e){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return e}dataSync(){this.throwIfDisposed();const e=i().readSync(this.dataId);if("string"===this.dtype)try{return e.map(e=>o.decodeString(e))}catch(e){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}async bytes(){this.throwIfDisposed();var e=await i().read(this.dataId);return"string"===this.dtype?e:new Uint8Array(e.buffer)}dispose(){this.isDisposed||(i().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(e=!1){return u.print(this,e)}clone(){return this.throwIfDisposed(),u.clone(this)}toString(e=!1){return r(this.dataSync(),this.shape,this.dtype,e)}cast(e){return this.throwIfDisposed(),u.cast(this,e)}variable(e=!0,t,n){return this.throwIfDisposed(),i().makeVariable(this,e,t,n)}}Object.defineProperty(f,Symbol.hasInstance,{value:e=>!!e&&null!=e.data&&null!=e.dataSync&&null!=e.throwIfDisposed});class m extends f{constructor(e,t,n,r){super(e.shape,e.dtype,e.dataId,r),this.trainable=t,this.name=n}assign(e){if(e.dtype!==this.dtype)throw new Error(`dtype of the new value (${e.dtype}) and `+`previous value (${this.dtype}) must match`);if(!c.cO(e.shape,this.shape))throw new Error(`shape of the new value (${e.shape}) and `+`previous value (${this.shape}) must match`);i().disposeTensor(this),this.dataId=e.dataId,i().incRef(this,null)}dispose(){i().disposeVariable(this),this.isDisposedInternal=!0}}Object.defineProperty(m,Symbol.hasInstance,{value:e=>e instanceof f&&null!=e.assign&&e.assign instanceof Function})},747:function(e,t,n){"use strict";n.d(t,{T_:function(){return a},Vu:function(){return o}});var i=n(4077),r=n(1221);
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function a(e,t){if(e.dtype===t.dtype)return[e,t];var n=(0,r.x8)(e.dtype,t.dtype);return[e.cast(n),t.cast(n)]}function o(e){var t=[];return function e(t,n,r){if(null==t)return;if(t instanceof i.es)return void n.push(t);if(!u(t))return;const a=t;for(const o in a){const s=a[o];r.has(s)||(r.add(s),e(s,n,r))}}(e,t,new Set),t}function u(e){return Array.isArray(e)||"object"==typeof e}},3740:function(e,t,n){"use strict";n.d(t,{C:function(){return c},_1:function(){return o},sI:function(){return r}});var s=n(7097),a=n(2885),i=n(4077),u=n(569),l=n(9155);
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function c(e,t){let n=e;if((0,u.fU)(e))return"string"===t?[]:[e.length];if(!Array.isArray(e))return[];const r=[];for(;Array.isArray(n)||(0,u.fU)(n)&&"string"!==t;)r.push(n.length),n=n[0];return Array.isArray(e)&&(0,a.OB)().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&function t(n,e,r){r=r||[];if(!Array.isArray(n)&&!(0,u.fU)(n))return void(0,u.hu)(0===e.length,()=>`Element arr[${r.join("][")}] is a primitive, `+`but should be an array/TypedArray of ${e[0]} elements`);(0,u.hu)(0<e.length,()=>`Element arr[${r.join("][")}] should be a primitive, `+`but is an array of ${n.length} elements`);(0,u.hu)(n.length===e[0],()=>`Element arr[${r.join("][")}] should have ${e[0]} `+`elements, but has ${n.length} elements`);const a=e.slice(1);for(let e=0;e<n.length;++e)t(n[e],a,r.concat(e))}(e,r,[]),r}function p(e,t,n,r){if("string_or_numeric"!==e){if(null==e)throw new Error("Expected dtype cannot be null.");if("numeric"!==e&&e!==t||"numeric"===e&&"string"===t)throw new Error(`Argument '${n}' passed to '${r}' must `+`be ${e} tensor, but got ${t} tensor`)}}function o(e,t,n,r="numeric"){if(e instanceof i.es)return p(r,e.dtype,t,n),e;let a=(0,u.D2)(e);if("string"!==a&&0<=["bool","int32","float32"].indexOf(r)&&(a=r),p(r,a,t,n),null==e||!(0,u.fU)(e)&&!Array.isArray(e)&&"number"!=typeof e&&"boolean"!=typeof e&&"string"!=typeof e){var o=null==e?"null":e.constructor.name;throw new Error(`Argument '${t}' passed to '${n}' must be a `+`Tensor or TensorLike, but got '${o}'`)}o=c(e,a);(0,u.fU)(e)||Array.isArray(e)||(e=[e]);e="string"!==a?(0,l.toTypedArray)(e,a):(0,u.xH)(e,[],!0);return s.BV.makeTensor(e,o,a)}function r(e,n,r,a="numeric"){if(!Array.isArray(e))throw new Error(`Argument ${n} passed to ${r} must be a `+"`Tensor[]` or `TensorLike[]`");const t=e;return t.map((e,t)=>o(e,`${n}[${t}]`,r,a))}},1221:function(e,t,n){"use strict";
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
var r,a,o,s,i;n.d(t,{x8:function(){return l},z4:function(){return c}}),(i=i=i||{}).R0="R0",i.R1="R1",i.R2="R2",i.R3="R3",i.R4="R4",i.R5="R5",i.R6="R6",(i=r=r||{}).float32="float32",i.int32="int32",i.bool="int32",i.complex64="complex64",(i=a=a||{}).float32="float32",i.int32="int32",i.bool="bool",i.complex64="complex64",(i=o=o||{}).float32="float32",i.int32="float32",i.bool="float32",i.complex64="complex64",(i=s=s||{}).float32="complex64",i.int32="complex64",i.bool="complex64",i.complex64="complex64";const u={float32:o,int32:r,bool:a,complex64:s};function l(e,t){if("string"!==e&&"string"!==t)return u[e][t];if("string"===e&&"string"===t)return"string";throw new Error(`Can not upcast ${e} with ${t}`)}function c(e){return l(e,"int32")}},9155:function(e,t,n){"use strict";n.r(t),n.d(t,{arraysEqual:function(){return s.cO},assert:function(){return s.hu},assertNonNegativeIntegerDimensions:function(){return s.Mu},assertNonNull:function(){return s.Cq},assertShapesMatch:function(){return s.k5},bytesFromStringArray:function(){return s.Ub},bytesPerElement:function(){return s.bT},checkConversionForErrors:function(){return s.D5},clamp:function(){return s.uZ},computeStrides:function(){return s.e3},createShuffledIndices:function(){return s.U$},distSquared:function(){return s.E7},flatten:function(){return s.xH},getArrayFromDType:function(){return s.rQ},getTypedArrayFromDType:function(){return s.WP},hasEncodingLoss:function(){return s.QB},indexToLoc:function(){return s.NE},inferDtype:function(){return s.D2},inferFromImplicitShape:function(){return s.JZ},isBoolean:function(){return s.jn},isFunction:function(){return s.mf},isInt:function(){return s.GN},isNumber:function(){return s.hj},isPromise:function(){return s.tI},isScalarShape:function(){return s.N9},isString:function(){return s.HD},isTypedArray:function(){return s.fU},isValidDtype:function(){return s.LP},locToIndex:function(){return s.qy},makeOnesTypedArray:function(){return s.p8},makeZerosNestedTypedArray:function(){return s.l6},makeZerosTypedArray:function(){return s.wT},nearestDivisor:function(){return s.jP},nearestLargerEven:function(){return s.nY},parseAxisParam:function(){return s.EC},randUniform:function(){return s.bj},repeatedTry:function(){return s.WD},rightPad:function(){return s.oj},shuffle:function(){return s.TV},sizeFromShape:function(){return s.NA},sizeToSquarishShape:function(){return s.YP},squeezeShape:function(){return s.bp},sum:function(){return s.Sm},tanh:function(){return s.AE},toNestedArray:function(){return s.GX},createScalarValue:function(){return r},toTypedArray:function(){return a},now:function(){return i},fetch:function(){return u},encodeString:function(){return l},decodeString:function(){return c}});var o=n(2885),s=n(569);
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function r(e,t){return"string"===t?l(e):a([e],t)}function a(t,e){if("string"===e)throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(t)&&(t=s.xH(t)),(0,o.OB)().getBool("DEBUG")&&s.D5(t,e),r=e,(n=t)instanceof Float32Array&&"float32"===r||n instanceof Int32Array&&"int32"===r||n instanceof Uint8Array&&"bool"===r)return t;var n,r;if(null==e||"float32"===e||"complex64"===e)return new Float32Array(t);if("int32"===e)return new Int32Array(t);if("bool"!==e)throw new Error(`Unknown data type ${e}`);{const a=new Uint8Array(t.length);for(let e=0;e<a.length;++e)0!==Math.round(t[e])&&(a[e]=1);return a}}function i(){return(0,o.OB)().platform.now()}function u(e,t){return(0,o.OB)().platform.fetch(e,t)}function l(e,t="utf-8"){return t=t||"utf-8",(0,o.OB)().platform.encode(e,t)}function c(e,t="utf-8"){return t=t||"utf-8",(0,o.OB)().platform.decode(e,t)}},569:function(e,t,n){"use strict";
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function r(e){let t=e.length;for(var n,r;0<t;)r=Math.random()*t|0,t--,n=e[t],e[t]=e[r],e[r]=n}function a(e,t,n){return Math.max(e,Math.min(t,n))}function o(e){return e%2==0?e:e+1}function s(t){let n=0;for(let e=0;e<t.length;e++)n+=t[e];return n}function i(e,t){var n=Math.random();return t*n+(1-n)*e}function u(t,n){let r=0;for(let e=0;e<t.length;e++){var a=Number(t[e])-Number(n[e]);r+=a*a}return r}function l(e,t){if(!e)throw new Error("string"==typeof t?t:t())}function c(e,t,n=""){l(m(e,t),()=>n+` Shapes ${e} and ${t} must match`)}function p(e){l(null!=e,()=>"The input to the tensor constructor must be a non-null value.")}function d(t,n=[],r=!1){if(null==n&&(n=[]),Array.isArray(t)||R(t)&&!r)for(let e=0;e<t.length;++e)d(t[e],n,r);else n.push(t);return n}function h(t){if(0===t.length)return 1;let n=t[0];for(let e=1;e<t.length;e++)n*=t[e];return n}function f(e){return 0===e.length}function m(t,n){if(t===n)return!0;if(null==t||null==n)return!1;if(t.length!==n.length)return!1;for(let e=0;e<t.length;e++)if(t[e]!==n[e])return!1;return!0}function g(e){return e%1==0}function y(e){if(null!=Math.tanh)return Math.tanh(e);if(e===1/0)return 1;if(e===-1/0)return-1;e=Math.exp(2*e);return(e-1)/(e+1)}function v(e){var t=Math.ceil(Math.sqrt(e));return[t,Math.ceil(e/t)]}function x(t){const n=new Uint32Array(t);for(let e=0;e<t;++e)n[e]=e;return r(n),n}function b(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function w(o,s=e=>0,i){return new Promise((t,n)=>{let r=0;const a=()=>{var e;o()?t():(r++,e=s(r),null!=i&&r>=i?n():setTimeout(a,e))};a()})}function k(t,e){let n=1,r=-1;for(let e=0;e<t.length;++e)if(0<=t[e])n*=t[e];else if(-1===t[e]){if(-1!==r)throw Error("Shapes can only have 1 implicit size. "+`Found -1 at dim ${r} and dim ${e}`);r=e}else if(t[e]<0)throw Error(`Shapes can not be < 0. Found ${t[e]} at dim ${e}`);if(-1===r){if(0<e&&e!==n)throw Error(`Size(${e}) must match the product of shape ${t}`);return t}if(0===n)throw Error(`Cannot infer the missing size in [${t}] when `+"there are 0 elements");if(e%n!=0)throw Error("The implicit shape can't be a fractional number. "+`Got ${e} / ${n}`);const a=t.slice();return a[r]=e/n,a}function I(e,t){const n=t.length;return l((e=null==e?t.map((e,t)=>t):[].concat(e)).every(e=>e>=-n&&e<n),()=>`All values in axis param must be in range [-${n}, ${n}) but `+`got axis ${e}`),l(e.every(e=>e%1==0),()=>"All values in axis param must be integers but "+`got axis ${e}`),e.map(e=>e<0?n+e:e)}function N(t,e){const n=[],r=[];var a=null!=e&&Array.isArray(e)&&0===e.length,o=null==e||a?null:I(e,t).sort();let s=0;for(let e=0;e<t.length;++e){if(null!=o){if(o[s]===e&&1!==t[e])throw new Error(`Can't squeeze axis ${e} since its dim '${t[e]}' is not 1`);(null==o[s]||o[s]>e)&&1===t[e]&&(n.push(t[e]),r.push(e)),o[s]<=e&&s++}1!==t[e]&&(n.push(t[e]),r.push(e))}return{newShape:n,keptDims:r}}function $(e,t){let n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else{if("bool"!==e)throw new Error(`Unknown data type ${e}`);n=new Uint8Array(t)}return n}function C(e,t){let n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else if("bool"===e)n=new Uint8Array(t);else{if("string"!==e)throw new Error(`Unknown data type ${e}`);n=new Array(t)}return n}function S(t,n){for(let e=0;e<t.length;e++){var r=t[e];if(isNaN(r)||!isFinite(r))throw Error(`A tensor of type ${n} being uploaded contains ${r}.`)}}function T(e){return"bool"===e||"complex64"===e||"float32"===e||"int32"===e||"string"===e}function E(e,t){return"complex64"!==t&&(("float32"!==t||"complex64"===e)&&(("int32"!==t||"float32"===e||"complex64"===e)&&("bool"!==t||"bool"!==e)))}function R(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array}function D(e){if("float32"===e||"int32"===e)return 4;if("complex64"===e)return 8;if("bool"===e)return 1;throw new Error(`Unknown dtype ${e}`)}function A(e){if(null==e)return 0;let t=0;return e.forEach(e=>t+=e.length),t}function _(e){return"string"==typeof e||e instanceof String}function O(e){return"boolean"==typeof e}function F(e){return"number"==typeof e}function B(e){return Array.isArray(e)?B(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array?"int32":F(e)?"float32":_(e)?"string":O(e)?"bool":"float32"}function P(e){return!!(e&&e.constructor&&e.call&&e.apply)}function M(t,n){for(let e=n;e<t;++e)if(t%e==0)return e;return t}function L(t){var n=t.length;if(n<2)return[];const r=new Array(n-1);r[n-2]=t[n-1];for(let e=n-3;0<=e;--e)r[e]=r[e+1]*t[e+1];return r}function V(e,t){if(0===e.length)return t[0];var n=e.reduce((e,t)=>e*t);if(0===n)return[];if(n!==t.length)throw new Error(`[${e}] does not match the input size ${t.length}.`);return function t(n,e,r){const a=new Array;if(1===e.length){var o=e[0];for(let e=0;e<o;e++)a[e]=r[n+e]}else{var s=e[0];const u=e.slice(1);var i=u.reduce((e,t)=>e*t);for(let e=0;e<s;e++)a[e]=t(n+e*i,u,r)}return a}(0,e,t)}function U(e,t){const n=W(e,t);for(let e=0;e<n.length;e++)n[e]=1;return n}function W(e,t){if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t)return new Uint8Array(e);throw new Error(`Unknown data type ${t}`)}function z(e,t){var n=e.reduce((e,t)=>e*t,1);if(null==t||"float32"===t)return V(e,new Float32Array(n));if("int32"===t)return V(e,new Int32Array(n));if("bool"===t)return V(e,new Uint8Array(n));throw new Error(`Unknown data type ${t}`)}function G(t){t.forEach(e=>{l(Number.isInteger(e)&&0<=e,()=>"Tensor must have a shape comprised of positive integers but got "+`shape [${t}].`)})}function H(t,e,n){if(0===e)return 0;if(1===e)return t[0];let r=t[t.length-1];for(let e=0;e<t.length-1;++e)r+=n[e]*t[e];return r}function j(t,e,n){if(0===e)return[];if(1===e)return[t];const r=new Array(e);for(let e=0;e<r.length-1;++e)r[e]=Math.floor(t/n[e]),t-=r[e]*n[e];return r[r.length-1]=t,r}function X(e){return e&&e.then&&"function"==typeof e.then}n.d(t,{TV:function(){return r},uZ:function(){return a},nY:function(){return o},Sm:function(){return s},bj:function(){return i},E7:function(){return u},hu:function(){return l},k5:function(){return c},Cq:function(){return p},xH:function(){return d},NA:function(){return h},N9:function(){return f},cO:function(){return m},GN:function(){return g},AE:function(){return y},YP:function(){return v},U$:function(){return x},oj:function(){return b},WD:function(){return w},JZ:function(){return k},EC:function(){return I},bp:function(){return N},WP:function(){return $},rQ:function(){return C},D5:function(){return S},LP:function(){return T},QB:function(){return E},fU:function(){return R},bT:function(){return D},Ub:function(){return A},HD:function(){return _},jn:function(){return O},hj:function(){return F},D2:function(){return B},mf:function(){return P},jP:function(){return M},e3:function(){return L},GX:function(){return V},p8:function(){return U},wT:function(){return W},l6:function(){return z},Mu:function(){return G},qy:function(){return H},NE:function(){return j},tI:function(){return X}})},9742:function(e,t){"use strict";t.byteLength=function(e){var t=c(e),e=t[0],t=t[1];return 3*(e+t)/4-t},t.toByteArray=function(e){var t,n,r=c(e),a=r[0],r=r[1],o=new l(function(e,t){return 3*(e+t)/4-t}(a,r)),s=0,i=0<r?a-4:a;for(n=0;n<i;n+=4)t=u[e.charCodeAt(n)]<<18|u[e.charCodeAt(n+1)]<<12|u[e.charCodeAt(n+2)]<<6|u[e.charCodeAt(n+3)],o[s++]=t>>16&255,o[s++]=t>>8&255,o[s++]=255&t;2===r&&(t=u[e.charCodeAt(n)]<<2|u[e.charCodeAt(n+1)]>>4,o[s++]=255&t);1===r&&(t=u[e.charCodeAt(n)]<<10|u[e.charCodeAt(n+1)]<<4|u[e.charCodeAt(n+2)]>>2,o[s++]=t>>8&255,o[s++]=255&t);return o},t.fromByteArray=function(e){for(var t,n=e.length,r=n%3,a=[],o=0,s=n-r;o<s;o+=16383)a.push(function(e,t,n){for(var r,a=[],o=t;o<n;o+=3)r=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]),a.push(function(e){return i[e>>18&63]+i[e>>12&63]+i[e>>6&63]+i[63&e]}(r));return a.join("")}(e,o,s<o+16383?s:o+16383));1==r?(t=e[n-1],a.push(i[t>>2]+i[t<<4&63]+"==")):2==r&&(t=(e[n-2]<<8)+e[n-1],a.push(i[t>>10]+i[t>>4&63]+i[t<<2&63]+"="));return a.join("")};for(var i=[],u=[],l="undefined"!=typeof Uint8Array?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=0,a=n.length;r<a;++r)i[r]=n[r],u[n.charCodeAt(r)]=r;function c(e){var t=e.length;if(0<t%4)throw new Error("Invalid string. Length must be a multiple of 4");e=e.indexOf("=");return[e=-1===e?t:e,e===t?0:4-e%4]}u["-".charCodeAt(0)]=62,u["_".charCodeAt(0)]=63},8764:function(e,n,t){"use strict";
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var i=t(9742),o=t(645),t="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;n.Buffer=p,n.SlowBuffer=function(e){+e!=e&&(e=0);return p.alloc(+e)},n.INSPECT_MAX_BYTES=50;var r=2147483647;function a(e){if(r<e)throw new RangeError('The value "'+e+'" is invalid for option "size"');e=new Uint8Array(e);return Object.setPrototypeOf(e,p.prototype),e}function p(e,t,n){if("number"!=typeof e)return s(e,t,n);if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return l(e)}function s(e,t,n){if("string"==typeof e)return function(e,t){"string"==typeof t&&""!==t||(t="utf8");if(!p.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var n=0|f(e,t),r=a(n),t=r.write(e,t);t!==n&&(r=r.slice(0,t));return r}(e,t);if(ArrayBuffer.isView(e))return c(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(A(e,ArrayBuffer)||e&&A(e.buffer,ArrayBuffer))return d(e,t,n);if("undefined"!=typeof SharedArrayBuffer&&(A(e,SharedArrayBuffer)||e&&A(e.buffer,SharedArrayBuffer)))return d(e,t,n);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var r=e.valueOf&&e.valueOf();if(null!=r&&r!==e)return p.from(r,t,n);r=function(e){if(p.isBuffer(e)){var t=0|h(e.length),n=a(t);return 0===n.length?n:(e.copy(n,0,0,t),n)}if(void 0!==e.length)return"number"!=typeof e.length||_(e.length)?a(0):c(e);if("Buffer"===e.type&&Array.isArray(e.data))return c(e.data)}(e);if(r)return r;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return p.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function u(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function l(e){return u(e),a(e<0?0:0|h(e))}function c(e){for(var t=e.length<0?0:0|h(e.length),n=a(t),r=0;r<t;r+=1)n[r]=255&e[r];return n}function d(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');n=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n);return Object.setPrototypeOf(n,p.prototype),n}function h(e){if(r<=e)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r.toString(16)+" bytes");return 0|e}function f(e,t){if(p.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||A(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var n=e.length,r=2<arguments.length&&!0===arguments[2];if(!r&&0===n)return 0;for(var a=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return E(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return R(e).length;default:if(a)return r?-1:E(e).length;t=(""+t).toLowerCase(),a=!0}}function m(e,t,n){var r,a,o,s=!1;if((t=void 0===t||t<0?0:t)>this.length)return"";if((n=void 0===n||n>this.length?this.length:n)<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e=e||"utf8";;)switch(e){case"hex":return function(e,t,n){var r=e.length;(!t||t<0)&&(t=0);(!n||n<0||r<n)&&(n=r);for(var a="",o=t;o<n;++o)a+=O[e[o]];return a}(this,t,n);case"utf8":case"utf-8":return w(this,t,n);case"ascii":return function(e,t,n){var r="";n=Math.min(e.length,n);for(var a=t;a<n;++a)r+=String.fromCharCode(127&e[a]);return r}(this,t,n);case"latin1":case"binary":return function(e,t,n){var r="";n=Math.min(e.length,n);for(var a=t;a<n;++a)r+=String.fromCharCode(e[a]);return r}(this,t,n);case"base64":return r=this,o=n,0===(a=t)&&o===r.length?i.fromByteArray(r):i.fromByteArray(r.slice(a,o));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(e,t,n){for(var r=e.slice(t,n),a="",o=0;o<r.length;o+=2)a+=String.fromCharCode(r[o]+256*r[o+1]);return a}(this,t,n);default:if(s)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),s=!0}}function g(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function y(e,t,n,r,a){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):2147483647<n?n=2147483647:n<-2147483648&&(n=-2147483648),(n=(n=_(n=+n)?a?0:e.length-1:n)<0?e.length+n:n)>=e.length){if(a)return-1;n=e.length-1}else if(n<0){if(!a)return-1;n=0}if("string"==typeof t&&(t=p.from(t,r)),p.isBuffer(t))return 0===t.length?-1:v(e,t,n,r,a);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?(a?Uint8Array.prototype.indexOf:Uint8Array.prototype.lastIndexOf).call(e,t,n):v(e,[t],n,r,a);throw new TypeError("val must be string, number or Buffer")}function v(e,t,n,r,a){var o=1,s=e.length,i=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;s/=o=2,i/=2,n/=2}function u(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(a)for(var l=-1,c=n;c<s;c++)if(u(e,c)===u(t,-1===l?0:c-l)){if(c-(l=-1===l?c:l)+1===i)return l*o}else-1!==l&&(c-=c-l),l=-1;else for(c=n=s<n+i?s-i:n;0<=c;c--){for(var p=!0,d=0;d<i;d++)if(u(e,c+d)!==u(t,d)){p=!1;break}if(p)return c}return-1}function x(e,t,n,r){return D(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function b(e,t,n,r){return D(function(e,t){for(var n,r,a=[],o=0;o<e.length&&!((t-=2)<0);++o)r=e.charCodeAt(o),n=r>>8,r=r%256,a.push(r),a.push(n);return a}(t,e.length-n),e,n,r)}function w(e,t,n){n=Math.min(e.length,n);for(var r=[],a=t;a<n;){var o,s,i,u,l=e[a],c=null,p=239<l?4:223<l?3:191<l?2:1;if(a+p<=n)switch(p){case 1:l<128&&(c=l);break;case 2:128==(192&(o=e[a+1]))&&127<(u=(31&l)<<6|63&o)&&(c=u);break;case 3:o=e[a+1],s=e[a+2],128==(192&o)&&128==(192&s)&&2047<(u=(15&l)<<12|(63&o)<<6|63&s)&&(u<55296||57343<u)&&(c=u);break;case 4:o=e[a+1],s=e[a+2],i=e[a+3],128==(192&o)&&128==(192&s)&&128==(192&i)&&65535<(u=(15&l)<<18|(63&o)<<12|(63&s)<<6|63&i)&&u<1114112&&(c=u)}null===c?(c=65533,p=1):65535<c&&(c-=65536,r.push(c>>>10&1023|55296),c=56320|1023&c),r.push(c),a+=p}return function(e){var t=e.length;if(t<=k)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=k));return n}(r)}n.kMaxLength=r,(p.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}())||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(p.prototype,"parent",{enumerable:!0,get:function(){if(p.isBuffer(this))return this.buffer}}),Object.defineProperty(p.prototype,"offset",{enumerable:!0,get:function(){if(p.isBuffer(this))return this.byteOffset}}),p.poolSize=8192,p.from=s,Object.setPrototypeOf(p.prototype,Uint8Array.prototype),Object.setPrototypeOf(p,Uint8Array),p.alloc=function(e,t,n){return t=t,n=n,u(e=e),!(e<=0)&&void 0!==t?"string"==typeof n?a(e).fill(t,n):a(e).fill(t):a(e)},p.allocUnsafe=l,p.allocUnsafeSlow=l,p.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==p.prototype},p.compare=function(e,t){if(A(e,Uint8Array)&&(e=p.from(e,e.offset,e.byteLength)),A(t,Uint8Array)&&(t=p.from(t,t.offset,t.byteLength)),!p.isBuffer(e)||!p.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var n=e.length,r=t.length,a=0,o=Math.min(n,r);a<o;++a)if(e[a]!==t[a]){n=e[a],r=t[a];break}return n<r?-1:r<n?1:0},p.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},p.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return p.alloc(0);if(void 0===t)for(a=t=0;a<e.length;++a)t+=e[a].length;for(var n=p.allocUnsafe(t),r=0,a=0;a<e.length;++a){var o=e[a];if(A(o,Uint8Array)&&(o=p.from(o)),!p.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(n,r),r+=o.length}return n},p.byteLength=f,p.prototype._isBuffer=!0,p.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)g(this,t,t+1);return this},p.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)g(this,t,t+3),g(this,t+1,t+2);return this},p.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)g(this,t,t+7),g(this,t+1,t+6),g(this,t+2,t+5),g(this,t+3,t+4);return this},p.prototype.toLocaleString=p.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?w(this,0,e):m.apply(this,arguments)},p.prototype.equals=function(e){if(!p.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===p.compare(this,e)},p.prototype.inspect=function(){var e="",t=n.INSPECT_MAX_BYTES,e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim();return this.length>t&&(e+=" ... "),"<Buffer "+e+">"},t&&(p.prototype[t]=p.prototype.inspect),p.prototype.compare=function(e,t,n,r,a){if(A(e,Uint8Array)&&(e=p.from(e,e.offset,e.byteLength)),!p.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===a&&(a=this.length),(t=void 0===t?0:t)<0||n>e.length||r<0||a>this.length)throw new RangeError("out of range index");if(a<=r&&n<=t)return 0;if(a<=r)return-1;if(n<=t)return 1;if(this===e)return 0;for(var o=(a>>>=0)-(r>>>=0),s=(n>>>=0)-(t>>>=0),i=Math.min(o,s),u=this.slice(r,a),l=e.slice(t,n),c=0;c<i;++c)if(u[c]!==l[c]){o=u[c],s=l[c];break}return o<s?-1:s<o?1:0},p.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},p.prototype.indexOf=function(e,t,n){return y(this,e,t,n,!0)},p.prototype.lastIndexOf=function(e,t,n){return y(this,e,t,n,!1)},p.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var a=this.length-t;if((void 0===n||a<n)&&(n=a),0<e.length&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r=r||"utf8";for(var o,s,i,u=!1;;)switch(r){case"hex":return function(e,t,n,r){n=Number(n)||0;var a=e.length-n;(!r||a<(r=Number(r)))&&(r=a),(a=t.length)/2<r&&(r=a/2);for(var o=0;o<r;++o){var s=parseInt(t.substr(2*o,2),16);if(_(s))return o;e[n+o]=s}return o}(this,e,t,n);case"utf8":case"utf-8":return s=t,i=n,D(E(e,(o=this).length-s),o,s,i);case"ascii":return x(this,e,t,n);case"latin1":case"binary":return x(this,e,t,n);case"base64":return o=this,s=t,i=n,D(R(e),o,s,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return b(this,e,t,n);default:if(u)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),u=!0}},p.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var k=4096;function I(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(n<e+t)throw new RangeError("Trying to access beyond buffer length")}function N(e,t,n,r,a,o){if(!p.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(a<t||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function $(e,t,n,r){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function C(e,t,n,r,a){return t=+t,n>>>=0,a||$(e,0,n,4),o.write(e,t,n,r,23,4),n+4}function S(e,t,n,r,a){return t=+t,n>>>=0,a||$(e,0,n,8),o.write(e,t,n,r,52,8),n+8}p.prototype.slice=function(e,t){var n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):n<e&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):n<t&&(t=n),t<e&&(t=e);t=this.subarray(e,t);return Object.setPrototypeOf(t,p.prototype),t},p.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||I(e,t,this.length);for(var r=this[e],a=1,o=0;++o<t&&(a*=256);)r+=this[e+o]*a;return r},p.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||I(e,t,this.length);for(var r=this[e+--t],a=1;0<t&&(a*=256);)r+=this[e+--t]*a;return r},p.prototype.readUInt8=function(e,t){return e>>>=0,t||I(e,1,this.length),this[e]},p.prototype.readUInt16LE=function(e,t){return e>>>=0,t||I(e,2,this.length),this[e]|this[e+1]<<8},p.prototype.readUInt16BE=function(e,t){return e>>>=0,t||I(e,2,this.length),this[e]<<8|this[e+1]},p.prototype.readUInt32LE=function(e,t){return e>>>=0,t||I(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},p.prototype.readUInt32BE=function(e,t){return e>>>=0,t||I(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},p.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||I(e,t,this.length);for(var r=this[e],a=1,o=0;++o<t&&(a*=256);)r+=this[e+o]*a;return(a*=128)<=r&&(r-=Math.pow(2,8*t)),r},p.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||I(e,t,this.length);for(var r=t,a=1,o=this[e+--r];0<r&&(a*=256);)o+=this[e+--r]*a;return(a*=128)<=o&&(o-=Math.pow(2,8*t)),o},p.prototype.readInt8=function(e,t){return e>>>=0,t||I(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},p.prototype.readInt16LE=function(e,t){e>>>=0,t||I(e,2,this.length);e=this[e]|this[e+1]<<8;return 32768&e?4294901760|e:e},p.prototype.readInt16BE=function(e,t){e>>>=0,t||I(e,2,this.length);e=this[e+1]|this[e]<<8;return 32768&e?4294901760|e:e},p.prototype.readInt32LE=function(e,t){return e>>>=0,t||I(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},p.prototype.readInt32BE=function(e,t){return e>>>=0,t||I(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},p.prototype.readFloatLE=function(e,t){return e>>>=0,t||I(e,4,this.length),o.read(this,e,!0,23,4)},p.prototype.readFloatBE=function(e,t){return e>>>=0,t||I(e,4,this.length),o.read(this,e,!1,23,4)},p.prototype.readDoubleLE=function(e,t){return e>>>=0,t||I(e,8,this.length),o.read(this,e,!0,52,8)},p.prototype.readDoubleBE=function(e,t){return e>>>=0,t||I(e,8,this.length),o.read(this,e,!1,52,8)},p.prototype.writeUIntLE=function(e,t,n,r){e=+e,t>>>=0,n>>>=0,r||N(this,e,t,n,Math.pow(2,8*n)-1,0);var a=1,o=0;for(this[t]=255&e;++o<n&&(a*=256);)this[t+o]=e/a&255;return t+n},p.prototype.writeUIntBE=function(e,t,n,r){e=+e,t>>>=0,n>>>=0,r||N(this,e,t,n,Math.pow(2,8*n)-1,0);var a=n-1,o=1;for(this[t+a]=255&e;0<=--a&&(o*=256);)this[t+a]=e/o&255;return t+n},p.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||N(this,e,t,1,255,0),this[t]=255&e,t+1},p.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||N(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},p.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||N(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},p.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||N(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},p.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||N(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},p.prototype.writeIntLE=function(e,t,n,r){e=+e,t>>>=0,r||N(this,e,t,n,(r=Math.pow(2,8*n-1))-1,-r);var a=0,o=1,s=0;for(this[t]=255&e;++a<n&&(o*=256);)e<0&&0===s&&0!==this[t+a-1]&&(s=1),this[t+a]=(e/o>>0)-s&255;return t+n},p.prototype.writeIntBE=function(e,t,n,r){e=+e,t>>>=0,r||N(this,e,t,n,(r=Math.pow(2,8*n-1))-1,-r);var a=n-1,o=1,s=0;for(this[t+a]=255&e;0<=--a&&(o*=256);)e<0&&0===s&&0!==this[t+a+1]&&(s=1),this[t+a]=(e/o>>0)-s&255;return t+n},p.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||N(this,e,t,1,127,-128),this[t]=255&(e=e<0?255+e+1:e),t+1},p.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||N(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},p.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||N(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},p.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||N(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},p.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||N(this,e,t,4,2147483647,-2147483648),this[t]=(e=e<0?4294967295+e+1:e)>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},p.prototype.writeFloatLE=function(e,t,n){return C(this,e,t,!0,n)},p.prototype.writeFloatBE=function(e,t,n){return C(this,e,t,!1,n)},p.prototype.writeDoubleLE=function(e,t,n){return S(this,e,t,!0,n)},p.prototype.writeDoubleBE=function(e,t,n){return S(this,e,t,!1,n)},p.prototype.copy=function(e,t,n,r){if(!p.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n=n||0,r||0===r||(r=this.length),t>=e.length&&(t=e.length),(r=0<r&&r<n?n:r)===n)return 0;if(0===e.length||0===this.length)return 0;if((t=t||0)<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length);var a=(r=e.length-t<r-n?e.length-t+n:r)-n;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(t,n,r);else if(this===e&&n<t&&t<r)for(var o=a-1;0<=o;--o)e[o+t]=this[o+n];else Uint8Array.prototype.set.call(e,this.subarray(n,r),t);return a},p.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!p.isEncoding(r))throw new TypeError("Unknown encoding: "+r);var a;1===e.length&&(a=e.charCodeAt(0),("utf8"===r&&a<128||"latin1"===r)&&(e=a))}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var o;if(t>>>=0,n=void 0===n?this.length:n>>>0,"number"==typeof(e=e||0))for(o=t;o<n;++o)this[o]=e;else{var s=p.isBuffer(e)?e:p.from(e,r),i=s.length;if(0===i)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<n-t;++o)this[o+t]=s[o%i]}return this};var T=/[^+/0-9A-Za-z-_]/g;function E(e,t){var n;t=t||1/0;for(var r=e.length,a=null,o=[],s=0;s<r;++s){if(55295<(n=e.charCodeAt(s))&&n<57344){if(!a){if(56319<n){-1<(t-=3)&&o.push(239,191,189);continue}if(s+1===r){-1<(t-=3)&&o.push(239,191,189);continue}a=n;continue}if(n<56320){-1<(t-=3)&&o.push(239,191,189),a=n;continue}n=65536+(a-55296<<10|n-56320)}else a&&-1<(t-=3)&&o.push(239,191,189);if(a=null,n<128){if(--t<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function R(e){return i.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(T,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function D(e,t,n,r){for(var a=0;a<r&&!(a+n>=t.length||a>=e.length);++a)t[a+n]=e[a];return a}function A(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function _(e){return e!=e}var O=function(){for(var e="0123456789abcdef",t=new Array(256),n=0;n<16;++n)for(var r=16*n,a=0;a<16;++a)t[r+a]=e[n]+e[a];return t}()},6010:function(e,t,n){"use strict";function r(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=function e(t){var n,r,a="";if("string"==typeof t||"number"==typeof t)a+=t;else if("object"==typeof t)if(Array.isArray(t))for(n=0;n<t.length;n++)t[n]&&(r=e(t[n]))&&(a&&(a+=" "),a+=r);else for(n in t)t[n]&&(a&&(a+=" "),a+=n);return a}(e))&&(r&&(r+=" "),r+=t);return r}n.d(t,{Z:function(){return r}})},2918:function(e,t){var o;!function(){function u(e){return e instanceof u?e:this instanceof u?void(this.EXIFwrapped=e):new u(e)}var c=!1,l=((t=e.exports?e.exports=u:t).EXIF=u).Tags={36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRation",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",40965:"InteroperabilityIFDPointer",42016:"ImageUniqueID"},p=u.TiffTags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright"},d=u.GPSTags={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential"},h=u.IFD1Tags={256:"ImageWidth",257:"ImageHeight",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",273:"StripOffsets",274:"Orientation",277:"SamplesPerPixel",278:"RowsPerStrip",279:"StripByteCounts",282:"XResolution",283:"YResolution",284:"PlanarConfiguration",296:"ResolutionUnit",513:"JpegIFOffset",514:"JpegIFByteCount",529:"YCbCrCoefficients",530:"YCbCrSubSampling",531:"YCbCrPositioning",532:"ReferenceBlackWhite"},f=u.StringValues={ExposureProgram:{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},Components:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}};function a(e){return e.exifdata}function r(n,r){function t(e){var t=m(e);n.exifdata=t||{};t=function(e){var t=new DataView(e);c&&console.log("Got file of length "+e.byteLength);if(255!=t.getUint8(0)||216!=t.getUint8(1))return c&&console.log("Not a valid JPEG"),!1;var n=2,r=e.byteLength;for(;n<r;){if(function(e,t){return 56===e.getUint8(t)&&66===e.getUint8(t+1)&&73===e.getUint8(t+2)&&77===e.getUint8(t+3)&&4===e.getUint8(t+4)&&4===e.getUint8(t+5)}(t,n)){var a=t.getUint8(n+7);a%2!=0&&(a+=1);var o=n+8+(a=0===a?4:a),a=t.getUint16(n+6+a);return function(e,t,n){var r,a,o,s=new DataView(e),i={},u=t;for(;u<t+n;)28===s.getUint8(u)&&2===s.getUint8(u+1)&&(o=s.getUint8(u+2))in g&&(a=s.getInt16(u+3),r=g[o],a=v(s,u+5,a),i.hasOwnProperty(r)?i[r]instanceof Array?i[r].push(a):i[r]=[i[r],a]:i[r]=a),u++;return i}(e,o,a)}n++}}(e);n.iptcdata=t||{},u.isXmpEnabled&&(e=function(e){if("DOMParser"in self){var t=new DataView(e);if(c&&console.log("Got file of length "+e.byteLength),255!=t.getUint8(0)||216!=t.getUint8(1))return c&&console.log("Not a valid JPEG"),!1;for(var n=2,r=e.byteLength,a=new DOMParser;n<r-4;){if("http"==v(t,n,4)){var o=n-1,s=t.getUint16(n-2)-1,o=v(t,o,s),s=o.indexOf("xmpmeta>")+8,s=(o=o.substring(o.indexOf("<x:xmpmeta"),s)).indexOf("x:xmpmeta")+10;return o=o.slice(0,s)+'xmlns:Iptc4xmpCore="http://iptc.org/std/Iptc4xmpCore/1.0/xmlns/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:tiff="http://ns.adobe.com/tiff/1.0/" xmlns:plus="http://schemas.android.com/apk/lib/com.google.android.gms.plus" xmlns:ext="http://www.gettyimages.com/xsltExtension/1.0" xmlns:exif="http://ns.adobe.com/exif/1.0/" xmlns:stEvt="http://ns.adobe.com/xap/1.0/sType/ResourceEvent#" xmlns:stRef="http://ns.adobe.com/xap/1.0/sType/ResourceRef#" xmlns:crs="http://ns.adobe.com/camera-raw-settings/1.0/" xmlns:xapGImg="http://ns.adobe.com/xap/1.0/g/img/" xmlns:Iptc4xmpExt="http://iptc.org/std/Iptc4xmpExt/2008-02-29/" '+o.slice(s),function(e){try{var t={};if(0<e.children.length)for(var n=0;n<e.children.length;n++){var r,a=e.children.item(n),o=a.attributes;for(r in o){var s=o[r],i=s.nodeName,u=s.nodeValue;void 0!==i&&(t[i]=u)}var l,c=a.nodeName;void 0===t[c]?t[c]=x(a):(void 0===t[c].push&&(l=t[c],t[c]=[],t[c].push(l)),t[c].push(x(a)))}else t=e.textContent;return t}catch(e){console.log(e.message)}}(a.parseFromString(o,"text/xml"))}n++}}}(e),n.xmpdata=e||{}),r&&r.call(n)}var e,a,o,s,i;n.src?/^data\:/i.test(n.src)?t(function(e,t){t=t||e.match(/^data\:([^\;]+)\;base64,/im)[1]||"",e=e.replace(/^data\:([^\;]+)\;base64,/gim,"");for(var n=atob(e),r=n.length,e=new ArrayBuffer(r),a=new Uint8Array(e),o=0;o<r;o++)a[o]=n.charCodeAt(o);return e}(n.src)):/^blob\:/i.test(n.src)?((a=new FileReader).onload=function(e){t(e.target.result)},o=n.src,s=function(e){a.readAsArrayBuffer(e)},(i=new XMLHttpRequest).open("GET",o,!0),i.responseType="blob",i.onload=function(e){200!=this.status&&0!==this.status||s(this.response)},i.send()):((e=new XMLHttpRequest).onload=function(){if(200!=this.status&&0!==this.status)throw"Could not load image";t(e.response),e=null},e.open("GET",n.src,!0),e.responseType="arraybuffer",e.send(null)):self.FileReader&&(n instanceof self.Blob||n instanceof self.File)&&((a=new FileReader).onload=function(e){c&&console.log("Got file of length "+e.target.result.byteLength),t(e.target.result)},a.readAsArrayBuffer(n))}function m(e){var t=new DataView(e);if(c&&console.log("Got file of length "+e.byteLength),255!=t.getUint8(0)||216!=t.getUint8(1))return c&&console.log("Not a valid JPEG"),!1;for(var n,r=2,a=e.byteLength;r<a;){if(255!=t.getUint8(r))return c&&console.log("Not a valid marker at offset "+r+", found: "+t.getUint8(r)),!1;if(n=t.getUint8(r+1),c&&console.log(n),225==n)return c&&console.log("Found 0xFFE1 marker"),function(e,t){if("Exif"!=v(e,t,4))return c&&console.log("Not valid EXIF data! "+v(e,t,4)),!1;var n,r,a,o,s,i=t+6;if(18761==e.getUint16(i))n=!1;else{if(19789!=e.getUint16(i))return c&&console.log("Not valid TIFF data! (no 0x4949 or 0x4D4D)"),!1;n=!0}if(42!=e.getUint16(i+2,!n))return c&&console.log("Not valid TIFF data! (no 0x002A)"),!1;t=e.getUint32(i+4,!n);if(t<8)return c&&console.log("Not valid TIFF data! (First offset less than 8)",e.getUint32(i+4,!n)),!1;if((r=y(e,i,i+t,p,n)).ExifIFDPointer)for(a in o=y(e,i,i+r.ExifIFDPointer,l,n)){switch(a){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":o[a]=f[a][o[a]];break;case"ExifVersion":case"FlashpixVersion":o[a]=String.fromCharCode(o[a][0],o[a][1],o[a][2],o[a][3]);break;case"ComponentsConfiguration":o[a]=f.Components[o[a][0]]+f.Components[o[a][1]]+f.Components[o[a][2]]+f.Components[o[a][3]]}r[a]=o[a]}if(r.GPSInfoIFDPointer)for(a in s=y(e,i,i+r.GPSInfoIFDPointer,d,n))"GPSVersionID"===a&&(s[a]=s[a][0]+"."+s[a][1]+"."+s[a][2]+"."+s[a][3]),r[a]=s[a];return r.thumbnail=function(e,t,n,r){n=function(e,t,n){var r=e.getUint16(t,!n);return e.getUint32(t+2+12*r,!n)}(e,t+n,r);{if(!n)return{};if(n>e.byteLength)return{}}var a=y(e,t,t+n,h,r);if(a.Compression)switch(a.Compression){case 6:var o,s;a.JpegIFOffset&&a.JpegIFByteCount&&(o=t+a.JpegIFOffset,s=a.JpegIFByteCount,a.blob=new Blob([new Uint8Array(e.buffer,o,s)],{type:"image/jpeg"}));break;case 1:console.log("Thumbnail image format is TIFF, which is not implemented.");break;default:console.log("Unknown thumbnail image format '%s'",a.Compression)}else 2==a.PhotometricInterpretation&&console.log("Thumbnail image format is RGB, which is not implemented.");return a}(e,i,t,n),r}(t,r+4,t.getUint16(r+2));r+=2+t.getUint16(r+2)}}var g={120:"caption",110:"credit",25:"keywords",55:"dateCreated",80:"byline",85:"bylineTitle",122:"captionWriter",105:"headline",116:"copyright",15:"category"};function y(e,t,n,r,a){for(var o,s,i=e.getUint16(n,!a),u={},l=0;l<i;l++)!(s=r[e.getUint16(o=n+12*l+2,!a)])&&c&&console.log("Unknown tag: "+e.getUint16(o,!a)),u[s]=function(e,t,n,r){var a,o,s,i,u,l,c=e.getUint16(t+2,!r),p=e.getUint32(t+4,!r),d=e.getUint32(t+8,!r)+n;switch(c){case 1:case 7:if(1==p)return e.getUint8(t+8,!r);for(a=4<p?d:t+8,o=[],i=0;i<p;i++)o[i]=e.getUint8(a+i);return o;case 2:return v(e,a=4<p?d:t+8,p-1);case 3:if(1==p)return e.getUint16(t+8,!r);for(a=2<p?d:t+8,o=[],i=0;i<p;i++)o[i]=e.getUint16(a+2*i,!r);return o;case 4:if(1==p)return e.getUint32(t+8,!r);for(o=[],i=0;i<p;i++)o[i]=e.getUint32(d+4*i,!r);return o;case 5:if(1==p)return u=e.getUint32(d,!r),l=e.getUint32(d+4,!r),(s=new Number(u/l)).numerator=u,s.denominator=l,s;for(o=[],i=0;i<p;i++)u=e.getUint32(d+8*i,!r),l=e.getUint32(d+4+8*i,!r),o[i]=new Number(u/l),o[i].numerator=u,o[i].denominator=l;return o;case 9:if(1==p)return e.getInt32(t+8,!r);for(o=[],i=0;i<p;i++)o[i]=e.getInt32(d+4*i,!r);return o;case 10:if(1==p)return e.getInt32(d,!r)/e.getInt32(d+4,!r);for(o=[],i=0;i<p;i++)o[i]=e.getInt32(d+8*i,!r)/e.getInt32(d+4+8*i,!r);return o}}(e,o,t,a);return u}function v(e,t,r){var a="";for(n=t;n<t+r;n++)a+=String.fromCharCode(e.getUint8(n));return a}function x(e){var t={};if(1==e.nodeType){if(0<e.attributes.length){t["@attributes"]={};for(var n=0;n<e.attributes.length;n++){var r=e.attributes.item(n);t["@attributes"][r.nodeName]=r.nodeValue}}}else if(3==e.nodeType)return e.nodeValue;if(e.hasChildNodes())for(var a=0;a<e.childNodes.length;a++){var o,s=e.childNodes.item(a),i=s.nodeName;null==t[i]?t[i]=x(s):(null==t[i].push&&(o=t[i],t[i]=[],t[i].push(o)),t[i].push(x(s)))}return t}u.enableXmp=function(){u.isXmpEnabled=!0},u.disableXmp=function(){u.isXmpEnabled=!1},u.getData=function(e,t){return!((self.Image&&e instanceof self.Image||self.HTMLImageElement&&e instanceof self.HTMLImageElement)&&!e.complete)&&(a(e)?t&&t.call(e):r(e,t),!0)},u.getTag=function(e,t){if(a(e))return e.exifdata[t]},u.getIptcTag=function(e,t){if(a(e))return e.iptcdata[t]},u.getAllTags=function(e){if(!a(e))return{};var t,n=e.exifdata,r={};for(t in n)n.hasOwnProperty(t)&&(r[t]=n[t]);return r},u.getAllIptcTags=function(e){if(!a(e))return{};var t,n=e.iptcdata,r={};for(t in n)n.hasOwnProperty(t)&&(r[t]=n[t]);return r},u.pretty=function(e){if(!a(e))return"";var t,n=e.exifdata,r="";for(t in n)n.hasOwnProperty(t)&&("object"==typeof n[t]?n[t]instanceof Number?r+=t+" : "+n[t]+" ["+n[t].numerator+"/"+n[t].denominator+"]\r\n":r+=t+" : ["+n[t].length+" values]\r\n":r+=t+" : "+n[t]+"\r\n");return r},u.readFromBinaryFile=m,void 0===(o=function(){return u}.apply(t,[]))||(e.exports=o)}.call(this)},645:function(e,t){
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
t.read=function(e,t,n,r,a){var o,s,i=8*a-r-1,u=(1<<i)-1,l=u>>1,c=-7,p=n?a-1:0,d=n?-1:1,n=e[t+p];for(p+=d,o=n&(1<<-c)-1,n>>=-c,c+=i;0<c;o=256*o+e[t+p],p+=d,c-=8);for(s=o&(1<<-c)-1,o>>=-c,c+=r;0<c;s=256*s+e[t+p],p+=d,c-=8);if(0===o)o=1-l;else{if(o===u)return s?NaN:1/0*(n?-1:1);s+=Math.pow(2,r),o-=l}return(n?-1:1)*s*Math.pow(2,o-r)},t.write=function(e,t,n,r,a,o){var s,i,u=8*o-a-1,l=(1<<u)-1,c=l>>1,p=23===a?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:o-1,h=r?1:-1,o=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(i=isNaN(t)?1:0,s=l):(s=Math.floor(Math.log(t)/Math.LN2),t*(r=Math.pow(2,-s))<1&&(s--,r*=2),2<=(t+=1<=s+c?p/r:p*Math.pow(2,1-c))*r&&(s++,r/=2),l<=s+c?(i=0,s=l):1<=s+c?(i=(t*r-1)*Math.pow(2,a),s+=c):(i=t*Math.pow(2,c-1)*Math.pow(2,a),s=0));8<=a;e[n+d]=255&i,d+=h,i/=256,a-=8);for(s=s<<a|i,u+=a;0<u;e[n+d]=255&s,d+=h,s/=256,u-=8);e[n+d-h]|=128*o}},5093:function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,{Z:function(){return r}})},2447:function(e,t,n){"use strict";function u(e,t,n,r,a,o,s){try{var i=e[o](s),u=i.value}catch(e){return void n(e)}i.done?t(u):Promise.resolve(u).then(r,a)}function r(i){return function(){var e=this,s=arguments;return new Promise(function(t,n){var r=i.apply(e,s);function a(e){u(r,t,n,a,o,"next",e)}function o(e){u(r,t,n,a,o,"throw",e)}a(void 0)})}}n.d(t,{Z:function(){return r}})},4047:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,{Z:function(){return r}})},2700:function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}n.d(t,{Z:function(){return a}})},9999:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(5093);var a=n(355);function o(e){return function(e){if(Array.isArray(e))return(0,r.Z)(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||(0,a.Z)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},355:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(5093);function a(e,t){if(e){if("string"==typeof e)return(0,r.Z)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?(0,r.Z)(e,t):void 0}}},6377:function(e,t,n){var r=n(4832),a=n(8652),o=n(801),s=n(2030),i=n(3618),u=n(9049),n=n(1971);n.alea=r,n.xor128=a,n.xorwow=o,n.xorshift7=s,n.xor4096=i,n.tychei=u,e.exports=n},4832:function(e,n,r){var s;!function(e){function a(e){var r,t=this,n=(r=4022871197,function(e){e=e.toString();for(var t=0;t<e.length;t++){var n=.02519603282416938*(r+=e.charCodeAt(t));n-=r=n>>>0,r=(n*=r)>>>0,r+=4294967296*(n-=r)}return 2.3283064365386963e-10*(r>>>0)});t.next=function(){var e=2091639*t.s0+2.3283064365386963e-10*t.c;return t.s0=t.s1,t.s1=t.s2,t.s2=e-(t.c=0|e)},t.c=1,t.s0=n(" "),t.s1=n(" "),t.s2=n(" "),t.s0-=n(e),t.s0<0&&(t.s0+=1),t.s1-=n(e),t.s1<0&&(t.s1+=1),t.s2-=n(e),t.s2<0&&(t.s2+=1)}function o(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function t(e,t){var n=new a(e),t=t&&t.state,r=n.next;return r.int32=function(){return 4294967296*n.next()|0},r.double=function(){return r()+11102230246251565e-32*(2097152*r()|0)},r.quick=r,t&&("object"==typeof t&&o(t,n),r.state=function(){return o(n,{})}),r}e&&e.exports?e.exports=t:r.amdD&&r.amdO?void 0===(s=function(){return t}.call(n,r,n,e))||(e.exports=s):this.alea=t}(e=r.nmd(e),r.amdD)},9049:function(e,n,o){var s;!function(e){function r(e){var a=this,t="";a.next=function(){var e=(e=a.b)<<25^e>>>7^(t=a.c),t=t-(n=a.d)|0,n=n<<24^n>>>8^(r=a.a),r=r-e|0;return a.b=e=e<<20^e>>>12^t,a.c=t=t-n|0,a.d=n<<16^t>>>16^r,a.a=r-e|0},a.a=0,a.b=0,a.c=-1640531527,a.d=1367130551,e===Math.floor(e)?(a.a=e/4294967296|0,a.b=0|e):t+=e;for(var n=0;n<t.length+20;n++)a.b^=0|t.charCodeAt(n),a.next()}function a(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function t(e,t){var n=new r(e),e=t&&t.state,t=function(){return(n.next()>>>0)/4294967296};return t.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},t.int32=n.next,t.quick=t,e&&("object"==typeof e&&a(e,n),t.state=function(){return a(n,{})}),t}e&&e.exports?e.exports=t:o.amdD&&o.amdO?void 0===(s=function(){return t}.call(n,o,n,e))||(e.exports=s):this.tychei=t}(e=o.nmd(e),o.amdD)},8652:function(e,n,o){var s;!function(e){function r(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}function a(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function t(e,t){var n=new r(e),e=t&&t.state,t=function(){return(n.next()>>>0)/4294967296};return t.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},t.int32=n.next,t.quick=t,e&&("object"==typeof e&&a(e,n),t.state=function(){return a(n,{})}),t}e&&e.exports?e.exports=t:o.amdD&&o.amdO?void 0===(s=function(){return t}.call(n,o,n,e))||(e.exports=s):this.xor128=t}(e=o.nmd(e),o.amdD)},3618:function(e,n,o){var s;!function(e){function r(e){var o=this;o.next=function(){var e,t,n=o.w,r=o.X,a=o.i;return o.w=n=n+1640531527|0,t=r[a+34&127],e=r[a=a+1&127],t^=t<<13,e^=e<<17,t=r[a]=(t^=t>>>15)^(e^=e>>>12),o.i=a,t+(n^n>>>16)|0},function(e,t){var n,r,a,o,s,i=[],u=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,u=Math.max(u,t.length)),a=0,o=-32;o<u;++o)t&&(r^=t.charCodeAt((o+32)%t.length)),0===o&&(s=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,0<=o&&(a=0==(n=i[127&o]^=r+(s=s+1640531527|0))?a+1:0);for(128<=a&&(i[127&(t&&t.length||0)]=-1),a=127,o=512;0<o;--o)r=i[a+34&127],n=i[a=a+1&127],r^=r<<13,n^=n<<17,i[a]=(r^=r>>>15)^(n^=n>>>12);e.w=s,e.X=i,e.i=a}(o,e)}function a(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function t(e,t){var n=new r(e=null==e?+new Date:e),e=t&&t.state,t=function(){return(n.next()>>>0)/4294967296};return t.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},t.int32=n.next,t.quick=t,e&&(e.X&&a(e,n),t.state=function(){return a(n,{})}),t}e&&e.exports?e.exports=t:o.amdD&&o.amdO?void 0===(s=function(){return t}.call(n,o,n,e))||(e.exports=s):this.xor4096=t}(e=o.nmd(e),o.amdD)},2030:function(e,n,o){var s;!function(e){function r(e){var a=this;a.next=function(){var e=a.x,t=a.i,n=e[t],r=(n^=n>>>7)^n<<24;return r^=(n=e[t+1&7])^n>>>10,r^=(n=e[t+3&7])^n>>>3,r^=(n=e[t+4&7])^n<<7,n=e[t+7&7],e[t]=r^=(n^=n<<13)^n<<9,a.i=t+1&7,r},function(e,t){var n,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,n=0;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],e.x=r,e.i=0,n=256;0<n;--n)e.next()}(a,e)}function a(e,t){return t.x=e.x.slice(),t.i=e.i,t}function t(e,t){var n=new r(e=null==e?+new Date:e),e=t&&t.state,t=function(){return(n.next()>>>0)/4294967296};return t.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},t.int32=n.next,t.quick=t,e&&(e.x&&a(e,n),t.state=function(){return a(n,{})}),t}e&&e.exports?e.exports=t:o.amdD&&o.amdO?void 0===(s=function(){return t}.call(n,o,n,e))||(e.exports=s):this.xorshift7=t}(e=o.nmd(e),o.amdD)},801:function(e,n,o){var s;!function(e){function r(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,e===((t.v=0)|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function a(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function t(e,t){var n=new r(e),e=t&&t.state,t=function(){return(n.next()>>>0)/4294967296};return t.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},t.int32=n.next,t.quick=t,e&&("object"==typeof e&&a(e,n),t.state=function(){return a(n,{})}),t}e&&e.exports?e.exports=t:o.amdD&&o.amdO?void 0===(s=function(){return t}.call(n,o,n,e))||(e.exports=s):this.xorwow=t}(e=o.nmd(e),o.amdD)},1971:function(t,n,r){var a;!function(o,s){var i,u=this,l=256,c=6,p="random",d=s.pow(l,c),h=s.pow(2,52),f=2*h,m=l-1;function e(e,t,n){var r=[],e=v(function e(t,n){var r,a=[],o=typeof t;if(n&&"object"==o)for(r in t)try{a.push(e(t[r],n-1))}catch(e){}return a.length?a:"string"==o?t:t+"\0"}((t=1==t?{entropy:!0}:t||{}).entropy?[e,x(o)]:null==e?function(){try{return i&&(t=i.randomBytes)?t=t(l):(t=new Uint8Array(l),(u.crypto||u.msCrypto).getRandomValues(t)),x(t)}catch(e){var t=u.navigator,t=t&&t.plugins;return[+new Date,u,t,u.screen,x(o)]}}():e,3),r),a=new g(r),r=function(){for(var e=a.g(c),t=d,n=0;e<h;)e=(e+n)*l,t*=l,n=a.g(1);for(;f<=e;)e/=2,t/=2,n>>>=1;return(e+n)/t};return r.int32=function(){return 0|a.g(4)},r.quick=function(){return a.g(4)/4294967296},r.double=r,v(x(a.S),o),(t.pass||n||function(e,t,n,r){return r&&(r.S&&y(r,a),e.state=function(){return y(a,{})}),n?(s[p]=e,t):e})(r,e,"global"in t?t.global:this==s,t.state)}function g(e){var t,n=e.length,s=this,r=0,a=s.i=s.j=0,o=s.S=[];for(n||(e=[n++]);r<l;)o[r]=r++;for(r=0;r<l;r++)o[r]=o[a=m&a+e[r%n]+(t=o[r])],o[a]=t;(s.g=function(e){for(var t,n=0,r=s.i,a=s.j,o=s.S;e--;)t=o[r=m&r+1],n=n*l+o[m&(o[r]=o[a=m&a+t])+(o[a]=t)];return s.i=r,s.j=a,n})(l)}function y(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function v(e,t){for(var n,r=e+"",a=0;a<r.length;)t[m&a]=m&(n^=19*t[m&a])+r.charCodeAt(a++);return x(t)}function x(e){return String.fromCharCode.apply(0,e)}if(s["seed"+p]=e,v(s.random(),o),t.exports){t.exports=e;try{i=r(5042)}catch(e){}}else void 0===(a=function(){return e}.call(n,r,n,t))||(t.exports=a)}([],Math)}}]);